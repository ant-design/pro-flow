!(function(){var hs=Object.defineProperty,gs=Object.defineProperties;var ps=Object.getOwnPropertyDescriptors;var Co=Object.getOwnPropertySymbols;var wi=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable;var ci=Math.pow,xi=(ft,ht,$)=>ht in ft?hs(ft,ht,{enumerable:!0,configurable:!0,writable:!0,value:$}):ft[ht]=$,bt=(ft,ht)=>{for(var $ in ht||(ht={}))wi.call(ht,$)&&xi(ft,$,ht[$]);if(Co)for(var $ of Co(ht))_i.call(ht,$)&&xi(ft,$,ht[$]);return ft},te=(ft,ht)=>gs(ft,ps(ht));var Br=(ft,ht)=>{var $={};for(var f in ft)wi.call(ft,f)&&ht.indexOf(f)<0&&($[f]=ft[f]);if(ft!=null&&Co)for(var f of Co(ft))ht.indexOf(f)<0&&_i.call(ft,f)&&($[f]=ft[f]);return $};(self.webpackChunk_ant_design_pro_flow=self.webpackChunk_ant_design_pro_flow||[]).push([[6930],{25171:function(ft,ht,$){var f=$(91182);function ot(q){if(Array.isArray(q))return f(q)}ft.exports=ot,ft.exports.__esModule=!0,ft.exports.default=ft.exports},29673:function(ft){function ht($){if(typeof Symbol!="undefined"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null)return Array.from($)}ft.exports=ht,ft.exports.__esModule=!0,ft.exports.default=ft.exports},5576:function(ft){function ht(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ft.exports=ht,ft.exports.__esModule=!0,ft.exports.default=ft.exports},18840:function(ft){function ht($,f){return f||(f=$.slice(0)),Object.freeze(Object.defineProperties($,{raw:{value:Object.freeze(f)}}))}ft.exports=ht,ft.exports.__esModule=!0,ft.exports.default=ft.exports},67855:function(ft,ht,$){var f=$(25171),ot=$(29673),q=$(61533),j=$(5576);function Ct(it){return f(it)||ot(it)||q(it)||j()}ft.exports=Ct,ft.exports.__esModule=!0,ft.exports.default=ft.exports},25880:function(ft,ht,$){"use strict";$.d(ht,{u5:function(){return ge},XQ:function(){return Ai},HH:function(){return $e},s_:function(){return wr},Ly:function(){return at},x$:function(){return fi},tV:function(){return cr},oW:function(){return qe},OQ:function(){return zn},oI:function(){return Mn},VP:function(){return se},RX:function(){return tn},OW:function(){return Rn},B:function(){return $i},CV:function(){return Di},_K:function(){return Gr},oR:function(){return Ht},AC:function(){return Lt},Sj:function(){return Ri}});var f=$(50959),ot=$(76295),q=$(47503),j=$(59646),Ct=$(94237),it=$(41468),st=$(13802),pt=$(64546),vt=$(49289),Mt=$(5873),$t=t=>()=>t;function Gt(t,{sourceEvent:e,subject:r,target:s,identifier:i,active:u,x:c,y:l,dx:p,dy:m,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:h}})}Gt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ke(t){return!t.ctrlKey&&!t.button}function yr(){return this.parentNode}function vn(t,e){return e==null?{x:t.x,y:t.y}:e}function ln(){return navigator.maxTouchPoints||"ontouchstart"in this}function fn(){var t=ke,e=yr,r=vn,s=ln,i={},u=(0,pt.Z)("start","drag","end"),c=0,l,p,m,h,y=0;function v(E){E.on("mousedown.drag",S).filter(s).on("touchstart.drag",R).on("touchmove.drag",D,Mt.Q7).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function S(E,B){if(!(h||!t.call(this,E,B))){var K=I(this,e.call(this,E,B),E,B,"mouse");K&&((0,it.Z)(E.view).on("mousemove.drag",k,Mt.Dd).on("mouseup.drag",C,Mt.Dd),(0,vt.Z)(E.view),(0,Mt.rG)(E),m=!1,l=E.clientX,p=E.clientY,K("start",E))}}function k(E){if((0,Mt.ZP)(E),!m){var B=E.clientX-l,K=E.clientY-p;m=B*B+K*K>y}i.mouse("drag",E)}function C(E){(0,it.Z)(E.view).on("mousemove.drag mouseup.drag",null),(0,vt.D)(E.view,m),(0,Mt.ZP)(E),i.mouse("end",E)}function R(E,B){if(t.call(this,E,B)){var K=E.changedTouches,F=e.call(this,E,B),H=K.length,W,nt;for(W=0;W<H;++W)(nt=I(this,F,E,B,K[W].identifier,K[W]))&&((0,Mt.rG)(E),nt("start",E,K[W]))}}function D(E){var B=E.changedTouches,K=B.length,F,H;for(F=0;F<K;++F)(H=i[B[F].identifier])&&((0,Mt.ZP)(E),H("drag",E,B[F]))}function A(E){var B=E.changedTouches,K=B.length,F,H;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),F=0;F<K;++F)(H=i[B[F].identifier])&&((0,Mt.rG)(E),H("end",E,B[F]))}function I(E,B,K,F,H,W){var nt=u.copy(),U=(0,st.Z)(W||K,B),rt,N,G;if((G=r.call(E,new Gt("beforestart",{sourceEvent:K,target:v,identifier:H,active:c,x:U[0],y:U[1],dx:0,dy:0,dispatch:nt}),F))!=null)return rt=G.x-U[0]||0,N=G.y-U[1]||0,function tt(lt,St,yt){var T=U,Q;switch(lt){case"start":i[H]=tt,Q=c++;break;case"end":delete i[H],--c;case"drag":U=(0,st.Z)(yt||St,B),Q=c;break}nt.call(lt,E,new Gt(lt,{sourceEvent:St,subject:G,target:v,identifier:H,active:Q,x:U[0]+rt,y:U[1]+N,dx:U[0]-T[0],dy:U[1]-T[1],dispatch:nt}),F)}}return v.filter=function(E){return arguments.length?(t=typeof E=="function"?E:$t(!!E),v):t},v.container=function(E){return arguments.length?(e=typeof E=="function"?E:$t(E),v):e},v.subject=function(E){return arguments.length?(r=typeof E=="function"?E:$t(E),v):r},v.touchable=function(E){return arguments.length?(s=typeof E=="function"?E:$t(!!E),v):s},v.on=function(){var E=u.on.apply(u,arguments);return E===u?v:E},v.clickDistance=function(E){return arguments.length?(y=(E=+E)*E,v):Math.sqrt(y)},v}var He=$(10422);const ye=(0,f.createContext)(null),dn=ye.Provider,ie={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Sn=ie.error001();function Ht(t,e){const r=(0,f.useContext)(ye);if(r===null)throw new Error(Sn);return(0,q.s)(r,t,e)}const Lt=()=>{const t=(0,f.useContext)(ye);if(t===null)throw new Error(Sn);return(0,f.useMemo)(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},xr=t=>t.userSelectionActive?"none":"all";function wr(u){var c=u,{position:t,children:e,className:r,style:s}=c,i=Br(c,["position","children","className","style"]);const l=Ht(xr),p=`${t}`.split("-");return f.createElement("div",bt({className:(0,ot.Z)(["react-flow__panel",r,...p]),style:te(bt({},s),{pointerEvents:l})},i),e)}function _r({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:f.createElement(wr,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},f.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Hr=y=>{var v=y,{x:t,y:e,label:r,labelStyle:s={},labelShowBg:i=!0,labelBgStyle:u={},labelBgPadding:c=[2,4],labelBgBorderRadius:l=2,children:p,className:m}=v,h=Br(v,["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"]);const S=(0,f.useRef)(null),[k,C]=(0,f.useState)({x:0,y:0,width:0,height:0}),R=(0,ot.Z)(["react-flow__edge-textwrapper",m]);return(0,f.useEffect)(()=>{if(S.current){const D=S.current.getBBox();C({x:D.x,y:D.y,width:D.width,height:D.height})}},[r]),typeof r=="undefined"||!r?null:f.createElement("g",bt({transform:`translate(${t-k.width/2} ${e-k.height/2})`,className:R,visibility:k.width?"visible":"hidden"},h),i&&f.createElement("rect",{width:k.width+2*c[0],x:-c[0],y:-c[1],height:k.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:l,ry:l}),f.createElement("text",{className:"react-flow__edge-text",y:k.height/2,dy:"0.3em",ref:S,style:s},r),p)};var Zr=(0,f.memo)(Hr);const hn=t=>({width:t.offsetWidth,height:t.offsetHeight}),Ze=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),Vn=(t={x:0,y:0},e)=>({x:Ze(t.x,e[0][0],e[1][0]),y:Ze(t.y,e[0][1],e[1][1])}),br=(t,e,r)=>t<e?Ze(Math.abs(t-e),1,50)/50:t>r?-Ze(Math.abs(t-r),1,50)/50:0,Fn=(t,e)=>{const r=br(t.x,35,e.width-35)*20,s=br(t.y,35,e.height-35)*20;return[r,s]},Yn=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},En=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Re=({x:t,y:e,width:r,height:s})=>({x:t,y:e,x2:t+r,y2:e+s}),Nn=({x:t,y:e,x2:r,y2:s})=>({x:t,y:e,width:r-t,height:s-e}),Cn=t=>te(bt({},t.positionAbsolute||{x:0,y:0}),{width:t.width||0,height:t.height||0}),Mn=(t,e)=>Nn(En(Re(t),Re(e))),Ue=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),s=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*s)},Kn=t=>Vt(t.width)&&Vt(t.height)&&Vt(t.x)&&Vt(t.y),Vt=t=>!isNaN(t)&&isFinite(t),Ot=Symbol.for("internals"),vr=["Enter"," ","Escape"],Le=(t,e)=>{},Lr=t=>"nativeEvent"in t;function xe(t){var i,u;const e=Lr(t)?t.nativeEvent:t,r=((u=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:u[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Wn=t=>"clientX"in t,we=(t,e)=>{var u,c,l,p;const r=Wn(t),s=r?t.clientX:(u=t.touches)==null?void 0:u[0].clientX,i=r?t.clientY:(c=t.touches)==null?void 0:c[0].clientY;return{x:s-((l=e==null?void 0:e.left)!=null?l:0),y:i-((p=e==null?void 0:e.top)!=null?p:0)}},Ge=()=>{var t;return typeof navigator!="undefined"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},ge=({id:t,path:e,labelX:r,labelY:s,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:y,markerStart:v,interactionWidth:S=20})=>f.createElement(f.Fragment,null,f.createElement("path",{id:t,style:h,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:v}),S&&f.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:S,className:"react-flow__edge-interaction"}),i&&Vt(r)&&Vt(s)?f.createElement(Zr,{x:r,y:s,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m}):null);ge.displayName="BaseEdge";const Xr=(t,e)=>typeof e!="undefined"&&e?`url(#${e})`:typeof t!="undefined"?`url(#react-flow__${t})`:"none";function Qe(t,e,r){return r===void 0?r:s=>{const i=e().edges.find(u=>u.id===t);i&&r(s,bt({},i))}}function An({sourceX:t,sourceY:e,targetX:r,targetY:s}){const i=Math.abs(r-t)/2,u=r<t?r+i:r-i,c=Math.abs(s-e)/2,l=s<e?s+c:s-c;return[u,l,i,c]}function Sr({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:i,sourceControlY:u,targetControlX:c,targetControlY:l}){const p=t*.125+i*.375+c*.375+r*.125,m=e*.125+u*.375+l*.375+s*.125,h=Math.abs(p-t),y=Math.abs(m-e);return[p,m,h,y]}var Xe;(function(t){t.Strict="strict",t.Loose="loose"})(Xe||(Xe={}));var De;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(De||(De={}));var qe;(function(t){t.Partial="partial",t.Full="full"})(qe||(qe={}));var Ie;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Ie||(Ie={}));var Pn;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Pn||(Pn={}));var at;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(at||(at={}));function Tn({pos:t,x1:e,y1:r,x2:s,y2:i}){return t===at.Left||t===at.Right?[.5*(e+s),r]:[e,.5*(r+i)]}function Un({sourceX:t,sourceY:e,sourcePosition:r=at.Bottom,targetX:s,targetY:i,targetPosition:u=at.Top}){const[c,l]=Tn({pos:r,x1:t,y1:e,x2:s,y2:i}),[p,m]=Tn({pos:u,x1:s,y1:i,x2:t,y2:e}),[h,y,v,S]=Sr({sourceX:t,sourceY:e,targetX:s,targetY:i,sourceControlX:c,sourceControlY:l,targetControlX:p,targetControlY:m});return[`M${t},${e} C${c},${l} ${p},${m} ${s},${i}`,h,y,v,S]}const Ve=(0,f.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:s,sourcePosition:i=at.Bottom,targetPosition:u=at.Top,label:c,labelStyle:l,labelShowBg:p,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:v,markerEnd:S,markerStart:k,interactionWidth:C})=>{const[R,D,A]=Un({sourceX:t,sourceY:e,sourcePosition:i,targetX:r,targetY:s,targetPosition:u});return f.createElement(ge,{path:R,labelX:D,labelY:A,label:c,labelStyle:l,labelShowBg:p,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:v,markerEnd:S,markerStart:k,interactionWidth:C})});Ve.displayName="SimpleBezierEdge";const Je={[at.Left]:{x:-1,y:0},[at.Right]:{x:1,y:0},[at.Top]:{x:0,y:-1},[at.Bottom]:{x:0,y:1}},kn=({source:t,sourcePosition:e=at.Bottom,target:r})=>e===at.Left||e===at.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},Fe=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function gn({source:t,sourcePosition:e=at.Bottom,target:r,targetPosition:s=at.Top,center:i,offset:u}){const c=Je[e],l=Je[s],p={x:t.x+c.x*u,y:t.y+c.y*u},m={x:r.x+l.x*u,y:r.y+l.y*u},h=kn({source:p,sourcePosition:e,target:m}),y=h.x!==0?"x":"y",v=h[y];let S=[],k,C;const R={x:0,y:0},D={x:0,y:0},[A,I,E,B]=An({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(c[y]*l[y]===-1){k=i.x||A,C=i.y||I;const F=[{x:k,y:p.y},{x:k,y:m.y}],H=[{x:p.x,y:C},{x:m.x,y:C}];c[y]===v?S=y==="x"?F:H:S=y==="x"?H:F}else{const F=[{x:p.x,y:m.y}],H=[{x:m.x,y:p.y}];if(y==="x"?S=c.x===v?H:F:S=c.y===v?F:H,e===s){const N=Math.abs(t[y]-r[y]);if(N<=u){const G=Math.min(u-1,u-N);c[y]===v?R[y]=(p[y]>t[y]?-1:1)*G:D[y]=(m[y]>r[y]?-1:1)*G}}if(e!==s){const N=y==="x"?"y":"x",G=c[y]===l[N],tt=p[N]>m[N],lt=p[N]<m[N];(c[y]===1&&(!G&&tt||G&&lt)||c[y]!==1&&(!G&&lt||G&&tt))&&(S=y==="x"?F:H)}const W={x:p.x+R.x,y:p.y+R.y},nt={x:m.x+D.x,y:m.y+D.y},U=Math.max(Math.abs(W.x-S[0].x),Math.abs(nt.x-S[0].x)),rt=Math.max(Math.abs(W.y-S[0].y),Math.abs(nt.y-S[0].y));U>=rt?(k=(W.x+nt.x)/2,C=S[0].y):(k=S[0].x,C=(W.y+nt.y)/2)}return[[t,{x:p.x+R.x,y:p.y+R.y},...S,{x:m.x+D.x,y:m.y+D.y},r],k,C,E,B]}function _e(t,e,r,s){const i=Math.min(Fe(t,e)/2,Fe(e,r)/2,s),{x:u,y:c}=e;if(t.x===u&&u===r.x||t.y===c&&c===r.y)return`L${u} ${c}`;if(t.y===c){const m=t.x<r.x?-1:1,h=t.y<r.y?1:-1;return`L ${u+i*m},${c}Q ${u},${c} ${u},${c+i*h}`}const l=t.x<r.x?1:-1,p=t.y<r.y?-1:1;return`L ${u},${c+i*p}Q ${u},${c} ${u+i*l},${c}`}function Rn({sourceX:t,sourceY:e,sourcePosition:r=at.Bottom,targetX:s,targetY:i,targetPosition:u=at.Top,borderRadius:c=5,centerX:l,centerY:p,offset:m=20}){const[h,y,v,S,k]=gn({source:{x:t,y:e},sourcePosition:r,target:{x:s,y:i},targetPosition:u,center:{x:l,y:p},offset:m});return[h.reduce((R,D,A)=>{let I="";return A>0&&A<h.length-1?I=_e(h[A-1],D,h[A+1],c):I=`${A===0?"M":"L"}${D.x} ${D.y}`,R+=I,R},""),y,v,S,k]}const pn=(0,f.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:s,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m,style:h,sourcePosition:y=at.Bottom,targetPosition:v=at.Top,markerEnd:S,markerStart:k,pathOptions:C,interactionWidth:R})=>{const[D,A,I]=Rn({sourceX:t,sourceY:e,sourcePosition:y,targetX:r,targetY:s,targetPosition:v,borderRadius:C==null?void 0:C.borderRadius,offset:C==null?void 0:C.offset});return f.createElement(ge,{path:D,labelX:A,labelY:I,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:S,markerStart:k,interactionWidth:R})});pn.displayName="SmoothStepEdge";const Gn=(0,f.memo)(t=>{var e;return f.createElement(pn,te(bt({},t),{pathOptions:(0,f.useMemo)(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])}))});Gn.displayName="StepEdge";function Vr({sourceX:t,sourceY:e,targetX:r,targetY:s}){const[i,u,c,l]=An({sourceX:t,sourceY:e,targetX:r,targetY:s});return[`M ${t},${e}L ${r},${s}`,i,u,c,l]}const Dn=(0,f.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:s,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:y,markerStart:v,interactionWidth:S})=>{const[k,C,R]=Vr({sourceX:t,sourceY:e,targetX:r,targetY:s});return f.createElement(ge,{path:k,labelX:C,labelY:R,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:y,markerStart:v,interactionWidth:S})});Dn.displayName="StraightEdge";function In(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Er({pos:t,x1:e,y1:r,x2:s,y2:i,c:u}){switch(t){case at.Left:return[e-In(e-s,u),r];case at.Right:return[e+In(s-e,u),r];case at.Top:return[e,r-In(r-i,u)];case at.Bottom:return[e,r+In(i-r,u)]}}function zn({sourceX:t,sourceY:e,sourcePosition:r=at.Bottom,targetX:s,targetY:i,targetPosition:u=at.Top,curvature:c=.25}){const[l,p]=Er({pos:r,x1:t,y1:e,x2:s,y2:i,c}),[m,h]=Er({pos:u,x1:s,y1:i,x2:t,y2:e,c}),[y,v,S,k]=Sr({sourceX:t,sourceY:e,targetX:s,targetY:i,sourceControlX:l,sourceControlY:p,targetControlX:m,targetControlY:h});return[`M${t},${e} C${l},${p} ${m},${h} ${s},${i}`,y,v,S,k]}const mn=(0,f.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:s,sourcePosition:i=at.Bottom,targetPosition:u=at.Top,label:c,labelStyle:l,labelShowBg:p,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:v,markerEnd:S,markerStart:k,pathOptions:C,interactionWidth:R})=>{const[D,A,I]=zn({sourceX:t,sourceY:e,sourcePosition:i,targetX:r,targetY:s,targetPosition:u,curvature:C==null?void 0:C.curvature});return f.createElement(ge,{path:D,labelX:A,labelY:I,label:c,labelStyle:l,labelShowBg:p,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:v,markerEnd:S,markerStart:k,interactionWidth:R})});mn.displayName="BezierEdge";const Qn=(0,f.createContext)(null),Fr=Qn.Provider;Qn.Consumer;const Nr=()=>(0,f.useContext)(Qn),yn=t=>"id"in t&&"source"in t&&"target"in t,qn=t=>"id"in t&&!("source"in t)&&!("target"in t),Jn=(t,e,r)=>{if(!qn(t))return[];const s=r.filter(i=>i.source===t.id).map(i=>i.target);return e.filter(i=>s.includes(i.id))},oo=(t,e,r)=>{if(!qn(t))return[];const s=r.filter(i=>i.target===t.id).map(i=>i.source);return e.filter(i=>s.includes(i.id))},xn=({source:t,sourceHandle:e,target:r,targetHandle:s})=>`reactflow__edge-${t}${e||""}-${r}${s||""}`,qt=(t,e)=>typeof t=="undefined"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(s=>`${s}=${t[s]}`).join("&")}`,Cr=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),Yr=(t,e)=>{if(!t.source||!t.target)return Le("006",ie.error006()),e;let r;return yn(t)?r=bt({},t):r=te(bt({},t),{id:xn(t)}),Cr(r,e)?e:e.concat(r)},Mr=(t,e,r,s={shouldReplaceId:!0})=>{const p=t,{id:i}=p,u=Br(p,["id"]);if(!e.source||!e.target)return Le("006",ie.error006()),r;if(!r.find(m=>m.id===i))return Le("007",ie.error007(i)),r;const l=te(bt({},u),{id:s.shouldReplaceId?xn(e):i,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle});return r.filter(m=>m.id!==i).concat(l)},je=({x:t,y:e},[r,s,i],u,[c,l])=>{const p={x:(t-r)/i,y:(e-s)/i};return u?{x:c*Math.round(p.x/c),y:l*Math.round(p.y/l)}:p},ze=({x:t,y:e},[r,s,i])=>({x:t*i+r,y:e*i+s}),se=(t,e=[0,0])=>{var u,c;if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=((u=t.width)!=null?u:0)*e[0],s=((c=t.height)!=null?c:0)*e[1],i={x:t.position.x-r,y:t.position.y-s};return te(bt({},i),{positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-s}:i})},tn=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((s,i)=>{const{x:u,y:c}=se(i,e).positionAbsolute;return En(s,Re({x:u,y:c,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Nn(r)},Ar=(t,e=[0,0])=>(console.warn("[DEPRECATED] `getRectOfNodes` is deprecated. Instead use `getNodesBounds` https://reactflow.dev/api-reference/utils/get-nodes-bounds."),tn(t,e)),ae=(t,e,[r,s,i]=[0,0,1],u=!1,c=!1,l=[0,0])=>{const p={x:(e.x-r)/i,y:(e.y-s)/i,width:e.width/i,height:e.height/i},m=[];return t.forEach(h=>{const{width:y,height:v,selectable:S=!0,hidden:k=!1}=h;if(c&&!S||k)return!1;const{positionAbsolute:C}=se(h,l),R={x:C.x,y:C.y,width:y||0,height:v||0},D=Ue(p,R),A=typeof y=="undefined"||typeof v=="undefined"||y===null||v===null,I=u&&D>0,E=(y||0)*(v||0);(A||I||D>=E||h.dragging)&&m.push(h)}),m},ce=(t,e)=>{const r=t.map(s=>s.id);return e.filter(s=>r.includes(s.source)||r.includes(s.target))},Kr=(t,e,r,s,i,u=.1)=>{const{x:c,y:l,zoom:p}=en(t,e,r,s,i,u);return console.warn("[DEPRECATED] `getTransformForBounds` is deprecated. Instead use `getViewportForBounds`. Beware that the return value is type Viewport (`{ x: number, y: number, zoom: number }`) instead of Transform (`[number, number, number]`). https://reactflow.dev/api-reference/utils/get-viewport-for-bounds"),[c,l,p]},en=(t,e,r,s,i,u=.1)=>{const c=e/(t.width*(1+u)),l=r/(t.height*(1+u)),p=Math.min(c,l),m=Ze(p,s,i),h=t.x+t.width/2,y=t.y+t.height/2,v=e/2-h*m,S=r/2-y*m;return{x:v,y:S,zoom:m}},d=(t,e=0)=>t.transition().duration(e);function _(t,e,r,s){return(e[r]||[]).reduce((i,u)=>{var c,l,p,m;return`${t.id}-${u.id}-${r}`!==s&&i.push({id:u.id||null,type:r,nodeId:t.id,x:((l=(c=t.positionAbsolute)==null?void 0:c.x)!=null?l:0)+u.x+u.width/2,y:((m=(p=t.positionAbsolute)==null?void 0:p.y)!=null?m:0)+u.y+u.height/2}),i},[])}function V(t,e,r,s,i,u){const{x:c,y:l}=we(t),m=e.elementsFromPoint(c,l).find(k=>k.classList.contains("react-flow__handle"));if(m){const k=m.getAttribute("data-nodeid");if(k){const C=ct(void 0,m),R=m.getAttribute("data-handleid"),D=u({nodeId:k,id:R,type:C});if(D){const A=i.find(I=>I.nodeId===k&&I.type===C&&I.id===R);return{handle:{id:R,type:C,nodeId:k,x:(A==null?void 0:A.x)||r.x,y:(A==null?void 0:A.y)||r.y},validHandleResult:D}}}}let h=[],y=1/0;if(i.forEach(k=>{const C=Math.sqrt(ci(k.x-r.x,2)+ci(k.y-r.y,2));if(C<=s){const R=u(k);C<=y&&(C<y?h=[{handle:k,validHandleResult:R}]:C===y&&h.push({handle:k,validHandleResult:R}),y=C)}}),!h.length)return{handle:null,validHandleResult:z()};if(h.length===1)return h[0];const v=h.some(({validHandleResult:k})=>k.isValid),S=h.some(({handle:k})=>k.type==="target");return h.find(({handle:k,validHandleResult:C})=>S?k.type==="target":v?C.isValid:!0)||h[0]}const Y={source:null,target:null,sourceHandle:null,targetHandle:null},z=()=>({handleDomNode:null,isValid:!1,connection:Y,endHandle:null});function J(t,e,r,s,i,u,c){const l=i==="target",p=c.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),m=te(bt({},z()),{handleDomNode:p});if(p){const h=ct(void 0,p),y=p.getAttribute("data-nodeid"),v=p.getAttribute("data-handleid"),S=p.classList.contains("connectable"),k=p.classList.contains("connectableend"),C={source:l?y:r,sourceHandle:l?v:s,target:l?r:y,targetHandle:l?s:v};m.connection=C,S&&k&&(e===Xe.Strict?l&&h==="source"||!l&&h==="target":y!==r||v!==s)&&(m.endHandle={nodeId:y,handleId:v,type:h},m.isValid=u(C))}return m}function dt({nodes:t,nodeId:e,handleId:r,handleType:s}){return t.reduce((i,u)=>{if(u[Ot]){const{handleBounds:c}=u[Ot];let l=[],p=[];c&&(l=_(u,c,"source",`${e}-${r}-${s}`),p=_(u,c,"target",`${e}-${r}-${s}`)),i.push(...l,...p)}return i},[])}function ct(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function wt(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Tt(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function Bt({event:t,handleId:e,nodeId:r,onConnect:s,isTarget:i,getState:u,setState:c,isValidConnection:l,edgeUpdaterType:p,onEdgeUpdateEnd:m}){const h=Yn(t.target),{connectionMode:y,domNode:v,autoPanOnConnect:S,connectionRadius:k,onConnectStart:C,panBy:R,getNodes:D,cancelConnection:A}=u();let I=0,E;const{x:B,y:K}=we(t),F=h==null?void 0:h.elementFromPoint(B,K),H=ct(p,F),W=v==null?void 0:v.getBoundingClientRect();if(!W||!H)return;let nt,U=we(t,W),rt=!1,N=null,G=!1,tt=null;const lt=dt({nodes:D(),nodeId:r,handleId:e,handleType:H}),St=()=>{if(!S)return;const[Q,et]=Fn(U,W);R({x:Q,y:et}),I=requestAnimationFrame(St)};c({connectionPosition:U,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:H,connectionStartHandle:{nodeId:r,handleId:e,type:H},connectionEndHandle:null}),C==null||C(t,{nodeId:r,handleId:e,handleType:H});function yt(Q){const{transform:et}=u();U=we(Q,W);const{handle:xt,validHandleResult:Et}=V(Q,h,je(U,et,!1,[1,1]),k,lt,Dt=>J(Dt,y,r,e,i?"target":"source",l,h));if(E=xt,rt||(St(),rt=!0),tt=Et.handleDomNode,N=Et.connection,G=Et.isValid,c({connectionPosition:E&&G?ze({x:E.x,y:E.y},et):U,connectionStatus:Tt(!!E,G),connectionEndHandle:Et.endHandle}),!E&&!G&&!tt)return wt(nt);N.source!==N.target&&tt&&(wt(nt),nt=tt,tt.classList.add("connecting","react-flow__handle-connecting"),tt.classList.toggle("valid",G),tt.classList.toggle("react-flow__handle-valid",G))}function T(Q){var et,xt;(E||tt)&&N&&G&&(s==null||s(N)),(xt=(et=u()).onConnectEnd)==null||xt.call(et,Q),p&&(m==null||m(Q)),wt(nt),A(),cancelAnimationFrame(I),rt=!1,G=!1,N=null,tt=null,h.removeEventListener("mousemove",yt),h.removeEventListener("mouseup",T),h.removeEventListener("touchmove",yt),h.removeEventListener("touchend",T)}h.addEventListener("mousemove",yt),h.addEventListener("mouseup",T),h.addEventListener("touchmove",yt),h.addEventListener("touchend",T)}const ue=()=>!0,ve=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),pe=(t,e,r)=>s=>{const{connectionStartHandle:i,connectionEndHandle:u,connectionClickStartHandle:c}=s;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===r||(u==null?void 0:u.nodeId)===t&&(u==null?void 0:u.handleId)===e&&(u==null?void 0:u.type)===r,clickConnecting:(c==null?void 0:c.nodeId)===t&&(c==null?void 0:c.handleId)===e&&(c==null?void 0:c.type)===r}},le=(0,f.forwardRef)((k,S)=>{var C=k,{type:t="source",position:e=at.Top,isValidConnection:r,isConnectable:s=!0,isConnectableStart:i=!0,isConnectableEnd:u=!0,id:c,onConnect:l,children:p,className:m,onMouseDown:h,onTouchStart:y}=C,v=Br(C,["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"]);var U,rt;const R=c||null,D=t==="target",A=Lt(),I=Nr(),{connectOnClick:E,noPanClassName:B}=Ht(ve,j.X),{connecting:K,clickConnecting:F}=Ht(pe(I,R,t),j.X);I||(rt=(U=A.getState()).onError)==null||rt.call(U,"010",ie.error010());const H=N=>{const{defaultEdgeOptions:G,onConnect:tt,hasDefaultEdges:lt}=A.getState(),St=bt(bt({},G),N);if(lt){const{edges:yt,setEdges:T}=A.getState();T(Yr(St,yt))}tt==null||tt(St),l==null||l(St)},W=N=>{if(!I)return;const G=Wn(N);i&&(G&&N.button===0||!G)&&Bt({event:N,handleId:R,nodeId:I,onConnect:H,isTarget:D,getState:A.getState,setState:A.setState,isValidConnection:r||A.getState().isValidConnection||ue}),G?h==null||h(N):y==null||y(N)},nt=N=>{const{onClickConnectStart:G,onClickConnectEnd:tt,connectionClickStartHandle:lt,connectionMode:St,isValidConnection:yt}=A.getState();if(!I||!lt&&!i)return;if(!lt){G==null||G(N,{nodeId:I,handleId:R,handleType:t}),A.setState({connectionClickStartHandle:{nodeId:I,type:t,handleId:R}});return}const T=Yn(N.target),Q=r||yt||ue,{connection:et,isValid:xt}=J({nodeId:I,id:R,type:t},St,lt.nodeId,lt.handleId||null,lt.type,Q,T);xt&&H(et),tt==null||tt(N),A.setState({connectionClickStartHandle:null})};return f.createElement("div",bt({"data-handleid":R,"data-nodeid":I,"data-handlepos":e,"data-id":`${I}-${R}-${t}`,className:(0,ot.Z)(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",B,m,{source:!D,target:D,connectable:s,connectablestart:i,connectableend:u,connecting:F,connectionindicator:s&&(i&&!K||u&&K)}]),onMouseDown:W,onTouchStart:W,onClick:E?nt:void 0,ref:S},v),p)});le.displayName="Handle";var $e=(0,f.memo)(le);const jn=({data:t,isConnectable:e,targetPosition:r=at.Top,sourcePosition:s=at.Bottom})=>f.createElement(f.Fragment,null,f.createElement($e,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,f.createElement($e,{type:"source",position:s,isConnectable:e}));jn.displayName="DefaultNode";var tr=(0,f.memo)(jn);const nn=({data:t,isConnectable:e,sourcePosition:r=at.Bottom})=>f.createElement(f.Fragment,null,t==null?void 0:t.label,f.createElement($e,{type:"source",position:r,isConnectable:e}));nn.displayName="InputNode";var rn=(0,f.memo)(nn);const er=({data:t,isConnectable:e,targetPosition:r=at.Top})=>f.createElement(f.Fragment,null,f.createElement($e,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);er.displayName="OutputNode";var nr=(0,f.memo)(er);const Wr=()=>null;Wr.displayName="GroupNode";const Mo=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected)}),Pr=t=>t.id;function Ao(t,e){return(0,j.X)(t.selectedNodes.map(Pr),e.selectedNodes.map(Pr))&&(0,j.X)(t.selectedEdges.map(Pr),e.selectedEdges.map(Pr))}const io=(0,f.memo)(({onSelectionChange:t})=>{const e=Lt(),{selectedNodes:r,selectedEdges:s}=Ht(Mo,Ao);return(0,f.useEffect)(()=>{const i={nodes:r,edges:s};t==null||t(i),e.getState().onSelectionChange.forEach(u=>u(i))},[r,s,t]),null});io.displayName="SelectionListener";const Po=t=>!!t.onSelectionChange;function To({onSelectionChange:t}){const e=Ht(Po);return t||e?f.createElement(io,{onSelectionChange:t}):null}const ko=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function $n(t,e){(0,f.useEffect)(()=>{typeof t!="undefined"&&e(t)},[t])}function Rt(t,e,r){(0,f.useEffect)(()=>{typeof e!="undefined"&&r({[t]:e})},[e])}const Ro=({nodes:t,edges:e,defaultNodes:r,defaultEdges:s,onConnect:i,onConnectStart:u,onConnectEnd:c,onClickConnectStart:l,onClickConnectEnd:p,nodesDraggable:m,nodesConnectable:h,nodesFocusable:y,edgesFocusable:v,edgesUpdatable:S,elevateNodesOnSelect:k,minZoom:C,maxZoom:R,nodeExtent:D,onNodesChange:A,onEdgesChange:I,elementsSelectable:E,connectionMode:B,snapGrid:K,snapToGrid:F,translateExtent:H,connectOnClick:W,defaultEdgeOptions:nt,fitView:U,fitViewOptions:rt,onNodesDelete:N,onEdgesDelete:G,onNodeDrag:tt,onNodeDragStart:lt,onNodeDragStop:St,onSelectionDrag:yt,onSelectionDragStart:T,onSelectionDragStop:Q,noPanClassName:et,nodeOrigin:xt,rfId:Et,autoPanOnConnect:Dt,autoPanOnNodeDrag:Zt,onError:Ft,connectionRadius:oe,isValidConnection:ee,nodeDragThreshold:ne})=>{const{setNodes:de,setEdges:fe,setDefaultNodesAndEdges:Qt,setMinZoom:Ae,setMaxZoom:Ut,setTranslateExtent:Yt,setNodeExtent:be,reset:Pe}=Ht(ko,j.X),Pt=Lt();return(0,f.useEffect)(()=>{const ur=s==null?void 0:s.map(lr=>bt(bt({},lr),nt));return Qt(r,ur),()=>{Pe()}},[]),Rt("defaultEdgeOptions",nt,Pt.setState),Rt("connectionMode",B,Pt.setState),Rt("onConnect",i,Pt.setState),Rt("onConnectStart",u,Pt.setState),Rt("onConnectEnd",c,Pt.setState),Rt("onClickConnectStart",l,Pt.setState),Rt("onClickConnectEnd",p,Pt.setState),Rt("nodesDraggable",m,Pt.setState),Rt("nodesConnectable",h,Pt.setState),Rt("nodesFocusable",y,Pt.setState),Rt("edgesFocusable",v,Pt.setState),Rt("edgesUpdatable",S,Pt.setState),Rt("elementsSelectable",E,Pt.setState),Rt("elevateNodesOnSelect",k,Pt.setState),Rt("snapToGrid",F,Pt.setState),Rt("snapGrid",K,Pt.setState),Rt("onNodesChange",A,Pt.setState),Rt("onEdgesChange",I,Pt.setState),Rt("connectOnClick",W,Pt.setState),Rt("fitViewOnInit",U,Pt.setState),Rt("fitViewOnInitOptions",rt,Pt.setState),Rt("onNodesDelete",N,Pt.setState),Rt("onEdgesDelete",G,Pt.setState),Rt("onNodeDrag",tt,Pt.setState),Rt("onNodeDragStart",lt,Pt.setState),Rt("onNodeDragStop",St,Pt.setState),Rt("onSelectionDrag",yt,Pt.setState),Rt("onSelectionDragStart",T,Pt.setState),Rt("onSelectionDragStop",Q,Pt.setState),Rt("noPanClassName",et,Pt.setState),Rt("nodeOrigin",xt,Pt.setState),Rt("rfId",Et,Pt.setState),Rt("autoPanOnConnect",Dt,Pt.setState),Rt("autoPanOnNodeDrag",Zt,Pt.setState),Rt("onError",Ft,Pt.setState),Rt("connectionRadius",oe,Pt.setState),Rt("isValidConnection",ee,Pt.setState),Rt("nodeDragThreshold",ne,Pt.setState),$n(t,de),$n(e,fe),$n(C,Ae),$n(R,Ut),$n(H,Yt),$n(D,be),null},so={display:"none"},Do={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},ao="react-flow__node-desc",co="react-flow__edge-desc",Io="react-flow__aria-live",zo=t=>t.ariaLiveMessage;function $o({rfId:t}){const e=Ht(zo);return f.createElement("div",{id:`${Io}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Do},e)}function Oo({rfId:t,disableKeyboardA11y:e}){return f.createElement(f.Fragment,null,f.createElement("div",{id:`${ao}-${t}`,style:so},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),f.createElement("div",{id:`${co}-${t}`,style:so},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&f.createElement($o,{rfId:t}))}var rr=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,s]=(0,f.useState)(!1),i=(0,f.useRef)(!1),u=(0,f.useRef)(new Set([])),[c,l]=(0,f.useMemo)(()=>{if(t!==null){const m=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.split("+")),h=m.reduce((y,v)=>y.concat(...v),[]);return[m,h]}return[[],[]]},[t]);return(0,f.useEffect)(()=>{const p=typeof document!="undefined"?document:null,m=(e==null?void 0:e.target)||p;if(t!==null){const h=S=>{if(i.current=S.ctrlKey||S.metaKey||S.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&xe(S))return!1;const C=lo(S.code,l);u.current.add(S[C]),uo(c,u.current,!1)&&(S.preventDefault(),s(!0))},y=S=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&xe(S))return!1;const C=lo(S.code,l);uo(c,u.current,!0)?(s(!1),u.current.clear()):u.current.delete(S[C]),S.key==="Meta"&&u.current.clear(),i.current=!1},v=()=>{u.current.clear(),s(!1)};return m==null||m.addEventListener("keydown",h),m==null||m.addEventListener("keyup",y),window.addEventListener("blur",v),()=>{m==null||m.removeEventListener("keydown",h),m==null||m.removeEventListener("keyup",y),window.removeEventListener("blur",v)}}},[t,s]),r};function uo(t,e,r){return t.filter(s=>r||s.length===e.size).some(s=>s.every(i=>e.has(i)))}function lo(t,e){return e.includes(t)?"code":"key"}function fo(t,e,r,s){var c,l,p,m,h,y,v,S;if(!t.parentNode)return r;const i=e.get(t.parentNode),u=se(i,s);return fo(i,e,{x:((c=r.x)!=null?c:0)+u.x,y:((l=r.y)!=null?l:0)+u.y,z:((m=(p=i[Ot])==null?void 0:p.z)!=null?m:0)>((h=r.z)!=null?h:0)?(v=(y=i[Ot])==null?void 0:y.z)!=null?v:0:(S=r.z)!=null?S:0},s)}function ho(t,e,r){t.forEach(s=>{var i,u;if(s.parentNode&&!t.has(s.parentNode))throw new Error(`Parent node ${s.parentNode} not found`);if(s.parentNode||r!=null&&r[s.id]){const{x:c,y:l,z:p}=fo(s,t,te(bt({},s.position),{z:(u=(i=s[Ot])==null?void 0:i.z)!=null?u:0}),e);s.positionAbsolute={x:c,y:l},s[Ot].z=p,r!=null&&r[s.id]&&(s[Ot].isParent=!0)}})}function Ur(t,e,r,s){const i=new Map,u={},c=s?1e3:0;return t.forEach(l=>{var y;const p=(Vt(l.zIndex)?l.zIndex:0)+(l.selected?c:0),m=e.get(l.id),h=te(bt({width:m==null?void 0:m.width,height:m==null?void 0:m.height},l),{positionAbsolute:{x:l.position.x,y:l.position.y}});l.parentNode&&(h.parentNode=l.parentNode,u[l.parentNode]=!0),Object.defineProperty(h,Ot,{enumerable:!1,value:{handleBounds:(y=m==null?void 0:m[Ot])==null?void 0:y.handleBounds,z:p}}),i.set(l.id,h)}),ho(i,r,u),i}function go(t,e={}){var k,C,R;const{getNodes:r,width:s,height:i,minZoom:u,maxZoom:c,d3Zoom:l,d3Selection:p,fitViewOnInitDone:m,fitViewOnInit:h,nodeOrigin:y}=t(),v=e.initial&&!m&&h;if(l&&p&&(v||!e.initial)){const D=r().filter(I=>{var B;const E=e.includeHiddenNodes?I.width&&I.height:!I.hidden;return(B=e.nodes)!=null&&B.length?E&&e.nodes.some(K=>K.id===I.id):E}),A=D.every(I=>I.width&&I.height);if(D.length>0&&A){const I=tn(D,y),{x:E,y:B,zoom:K}=en(I,s,i,(k=e.minZoom)!=null?k:u,(C=e.maxZoom)!=null?C:c,(R=e.padding)!=null?R:.1),F=Ct.CR.translate(E,B).scale(K);return typeof e.duration=="number"&&e.duration>0?l.transform(d(p,e.duration),F):l.transform(p,F),!0}}return!1}function Bo(t,e){return t.forEach(r=>{const s=e.get(r.id);s&&e.set(s.id,te(bt({},s),{[Ot]:s[Ot],selected:r.selected}))}),new Map(e)}function Ho(t,e){return e.map(r=>{const s=t.find(i=>i.id===r.id);return s&&(r.selected=s.selected),r})}function Tr({changedNodes:t,changedEdges:e,get:r,set:s}){const{nodeInternals:i,edges:u,onNodesChange:c,onEdgesChange:l,hasDefaultNodes:p,hasDefaultEdges:m}=r();t!=null&&t.length&&(p&&s({nodeInternals:Bo(t,i)}),c==null||c(t)),e!=null&&e.length&&(m&&s({edges:Ho(e,u)}),l==null||l(e))}const On=()=>{},Zo={zoomIn:On,zoomOut:On,zoomTo:On,getZoom:()=>1,setViewport:On,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:On,fitBounds:On,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},Lo=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Xo=()=>{const t=Lt(),{d3Zoom:e,d3Selection:r}=Ht(Lo,j.X);return(0,f.useMemo)(()=>r&&e?{zoomIn:i=>e.scaleBy(d(r,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(d(r,i==null?void 0:i.duration),1/1.2),zoomTo:(i,u)=>e.scaleTo(d(r,u==null?void 0:u.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,u)=>{var h,y,v;const[c,l,p]=t.getState().transform,m=Ct.CR.translate((h=i.x)!=null?h:c,(y=i.y)!=null?y:l).scale((v=i.zoom)!=null?v:p);e.transform(d(r,u==null?void 0:u.duration),m)},getViewport:()=>{const[i,u,c]=t.getState().transform;return{x:i,y:u,zoom:c}},fitView:i=>go(t.getState,i),setCenter:(i,u,c)=>{const{width:l,height:p,maxZoom:m}=t.getState(),h=typeof(c==null?void 0:c.zoom)!="undefined"?c.zoom:m,y=l/2-i*h,v=p/2-u*h,S=Ct.CR.translate(y,v).scale(h);e.transform(d(r,c==null?void 0:c.duration),S)},fitBounds:(i,u)=>{var k;const{width:c,height:l,minZoom:p,maxZoom:m}=t.getState(),{x:h,y,zoom:v}=en(i,c,l,p,m,(k=u==null?void 0:u.padding)!=null?k:.1),S=Ct.CR.translate(h,y).scale(v);e.transform(d(r,u==null?void 0:u.duration),S)},project:i=>{const{transform:u,snapToGrid:c,snapGrid:l}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),je(i,u,c,l)},screenToFlowPosition:i=>{const{transform:u,snapToGrid:c,snapGrid:l,domNode:p}=t.getState();if(!p)return i;const{x:m,y:h}=p.getBoundingClientRect(),y={x:i.x-m,y:i.y-h};return je(y,u,c,l)},flowToScreenPosition:i=>{const{transform:u,domNode:c}=t.getState();if(!c)return i;const{x:l,y:p}=c.getBoundingClientRect(),m=ze(i,u);return{x:m.x+l,y:m.y+p}},viewportInitialized:!0}:Zo,[e,r])};function Gr(){const t=Xo(),e=Lt(),r=(0,f.useCallback)(()=>e.getState().getNodes().map(C=>bt({},C)),[]),s=(0,f.useCallback)(C=>e.getState().nodeInternals.get(C),[]),i=(0,f.useCallback)(()=>{const{edges:C=[]}=e.getState();return C.map(R=>bt({},R))},[]),u=(0,f.useCallback)(C=>{const{edges:R=[]}=e.getState();return R.find(D=>D.id===C)},[]),c=(0,f.useCallback)(C=>{const{getNodes:R,setNodes:D,hasDefaultNodes:A,onNodesChange:I}=e.getState(),E=R(),B=typeof C=="function"?C(E):C;if(A)D(B);else if(I){const K=B.length===0?E.map(F=>({type:"remove",id:F.id})):B.map(F=>({item:F,type:"reset"}));I(K)}},[]),l=(0,f.useCallback)(C=>{const{edges:R=[],setEdges:D,hasDefaultEdges:A,onEdgesChange:I}=e.getState(),E=typeof C=="function"?C(R):C;if(A)D(E);else if(I){const B=E.length===0?R.map(K=>({type:"remove",id:K.id})):E.map(K=>({item:K,type:"reset"}));I(B)}},[]),p=(0,f.useCallback)(C=>{const R=Array.isArray(C)?C:[C],{getNodes:D,setNodes:A,hasDefaultNodes:I,onNodesChange:E}=e.getState();if(I){const K=[...D(),...R];A(K)}else if(E){const B=R.map(K=>({item:K,type:"add"}));E(B)}},[]),m=(0,f.useCallback)(C=>{const R=Array.isArray(C)?C:[C],{edges:D=[],setEdges:A,hasDefaultEdges:I,onEdgesChange:E}=e.getState();if(I)A([...D,...R]);else if(E){const B=R.map(K=>({item:K,type:"add"}));E(B)}},[]),h=(0,f.useCallback)(()=>{const{getNodes:C,edges:R=[],transform:D}=e.getState(),[A,I,E]=D;return{nodes:C().map(B=>bt({},B)),edges:R.map(B=>bt({},B)),viewport:{x:A,y:I,zoom:E}}},[]),y=(0,f.useCallback)(({nodes:C,edges:R})=>{const{nodeInternals:D,getNodes:A,edges:I,hasDefaultNodes:E,hasDefaultEdges:B,onNodesDelete:K,onEdgesDelete:F,onNodesChange:H,onEdgesChange:W}=e.getState(),nt=(C||[]).map(tt=>tt.id),U=(R||[]).map(tt=>tt.id),rt=A().reduce((tt,lt)=>{const St=!nt.includes(lt.id)&&lt.parentNode&&tt.find(T=>T.id===lt.parentNode);return(typeof lt.deletable=="boolean"?lt.deletable:!0)&&(nt.includes(lt.id)||St)&&tt.push(lt),tt},[]),N=I.filter(tt=>typeof tt.deletable=="boolean"?tt.deletable:!0),G=N.filter(tt=>U.includes(tt.id));if(rt||G){const tt=ce(rt,N),lt=[...G,...tt],St=lt.reduce((yt,T)=>(yt.includes(T.id)||yt.push(T.id),yt),[]);if((B||E)&&(B&&e.setState({edges:I.filter(yt=>!St.includes(yt.id))}),E&&(rt.forEach(yt=>{D.delete(yt.id)}),e.setState({nodeInternals:new Map(D)}))),St.length>0&&(F==null||F(lt),W&&W(St.map(yt=>({id:yt,type:"remove"})))),rt.length>0&&(K==null||K(rt),H)){const yt=rt.map(T=>({id:T.id,type:"remove"}));H(yt)}}},[]),v=(0,f.useCallback)(C=>{const R=Kn(C),D=R?null:e.getState().nodeInternals.get(C.id);return[R?C:Cn(D),D,R]},[]),S=(0,f.useCallback)((C,R=!0,D)=>{const[A,I,E]=v(C);return A?(D||e.getState().getNodes()).filter(B=>{if(!E&&(B.id===I.id||!B.positionAbsolute))return!1;const K=Cn(B),F=Ue(K,A);return R&&F>0||F>=A.width*A.height}):[]},[]),k=(0,f.useCallback)((C,R,D=!0)=>{const[A]=v(C);if(!A)return!1;const I=Ue(A,R);return D&&I>0||I>=A.width*A.height},[]);return(0,f.useMemo)(()=>te(bt({},t),{getNodes:r,getNode:s,getEdges:i,getEdge:u,setNodes:c,setEdges:l,addNodes:p,addEdges:m,toObject:h,deleteElements:y,getIntersectingNodes:S,isNodeIntersecting:k}),[t,r,s,i,u,c,l,p,m,h,y,S,k])}const or={actInsideInputWithModifier:!1};var Vo=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=Lt(),{deleteElements:s}=Gr(),i=rr(t,or),u=rr(e);(0,f.useEffect)(()=>{if(i){const{edges:c,getNodes:l}=r.getState(),p=l().filter(h=>h.selected),m=c.filter(h=>h.selected);s({nodes:p,edges:m}),r.setState({nodesSelectionActive:!1})}},[i]),(0,f.useEffect)(()=>{r.setState({multiSelectionActive:u})},[u])};function po(t){const e=Lt();(0,f.useEffect)(()=>{let r;const s=()=>{var u,c;if(!t.current)return;const i=hn(t.current);(i.height===0||i.width===0)&&((c=(u=e.getState()).onError)==null||c.call(u,"004",ie.error004())),e.setState({width:i.width||500,height:i.height||500})};return s(),window.addEventListener("resize",s),t.current&&(r=new ResizeObserver(()=>s()),r.observe(t.current)),()=>{window.removeEventListener("resize",s),r&&t.current&&r.unobserve(t.current)}},[])}const Qr={position:"absolute",width:"100%",height:"100%",top:0,left:0},Fo=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,kr=t=>({x:t.x,y:t.y,zoom:t.k}),Bn=(t,e)=>t.target.closest(`.${e}`),mo=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),yo=t=>{const e=t.ctrlKey&&Ge()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Yo=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Ko=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:s,zoomOnScroll:i=!0,zoomOnPinch:u=!0,panOnScroll:c=!1,panOnScrollSpeed:l=.5,panOnScrollMode:p=De.Free,zoomOnDoubleClick:m=!0,elementsSelectable:h,panOnDrag:y=!0,defaultViewport:v,translateExtent:S,minZoom:k,maxZoom:C,zoomActivationKeyCode:R,preventScrolling:D=!0,children:A,noWheelClassName:I,noPanClassName:E})=>{const B=(0,f.useRef)(),K=Lt(),F=(0,f.useRef)(!1),H=(0,f.useRef)(!1),W=(0,f.useRef)(null),nt=(0,f.useRef)({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:rt,d3ZoomHandler:N,userSelectionActive:G}=Ht(Yo,j.X),tt=rr(R),lt=(0,f.useRef)(0),St=(0,f.useRef)(!1),yt=(0,f.useRef)();return po(W),(0,f.useEffect)(()=>{if(W.current){const T=W.current.getBoundingClientRect(),Q=(0,Ct.sP)().scaleExtent([k,C]).translateExtent(S),et=(0,it.Z)(W.current).call(Q),xt=Ct.CR.translate(v.x,v.y).scale(Ze(v.zoom,k,C)),Et=[[0,0],[T.width,T.height]],Dt=Q.constrain()(xt,Et,S);Q.transform(et,Dt),Q.wheelDelta(yo),K.setState({d3Zoom:Q,d3Selection:et,d3ZoomHandler:et.on("wheel.zoom"),transform:[Dt.x,Dt.y,Dt.k],domNode:W.current.closest(".react-flow")})}},[]),(0,f.useEffect)(()=>{rt&&U&&(c&&!tt&&!G?rt.on("wheel.zoom",T=>{if(Bn(T,I))return!1;T.preventDefault(),T.stopImmediatePropagation();const Q=rt.property("__zoom").k||1,et=Ge();if(T.ctrlKey&&u&&et){const ne=(0,st.Z)(T),de=yo(T),fe=Q*Math.pow(2,de);U.scaleTo(rt,fe,ne,T);return}const xt=T.deltaMode===1?20:1;let Et=p===De.Vertical?0:T.deltaX*xt,Dt=p===De.Horizontal?0:T.deltaY*xt;!et&&T.shiftKey&&p!==De.Vertical&&(Et=T.deltaY*xt,Dt=0),U.translateBy(rt,-(Et/Q)*l,-(Dt/Q)*l,{internal:!0});const Zt=kr(rt.property("__zoom")),{onViewportChangeStart:Ft,onViewportChange:oe,onViewportChangeEnd:ee}=K.getState();clearTimeout(yt.current),St.current||(St.current=!0,e==null||e(T,Zt),Ft==null||Ft(Zt)),St.current&&(t==null||t(T,Zt),oe==null||oe(Zt),yt.current=setTimeout(()=>{r==null||r(T,Zt),ee==null||ee(Zt),St.current=!1},150))},{passive:!1}):typeof N!="undefined"&&rt.on("wheel.zoom",function(T,Q){if(!D||Bn(T,I))return null;T.preventDefault(),N.call(this,T,Q)},{passive:!1}))},[G,c,p,rt,U,N,tt,u,D,I,e,t,r]),(0,f.useEffect)(()=>{U&&U.on("start",T=>{var xt,Et;if(!T.sourceEvent||T.sourceEvent.internal)return null;lt.current=(xt=T.sourceEvent)==null?void 0:xt.button;const{onViewportChangeStart:Q}=K.getState(),et=kr(T.transform);F.current=!0,nt.current=et,((Et=T.sourceEvent)==null?void 0:Et.type)==="mousedown"&&K.setState({paneDragging:!0}),Q==null||Q(et),e==null||e(T.sourceEvent,et)})},[U,e]),(0,f.useEffect)(()=>{U&&(G&&!F.current?U.on("zoom",null):G||U.on("zoom",T=>{var et,xt;const{onViewportChange:Q}=K.getState();if(K.setState({transform:[T.transform.x,T.transform.y,T.transform.k]}),H.current=!!(s&&mo(y,(et=lt.current)!=null?et:0)),(t||Q)&&!((xt=T.sourceEvent)!=null&&xt.internal)){const Et=kr(T.transform);Q==null||Q(Et),t==null||t(T.sourceEvent,Et)}}))},[G,U,t,y,s]),(0,f.useEffect)(()=>{U&&U.on("end",T=>{var et;if(!T.sourceEvent||T.sourceEvent.internal)return null;const{onViewportChangeEnd:Q}=K.getState();if(F.current=!1,K.setState({paneDragging:!1}),s&&mo(y,(et=lt.current)!=null?et:0)&&!H.current&&s(T.sourceEvent),H.current=!1,(r||Q)&&Fo(nt.current,T.transform)){const xt=kr(T.transform);nt.current=xt,clearTimeout(B.current),B.current=setTimeout(()=>{Q==null||Q(xt),r==null||r(T.sourceEvent,xt)},c?150:0)}})},[U,c,y,r,s]),(0,f.useEffect)(()=>{U&&U.filter(T=>{const Q=tt||i,et=u&&T.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&T.button===1&&T.type==="mousedown"&&(Bn(T,"react-flow__node")||Bn(T,"react-flow__edge")))return!0;if(!y&&!Q&&!c&&!m&&!u||G||!m&&T.type==="dblclick"||Bn(T,I)&&T.type==="wheel"||Bn(T,E)&&(T.type!=="wheel"||c&&T.type==="wheel"&&!tt)||!u&&T.ctrlKey&&T.type==="wheel"||!Q&&!c&&!et&&T.type==="wheel"||!y&&(T.type==="mousedown"||T.type==="touchstart")||Array.isArray(y)&&!y.includes(T.button)&&(T.type==="mousedown"||T.type==="touchstart"))return!1;const xt=Array.isArray(y)&&y.includes(T.button)||!T.button||T.button<=1;return(!T.ctrlKey||T.type==="wheel")&&xt})},[G,U,i,u,c,m,y,h,tt]),f.createElement("div",{className:"react-flow__renderer",ref:W,style:Qr},A)},Wo=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Uo(){const{userSelectionActive:t,userSelectionRect:e}=Ht(Wo,j.X);return t&&e?f.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function xo(t,e){var s,i;const r=t.find(u=>u.id===e.parentNode);if(r){const u=e.position.x+e.width-r.width,c=e.position.y+e.height-r.height;if(u>0||c>0||e.position.x<0||e.position.y<0){if(r.style=bt({},r.style)||{},r.style.width=(s=r.style.width)!=null?s:r.width,r.style.height=(i=r.style.height)!=null?i:r.height,u>0&&(r.style.width+=u),c>0&&(r.style.height+=c),e.position.x<0){const l=Math.abs(e.position.x);r.position.x=r.position.x-l,r.style.width+=l,e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);r.position.y=r.position.y-l,r.style.height+=l,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function wo(t,e){if(t.some(s=>s.type==="reset"))return t.filter(s=>s.type==="reset").map(s=>s.item);const r=t.filter(s=>s.type==="add").map(s=>s.item);return e.reduce((s,i)=>{const u=t.filter(l=>l.id===i.id);if(u.length===0)return s.push(i),s;const c=bt({},i);for(const l of u)if(l)switch(l.type){case"select":{c.selected=l.selected;break}case"position":{typeof l.position!="undefined"&&(c.position=l.position),typeof l.positionAbsolute!="undefined"&&(c.positionAbsolute=l.positionAbsolute),typeof l.dragging!="undefined"&&(c.dragging=l.dragging),c.expandParent&&xo(s,c);break}case"dimensions":{typeof l.dimensions!="undefined"&&(c.width=l.dimensions.width,c.height=l.dimensions.height),typeof l.updateStyle!="undefined"&&(c.style=bt(bt({},c.style||{}),l.dimensions)),typeof l.resizing=="boolean"&&(c.resizing=l.resizing),c.expandParent&&xo(s,c);break}case"remove":return s}return s.push(c),s},r)}function _o(t,e){return wo(t,e)}function Go(t,e){return wo(t,e)}const on=(t,e)=>({id:t,type:"select",selected:e});function Hn(t,e){return t.reduce((r,s)=>{const i=e.includes(s.id);return!s.selected&&i?(s.selected=!0,r.push(on(s.id,!0))):s.selected&&!i&&(s.selected=!1,r.push(on(s.id,!1))),r},[])}const Se=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},Qo=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),qr=(0,f.memo)(({isSelecting:t,selectionMode:e=qe.Full,panOnDrag:r,onSelectionStart:s,onSelectionEnd:i,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:p,onPaneMouseMove:m,onPaneMouseLeave:h,children:y})=>{const v=(0,f.useRef)(null),S=Lt(),k=(0,f.useRef)(0),C=(0,f.useRef)(0),R=(0,f.useRef)(),{userSelectionActive:D,elementsSelectable:A,dragging:I}=Ht(Qo,j.X),E=()=>{S.setState({userSelectionActive:!1,userSelectionRect:null}),k.current=0,C.current=0},B=N=>{u==null||u(N),S.getState().resetSelectedElements(),S.setState({nodesSelectionActive:!1})},K=N=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){N.preventDefault();return}c==null||c(N)},F=l?N=>l(N):void 0,H=N=>{const{resetSelectedElements:G,domNode:tt}=S.getState();if(R.current=tt==null?void 0:tt.getBoundingClientRect(),!A||!t||N.button!==0||N.target!==v.current||!R.current)return;const{x:lt,y:St}=we(N,R.current);G(),S.setState({userSelectionRect:{width:0,height:0,startX:lt,startY:St,x:lt,y:St}}),s==null||s(N)},W=N=>{var de,fe;const{userSelectionRect:G,nodeInternals:tt,edges:lt,transform:St,onNodesChange:yt,onEdgesChange:T,nodeOrigin:Q,getNodes:et}=S.getState();if(!t||!R.current||!G)return;S.setState({userSelectionActive:!0,nodesSelectionActive:!1});const xt=we(N,R.current),Et=(de=G.startX)!=null?de:0,Dt=(fe=G.startY)!=null?fe:0,Zt=te(bt({},G),{x:xt.x<Et?xt.x:Et,y:xt.y<Dt?xt.y:Dt,width:Math.abs(xt.x-Et),height:Math.abs(xt.y-Dt)}),Ft=et(),oe=ae(tt,Zt,St,e===qe.Partial,!0,Q),ee=ce(oe,lt).map(Qt=>Qt.id),ne=oe.map(Qt=>Qt.id);if(k.current!==ne.length){k.current=ne.length;const Qt=Hn(Ft,ne);Qt.length&&(yt==null||yt(Qt))}if(C.current!==ee.length){C.current=ee.length;const Qt=Hn(lt,ee);Qt.length&&(T==null||T(Qt))}S.setState({userSelectionRect:Zt})},nt=N=>{if(N.button!==0)return;const{userSelectionRect:G}=S.getState();!D&&G&&N.target===v.current&&(B==null||B(N)),S.setState({nodesSelectionActive:k.current>0}),E(),i==null||i(N)},U=N=>{D&&(S.setState({nodesSelectionActive:k.current>0}),i==null||i(N)),E()},rt=A&&(t||D);return f.createElement("div",{className:(0,ot.Z)(["react-flow__pane",{dragging:I,selection:t}]),onClick:rt?void 0:Se(B,v),onContextMenu:Se(K,v),onWheel:Se(F,v),onMouseEnter:rt?void 0:p,onMouseDown:rt?H:void 0,onMouseMove:rt?W:m,onMouseUp:rt?nt:void 0,onMouseLeave:rt?U:h,ref:v,style:Qr},y,f.createElement(Uo,null))});qr.displayName="Pane";function Oe(t,e){if(!t.parentNode)return!1;const r=e.get(t.parentNode);return r?r.selected?!0:Oe(r,e):!1}function qo(t,e,r){let s=t;do{if(s!=null&&s.matches(e))return!0;if(s===r.current)return!1;s=s.parentElement}while(s);return!1}function ui(t,e,r,s){return Array.from(t.values()).filter(i=>(i.selected||i.id===s)&&(!i.parentNode||!Oe(i,t))&&(i.draggable||e&&typeof i.draggable=="undefined")).map(i=>{var u,c,l,p;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:r.x-((c=(u=i.positionAbsolute)==null?void 0:u.x)!=null?c:0),y:r.y-((p=(l=i.positionAbsolute)==null?void 0:l.y)!=null?p:0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height,expandParent:i.expandParent}})}function Jo(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function bo(t,e,r,s,i=[0,0],u){const c=Jo(t,t.extent||s);let l=c;if(t.extent==="parent"&&!t.expandParent)if(t.parentNode&&t.width&&t.height){const h=r.get(t.parentNode),{x:y,y:v}=se(h,i).positionAbsolute;l=h&&Vt(y)&&Vt(v)&&Vt(h.width)&&Vt(h.height)?[[y+t.width*i[0],v+t.height*i[1]],[y+h.width-t.width+t.width*i[0],v+h.height-t.height+t.height*i[1]]]:l}else u==null||u("005",ie.error005()),l=c;else if(t.extent&&t.parentNode&&t.extent!=="parent"){const h=r.get(t.parentNode),{x:y,y:v}=se(h,i).positionAbsolute;l=[[t.extent[0][0]+y,t.extent[0][1]+v],[t.extent[1][0]+y,t.extent[1][1]+v]]}let p={x:0,y:0};if(t.parentNode){const h=r.get(t.parentNode);p=se(h,i).positionAbsolute}const m=l&&l!=="parent"?Vn(e,l):e;return{position:{x:m.x-p.x,y:m.y-p.y},positionAbsolute:m}}function Jr({nodeId:t,dragItems:e,nodeInternals:r}){const s=e.map(i=>{const u=r.get(i.id);return te(bt({},u),{position:i.position,positionAbsolute:i.positionAbsolute})});return[t?s.find(i=>i.id===t):s[0],s]}const vo=(t,e,r,s)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const u=Array.from(i),c=e.getBoundingClientRect(),l={x:c.width*s[0],y:c.height*s[1]};return u.map(p=>{const m=p.getBoundingClientRect();return bt({id:p.getAttribute("data-handleid"),position:p.getAttribute("data-handlepos"),x:(m.left-c.left-l.x)/r,y:(m.top-c.top-l.y)/r},hn(p))})};function sn(t,e,r){return r===void 0?r:s=>{const i=e().nodeInternals.get(t);i&&r(s,bt({},i))}}function jr({id:t,store:e,unselect:r=!1,nodeRef:s}){const{addSelectedNodes:i,unselectNodesAndEdges:u,multiSelectionActive:c,nodeInternals:l,onError:p}=e.getState(),m=l.get(t);if(!m){p==null||p("012",ie.error012(t));return}e.setState({nodesSelectionActive:!1}),m.selected?(r||m.selected&&c)&&(u({nodes:[m],edges:[]}),requestAnimationFrame(()=>{var h;return(h=s==null?void 0:s.current)==null?void 0:h.blur()})):i([t])}function Ye(){const t=Lt();return(0,f.useCallback)(({sourceEvent:r})=>{const{transform:s,snapGrid:i,snapToGrid:u}=t.getState(),c=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,p={x:(c-s[0])/s[2],y:(l-s[1])/s[2]};return bt({xSnapped:u?i[0]*Math.round(p.x/i[0]):p.x,ySnapped:u?i[1]*Math.round(p.y/i[1]):p.y},p)},[])}function Zn(t){return(e,r,s)=>t==null?void 0:t(e,s)}function So({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:s,nodeId:i,isSelectable:u,selectNodesOnDrag:c}){const l=Lt(),[p,m]=(0,f.useState)(!1),h=(0,f.useRef)([]),y=(0,f.useRef)({x:null,y:null}),v=(0,f.useRef)(0),S=(0,f.useRef)(null),k=(0,f.useRef)({x:0,y:0}),C=(0,f.useRef)(null),R=(0,f.useRef)(!1),D=(0,f.useRef)(!1),A=Ye();return(0,f.useEffect)(()=>{if(t!=null&&t.current){const I=(0,it.Z)(t.current),E=({x:F,y:H})=>{const{nodeInternals:W,onNodeDrag:nt,onSelectionDrag:U,updateNodePositions:rt,nodeExtent:N,snapGrid:G,snapToGrid:tt,nodeOrigin:lt,onError:St}=l.getState();y.current={x:F,y:H};let yt=!1,T={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&N){const et=tn(h.current,lt);T=Re(et)}if(h.current=h.current.map(et=>{var Zt,Ft;const xt={x:F-et.distance.x,y:H-et.distance.y};tt&&(xt.x=G[0]*Math.round(xt.x/G[0]),xt.y=G[1]*Math.round(xt.y/G[1]));const Et=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];h.current.length>1&&N&&!et.extent&&(Et[0][0]=et.positionAbsolute.x-T.x+N[0][0],Et[1][0]=et.positionAbsolute.x+((Zt=et.width)!=null?Zt:0)-T.x2+N[1][0],Et[0][1]=et.positionAbsolute.y-T.y+N[0][1],Et[1][1]=et.positionAbsolute.y+((Ft=et.height)!=null?Ft:0)-T.y2+N[1][1]);const Dt=bo(et,xt,W,Et,lt,St);return yt=yt||et.position.x!==Dt.position.x||et.position.y!==Dt.position.y,et.position=Dt.position,et.positionAbsolute=Dt.positionAbsolute,et}),!yt)return;rt(h.current,!0,!0),m(!0);const Q=i?nt:Zn(U);if(Q&&C.current){const[et,xt]=Jr({nodeId:i,dragItems:h.current,nodeInternals:W});Q(C.current,et,xt)}},B=()=>{var W,nt;if(!S.current)return;const[F,H]=Fn(k.current,S.current);if(F!==0||H!==0){const{transform:U,panBy:rt}=l.getState();y.current.x=((W=y.current.x)!=null?W:0)-F/U[2],y.current.y=((nt=y.current.y)!=null?nt:0)-H/U[2],rt({x:F,y:H})&&E(y.current)}v.current=requestAnimationFrame(B)},K=F=>{var lt;const{nodeInternals:H,multiSelectionActive:W,nodesDraggable:nt,unselectNodesAndEdges:U,onNodeDragStart:rt,onSelectionDragStart:N}=l.getState();D.current=!0;const G=i?rt:Zn(N);(!c||!u)&&!W&&i&&((lt=H.get(i))!=null&&lt.selected||U()),i&&u&&c&&jr({id:i,store:l,nodeRef:t});const tt=A(F);if(y.current=tt,h.current=ui(H,nt,tt,i),G&&h.current){const[St,yt]=Jr({nodeId:i,dragItems:h.current,nodeInternals:H});G(F.sourceEvent,St,yt)}};if(e)I.on(".drag",null);else{const F=fn().on("start",H=>{const{domNode:W,nodeDragThreshold:nt}=l.getState();nt===0&&K(H);const U=A(H);y.current=U,S.current=(W==null?void 0:W.getBoundingClientRect())||null,k.current=we(H.sourceEvent,S.current)}).on("drag",H=>{var rt,N,G,tt;const W=A(H),{autoPanOnNodeDrag:nt,nodeDragThreshold:U}=l.getState();if(!R.current&&D.current&&nt&&(R.current=!0,B()),!D.current){const lt=W.xSnapped-((N=(rt=y==null?void 0:y.current)==null?void 0:rt.x)!=null?N:0),St=W.ySnapped-((tt=(G=y==null?void 0:y.current)==null?void 0:G.y)!=null?tt:0);Math.sqrt(lt*lt+St*St)>U&&K(H)}(y.current.x!==W.xSnapped||y.current.y!==W.ySnapped)&&h.current&&D.current&&(C.current=H.sourceEvent,k.current=we(H.sourceEvent,S.current),E(W))}).on("end",H=>{if(D.current&&(m(!1),R.current=!1,D.current=!1,cancelAnimationFrame(v.current),h.current)){const{updateNodePositions:W,nodeInternals:nt,onNodeDragStop:U,onSelectionDragStop:rt}=l.getState(),N=i?U:Zn(rt);if(W(h.current,!1,!1),N){const[G,tt]=Jr({nodeId:i,dragItems:h.current,nodeInternals:nt});N(H.sourceEvent,G,tt)}}}).filter(H=>{const W=H.target;return!H.button&&(!r||!qo(W,`.${r}`,t))&&(!s||qo(W,s,t))});return I.call(F),()=>{I.on(".drag",null)}}}},[t,e,r,s,u,l,i,c,A]),p}function Rr(){const t=Lt();return(0,f.useCallback)(r=>{const{nodeInternals:s,nodeExtent:i,updateNodePositions:u,getNodes:c,snapToGrid:l,snapGrid:p,onError:m,nodesDraggable:h}=t.getState(),y=c().filter(A=>A.selected&&(A.draggable||h&&typeof A.draggable=="undefined")),v=l?p[0]:5,S=l?p[1]:5,k=r.isShiftPressed?4:1,C=r.x*v*k,R=r.y*S*k,D=y.map(A=>{if(A.positionAbsolute){const I={x:A.positionAbsolute.x+C,y:A.positionAbsolute.y+R};l&&(I.x=p[0]*Math.round(I.x/p[0]),I.y=p[1]*Math.round(I.y/p[1]));const{positionAbsolute:E,position:B}=bo(A,I,s,i,void 0,m);A.position=B,A.positionAbsolute=E}return A});u(D,!0,!1)},[])}const Be={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ir=t=>{const e=({id:r,type:s,data:i,xPos:u,yPos:c,xPosOrigin:l,yPosOrigin:p,selected:m,onClick:h,onMouseEnter:y,onMouseMove:v,onMouseLeave:S,onContextMenu:k,onDoubleClick:C,style:R,className:D,isDraggable:A,isSelectable:I,isConnectable:E,isFocusable:B,selectNodesOnDrag:K,sourcePosition:F,targetPosition:H,hidden:W,resizeObserver:nt,dragHandle:U,zIndex:rt,isParent:N,noDragClassName:G,noPanClassName:tt,initialized:lt,disableKeyboardA11y:St,ariaLabel:yt,rfId:T})=>{const Q=Lt(),et=(0,f.useRef)(null),xt=(0,f.useRef)(F),Et=(0,f.useRef)(H),Dt=(0,f.useRef)(s),Zt=I||A||h||y||v||S,Ft=Rr(),oe=sn(r,Q.getState,y),ee=sn(r,Q.getState,v),ne=sn(r,Q.getState,S),de=sn(r,Q.getState,k),fe=sn(r,Q.getState,C),Qt=Yt=>{const{nodeDragThreshold:be}=Q.getState();if(I&&(!K||!A||be>0)&&jr({id:r,store:Q,nodeRef:et}),h){const Pe=Q.getState().nodeInternals.get(r);Pe&&h(Yt,bt({},Pe))}},Ae=Yt=>{if(!xe(Yt))if(vr.includes(Yt.key)&&I){const be=Yt.key==="Escape";jr({id:r,store:Q,unselect:be,nodeRef:et})}else!St&&A&&m&&Object.prototype.hasOwnProperty.call(Be,Yt.key)&&(Q.setState({ariaLiveMessage:`Moved selected node ${Yt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~c}`}),Ft({x:Be[Yt.key].x,y:Be[Yt.key].y,isShiftPressed:Yt.shiftKey}))};(0,f.useEffect)(()=>{if(et.current&&!W){const Yt=et.current;return nt==null||nt.observe(Yt),()=>nt==null?void 0:nt.unobserve(Yt)}},[W]),(0,f.useEffect)(()=>{const Yt=Dt.current!==s,be=xt.current!==F,Pe=Et.current!==H;et.current&&(Yt||be||Pe)&&(Yt&&(Dt.current=s),be&&(xt.current=F),Pe&&(Et.current=H),Q.getState().updateNodeDimensions([{id:r,nodeElement:et.current,forceUpdate:!0}]))},[r,s,F,H]);const Ut=So({nodeRef:et,disabled:W||!A,noDragClassName:G,handleSelector:U,nodeId:r,isSelectable:I,selectNodesOnDrag:K});return W?null:f.createElement("div",{className:(0,ot.Z)(["react-flow__node",`react-flow__node-${s}`,{[tt]:A},D,{selected:m,selectable:I,parent:N,dragging:Ut}]),ref:et,style:bt({zIndex:rt,transform:`translate(${l}px,${p}px)`,pointerEvents:Zt?"all":"none",visibility:lt?"visible":"hidden"},R),"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:oe,onMouseMove:ee,onMouseLeave:ne,onContextMenu:de,onClick:Qt,onDoubleClick:fe,onKeyDown:B?Ae:void 0,tabIndex:B?0:void 0,role:B?"button":void 0,"aria-describedby":St?void 0:`${ao}-${T}`,"aria-label":yt},f.createElement(Fr,{value:r},f.createElement(t,{id:r,data:i,type:s,xPos:u,yPos:c,selected:m,isConnectable:E,sourcePosition:F,targetPosition:H,dragging:Ut,dragHandle:U,zIndex:rt})))};return e.displayName="NodeWrapper",(0,f.memo)(e)};const jo=t=>{const e=t.getNodes().filter(r=>r.selected);return te(bt({},tn(e,t.nodeOrigin)),{transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive})};function Eo({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const s=Lt(),{width:i,height:u,x:c,y:l,transformString:p,userSelectionActive:m}=Ht(jo,j.X),h=Rr(),y=(0,f.useRef)(null);if((0,f.useEffect)(()=>{var k;r||(k=y.current)==null||k.focus({preventScroll:!0})},[r]),So({nodeRef:y}),m||!i||!u)return null;const v=t?k=>{const C=s.getState().getNodes().filter(R=>R.selected);t(k,C)}:void 0,S=k=>{Object.prototype.hasOwnProperty.call(Be,k.key)&&h({x:Be[k.key].x,y:Be[k.key].y,isShiftPressed:k.shiftKey})};return f.createElement("div",{className:(0,ot.Z)(["react-flow__nodesselection","react-flow__container",e]),style:{transform:p}},f.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:v,tabIndex:r?void 0:-1,onKeyDown:r?void 0:S,style:{width:i,height:u,top:l,left:c}}))}var ti=(0,f.memo)(Eo);const ei=t=>t.nodesSelectionActive,No=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:s,onPaneMouseLeave:i,onPaneContextMenu:u,onPaneScroll:c,deleteKeyCode:l,onMove:p,onMoveStart:m,onMoveEnd:h,selectionKeyCode:y,selectionOnDrag:v,selectionMode:S,onSelectionStart:k,onSelectionEnd:C,multiSelectionKeyCode:R,panActivationKeyCode:D,zoomActivationKeyCode:A,elementsSelectable:I,zoomOnScroll:E,zoomOnPinch:B,panOnScroll:K,panOnScrollSpeed:F,panOnScrollMode:H,zoomOnDoubleClick:W,panOnDrag:nt,defaultViewport:U,translateExtent:rt,minZoom:N,maxZoom:G,preventScrolling:tt,onSelectionContextMenu:lt,noWheelClassName:St,noPanClassName:yt,disableKeyboardA11y:T})=>{const Q=Ht(ei),et=rr(y),xt=rr(D),Et=xt||nt,Dt=xt||K,Zt=et||v&&Et!==!0;return Vo({deleteKeyCode:l,multiSelectionKeyCode:R}),f.createElement(Ko,{onMove:p,onMoveStart:m,onMoveEnd:h,onPaneContextMenu:u,elementsSelectable:I,zoomOnScroll:E,zoomOnPinch:B,panOnScroll:Dt,panOnScrollSpeed:F,panOnScrollMode:H,zoomOnDoubleClick:W,panOnDrag:!et&&Et,defaultViewport:U,translateExtent:rt,minZoom:N,maxZoom:G,zoomActivationKeyCode:A,preventScrolling:tt,noWheelClassName:St,noPanClassName:yt},f.createElement(qr,{onSelectionStart:k,onSelectionEnd:C,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:s,onPaneMouseLeave:i,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:Et,isSelecting:!!Zt,selectionMode:S},t,Q&&f.createElement(ti,{onSelectionContextMenu:lt,noPanClassName:yt,disableKeyboardA11y:T})))};No.displayName="FlowRenderer";var ni=(0,f.memo)(No);function n(t){return Ht((0,f.useCallback)(r=>t?ae(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function o(t){const e={input:ir(t.input||rn),default:ir(t.default||tr),output:ir(t.output||nr),group:ir(t.group||Wr)},r={},s=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,u)=>(i[u]=ir(t[u]||tr),i),r);return bt(bt({},e),s)}const a=({x:t,y:e,width:r,height:s,origin:i})=>!r||!s?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-r*i[0],y:e-s*i[1]},g=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),w=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:s,elementsSelectable:i,updateNodeDimensions:u,onError:c}=Ht(g,j.X),l=n(t.onlyRenderVisibleElements),p=(0,f.useRef)(),m=(0,f.useMemo)(()=>{if(typeof ResizeObserver=="undefined")return null;const h=new ResizeObserver(y=>{const v=y.map(S=>({id:S.target.getAttribute("data-id"),nodeElement:S.target,forceUpdate:!0}));u(v)});return p.current=h,h},[]);return(0,f.useEffect)(()=>()=>{var h;(h=p==null?void 0:p.current)==null||h.disconnect()},[]),f.createElement("div",{className:"react-flow__nodes",style:Qr},l.map(h=>{var B,K,F,H,W,nt,U;let y=h.type||"default";t.nodeTypes[y]||(c==null||c("003",ie.error003(y)),y="default");const v=t.nodeTypes[y]||t.nodeTypes.default,S=!!(h.draggable||e&&typeof h.draggable=="undefined"),k=!!(h.selectable||i&&typeof h.selectable=="undefined"),C=!!(h.connectable||r&&typeof h.connectable=="undefined"),R=!!(h.focusable||s&&typeof h.focusable=="undefined"),D=t.nodeExtent?Vn(h.positionAbsolute,t.nodeExtent):h.positionAbsolute,A=(B=D==null?void 0:D.x)!=null?B:0,I=(K=D==null?void 0:D.y)!=null?K:0,E=a({x:A,y:I,width:(F=h.width)!=null?F:0,height:(H=h.height)!=null?H:0,origin:t.nodeOrigin});return f.createElement(v,{key:h.id,id:h.id,className:h.className,style:h.style,type:y,data:h.data,sourcePosition:h.sourcePosition||at.Bottom,targetPosition:h.targetPosition||at.Top,hidden:h.hidden,xPos:A,yPos:I,xPosOrigin:E.x,yPosOrigin:E.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!h.selected,isDraggable:S,isSelectable:k,isConnectable:C,isFocusable:R,resizeObserver:m,dragHandle:h.dragHandle,zIndex:(nt=(W=h[Ot])==null?void 0:W.z)!=null?nt:0,isParent:!!((U=h[Ot])!=null&&U.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!h.width&&!!h.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:h.ariaLabel})}))};w.displayName="NodeRenderer";var b=(0,f.memo)(w);const x=(t,e,r)=>r===at.Left?t-e:r===at.Right?t+e:t,P=(t,e,r)=>r===at.Top?t-e:r===at.Bottom?t+e:t,O="react-flow__edgeupdater",Z=({position:t,centerX:e,centerY:r,radius:s=10,onMouseDown:i,onMouseEnter:u,onMouseOut:c,type:l})=>f.createElement("circle",{onMouseDown:i,onMouseEnter:u,onMouseOut:c,className:(0,ot.Z)([O,`${O}-${l}`]),cx:x(e,s,t),cy:P(r,s,t),r:s,stroke:"transparent",fill:"transparent"}),X=()=>!0;var ut=t=>{const e=({id:r,className:s,type:i,data:u,onClick:c,onEdgeDoubleClick:l,selected:p,animated:m,label:h,labelStyle:y,labelShowBg:v,labelBgStyle:S,labelBgPadding:k,labelBgBorderRadius:C,style:R,source:D,target:A,sourceX:I,sourceY:E,targetX:B,targetY:K,sourcePosition:F,targetPosition:H,elementsSelectable:W,hidden:nt,sourceHandleId:U,targetHandleId:rt,onContextMenu:N,onMouseEnter:G,onMouseMove:tt,onMouseLeave:lt,edgeUpdaterRadius:St,onEdgeUpdate:yt,onEdgeUpdateStart:T,onEdgeUpdateEnd:Q,markerEnd:et,markerStart:xt,rfId:Et,ariaLabel:Dt,isFocusable:Zt,isUpdatable:Ft,pathOptions:oe,interactionWidth:ee})=>{const ne=(0,f.useRef)(null),[de,fe]=(0,f.useState)(!1),[Qt,Ae]=(0,f.useState)(!1),Ut=Lt(),Yt=(0,f.useMemo)(()=>`url(#${qt(xt,Et)})`,[xt,Et]),be=(0,f.useMemo)(()=>`url(#${qt(et,Et)})`,[et,Et]);if(nt)return null;const Pe=he=>{var un;const{edges:Te,addSelectedEdges:hr,unselectNodesAndEdges:gr,multiSelectionActive:pr}=Ut.getState(),bn=Te.find(no=>no.id===r);bn&&(W&&(Ut.setState({nodesSelectionActive:!1}),bn.selected&&pr?(gr({nodes:[],edges:[bn]}),(un=ne.current)==null||un.blur()):hr([r])),c&&c(he,bn))},Pt=Qe(r,Ut.getState,l),ur=Qe(r,Ut.getState,N),lr=Qe(r,Ut.getState,G),to=Qe(r,Ut.getState,tt),zr=Qe(r,Ut.getState,lt),fr=(he,Te)=>{if(he.button!==0)return;const{edges:hr,isValidConnection:gr}=Ut.getState(),pr=Te?A:D,bn=(Te?rt:U)||null,un=Te?"target":"source",no=gr||X,ii=Te,ro=hr.find(mr=>mr.id===r);Ae(!0),T==null||T(he,ro,un);const si=mr=>{Ae(!1),Q==null||Q(mr,ro,un)};Bt({event:he,handleId:bn,nodeId:pr,onConnect:mr=>yt==null?void 0:yt(ro,mr),isTarget:ii,getState:Ut.getState,setState:Ut.setState,isValidConnection:no,edgeUpdaterType:un,onEdgeUpdateEnd:si})},Ln=he=>fr(he,!0),$r=he=>fr(he,!1),Xn=()=>fe(!0),dr=()=>fe(!1),eo=!W&&!c,Or=he=>{var Te;if(vr.includes(he.key)&&W){const{unselectNodesAndEdges:hr,addSelectedEdges:gr,edges:pr}=Ut.getState();he.key==="Escape"?((Te=ne.current)==null||Te.blur(),hr({edges:[pr.find(un=>un.id===r)]})):gr([r])}};return f.createElement("g",{className:(0,ot.Z)(["react-flow__edge",`react-flow__edge-${i}`,s,{selected:p,animated:m,inactive:eo,updating:de}]),onClick:Pe,onDoubleClick:Pt,onContextMenu:ur,onMouseEnter:lr,onMouseMove:to,onMouseLeave:zr,onKeyDown:Zt?Or:void 0,tabIndex:Zt?0:void 0,role:Zt?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Dt===null?void 0:Dt||`Edge from ${D} to ${A}`,"aria-describedby":Zt?`${co}-${Et}`:void 0,ref:ne},!Qt&&f.createElement(t,{id:r,source:D,target:A,selected:p,animated:m,label:h,labelStyle:y,labelShowBg:v,labelBgStyle:S,labelBgPadding:k,labelBgBorderRadius:C,data:u,style:R,sourceX:I,sourceY:E,targetX:B,targetY:K,sourcePosition:F,targetPosition:H,sourceHandleId:U,targetHandleId:rt,markerStart:Yt,markerEnd:be,pathOptions:oe,interactionWidth:ee}),Ft&&f.createElement(f.Fragment,null,(Ft==="source"||Ft===!0)&&f.createElement(Z,{position:F,centerX:I,centerY:E,radius:St,onMouseDown:Ln,onMouseEnter:Xn,onMouseOut:dr,type:"source"}),(Ft==="target"||Ft===!0)&&f.createElement(Z,{position:H,centerX:B,centerY:K,radius:St,onMouseDown:$r,onMouseEnter:Xn,onMouseOut:dr,type:"target"})))};return e.displayName="EdgeWrapper",(0,f.memo)(e)};function mt(t){const e={default:ut(t.default||mn),straight:ut(t.bezier||Dn),step:ut(t.step||Gn),smoothstep:ut(t.step||pn),simplebezier:ut(t.simplebezier||Ve)},r={},s=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,u)=>(i[u]=ut(t[u]||mn),i),r);return bt(bt({},e),s)}function Nt(t,e,r=null){const s=((r==null?void 0:r.x)||0)+e.x,i=((r==null?void 0:r.y)||0)+e.y,u=(r==null?void 0:r.width)||e.width,c=(r==null?void 0:r.height)||e.height;switch(t){case at.Top:return{x:s+u/2,y:i};case at.Right:return{x:s+u,y:i+c/2};case at.Bottom:return{x:s+u/2,y:i+c};case at.Left:return{x:s,y:i+c/2}}}function re(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const Kt=(t,e,r,s,i,u)=>{const c=Nt(r,t,e),l=Nt(u,s,i);return{sourceX:c.x,sourceY:c.y,targetX:l.x,targetY:l.y}};function me({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:s,targetWidth:i,targetHeight:u,width:c,height:l,transform:p}){const m={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+i),y2:Math.max(t.y+s,e.y+u)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const h=Re({x:(0-p[0])/p[2],y:(0-p[1])/p[2],width:c/p[2],height:l/p[2]}),y=Math.max(0,Math.min(h.x2,m.x2)-Math.max(h.x,m.x)),v=Math.max(0,Math.min(h.y2,m.y2)-Math.max(h.y,m.y));return Math.ceil(y*v)>0}function At(t){var s,i,u,c,l;const e=((s=t==null?void 0:t[Ot])==null?void 0:s.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)!="undefined"&&typeof((u=t==null?void 0:t.positionAbsolute)==null?void 0:u.y)!="undefined";return[{x:((c=t==null?void 0:t.positionAbsolute)==null?void 0:c.x)||0,y:((l=t==null?void 0:t.positionAbsolute)==null?void 0:l.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const an=[{level:0,isMaxLevel:!0,edges:[]}];function Ke(t,e,r=!1){let s=-1;const i=t.reduce((c,l)=>{var h,y;const p=Vt(l.zIndex);let m=p?l.zIndex:0;if(r){const v=e.get(l.target),S=e.get(l.source),k=l.selected||(v==null?void 0:v.selected)||(S==null?void 0:S.selected),C=Math.max(((h=S==null?void 0:S[Ot])==null?void 0:h.z)||0,((y=v==null?void 0:v[Ot])==null?void 0:y.z)||0,1e3);m=(p?l.zIndex:0)+(k?C:0)}return c[m]?c[m].push(l):c[m]=[l],s=m>s?m:s,c},{}),u=Object.entries(i).map(([c,l])=>{const p=+c;return{edges:l,level:p,isMaxLevel:p===s}});return u.length===0?an:u}function wn(t,e,r){const s=Ht((0,f.useCallback)(i=>t?i.edges.filter(u=>{const c=e.get(u.source),l=e.get(u.target);return(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&me({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:l.width,targetHeight:l.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return Ke(s,e,r)}const cn=({color:t="none",strokeWidth:e=1})=>f.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Ee=({color:t="none",strokeWidth:e=1})=>f.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),sr={[Pn.Arrow]:cn,[Pn.ArrowClosed]:Ee};function _n(t){const e=Lt();return(0,f.useMemo)(()=>{var i,u;return Object.prototype.hasOwnProperty.call(sr,t)?sr[t]:((u=(i=e.getState()).onError)==null||u.call(i,"009",ie.error009(t)),null)},[t])}const Dr=({id:t,type:e,color:r,width:s=12.5,height:i=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:l="auto-start-reverse"})=>{const p=_n(e);return p?f.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${s}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:l,refX:"0",refY:"0"},f.createElement(p,{color:r,strokeWidth:c})):null},Ir=({defaultColor:t,rfId:e})=>r=>{const s=[];return r.edges.reduce((i,u)=>([u.markerStart,u.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const l=qt(c,e);s.includes(l)||(i.push(bt({id:l,color:c.color||t},c)),s.push(l))}}),i),[]).sort((i,u)=>i.id.localeCompare(u.id))},ar=({defaultColor:t,rfId:e})=>{const r=Ht((0,f.useCallback)(Ir({defaultColor:t,rfId:e}),[t,e]),(s,i)=>!(s.length!==i.length||s.some((u,c)=>u.id!==i[c].id)));return f.createElement("defs",null,r.map(s=>f.createElement(Dr,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};ar.displayName="MarkerDefinitions";var ri=(0,f.memo)(ar);const oi=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),M=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:s,edgeTypes:i,noPanClassName:u,onEdgeUpdate:c,onEdgeContextMenu:l,onEdgeMouseEnter:p,onEdgeMouseMove:m,onEdgeMouseLeave:h,onEdgeClick:y,edgeUpdaterRadius:v,onEdgeDoubleClick:S,onEdgeUpdateStart:k,onEdgeUpdateEnd:C,children:R})=>{const{edgesFocusable:D,edgesUpdatable:A,elementsSelectable:I,width:E,height:B,connectionMode:K,nodeInternals:F,onError:H}=Ht(oi,j.X),W=wn(e,F,r);return E?f.createElement(f.Fragment,null,W.map(({level:nt,edges:U,isMaxLevel:rt})=>f.createElement("svg",{key:nt,style:{zIndex:nt},width:E,height:B,className:"react-flow__edges react-flow__container"},rt&&f.createElement(ri,{defaultColor:t,rfId:s}),f.createElement("g",null,U.map(N=>{var Ae,Ut;const[G,tt,lt]=At(F.get(N.source)),[St,yt,T]=At(F.get(N.target));if(!lt||!T)return null;let Q=N.type||"default";i[Q]||(H==null||H("011",ie.error011(Q)),Q="default");const et=i[Q]||i.default,xt=K===Xe.Strict?yt.target:((Ae=yt.target)!=null?Ae:[]).concat((Ut=yt.source)!=null?Ut:[]),Et=re(tt.source,N.sourceHandle),Dt=re(xt,N.targetHandle),Zt=(Et==null?void 0:Et.position)||at.Bottom,Ft=(Dt==null?void 0:Dt.position)||at.Top,oe=!!(N.focusable||D&&typeof N.focusable=="undefined"),ee=typeof c!="undefined"&&(N.updatable||A&&typeof N.updatable=="undefined");if(!Et||!Dt)return H==null||H("008",ie.error008(Et,N)),null;const{sourceX:ne,sourceY:de,targetX:fe,targetY:Qt}=Kt(G,Et,Zt,St,Dt,Ft);return f.createElement(et,{key:N.id,id:N.id,className:(0,ot.Z)([N.className,u]),type:Q,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:ne,sourceY:de,targetX:fe,targetY:Qt,sourcePosition:Zt,targetPosition:Ft,elementsSelectable:I,onEdgeUpdate:c,onContextMenu:l,onMouseEnter:p,onMouseMove:m,onMouseLeave:h,onClick:y,edgeUpdaterRadius:v,onEdgeDoubleClick:S,onEdgeUpdateStart:k,onEdgeUpdateEnd:C,rfId:s,ariaLabel:N.ariaLabel,isFocusable:oe,isUpdatable:ee,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth})})))),R):null};M.displayName="EdgeRenderer";var gt=(0,f.memo)(M);const L=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function _t({children:t}){const e=Ht(L);return f.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function kt(t){const e=Gr(),r=(0,f.useRef)(!1);(0,f.useEffect)(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const It={[at.Left]:at.Right,[at.Right]:at.Left,[at.Top]:at.Bottom,[at.Bottom]:at.Top},zt=({nodeId:t,handleType:e,style:r,type:s=Ie.Bezier,CustomComponent:i,connectionStatus:u})=>{var K,F,H,W,nt,U,rt;const{fromNode:c,handleId:l,toX:p,toY:m,connectionMode:h}=Ht((0,f.useCallback)(N=>({fromNode:N.nodeInternals.get(t),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[t]),j.X),y=(K=c==null?void 0:c[Ot])==null?void 0:K.handleBounds;let v=y==null?void 0:y[e];if(h===Xe.Loose&&(v=v||(y==null?void 0:y[e==="source"?"target":"source"])),!c||!v)return null;const S=l?v.find(N=>N.id===l):v[0],k=S?S.x+S.width/2:((F=c.width)!=null?F:0)/2,C=S?S.y+S.height/2:(H=c.height)!=null?H:0,R=((nt=(W=c.positionAbsolute)==null?void 0:W.x)!=null?nt:0)+k,D=((rt=(U=c.positionAbsolute)==null?void 0:U.y)!=null?rt:0)+C,A=S==null?void 0:S.position,I=A?It[A]:null;if(!A||!I)return null;if(i)return f.createElement(i,{connectionLineType:s,connectionLineStyle:r,fromNode:c,fromHandle:S,fromX:R,fromY:D,toX:p,toY:m,fromPosition:A,toPosition:I,connectionStatus:u});let E="";const B={sourceX:R,sourceY:D,sourcePosition:A,targetX:p,targetY:m,targetPosition:I};return s===Ie.Bezier?[E]=zn(B):s===Ie.Step?[E]=Rn(te(bt({},B),{borderRadius:0})):s===Ie.SmoothStep?[E]=Rn(B):s===Ie.SimpleBezier?[E]=Un(B):E=`M${R},${D} ${p},${m}`,f.createElement("path",{d:E,fill:"none",className:"react-flow__connection-path",style:r})};zt.displayName="ConnectionLine";const Xt=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Wt({containerStyle:t,style:e,type:r,component:s}){const{nodeId:i,handleType:u,nodesConnectable:c,width:l,height:p,connectionStatus:m}=Ht(Xt,j.X);return!(i&&u&&l&&c)?null:f.createElement("svg",{style:t,width:l,height:p,className:"react-flow__edges react-flow__connectionline react-flow__container"},f.createElement("g",{className:(0,ot.Z)(["react-flow__connection",m])},f.createElement(zt,{nodeId:i,handleType:u,style:e,type:r,CustomComponent:s,connectionStatus:m})))}function Ne(t,e){const r=(0,f.useRef)(null),s=Lt();return(0,f.useMemo)(()=>e(t),[t])}const Jt=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:s,onMoveEnd:i,onInit:u,onNodeClick:c,onEdgeClick:l,onNodeDoubleClick:p,onEdgeDoubleClick:m,onNodeMouseEnter:h,onNodeMouseMove:y,onNodeMouseLeave:v,onNodeContextMenu:S,onSelectionContextMenu:k,onSelectionStart:C,onSelectionEnd:R,connectionLineType:D,connectionLineStyle:A,connectionLineComponent:I,connectionLineContainerStyle:E,selectionKeyCode:B,selectionOnDrag:K,selectionMode:F,multiSelectionKeyCode:H,panActivationKeyCode:W,zoomActivationKeyCode:nt,deleteKeyCode:U,onlyRenderVisibleElements:rt,elementsSelectable:N,selectNodesOnDrag:G,defaultViewport:tt,translateExtent:lt,minZoom:St,maxZoom:yt,preventScrolling:T,defaultMarkerColor:Q,zoomOnScroll:et,zoomOnPinch:xt,panOnScroll:Et,panOnScrollSpeed:Dt,panOnScrollMode:Zt,zoomOnDoubleClick:Ft,panOnDrag:oe,onPaneClick:ee,onPaneMouseEnter:ne,onPaneMouseMove:de,onPaneMouseLeave:fe,onPaneScroll:Qt,onPaneContextMenu:Ae,onEdgeUpdate:Ut,onEdgeContextMenu:Yt,onEdgeMouseEnter:be,onEdgeMouseMove:Pe,onEdgeMouseLeave:Pt,edgeUpdaterRadius:ur,onEdgeUpdateStart:lr,onEdgeUpdateEnd:to,noDragClassName:zr,noWheelClassName:fr,noPanClassName:Ln,elevateEdgesOnSelect:$r,disableKeyboardA11y:Xn,nodeOrigin:dr,nodeExtent:eo,rfId:Or})=>{const he=Ne(t,o),Te=Ne(e,mt);return kt(u),f.createElement(ni,{onPaneClick:ee,onPaneMouseEnter:ne,onPaneMouseMove:de,onPaneMouseLeave:fe,onPaneContextMenu:Ae,onPaneScroll:Qt,deleteKeyCode:U,selectionKeyCode:B,selectionOnDrag:K,selectionMode:F,onSelectionStart:C,onSelectionEnd:R,multiSelectionKeyCode:H,panActivationKeyCode:W,zoomActivationKeyCode:nt,elementsSelectable:N,onMove:r,onMoveStart:s,onMoveEnd:i,zoomOnScroll:et,zoomOnPinch:xt,zoomOnDoubleClick:Ft,panOnScroll:Et,panOnScrollSpeed:Dt,panOnScrollMode:Zt,panOnDrag:oe,defaultViewport:tt,translateExtent:lt,minZoom:St,maxZoom:yt,onSelectionContextMenu:k,preventScrolling:T,noDragClassName:zr,noWheelClassName:fr,noPanClassName:Ln,disableKeyboardA11y:Xn},f.createElement(_t,null,f.createElement(gt,{edgeTypes:Te,onEdgeClick:l,onEdgeDoubleClick:m,onEdgeUpdate:Ut,onlyRenderVisibleElements:rt,onEdgeContextMenu:Yt,onEdgeMouseEnter:be,onEdgeMouseMove:Pe,onEdgeMouseLeave:Pt,onEdgeUpdateStart:lr,onEdgeUpdateEnd:to,edgeUpdaterRadius:ur,defaultMarkerColor:Q,noPanClassName:Ln,elevateEdgesOnSelect:!!$r,disableKeyboardA11y:Xn,rfId:Or},f.createElement(Wt,{style:A,type:D,component:I,containerStyle:E})),f.createElement("div",{className:"react-flow__edgelabel-renderer"}),f.createElement(b,{nodeTypes:he,onNodeClick:c,onNodeDoubleClick:p,onNodeMouseEnter:h,onNodeMouseMove:y,onNodeMouseLeave:v,onNodeContextMenu:S,selectNodesOnDrag:G,onlyRenderVisibleElements:rt,noPanClassName:Ln,noDragClassName:zr,disableKeyboardA11y:Xn,nodeOrigin:dr,nodeExtent:eo,rfId:Or})))};Jt.displayName="GraphView";var Ce=(0,f.memo)(Jt);const Me=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],jt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Me,nodeExtent:Me,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Xe.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Le,isValidConnection:void 0},We=()=>(0,q.F)((t,e)=>te(bt({},jt),{setNodes:r=>{const{nodeInternals:s,nodeOrigin:i,elevateNodesOnSelect:u}=e();t({nodeInternals:Ur(r,s,i,u)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:s={}}=e();t({edges:r.map(i=>bt(bt({},s),i))})},setDefaultNodesAndEdges:(r,s)=>{const i=typeof r!="undefined",u=typeof s!="undefined",c=i?Ur(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:u?s:[],hasDefaultNodes:i,hasDefaultEdges:u})},updateNodeDimensions:r=>{const{onNodesChange:s,nodeInternals:i,fitViewOnInit:u,fitViewOnInitDone:c,fitViewOnInitOptions:l,domNode:p,nodeOrigin:m}=e(),h=p==null?void 0:p.querySelector(".react-flow__viewport");if(!h)return;const y=window.getComputedStyle(h),{m22:v}=new window.DOMMatrixReadOnly(y.transform),S=r.reduce((C,R)=>{const D=i.get(R.id);if(D){const A=hn(R.nodeElement);!!(A.width&&A.height&&(D.width!==A.width||D.height!==A.height||R.forceUpdate))&&(i.set(D.id,bt(te(bt({},D),{[Ot]:te(bt({},D[Ot]),{handleBounds:{source:vo(".source",R.nodeElement,v,m),target:vo(".target",R.nodeElement,v,m)}})}),A)),C.push({id:D.id,type:"dimensions",dimensions:A}))}return C},[]);ho(i,m);const k=c||u&&!c&&go(e,bt({initial:!0},l));t({nodeInternals:new Map(i),fitViewOnInitDone:k}),(S==null?void 0:S.length)>0&&(s==null||s(S))},updateNodePositions:(r,s=!0,i=!1)=>{const{triggerNodeChanges:u}=e(),c=r.map(l=>{const p={id:l.id,type:"position",dragging:i};return s&&(p.positionAbsolute=l.positionAbsolute,p.position=l.position),p});u(c)},triggerNodeChanges:r=>{const{onNodesChange:s,nodeInternals:i,hasDefaultNodes:u,nodeOrigin:c,getNodes:l,elevateNodesOnSelect:p}=e();if(r!=null&&r.length){if(u){const m=_o(r,l()),h=Ur(m,i,c,p);t({nodeInternals:h})}s==null||s(r)}},addSelectedNodes:r=>{const{multiSelectionActive:s,edges:i,getNodes:u}=e();let c,l=null;s?c=r.map(p=>on(p,!0)):(c=Hn(u(),r),l=Hn(i,[])),Tr({changedNodes:c,changedEdges:l,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:s,edges:i,getNodes:u}=e();let c,l=null;s?c=r.map(p=>on(p,!0)):(c=Hn(i,r),l=Hn(u(),[])),Tr({changedNodes:l,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:s}={})=>{const{edges:i,getNodes:u}=e(),c=r||u(),l=s||i,p=c.map(h=>(h.selected=!1,on(h.id,!1))),m=l.map(h=>on(h.id,!1));Tr({changedNodes:p,changedEdges:m,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:s,maxZoom:i}=e();s==null||s.scaleExtent([r,i]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:s,minZoom:i}=e();s==null||s.scaleExtent([i,r]),t({maxZoom:r})},setTranslateExtent:r=>{var s;(s=e().d3Zoom)==null||s.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:s}=e(),u=s().filter(l=>l.selected).map(l=>on(l.id,!1)),c=r.filter(l=>l.selected).map(l=>on(l.id,!1));Tr({changedNodes:u,changedEdges:c,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:s}=e();s.forEach(i=>{i.positionAbsolute=Vn(i.position,r)}),t({nodeExtent:r,nodeInternals:new Map(s)})},panBy:r=>{const{transform:s,width:i,height:u,d3Zoom:c,d3Selection:l,translateExtent:p}=e();if(!c||!l||!r.x&&!r.y)return!1;const m=Ct.CR.translate(s[0]+r.x,s[1]+r.y).scale(s[2]),h=[[0,0],[i,u]],y=c==null?void 0:c.constrain()(m,h,p);return c.transform(l,y),s[0]!==y.x||s[1]!==y.y||s[2]!==y.k},cancelConnection:()=>t({connectionNodeId:jt.connectionNodeId,connectionHandleId:jt.connectionHandleId,connectionHandleType:jt.connectionHandleType,connectionStatus:jt.connectionStatus,connectionStartHandle:jt.connectionStartHandle,connectionEndHandle:jt.connectionEndHandle}),reset:()=>t(bt({},jt))}),Object.is),cr=({children:t})=>{const e=(0,f.useRef)(null);return e.current||(e.current=We()),f.createElement(dn,{value:e.current},t)};cr.displayName="ReactFlowProvider";const li=({children:t})=>(0,f.useContext)(ye)?f.createElement(f.Fragment,null,t):f.createElement(cr,null,t);li.displayName="ReactFlowWrapper";const bi={input:rn,default:tr,output:nr,group:Wr},vi={default:mn,straight:Dn,step:Gn,smoothstep:pn,simplebezier:Ve},Si=[0,0],Ei=[15,15],Ni={x:0,y:0,zoom:1},Ci={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},fi=(0,f.forwardRef)((vs,ds)=>{var yi=vs,{nodes:t,edges:e,defaultNodes:r,defaultEdges:s,className:i,nodeTypes:u=bi,edgeTypes:c=vi,onNodeClick:l,onEdgeClick:p,onInit:m,onMove:h,onMoveStart:y,onMoveEnd:v,onConnect:S,onConnectStart:k,onConnectEnd:C,onClickConnectStart:R,onClickConnectEnd:D,onNodeMouseEnter:A,onNodeMouseMove:I,onNodeMouseLeave:E,onNodeContextMenu:B,onNodeDoubleClick:K,onNodeDragStart:F,onNodeDrag:H,onNodeDragStop:W,onNodesDelete:nt,onEdgesDelete:U,onSelectionChange:rt,onSelectionDragStart:N,onSelectionDrag:G,onSelectionDragStop:tt,onSelectionContextMenu:lt,onSelectionStart:St,onSelectionEnd:yt,connectionMode:T=Xe.Strict,connectionLineType:Q=Ie.Bezier,connectionLineStyle:et,connectionLineComponent:xt,connectionLineContainerStyle:Et,deleteKeyCode:Dt="Backspace",selectionKeyCode:Zt="Shift",selectionOnDrag:Ft=!1,selectionMode:oe=qe.Full,panActivationKeyCode:ee="Space",multiSelectionKeyCode:ne=Ge()?"Meta":"Control",zoomActivationKeyCode:de=Ge()?"Meta":"Control",snapToGrid:fe=!1,snapGrid:Qt=Ei,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:Ut=!0,nodesDraggable:Yt,nodesConnectable:be,nodesFocusable:Pe,nodeOrigin:Pt=Si,edgesFocusable:ur,edgesUpdatable:lr,elementsSelectable:to,defaultViewport:zr=Ni,minZoom:fr=.5,maxZoom:Ln=2,translateExtent:$r=Me,preventScrolling:Xn=!0,nodeExtent:dr,defaultMarkerColor:eo="#b1b1b7",zoomOnScroll:Or=!0,zoomOnPinch:he=!0,panOnScroll:Te=!1,panOnScrollSpeed:hr=.5,panOnScrollMode:gr=De.Free,zoomOnDoubleClick:pr=!0,panOnDrag:bn=!0,onPaneClick:un,onPaneMouseEnter:no,onPaneMouseMove:ii,onPaneMouseLeave:ro,onPaneScroll:si,onPaneContextMenu:hi,children:mr,onEdgeUpdate:Oi,onEdgeContextMenu:Bi,onEdgeDoubleClick:Hi,onEdgeMouseEnter:Zi,onEdgeMouseMove:Li,onEdgeMouseLeave:Xi,onEdgeUpdateStart:Vi,onEdgeUpdateEnd:Fi,edgeUpdaterRadius:Yi=10,onNodesChange:Ki,onEdgesChange:Wi,noDragClassName:Ui="nodrag",noWheelClassName:Gi="nowheel",noPanClassName:gi="nopan",fitView:Qi=!1,fitViewOptions:qi,connectOnClick:Ji=!0,attributionPosition:ji,proOptions:ts,defaultEdgeOptions:es,elevateNodesOnSelect:ns=!0,elevateEdgesOnSelect:rs=!1,disableKeyboardA11y:pi=!1,autoPanOnConnect:os=!0,autoPanOnNodeDrag:is=!0,connectionRadius:ss=20,isValidConnection:as,onError:cs,style:us,id:mi,nodeDragThreshold:ls}=yi,fs=Br(yi,["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesUpdatable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold"]);const ai=mi||"1";return f.createElement("div",te(bt({},fs),{style:bt(bt({},us),Ci),ref:ds,className:(0,ot.Z)(["react-flow",i]),"data-testid":"rf__wrapper",id:mi}),f.createElement(li,null,f.createElement(Ce,{onInit:m,onMove:h,onMoveStart:y,onMoveEnd:v,onNodeClick:l,onEdgeClick:p,onNodeMouseEnter:A,onNodeMouseMove:I,onNodeMouseLeave:E,onNodeContextMenu:B,onNodeDoubleClick:K,nodeTypes:u,edgeTypes:c,connectionLineType:Q,connectionLineStyle:et,connectionLineComponent:xt,connectionLineContainerStyle:Et,selectionKeyCode:Zt,selectionOnDrag:Ft,selectionMode:oe,deleteKeyCode:Dt,multiSelectionKeyCode:ne,panActivationKeyCode:ee,zoomActivationKeyCode:de,onlyRenderVisibleElements:Ae,selectNodesOnDrag:Ut,defaultViewport:zr,translateExtent:$r,minZoom:fr,maxZoom:Ln,preventScrolling:Xn,zoomOnScroll:Or,zoomOnPinch:he,zoomOnDoubleClick:pr,panOnScroll:Te,panOnScrollSpeed:hr,panOnScrollMode:gr,panOnDrag:bn,onPaneClick:un,onPaneMouseEnter:no,onPaneMouseMove:ii,onPaneMouseLeave:ro,onPaneScroll:si,onPaneContextMenu:hi,onSelectionContextMenu:lt,onSelectionStart:St,onSelectionEnd:yt,onEdgeUpdate:Oi,onEdgeContextMenu:Bi,onEdgeDoubleClick:Hi,onEdgeMouseEnter:Zi,onEdgeMouseMove:Li,onEdgeMouseLeave:Xi,onEdgeUpdateStart:Vi,onEdgeUpdateEnd:Fi,edgeUpdaterRadius:Yi,defaultMarkerColor:eo,noDragClassName:Ui,noWheelClassName:Gi,noPanClassName:gi,elevateEdgesOnSelect:rs,rfId:ai,disableKeyboardA11y:pi,nodeOrigin:Pt,nodeExtent:dr}),f.createElement(Ro,{nodes:t,edges:e,defaultNodes:r,defaultEdges:s,onConnect:S,onConnectStart:k,onConnectEnd:C,onClickConnectStart:R,onClickConnectEnd:D,nodesDraggable:Yt,nodesConnectable:be,nodesFocusable:Pe,edgesFocusable:ur,edgesUpdatable:lr,elementsSelectable:to,elevateNodesOnSelect:ns,minZoom:fr,maxZoom:Ln,nodeExtent:dr,onNodesChange:Ki,onEdgesChange:Wi,snapToGrid:fe,snapGrid:Qt,connectionMode:T,translateExtent:$r,connectOnClick:Ji,defaultEdgeOptions:es,fitView:Qi,fitViewOptions:qi,onNodesDelete:nt,onEdgesDelete:U,onNodeDragStart:F,onNodeDrag:H,onNodeDragStop:W,onSelectionDrag:G,onSelectionDragStart:N,onSelectionDragStop:tt,noPanClassName:gi,nodeOrigin:Pt,rfId:ai,autoPanOnConnect:os,autoPanOnNodeDrag:is,onError:cs,connectionRadius:ss,isValidConnection:as,nodeDragThreshold:ls}),f.createElement(To,{onSelectionChange:rt}),mr,f.createElement(_r,{proOptions:ts,position:ji}),f.createElement(Oo,{rfId:ai,disableKeyboardA11y:pi})))});fi.displayName="ReactFlow";const Mi=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function Ai({children:t}){const e=Ht(Mi);return e?(0,He.createPortal)(t,e):null}function ms(){const t=Lt();return useCallback(e=>{const{domNode:r,updateNodeDimensions:s}=t.getState(),u=(Array.isArray(e)?e:[e]).reduce((c,l)=>{const p=r==null?void 0:r.querySelector(`.react-flow__node[data-id="${l}"]`);return p&&c.push({id:l,nodeElement:p,forceUpdate:!0}),c},[]);requestAnimationFrame(()=>s(u))},[])}const Pi=t=>t.getNodes();function ys(){return Ht(Pi,shallow)}const Ti=t=>t.edges;function xs(){return Ht(Ti,shallow)}const ki=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2]});function Ri(){return Ht(ki,j.X)}function di(t){return e=>{const[r,s]=(0,f.useState)(e),i=(0,f.useCallback)(u=>s(c=>t(u,c)),[]);return[r,s,i]}}const ws=di(_o),_s=di(Go);function Di({onStart:t,onChange:e,onEnd:r}){const s=Lt();(0,f.useEffect)(()=>{s.setState({onViewportChangeStart:t})},[t]),(0,f.useEffect)(()=>{s.setState({onViewportChange:e})},[e]),(0,f.useEffect)(()=>{s.setState({onViewportChangeEnd:r})},[r])}function bs({onChange:t}){const e=Lt();useEffect(()=>{const r=[...e.getState().onSelectionChange,t];return e.setState({onSelectionChange:r}),()=>{const s=e.getState().onSelectionChange.filter(i=>i!==t);e.setState({onSelectionChange:s})}},[t])}const Ii=t=>e=>e.nodeInternals.size===0?!1:e.getNodes().filter(r=>t.includeHiddenNodes?!0:!r.hidden).every(r=>{var s;return((s=r[Ot])==null?void 0:s.handleBounds)!==void 0}),zi={includeHiddenNodes:!1};function $i(t=zi){return Ht(Ii(t))}},64546:function(ft,ht){"use strict";var $={value:function(){}};function f(){for(var it=0,st=arguments.length,pt={},vt;it<st;++it){if(!(vt=arguments[it]+"")||vt in pt||/[\s.]/.test(vt))throw new Error("illegal type: "+vt);pt[vt]=[]}return new ot(pt)}function ot(it){this._=it}function q(it,st){return it.trim().split(/^|\s+/).map(function(pt){var vt="",Mt=pt.indexOf(".");if(Mt>=0&&(vt=pt.slice(Mt+1),pt=pt.slice(0,Mt)),pt&&!st.hasOwnProperty(pt))throw new Error("unknown type: "+pt);return{type:pt,name:vt}})}ot.prototype=f.prototype={constructor:ot,on:function(st,pt){var vt=this._,Mt=q(st+"",vt),$t,Gt=-1,ke=Mt.length;if(arguments.length<2){for(;++Gt<ke;)if(($t=(st=Mt[Gt]).type)&&($t=j(vt[$t],st.name)))return $t;return}if(pt!=null&&typeof pt!="function")throw new Error("invalid callback: "+pt);for(;++Gt<ke;)if($t=(st=Mt[Gt]).type)vt[$t]=Ct(vt[$t],st.name,pt);else if(pt==null)for($t in vt)vt[$t]=Ct(vt[$t],st.name,null);return this},copy:function(){var st={},pt=this._;for(var vt in pt)st[vt]=pt[vt].slice();return new ot(st)},call:function(st,pt){if(($t=arguments.length-2)>0)for(var vt=new Array($t),Mt=0,$t,Gt;Mt<$t;++Mt)vt[Mt]=arguments[Mt+2];if(!this._.hasOwnProperty(st))throw new Error("unknown type: "+st);for(Gt=this._[st],Mt=0,$t=Gt.length;Mt<$t;++Mt)Gt[Mt].value.apply(pt,vt)},apply:function(st,pt,vt){if(!this._.hasOwnProperty(st))throw new Error("unknown type: "+st);for(var Mt=this._[st],$t=0,Gt=Mt.length;$t<Gt;++$t)Mt[$t].value.apply(pt,vt)}};function j(it,st){for(var pt=0,vt=it.length,Mt;pt<vt;++pt)if((Mt=it[pt]).name===st)return Mt.value}function Ct(it,st,pt){for(var vt=0,Mt=it.length;vt<Mt;++vt)if(it[vt].name===st){it[vt]=$,it=it.slice(0,vt).concat(it.slice(vt+1));break}return pt!=null&&it.push({name:st,value:pt}),it}ht.Z=f},76295:function(ft,ht,$){"use strict";$.d(ht,{Z:function(){return f}});function f(ot){if(typeof ot=="string"||typeof ot=="number")return""+ot;let q="";if(Array.isArray(ot))for(let j=0,Ct;j<ot.length;j++)(Ct=f(ot[j]))!==""&&(q+=(q&&" ")+Ct);else for(let j in ot)ot[j]&&(q+=(q&&" ")+j);return q}},49289:function(ft,ht,$){"use strict";$.d(ht,{D:function(){return j},Z:function(){return q}});var f=$(41468),ot=$(5873);function q(Ct){var it=Ct.document.documentElement,st=(0,f.Z)(Ct).on("dragstart.drag",ot.ZP,ot.Dd);"onselectstart"in it?st.on("selectstart.drag",ot.ZP,ot.Dd):(it.__noselect=it.style.MozUserSelect,it.style.MozUserSelect="none")}function j(Ct,it){var st=Ct.document.documentElement,pt=(0,f.Z)(Ct).on("dragstart.drag",null);it&&(pt.on("click.drag",ot.ZP,ot.Dd),setTimeout(function(){pt.on("click.drag",null)},0)),"onselectstart"in st?pt.on("selectstart.drag",null):(st.style.MozUserSelect=st.__noselect,delete st.__noselect)}},5873:function(ft,ht,$){"use strict";$.d(ht,{Dd:function(){return ot},Q7:function(){return f},ZP:function(){return j},rG:function(){return q}});const f={passive:!1},ot={capture:!0,passive:!1};function q(Ct){Ct.stopImmediatePropagation()}function j(Ct){Ct.preventDefault(),Ct.stopImmediatePropagation()}},73409:function(ft,ht,$){"use strict";$.d(ht,{P:function(){return ot},Z:function(){return f}});function f(q){return function(){return this.matches(q)}}function ot(q){return function(j){return j.matches(q)}}},60021:function(ft,ht,$){"use strict";$.d(ht,{Z:function(){return ot}});var f=$(17110);function ot(q){var j=q+="",Ct=j.indexOf(":");return Ct>=0&&(j=q.slice(0,Ct))!=="xmlns"&&(q=q.slice(Ct+1)),f.Z.hasOwnProperty(j)?{space:f.Z[j],local:q}:q}},17110:function(ft,ht,$){"use strict";$.d(ht,{P:function(){return f}});var f="http://www.w3.org/1999/xhtml";ht.Z={svg:"http://www.w3.org/2000/svg",xhtml:f,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},13802:function(ft,ht,$){"use strict";$.d(ht,{Z:function(){return ot}});function f(q){let j;for(;j=q.sourceEvent;)q=j;return q}function ot(q,j){if(q=f(q),j===void 0&&(j=q.currentTarget),j){var Ct=j.ownerSVGElement||j;if(Ct.createSVGPoint){var it=Ct.createSVGPoint();return it.x=q.clientX,it.y=q.clientY,it=it.matrixTransform(j.getScreenCTM().inverse()),[it.x,it.y]}if(j.getBoundingClientRect){var st=j.getBoundingClientRect();return[q.clientX-st.left-j.clientLeft,q.clientY-st.top-j.clientTop]}}return[q.pageX,q.pageY]}},41468:function(ft,ht,$){"use strict";$.d(ht,{Z:function(){return ot}});var f=$(1776);function ot(q){return typeof q=="string"?new f.Y1([[document.querySelector(q)]],[document.documentElement]):new f.Y1([[q]],f.Jz)}},1776:function(ft,ht,$){"use strict";$.d(ht,{Y1:function(){return ae},ZP:function(){return en},Jz:function(){return Ar}});var f=$(66456);function ot(d){typeof d!="function"&&(d=(0,f.Z)(d));for(var _=this._groups,V=_.length,Y=new Array(V),z=0;z<V;++z)for(var J=_[z],dt=J.length,ct=Y[z]=new Array(dt),wt,Tt,Bt=0;Bt<dt;++Bt)(wt=J[Bt])&&(Tt=d.call(wt,wt.__data__,Bt,J))&&("__data__"in wt&&(Tt.__data__=wt.__data__),ct[Bt]=Tt);return new ae(Y,this._parents)}function q(d){return d==null?[]:Array.isArray(d)?d:Array.from(d)}var j=$(16851);function Ct(d){return function(){return q(d.apply(this,arguments))}}function it(d){typeof d=="function"?d=Ct(d):d=(0,j.Z)(d);for(var _=this._groups,V=_.length,Y=[],z=[],J=0;J<V;++J)for(var dt=_[J],ct=dt.length,wt,Tt=0;Tt<ct;++Tt)(wt=dt[Tt])&&(Y.push(d.call(wt,wt.__data__,Tt,dt)),z.push(wt));return new ae(Y,z)}var st=$(73409),pt=Array.prototype.find;function vt(d){return function(){return pt.call(this.children,d)}}function Mt(){return this.firstElementChild}function $t(d){return this.select(d==null?Mt:vt(typeof d=="function"?d:(0,st.P)(d)))}var Gt=Array.prototype.filter;function ke(){return Array.from(this.children)}function yr(d){return function(){return Gt.call(this.children,d)}}function vn(d){return this.selectAll(d==null?ke:yr(typeof d=="function"?d:(0,st.P)(d)))}function ln(d){typeof d!="function"&&(d=(0,st.Z)(d));for(var _=this._groups,V=_.length,Y=new Array(V),z=0;z<V;++z)for(var J=_[z],dt=J.length,ct=Y[z]=[],wt,Tt=0;Tt<dt;++Tt)(wt=J[Tt])&&d.call(wt,wt.__data__,Tt,J)&&ct.push(wt);return new ae(Y,this._parents)}function fn(d){return new Array(d.length)}function He(){return new ae(this._enter||this._groups.map(fn),this._parents)}function ye(d,_){this.ownerDocument=d.ownerDocument,this.namespaceURI=d.namespaceURI,this._next=null,this._parent=d,this.__data__=_}ye.prototype={constructor:ye,appendChild:function(d){return this._parent.insertBefore(d,this._next)},insertBefore:function(d,_){return this._parent.insertBefore(d,_)},querySelector:function(d){return this._parent.querySelector(d)},querySelectorAll:function(d){return this._parent.querySelectorAll(d)}};function dn(d){return function(){return d}}function ie(d,_,V,Y,z,J){for(var dt=0,ct,wt=_.length,Tt=J.length;dt<Tt;++dt)(ct=_[dt])?(ct.__data__=J[dt],Y[dt]=ct):V[dt]=new ye(d,J[dt]);for(;dt<wt;++dt)(ct=_[dt])&&(z[dt]=ct)}function Sn(d,_,V,Y,z,J,dt){var ct,wt,Tt=new Map,Bt=_.length,ue=J.length,ve=new Array(Bt),pe;for(ct=0;ct<Bt;++ct)(wt=_[ct])&&(ve[ct]=pe=dt.call(wt,wt.__data__,ct,_)+"",Tt.has(pe)?z[ct]=wt:Tt.set(pe,wt));for(ct=0;ct<ue;++ct)pe=dt.call(d,J[ct],ct,J)+"",(wt=Tt.get(pe))?(Y[ct]=wt,wt.__data__=J[ct],Tt.delete(pe)):V[ct]=new ye(d,J[ct]);for(ct=0;ct<Bt;++ct)(wt=_[ct])&&Tt.get(ve[ct])===wt&&(z[ct]=wt)}function Ht(d){return d.__data__}function Lt(d,_){if(!arguments.length)return Array.from(this,Ht);var V=_?Sn:ie,Y=this._parents,z=this._groups;typeof d!="function"&&(d=dn(d));for(var J=z.length,dt=new Array(J),ct=new Array(J),wt=new Array(J),Tt=0;Tt<J;++Tt){var Bt=Y[Tt],ue=z[Tt],ve=ue.length,pe=xr(d.call(Bt,Bt&&Bt.__data__,Tt,Y)),le=pe.length,$e=ct[Tt]=new Array(le),jn=dt[Tt]=new Array(le),tr=wt[Tt]=new Array(ve);V(Bt,ue,$e,jn,tr,pe,_);for(var nn=0,rn=0,er,nr;nn<le;++nn)if(er=$e[nn]){for(nn>=rn&&(rn=nn+1);!(nr=jn[rn])&&++rn<le;);er._next=nr||null}}return dt=new ae(dt,Y),dt._enter=ct,dt._exit=wt,dt}function xr(d){return typeof d=="object"&&"length"in d?d:Array.from(d)}function wr(){return new ae(this._exit||this._groups.map(fn),this._parents)}function _r(d,_,V){var Y=this.enter(),z=this,J=this.exit();return typeof d=="function"?(Y=d(Y),Y&&(Y=Y.selection())):Y=Y.append(d+""),_!=null&&(z=_(z),z&&(z=z.selection())),V==null?J.remove():V(J),Y&&z?Y.merge(z).order():z}function Hr(d){for(var _=d.selection?d.selection():d,V=this._groups,Y=_._groups,z=V.length,J=Y.length,dt=Math.min(z,J),ct=new Array(z),wt=0;wt<dt;++wt)for(var Tt=V[wt],Bt=Y[wt],ue=Tt.length,ve=ct[wt]=new Array(ue),pe,le=0;le<ue;++le)(pe=Tt[le]||Bt[le])&&(ve[le]=pe);for(;wt<z;++wt)ct[wt]=V[wt];return new ae(ct,this._parents)}function Zr(){for(var d=this._groups,_=-1,V=d.length;++_<V;)for(var Y=d[_],z=Y.length-1,J=Y[z],dt;--z>=0;)(dt=Y[z])&&(J&&dt.compareDocumentPosition(J)^4&&J.parentNode.insertBefore(dt,J),J=dt);return this}function hn(d){d||(d=Ze);function _(ue,ve){return ue&&ve?d(ue.__data__,ve.__data__):!ue-!ve}for(var V=this._groups,Y=V.length,z=new Array(Y),J=0;J<Y;++J){for(var dt=V[J],ct=dt.length,wt=z[J]=new Array(ct),Tt,Bt=0;Bt<ct;++Bt)(Tt=dt[Bt])&&(wt[Bt]=Tt);wt.sort(_)}return new ae(z,this._parents).order()}function Ze(d,_){return d<_?-1:d>_?1:d>=_?0:NaN}function Vn(){var d=arguments[0];return arguments[0]=this,d.apply(null,arguments),this}function br(){return Array.from(this)}function Fn(){for(var d=this._groups,_=0,V=d.length;_<V;++_)for(var Y=d[_],z=0,J=Y.length;z<J;++z){var dt=Y[z];if(dt)return dt}return null}function Yn(){let d=0;for(const _ of this)++d;return d}function En(){return!this.node()}function Re(d){for(var _=this._groups,V=0,Y=_.length;V<Y;++V)for(var z=_[V],J=0,dt=z.length,ct;J<dt;++J)(ct=z[J])&&d.call(ct,ct.__data__,J,z);return this}var Nn=$(60021);function Cn(d){return function(){this.removeAttribute(d)}}function Mn(d){return function(){this.removeAttributeNS(d.space,d.local)}}function Ue(d,_){return function(){this.setAttribute(d,_)}}function Kn(d,_){return function(){this.setAttributeNS(d.space,d.local,_)}}function Vt(d,_){return function(){var V=_.apply(this,arguments);V==null?this.removeAttribute(d):this.setAttribute(d,V)}}function Ot(d,_){return function(){var V=_.apply(this,arguments);V==null?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,V)}}function vr(d,_){var V=(0,Nn.Z)(d);if(arguments.length<2){var Y=this.node();return V.local?Y.getAttributeNS(V.space,V.local):Y.getAttribute(V)}return this.each((_==null?V.local?Mn:Cn:typeof _=="function"?V.local?Ot:Vt:V.local?Kn:Ue)(V,_))}var Le=$(77932);function Lr(d){return function(){delete this[d]}}function xe(d,_){return function(){this[d]=_}}function Wn(d,_){return function(){var V=_.apply(this,arguments);V==null?delete this[d]:this[d]=V}}function we(d,_){return arguments.length>1?this.each((_==null?Lr:typeof _=="function"?Wn:xe)(d,_)):this.node()[d]}function Ge(d){return d.trim().split(/^|\s+/)}function ge(d){return d.classList||new Xr(d)}function Xr(d){this._node=d,this._names=Ge(d.getAttribute("class")||"")}Xr.prototype={add:function(d){var _=this._names.indexOf(d);_<0&&(this._names.push(d),this._node.setAttribute("class",this._names.join(" ")))},remove:function(d){var _=this._names.indexOf(d);_>=0&&(this._names.splice(_,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(d){return this._names.indexOf(d)>=0}};function Qe(d,_){for(var V=ge(d),Y=-1,z=_.length;++Y<z;)V.add(_[Y])}function An(d,_){for(var V=ge(d),Y=-1,z=_.length;++Y<z;)V.remove(_[Y])}function Sr(d){return function(){Qe(this,d)}}function Xe(d){return function(){An(this,d)}}function De(d,_){return function(){(_.apply(this,arguments)?Qe:An)(this,d)}}function qe(d,_){var V=Ge(d+"");if(arguments.length<2){for(var Y=ge(this.node()),z=-1,J=V.length;++z<J;)if(!Y.contains(V[z]))return!1;return!0}return this.each((typeof _=="function"?De:_?Sr:Xe)(V,_))}function Ie(){this.textContent=""}function Pn(d){return function(){this.textContent=d}}function at(d){return function(){var _=d.apply(this,arguments);this.textContent=_==null?"":_}}function Tn(d){return arguments.length?this.each(d==null?Ie:(typeof d=="function"?at:Pn)(d)):this.node().textContent}function Un(){this.innerHTML=""}function Ve(d){return function(){this.innerHTML=d}}function Je(d){return function(){var _=d.apply(this,arguments);this.innerHTML=_==null?"":_}}function kn(d){return arguments.length?this.each(d==null?Un:(typeof d=="function"?Je:Ve)(d)):this.node().innerHTML}function Fe(){this.nextSibling&&this.parentNode.appendChild(this)}function gn(){return this.each(Fe)}function _e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rn(){return this.each(_e)}var pn=$(17110);function Gn(d){return function(){var _=this.ownerDocument,V=this.namespaceURI;return V===pn.P&&_.documentElement.namespaceURI===pn.P?_.createElement(d):_.createElementNS(V,d)}}function Vr(d){return function(){return this.ownerDocument.createElementNS(d.space,d.local)}}function Dn(d){var _=(0,Nn.Z)(d);return(_.local?Vr:Gn)(_)}function In(d){var _=typeof d=="function"?d:Dn(d);return this.select(function(){return this.appendChild(_.apply(this,arguments))})}function Er(){return null}function zn(d,_){var V=typeof d=="function"?d:Dn(d),Y=_==null?Er:typeof _=="function"?_:(0,f.Z)(_);return this.select(function(){return this.insertBefore(V.apply(this,arguments),Y.apply(this,arguments)||null)})}function mn(){var d=this.parentNode;d&&d.removeChild(this)}function Qn(){return this.each(mn)}function Fr(){var d=this.cloneNode(!1),_=this.parentNode;return _?_.insertBefore(d,this.nextSibling):d}function Nr(){var d=this.cloneNode(!0),_=this.parentNode;return _?_.insertBefore(d,this.nextSibling):d}function yn(d){return this.select(d?Nr:Fr)}function qn(d){return arguments.length?this.property("__data__",d):this.node().__data__}function Jn(d){return function(_){d.call(this,_,this.__data__)}}function oo(d){return d.trim().split(/^|\s+/).map(function(_){var V="",Y=_.indexOf(".");return Y>=0&&(V=_.slice(Y+1),_=_.slice(0,Y)),{type:_,name:V}})}function xn(d){return function(){var _=this.__on;if(_){for(var V=0,Y=-1,z=_.length,J;V<z;++V)J=_[V],(!d.type||J.type===d.type)&&J.name===d.name?this.removeEventListener(J.type,J.listener,J.options):_[++Y]=J;++Y?_.length=Y:delete this.__on}}}function qt(d,_,V){return function(){var Y=this.__on,z,J=Jn(_);if(Y){for(var dt=0,ct=Y.length;dt<ct;++dt)if((z=Y[dt]).type===d.type&&z.name===d.name){this.removeEventListener(z.type,z.listener,z.options),this.addEventListener(z.type,z.listener=J,z.options=V),z.value=_;return}}this.addEventListener(d.type,J,V),z={type:d.type,name:d.name,value:_,listener:J,options:V},Y?Y.push(z):this.__on=[z]}}function Cr(d,_,V){var Y=oo(d+""),z,J=Y.length,dt;if(arguments.length<2){var ct=this.node().__on;if(ct){for(var wt=0,Tt=ct.length,Bt;wt<Tt;++wt)for(z=0,Bt=ct[wt];z<J;++z)if((dt=Y[z]).type===Bt.type&&dt.name===Bt.name)return Bt.value}return}for(ct=_?qt:xn,z=0;z<J;++z)this.each(ct(Y[z],_,V));return this}var Yr=$(4010);function Mr(d,_,V){var Y=(0,Yr.Z)(d),z=Y.CustomEvent;typeof z=="function"?z=new z(_,V):(z=Y.document.createEvent("Event"),V?(z.initEvent(_,V.bubbles,V.cancelable),z.detail=V.detail):z.initEvent(_,!1,!1)),d.dispatchEvent(z)}function je(d,_){return function(){return Mr(this,d,_)}}function ze(d,_){return function(){return Mr(this,d,_.apply(this,arguments))}}function se(d,_){return this.each((typeof _=="function"?ze:je)(d,_))}function*tn(){for(var d=this._groups,_=0,V=d.length;_<V;++_)for(var Y=d[_],z=0,J=Y.length,dt;z<J;++z)(dt=Y[z])&&(yield dt)}var Ar=[null];function ae(d,_){this._groups=d,this._parents=_}function ce(){return new ae([[document.documentElement]],Ar)}function Kr(){return this}ae.prototype=ce.prototype={constructor:ae,select:ot,selectAll:it,selectChild:$t,selectChildren:vn,filter:ln,data:Lt,enter:He,exit:wr,join:_r,merge:Hr,selection:Kr,order:Zr,sort:hn,call:Vn,nodes:br,node:Fn,size:Yn,empty:En,each:Re,attr:vr,style:Le.Z,property:we,classed:qe,text:Tn,html:kn,raise:gn,lower:Rn,append:In,insert:zn,remove:Qn,clone:yn,datum:qn,on:Cr,dispatch:se,[Symbol.iterator]:tn};var en=ce},77932:function(ft,ht,$){"use strict";$.d(ht,{S:function(){return it},Z:function(){return Ct}});var f=$(4010);function ot(st){return function(){this.style.removeProperty(st)}}function q(st,pt,vt){return function(){this.style.setProperty(st,pt,vt)}}function j(st,pt,vt){return function(){var Mt=pt.apply(this,arguments);Mt==null?this.style.removeProperty(st):this.style.setProperty(st,Mt,vt)}}function Ct(st,pt,vt){return arguments.length>1?this.each((pt==null?ot:typeof pt=="function"?j:q)(st,pt,vt==null?"":vt)):it(this.node(),st)}function it(st,pt){return st.style.getPropertyValue(pt)||(0,f.Z)(st).getComputedStyle(st,null).getPropertyValue(pt)}},66456:function(ft,ht,$){"use strict";$.d(ht,{Z:function(){return ot}});function f(){}function ot(q){return q==null?f:function(){return this.querySelector(q)}}},16851:function(ft,ht,$){"use strict";$.d(ht,{Z:function(){return ot}});function f(){return[]}function ot(q){return q==null?f:function(){return this.querySelectorAll(q)}}},4010:function(ft,ht,$){"use strict";$.d(ht,{Z:function(){return f}});function f(ot){return ot.ownerDocument&&ot.ownerDocument.defaultView||ot.document&&ot||ot.defaultView}},94237:function(ft,ht,$){"use strict";$.d(ht,{sP:function(){return ni},CR:function(){return Zn}});var f=$(64546),ot=$(49289),q=1e-12;function j(n){return((n=Math.exp(n))+1/n)/2}function Ct(n){return((n=Math.exp(n))-1/n)/2}function it(n){return((n=Math.exp(2*n))-1)/(n+1)}var st=function n(o,a,g){function w(b,x){var P=b[0],O=b[1],Z=b[2],X=x[0],ut=x[1],mt=x[2],Nt=X-P,re=ut-O,Kt=Nt*Nt+re*re,me,At;if(Kt<q)At=Math.log(mt/Z)/o,me=function(_n){return[P+_n*Nt,O+_n*re,Z*Math.exp(o*_n*At)]};else{var an=Math.sqrt(Kt),Ke=(mt*mt-Z*Z+g*Kt)/(2*Z*a*an),wn=(mt*mt-Z*Z-g*Kt)/(2*mt*a*an),cn=Math.log(Math.sqrt(Ke*Ke+1)-Ke),Ee=Math.log(Math.sqrt(wn*wn+1)-wn);At=(Ee-cn)/o,me=function(_n){var Dr=_n*At,Ir=j(cn),ar=Z/(a*an)*(Ir*it(o*Dr+cn)-Ct(cn));return[P+ar*Nt,O+ar*re,Z*Ir/j(o*Dr+cn)]}}return me.duration=At*1e3*o/Math.SQRT2,me}return w.rho=function(b){var x=Math.max(.001,+b),P=x*x,O=P*P;return n(x,P,O)},w}(Math.SQRT2,2,4),pt=$(41468),vt=$(13802),Mt=$(1776),$t=0,Gt=0,ke=0,yr=1e3,vn,ln,fn=0,He=0,ye=0,dn=typeof performance=="object"&&performance.now?performance:Date,ie=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Sn(){return He||(ie(Ht),He=dn.now()+ye)}function Ht(){He=0}function Lt(){this._call=this._time=this._next=null}Lt.prototype=xr.prototype={constructor:Lt,restart:function(n,o,a){if(typeof n!="function")throw new TypeError("callback is not a function");a=(a==null?Sn():+a)+(o==null?0:+o),!this._next&&ln!==this&&(ln?ln._next=this:vn=this,ln=this),this._call=n,this._time=a,hn()},stop:function(){this._call&&(this._call=null,this._time=1/0,hn())}};function xr(n,o,a){var g=new Lt;return g.restart(n,o,a),g}function wr(){Sn(),++$t;for(var n=vn,o;n;)(o=He-n._time)>=0&&n._call.call(void 0,o),n=n._next;--$t}function _r(){He=(fn=dn.now())+ye,$t=Gt=0;try{wr()}finally{$t=0,Zr(),He=0}}function Hr(){var n=dn.now(),o=n-fn;o>yr&&(ye-=o,fn=n)}function Zr(){for(var n,o=vn,a,g=1/0;o;)o._call?(g>o._time&&(g=o._time),n=o,o=o._next):(a=o._next,o._next=null,o=n?n._next=a:vn=a);ln=n,hn(g)}function hn(n){if(!$t){Gt&&(Gt=clearTimeout(Gt));var o=n-He;o>24?(n<1/0&&(Gt=setTimeout(_r,n-dn.now()-ye)),ke&&(ke=clearInterval(ke))):(ke||(fn=dn.now(),ke=setInterval(Hr,yr)),$t=1,ie(_r))}}function Ze(n,o,a){var g=new Lt;return o=o==null?0:+o,g.restart(w=>{g.stop(),n(w+o)},o,a),g}var Vn=(0,f.Z)("start","end","cancel","interrupt"),br=[],Fn=0,Yn=1,En=2,Re=3,Nn=4,Cn=5,Mn=6;function Ue(n,o,a,g,w,b){var x=n.__transition;if(!x)n.__transition={};else if(a in x)return;vr(n,a,{name:o,index:g,group:w,on:Vn,tween:br,time:b.time,delay:b.delay,duration:b.duration,ease:b.ease,timer:null,state:Fn})}function Kn(n,o){var a=Ot(n,o);if(a.state>Fn)throw new Error("too late; already scheduled");return a}function Vt(n,o){var a=Ot(n,o);if(a.state>Re)throw new Error("too late; already running");return a}function Ot(n,o){var a=n.__transition;if(!a||!(a=a[o]))throw new Error("transition not found");return a}function vr(n,o,a){var g=n.__transition,w;g[o]=a,a.timer=xr(b,0,a.time);function b(Z){a.state=Yn,a.timer.restart(x,a.delay,a.time),a.delay<=Z&&x(Z-a.delay)}function x(Z){var X,ut,mt,Nt;if(a.state!==Yn)return O();for(X in g)if(Nt=g[X],Nt.name===a.name){if(Nt.state===Re)return Ze(x);Nt.state===Nn?(Nt.state=Mn,Nt.timer.stop(),Nt.on.call("interrupt",n,n.__data__,Nt.index,Nt.group),delete g[X]):+X<o&&(Nt.state=Mn,Nt.timer.stop(),Nt.on.call("cancel",n,n.__data__,Nt.index,Nt.group),delete g[X])}if(Ze(function(){a.state===Re&&(a.state=Nn,a.timer.restart(P,a.delay,a.time),P(Z))}),a.state=En,a.on.call("start",n,n.__data__,a.index,a.group),a.state===En){for(a.state=Re,w=new Array(mt=a.tween.length),X=0,ut=-1;X<mt;++X)(Nt=a.tween[X].value.call(n,n.__data__,a.index,a.group))&&(w[++ut]=Nt);w.length=ut+1}}function P(Z){for(var X=Z<a.duration?a.ease.call(null,Z/a.duration):(a.timer.restart(O),a.state=Cn,1),ut=-1,mt=w.length;++ut<mt;)w[ut].call(n,X);a.state===Cn&&(a.on.call("end",n,n.__data__,a.index,a.group),O())}function O(){a.state=Mn,a.timer.stop(),delete g[o];for(var Z in g)return;delete n.__transition}}function Le(n,o){var a=n.__transition,g,w,b=!0,x;if(a){o=o==null?null:o+"";for(x in a){if((g=a[x]).name!==o){b=!1;continue}w=g.state>En&&g.state<Cn,g.state=Mn,g.timer.stop(),g.on.call(w?"interrupt":"cancel",n,n.__data__,g.index,g.group),delete a[x]}b&&delete n.__transition}}function Lr(n){return this.each(function(){Le(this,n)})}function xe(n,o){return n=+n,o=+o,function(a){return n*(1-a)+o*a}}var Wn=180/Math.PI,we={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ge(n,o,a,g,w,b){var x,P,O;return(x=Math.sqrt(n*n+o*o))&&(n/=x,o/=x),(O=n*a+o*g)&&(a-=n*O,g-=o*O),(P=Math.sqrt(a*a+g*g))&&(a/=P,g/=P,O/=P),n*g<o*a&&(n=-n,o=-o,O=-O,x=-x),{translateX:w,translateY:b,rotate:Math.atan2(o,n)*Wn,skewX:Math.atan(O)*Wn,scaleX:x,scaleY:P}}var ge;function Xr(n){var o=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return o.isIdentity?we:Ge(o.a,o.b,o.c,o.d,o.e,o.f)}function Qe(n){return n==null||(ge||(ge=document.createElementNS("http://www.w3.org/2000/svg","g")),ge.setAttribute("transform",n),!(n=ge.transform.baseVal.consolidate()))?we:(n=n.matrix,Ge(n.a,n.b,n.c,n.d,n.e,n.f))}function An(n,o,a,g){function w(Z){return Z.length?Z.pop()+" ":""}function b(Z,X,ut,mt,Nt,re){if(Z!==ut||X!==mt){var Kt=Nt.push("translate(",null,o,null,a);re.push({i:Kt-4,x:xe(Z,ut)},{i:Kt-2,x:xe(X,mt)})}else(ut||mt)&&Nt.push("translate("+ut+o+mt+a)}function x(Z,X,ut,mt){Z!==X?(Z-X>180?X+=360:X-Z>180&&(Z+=360),mt.push({i:ut.push(w(ut)+"rotate(",null,g)-2,x:xe(Z,X)})):X&&ut.push(w(ut)+"rotate("+X+g)}function P(Z,X,ut,mt){Z!==X?mt.push({i:ut.push(w(ut)+"skewX(",null,g)-2,x:xe(Z,X)}):X&&ut.push(w(ut)+"skewX("+X+g)}function O(Z,X,ut,mt,Nt,re){if(Z!==ut||X!==mt){var Kt=Nt.push(w(Nt)+"scale(",null,",",null,")");re.push({i:Kt-4,x:xe(Z,ut)},{i:Kt-2,x:xe(X,mt)})}else(ut!==1||mt!==1)&&Nt.push(w(Nt)+"scale("+ut+","+mt+")")}return function(Z,X){var ut=[],mt=[];return Z=n(Z),X=n(X),b(Z.translateX,Z.translateY,X.translateX,X.translateY,ut,mt),x(Z.rotate,X.rotate,ut,mt),P(Z.skewX,X.skewX,ut,mt),O(Z.scaleX,Z.scaleY,X.scaleX,X.scaleY,ut,mt),Z=X=null,function(Nt){for(var re=-1,Kt=mt.length,me;++re<Kt;)ut[(me=mt[re]).i]=me.x(Nt);return ut.join("")}}}var Sr=An(Xr,"px, ","px)","deg)"),Xe=An(Qe,", ",")",")"),De=$(60021);function qe(n,o){var a,g;return function(){var w=Vt(this,n),b=w.tween;if(b!==a){g=a=b;for(var x=0,P=g.length;x<P;++x)if(g[x].name===o){g=g.slice(),g.splice(x,1);break}}w.tween=g}}function Ie(n,o,a){var g,w;if(typeof a!="function")throw new Error;return function(){var b=Vt(this,n),x=b.tween;if(x!==g){w=(g=x).slice();for(var P={name:o,value:a},O=0,Z=w.length;O<Z;++O)if(w[O].name===o){w[O]=P;break}O===Z&&w.push(P)}b.tween=w}}function Pn(n,o){var a=this._id;if(n+="",arguments.length<2){for(var g=Ot(this.node(),a).tween,w=0,b=g.length,x;w<b;++w)if((x=g[w]).name===n)return x.value;return null}return this.each((o==null?qe:Ie)(a,n,o))}function at(n,o,a){var g=n._id;return n.each(function(){var w=Vt(this,g);(w.value||(w.value={}))[o]=a.apply(this,arguments)}),function(w){return Ot(w,g).value[o]}}function Tn(n,o,a){n.prototype=o.prototype=a,a.constructor=n}function Un(n,o){var a=Object.create(n.prototype);for(var g in o)a[g]=o[g];return a}function Ve(){}var Je=.7,kn=1/Je,Fe="\\s*([+-]?\\d+)\\s*",gn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rn=/^#([0-9a-f]{3,8})$/,pn=new RegExp("^rgb\\(".concat(Fe,",").concat(Fe,",").concat(Fe,"\\)$")),Gn=new RegExp("^rgb\\(".concat(_e,",").concat(_e,",").concat(_e,"\\)$")),Vr=new RegExp("^rgba\\(".concat(Fe,",").concat(Fe,",").concat(Fe,",").concat(gn,"\\)$")),Dn=new RegExp("^rgba\\(".concat(_e,",").concat(_e,",").concat(_e,",").concat(gn,"\\)$")),In=new RegExp("^hsl\\(".concat(gn,",").concat(_e,",").concat(_e,"\\)$")),Er=new RegExp("^hsla\\(".concat(gn,",").concat(_e,",").concat(_e,",").concat(gn,"\\)$")),zn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tn(Ve,yn,{copy:function(o){return Object.assign(new this.constructor,this,o)},displayable:function(){return this.rgb().displayable()},hex:mn,formatHex:mn,formatHex8:Qn,formatHsl:Fr,formatRgb:Nr,toString:Nr});function mn(){return this.rgb().formatHex()}function Qn(){return this.rgb().formatHex8()}function Fr(){return Ar(this).formatHsl()}function Nr(){return this.rgb().formatRgb()}function yn(n){var o,a;return n=(n+"").trim().toLowerCase(),(o=Rn.exec(n))?(a=o[1].length,o=parseInt(o[1],16),a===6?qn(o):a===3?new qt(o>>8&15|o>>4&240,o>>4&15|o&240,(o&15)<<4|o&15,1):a===8?Jn(o>>24&255,o>>16&255,o>>8&255,(o&255)/255):a===4?Jn(o>>12&15|o>>8&240,o>>8&15|o>>4&240,o>>4&15|o&240,((o&15)<<4|o&15)/255):null):(o=pn.exec(n))?new qt(o[1],o[2],o[3],1):(o=Gn.exec(n))?new qt(o[1]*255/100,o[2]*255/100,o[3]*255/100,1):(o=Vr.exec(n))?Jn(o[1],o[2],o[3],o[4]):(o=Dn.exec(n))?Jn(o[1]*255/100,o[2]*255/100,o[3]*255/100,o[4]):(o=In.exec(n))?tn(o[1],o[2]/100,o[3]/100,1):(o=Er.exec(n))?tn(o[1],o[2]/100,o[3]/100,o[4]):zn.hasOwnProperty(n)?qn(zn[n]):n==="transparent"?new qt(NaN,NaN,NaN,0):null}function qn(n){return new qt(n>>16&255,n>>8&255,n&255,1)}function Jn(n,o,a,g){return g<=0&&(n=o=a=NaN),new qt(n,o,a,g)}function oo(n){return n instanceof Ve||(n=yn(n)),n?(n=n.rgb(),new qt(n.r,n.g,n.b,n.opacity)):new qt}function xn(n,o,a,g){return arguments.length===1?oo(n):new qt(n,o,a,g==null?1:g)}function qt(n,o,a,g){this.r=+n,this.g=+o,this.b=+a,this.opacity=+g}Tn(qt,xn,Un(Ve,{brighter:function(o){return o=o==null?kn:Math.pow(kn,o),new qt(this.r*o,this.g*o,this.b*o,this.opacity)},darker:function(o){return o=o==null?Je:Math.pow(Je,o),new qt(this.r*o,this.g*o,this.b*o,this.opacity)},rgb:function(){return this},clamp:function(){return new qt(ze(this.r),ze(this.g),ze(this.b),je(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cr,formatHex:Cr,formatHex8:Yr,formatRgb:Mr,toString:Mr}));function Cr(){return"#".concat(se(this.r)).concat(se(this.g)).concat(se(this.b))}function Yr(){return"#".concat(se(this.r)).concat(se(this.g)).concat(se(this.b)).concat(se((isNaN(this.opacity)?1:this.opacity)*255))}function Mr(){var n=je(this.opacity);return"".concat(n===1?"rgb(":"rgba(").concat(ze(this.r),", ").concat(ze(this.g),", ").concat(ze(this.b)).concat(n===1?")":", ".concat(n,")"))}function je(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ze(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function se(n){return n=ze(n),(n<16?"0":"")+n.toString(16)}function tn(n,o,a,g){return g<=0?n=o=a=NaN:a<=0||a>=1?n=o=NaN:o<=0&&(n=NaN),new ce(n,o,a,g)}function Ar(n){if(n instanceof ce)return new ce(n.h,n.s,n.l,n.opacity);if(n instanceof Ve||(n=yn(n)),!n)return new ce;if(n instanceof ce)return n;n=n.rgb();var o=n.r/255,a=n.g/255,g=n.b/255,w=Math.min(o,a,g),b=Math.max(o,a,g),x=NaN,P=b-w,O=(b+w)/2;return P?(o===b?x=(a-g)/P+(a<g)*6:a===b?x=(g-o)/P+2:x=(o-a)/P+4,P/=O<.5?b+w:2-b-w,x*=60):P=O>0&&O<1?0:x,new ce(x,P,O,n.opacity)}function ae(n,o,a,g){return arguments.length===1?Ar(n):new ce(n,o,a,g==null?1:g)}function ce(n,o,a,g){this.h=+n,this.s=+o,this.l=+a,this.opacity=+g}Tn(ce,ae,Un(Ve,{brighter:function(o){return o=o==null?kn:Math.pow(kn,o),new ce(this.h,this.s,this.l*o,this.opacity)},darker:function(o){return o=o==null?Je:Math.pow(Je,o),new ce(this.h,this.s,this.l*o,this.opacity)},rgb:function(){var o=this.h%360+(this.h<0)*360,a=isNaN(o)||isNaN(this.s)?0:this.s,g=this.l,w=g+(g<.5?g:1-g)*a,b=2*g-w;return new qt(d(o>=240?o-240:o+120,b,w),d(o,b,w),d(o<120?o+240:o-120,b,w),this.opacity)},clamp:function(){return new ce(Kr(this.h),en(this.s),en(this.l),je(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var o=je(this.opacity);return"".concat(o===1?"hsl(":"hsla(").concat(Kr(this.h),", ").concat(en(this.s)*100,"%, ").concat(en(this.l)*100,"%").concat(o===1?")":", ".concat(o,")"))}}));function Kr(n){return n=(n||0)%360,n<0?n+360:n}function en(n){return Math.max(0,Math.min(1,n||0))}function d(n,o,a){return(n<60?o+(a-o)*n/60:n<180?a:n<240?o+(a-o)*(240-n)/60:o)*255}function _(n,o,a,g,w){var b=n*n,x=b*n;return((1-3*n+3*b-x)*o+(4-6*b+3*x)*a+(1+3*n+3*b-3*x)*g+x*w)/6}function V(n){var o=n.length-1;return function(a){var g=a<=0?a=0:a>=1?(a=1,o-1):Math.floor(a*o),w=n[g],b=n[g+1],x=g>0?n[g-1]:2*w-b,P=g<o-1?n[g+2]:2*b-w;return _((a-g/o)*o,x,w,b,P)}}function Y(n){var o=n.length;return function(a){var g=Math.floor(((a%=1)<0?++a:a)*o),w=n[(g+o-1)%o],b=n[g%o],x=n[(g+1)%o],P=n[(g+2)%o];return _((a-g/o)*o,w,b,x,P)}}var z=function(n){return function(){return n}};function J(n,o){return function(a){return n+a*o}}function dt(n,o,a){return n=Math.pow(n,a),o=Math.pow(o,a)-n,a=1/a,function(g){return Math.pow(n+g*o,a)}}function ct(n,o){var a=o-n;return a?J(n,a>180||a<-180?a-360*Math.round(a/360):a):constant(isNaN(n)?o:n)}function wt(n){return(n=+n)==1?Tt:function(o,a){return a-o?dt(o,a,n):z(isNaN(o)?a:o)}}function Tt(n,o){var a=o-n;return a?J(n,a):z(isNaN(n)?o:n)}var Bt=function n(o){var a=wt(o);function g(w,b){var x=a((w=xn(w)).r,(b=xn(b)).r),P=a(w.g,b.g),O=a(w.b,b.b),Z=Tt(w.opacity,b.opacity);return function(X){return w.r=x(X),w.g=P(X),w.b=O(X),w.opacity=Z(X),w+""}}return g.gamma=n,g}(1);function ue(n){return function(o){var a=o.length,g=new Array(a),w=new Array(a),b=new Array(a),x,P;for(x=0;x<a;++x)P=xn(o[x]),g[x]=P.r||0,w[x]=P.g||0,b[x]=P.b||0;return g=n(g),w=n(w),b=n(b),P.opacity=1,function(O){return P.r=g(O),P.g=w(O),P.b=b(O),P+""}}}var ve=ue(V),pe=ue(Y),le=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$e=new RegExp(le.source,"g");function jn(n){return function(){return n}}function tr(n){return function(o){return n(o)+""}}function nn(n,o){var a=le.lastIndex=$e.lastIndex=0,g,w,b,x=-1,P=[],O=[];for(n=n+"",o=o+"";(g=le.exec(n))&&(w=$e.exec(o));)(b=w.index)>a&&(b=o.slice(a,b),P[x]?P[x]+=b:P[++x]=b),(g=g[0])===(w=w[0])?P[x]?P[x]+=w:P[++x]=w:(P[++x]=null,O.push({i:x,x:xe(g,w)})),a=$e.lastIndex;return a<o.length&&(b=o.slice(a),P[x]?P[x]+=b:P[++x]=b),P.length<2?O[0]?tr(O[0].x):jn(o):(o=O.length,function(Z){for(var X=0,ut;X<o;++X)P[(ut=O[X]).i]=ut.x(Z);return P.join("")})}function rn(n,o){var a;return(typeof o=="number"?xe:o instanceof yn?Bt:(a=yn(o))?(o=a,Bt):nn)(n,o)}function er(n){return function(){this.removeAttribute(n)}}function nr(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Wr(n,o,a){var g,w=a+"",b;return function(){var x=this.getAttribute(n);return x===w?null:x===g?b:b=o(g=x,a)}}function Mo(n,o,a){var g,w=a+"",b;return function(){var x=this.getAttributeNS(n.space,n.local);return x===w?null:x===g?b:b=o(g=x,a)}}function Pr(n,o,a){var g,w,b;return function(){var x,P=a(this),O;return P==null?void this.removeAttribute(n):(x=this.getAttribute(n),O=P+"",x===O?null:x===g&&O===w?b:(w=O,b=o(g=x,P)))}}function Ao(n,o,a){var g,w,b;return function(){var x,P=a(this),O;return P==null?void this.removeAttributeNS(n.space,n.local):(x=this.getAttributeNS(n.space,n.local),O=P+"",x===O?null:x===g&&O===w?b:(w=O,b=o(g=x,P)))}}function io(n,o){var a=(0,De.Z)(n),g=a==="transform"?Xe:rn;return this.attrTween(n,typeof o=="function"?(a.local?Ao:Pr)(a,g,at(this,"attr."+n,o)):o==null?(a.local?nr:er)(a):(a.local?Mo:Wr)(a,g,o))}function Po(n,o){return function(a){this.setAttribute(n,o.call(this,a))}}function To(n,o){return function(a){this.setAttributeNS(n.space,n.local,o.call(this,a))}}function ko(n,o){var a,g;function w(){var b=o.apply(this,arguments);return b!==g&&(a=(g=b)&&To(n,b)),a}return w._value=o,w}function $n(n,o){var a,g;function w(){var b=o.apply(this,arguments);return b!==g&&(a=(g=b)&&Po(n,b)),a}return w._value=o,w}function Rt(n,o){var a="attr."+n;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(o==null)return this.tween(a,null);if(typeof o!="function")throw new Error;var g=(0,De.Z)(n);return this.tween(a,(g.local?ko:$n)(g,o))}function Ro(n,o){return function(){Kn(this,n).delay=+o.apply(this,arguments)}}function so(n,o){return o=+o,function(){Kn(this,n).delay=o}}function Do(n){var o=this._id;return arguments.length?this.each((typeof n=="function"?Ro:so)(o,n)):Ot(this.node(),o).delay}function ao(n,o){return function(){Vt(this,n).duration=+o.apply(this,arguments)}}function co(n,o){return o=+o,function(){Vt(this,n).duration=o}}function Io(n){var o=this._id;return arguments.length?this.each((typeof n=="function"?ao:co)(o,n)):Ot(this.node(),o).duration}function zo(n,o){if(typeof o!="function")throw new Error;return function(){Vt(this,n).ease=o}}function $o(n){var o=this._id;return arguments.length?this.each(zo(o,n)):Ot(this.node(),o).ease}function Oo(n,o){return function(){var a=o.apply(this,arguments);if(typeof a!="function")throw new Error;Vt(this,n).ease=a}}function rr(n){if(typeof n!="function")throw new Error;return this.each(Oo(this._id,n))}var uo=$(73409);function lo(n){typeof n!="function"&&(n=(0,uo.Z)(n));for(var o=this._groups,a=o.length,g=new Array(a),w=0;w<a;++w)for(var b=o[w],x=b.length,P=g[w]=[],O,Z=0;Z<x;++Z)(O=b[Z])&&n.call(O,O.__data__,Z,b)&&P.push(O);return new Se(g,this._parents,this._name,this._id)}function fo(n){if(n._id!==this._id)throw new Error;for(var o=this._groups,a=n._groups,g=o.length,w=a.length,b=Math.min(g,w),x=new Array(g),P=0;P<b;++P)for(var O=o[P],Z=a[P],X=O.length,ut=x[P]=new Array(X),mt,Nt=0;Nt<X;++Nt)(mt=O[Nt]||Z[Nt])&&(ut[Nt]=mt);for(;P<g;++P)x[P]=o[P];return new Se(x,this._parents,this._name,this._id)}function ho(n){return(n+"").trim().split(/^|\s+/).every(function(o){var a=o.indexOf(".");return a>=0&&(o=o.slice(0,a)),!o||o==="start"})}function Ur(n,o,a){var g,w,b=ho(o)?Kn:Vt;return function(){var x=b(this,n),P=x.on;P!==g&&(w=(g=P).copy()).on(o,a),x.on=w}}function go(n,o){var a=this._id;return arguments.length<2?Ot(this.node(),a).on.on(n):this.each(Ur(a,n,o))}function Bo(n){return function(){var o=this.parentNode;for(var a in this.__transition)if(+a!==n)return;o&&o.removeChild(this)}}function Ho(){return this.on("end.remove",Bo(this._id))}var Tr=$(66456);function On(n){var o=this._name,a=this._id;typeof n!="function"&&(n=(0,Tr.Z)(n));for(var g=this._groups,w=g.length,b=new Array(w),x=0;x<w;++x)for(var P=g[x],O=P.length,Z=b[x]=new Array(O),X,ut,mt=0;mt<O;++mt)(X=P[mt])&&(ut=n.call(X,X.__data__,mt,P))&&("__data__"in X&&(ut.__data__=X.__data__),Z[mt]=ut,Ue(Z[mt],o,a,mt,Z,Ot(X,a)));return new Se(b,this._parents,o,a)}var Zo=$(16851);function Lo(n){var o=this._name,a=this._id;typeof n!="function"&&(n=(0,Zo.Z)(n));for(var g=this._groups,w=g.length,b=[],x=[],P=0;P<w;++P)for(var O=g[P],Z=O.length,X,ut=0;ut<Z;++ut)if(X=O[ut]){for(var mt=n.call(X,X.__data__,ut,O),Nt,re=Ot(X,a),Kt=0,me=mt.length;Kt<me;++Kt)(Nt=mt[Kt])&&Ue(Nt,o,a,Kt,mt,re);b.push(mt),x.push(X)}return new Se(b,x,o,a)}var Xo=Mt.ZP.prototype.constructor;function Gr(){return new Xo(this._groups,this._parents)}var or=$(77932);function Vo(n,o){var a,g,w;return function(){var b=(0,or.S)(this,n),x=(this.style.removeProperty(n),(0,or.S)(this,n));return b===x?null:b===a&&x===g?w:w=o(a=b,g=x)}}function po(n){return function(){this.style.removeProperty(n)}}function Qr(n,o,a){var g,w=a+"",b;return function(){var x=(0,or.S)(this,n);return x===w?null:x===g?b:b=o(g=x,a)}}function Fo(n,o,a){var g,w,b;return function(){var x=(0,or.S)(this,n),P=a(this),O=P+"";return P==null&&(O=P=(this.style.removeProperty(n),(0,or.S)(this,n))),x===O?null:x===g&&O===w?b:(w=O,b=o(g=x,P))}}function kr(n,o){var a,g,w,b="style."+o,x="end."+b,P;return function(){var O=Vt(this,n),Z=O.on,X=O.value[b]==null?P||(P=po(o)):void 0;(Z!==a||w!==X)&&(g=(a=Z).copy()).on(x,w=X),O.on=g}}function Bn(n,o,a){var g=(n+="")=="transform"?Sr:rn;return o==null?this.styleTween(n,Vo(n,g)).on("end.style."+n,po(n)):typeof o=="function"?this.styleTween(n,Fo(n,g,at(this,"style."+n,o))).each(kr(this._id,n)):this.styleTween(n,Qr(n,g,o),a).on("end.style."+n,null)}function mo(n,o,a){return function(g){this.style.setProperty(n,o.call(this,g),a)}}function yo(n,o,a){var g,w;function b(){var x=o.apply(this,arguments);return x!==w&&(g=(w=x)&&mo(n,x,a)),g}return b._value=o,b}function Yo(n,o,a){var g="style."+(n+="");if(arguments.length<2)return(g=this.tween(g))&&g._value;if(o==null)return this.tween(g,null);if(typeof o!="function")throw new Error;return this.tween(g,yo(n,o,a==null?"":a))}function Ko(n){return function(){this.textContent=n}}function Wo(n){return function(){var o=n(this);this.textContent=o==null?"":o}}function Uo(n){return this.tween("text",typeof n=="function"?Wo(at(this,"text",n)):Ko(n==null?"":n+""))}function xo(n){return function(o){this.textContent=n.call(this,o)}}function wo(n){var o,a;function g(){var w=n.apply(this,arguments);return w!==a&&(o=(a=w)&&xo(w)),o}return g._value=n,g}function _o(n){var o="text";if(arguments.length<1)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,wo(n))}function Go(){for(var n=this._name,o=this._id,a=qr(),g=this._groups,w=g.length,b=0;b<w;++b)for(var x=g[b],P=x.length,O,Z=0;Z<P;++Z)if(O=x[Z]){var X=Ot(O,o);Ue(O,n,a,Z,x,{time:X.time+X.delay+X.duration,delay:0,duration:X.duration,ease:X.ease})}return new Se(g,this._parents,n,a)}function on(){var n,o,a=this,g=a._id,w=a.size();return new Promise(function(b,x){var P={value:x},O={value:function(){--w===0&&b()}};a.each(function(){var Z=Vt(this,g),X=Z.on;X!==n&&(o=(n=X).copy(),o._.cancel.push(P),o._.interrupt.push(P),o._.end.push(O)),Z.on=o}),w===0&&b()})}var Hn=0;function Se(n,o,a,g){this._groups=n,this._parents=o,this._name=a,this._id=g}function Qo(n){return(0,Mt.ZP)().transition(n)}function qr(){return++Hn}var Oe=Mt.ZP.prototype;Se.prototype=Qo.prototype={constructor:Se,select:On,selectAll:Lo,selectChild:Oe.selectChild,selectChildren:Oe.selectChildren,filter:lo,merge:fo,selection:Gr,transition:Go,call:Oe.call,nodes:Oe.nodes,node:Oe.node,size:Oe.size,empty:Oe.empty,each:Oe.each,on:go,attr:io,attrTween:Rt,style:Bn,styleTween:Yo,text:Uo,textTween:_o,remove:Ho,tween:Pn,delay:Do,duration:Io,ease:$o,easeVarying:rr,end:on,[Symbol.iterator]:Oe[Symbol.iterator]};function qo(n){return n*n*n}function ui(n){return--n*n*n+1}function Jo(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var bo={time:null,delay:0,duration:250,ease:Jo};function Jr(n,o){for(var a;!(a=n.__transition)||!(a=a[o]);)if(!(n=n.parentNode))throw new Error(`transition ${o} not found`);return a}function vo(n){var o,a;n instanceof Se?(o=n._id,n=n._name):(o=qr(),(a=bo).time=Sn(),n=n==null?null:n+"");for(var g=this._groups,w=g.length,b=0;b<w;++b)for(var x=g[b],P=x.length,O,Z=0;Z<P;++Z)(O=x[Z])&&Ue(O,n,o,Z,x,a||Jr(O,o));return new Se(g,this._parents,n,o)}Mt.ZP.prototype.interrupt=Lr,Mt.ZP.prototype.transition=vo;var sn=n=>()=>n;function jr(n,{sourceEvent:o,target:a,transform:g,dispatch:w}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:g,enumerable:!0,configurable:!0},_:{value:w}})}function Ye(n,o,a){this.k=n,this.x=o,this.y=a}Ye.prototype={constructor:Ye,scale:function(n){return n===1?this:new Ye(this.k*n,this.x,this.y)},translate:function(n,o){return n===0&o===0?this:new Ye(this.k,this.x+this.k*n,this.y+this.k*o)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zn=new Ye(1,0,0);So.prototype=Ye.prototype;function So(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Zn;return n.__zoom}function Rr(n){n.stopImmediatePropagation()}function Be(n){n.preventDefault(),n.stopImmediatePropagation()}function ir(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function jo(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function Eo(){return this.__zoom||Zn}function ti(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function ei(){return navigator.maxTouchPoints||"ontouchstart"in this}function No(n,o,a){var g=n.invertX(o[0][0])-a[0][0],w=n.invertX(o[1][0])-a[1][0],b=n.invertY(o[0][1])-a[0][1],x=n.invertY(o[1][1])-a[1][1];return n.translate(w>g?(g+w)/2:Math.min(0,g)||Math.max(0,w),x>b?(b+x)/2:Math.min(0,b)||Math.max(0,x))}function ni(){var n=ir,o=jo,a=No,g=ti,w=ei,b=[0,1/0],x=[[-1/0,-1/0],[1/0,1/0]],P=250,O=st,Z=(0,f.Z)("start","zoom","end"),X,ut,mt,Nt=500,re=150,Kt=0,me=10;function At(M){M.property("__zoom",Eo).on("wheel.zoom",_n,{passive:!1}).on("mousedown.zoom",Dr).on("dblclick.zoom",Ir).filter(w).on("touchstart.zoom",ar).on("touchmove.zoom",ri).on("touchend.zoom touchcancel.zoom",oi).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}At.transform=function(M,gt,L,_t){var kt=M.selection?M.selection():M;kt.property("__zoom",Eo),M!==kt?cn(M,gt,L,_t):kt.interrupt().each(function(){Ee(this,arguments).event(_t).start().zoom(null,typeof gt=="function"?gt.apply(this,arguments):gt).end()})},At.scaleBy=function(M,gt,L,_t){At.scaleTo(M,function(){var kt=this.__zoom.k,It=typeof gt=="function"?gt.apply(this,arguments):gt;return kt*It},L,_t)},At.scaleTo=function(M,gt,L,_t){At.transform(M,function(){var kt=o.apply(this,arguments),It=this.__zoom,zt=L==null?wn(kt):typeof L=="function"?L.apply(this,arguments):L,Xt=It.invert(zt),Wt=typeof gt=="function"?gt.apply(this,arguments):gt;return a(Ke(an(It,Wt),zt,Xt),kt,x)},L,_t)},At.translateBy=function(M,gt,L,_t){At.transform(M,function(){return a(this.__zoom.translate(typeof gt=="function"?gt.apply(this,arguments):gt,typeof L=="function"?L.apply(this,arguments):L),o.apply(this,arguments),x)},null,_t)},At.translateTo=function(M,gt,L,_t,kt){At.transform(M,function(){var It=o.apply(this,arguments),zt=this.__zoom,Xt=_t==null?wn(It):typeof _t=="function"?_t.apply(this,arguments):_t;return a(Zn.translate(Xt[0],Xt[1]).scale(zt.k).translate(typeof gt=="function"?-gt.apply(this,arguments):-gt,typeof L=="function"?-L.apply(this,arguments):-L),It,x)},_t,kt)};function an(M,gt){return gt=Math.max(b[0],Math.min(b[1],gt)),gt===M.k?M:new Ye(gt,M.x,M.y)}function Ke(M,gt,L){var _t=gt[0]-L[0]*M.k,kt=gt[1]-L[1]*M.k;return _t===M.x&&kt===M.y?M:new Ye(M.k,_t,kt)}function wn(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function cn(M,gt,L,_t){M.on("start.zoom",function(){Ee(this,arguments).event(_t).start()}).on("interrupt.zoom end.zoom",function(){Ee(this,arguments).event(_t).end()}).tween("zoom",function(){var kt=this,It=arguments,zt=Ee(kt,It).event(_t),Xt=o.apply(kt,It),Wt=L==null?wn(Xt):typeof L=="function"?L.apply(kt,It):L,Ne=Math.max(Xt[1][0]-Xt[0][0],Xt[1][1]-Xt[0][1]),Jt=kt.__zoom,Ce=typeof gt=="function"?gt.apply(kt,It):gt,Me=O(Jt.invert(Wt).concat(Ne/Jt.k),Ce.invert(Wt).concat(Ne/Ce.k));return function(jt){if(jt===1)jt=Ce;else{var We=Me(jt),cr=Ne/We[2];jt=new Ye(cr,Wt[0]-We[0]*cr,Wt[1]-We[1]*cr)}zt.zoom(null,jt)}})}function Ee(M,gt,L){return!L&&M.__zooming||new sr(M,gt)}function sr(M,gt){this.that=M,this.args=gt,this.active=0,this.sourceEvent=null,this.extent=o.apply(M,gt),this.taps=0}sr.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,gt){return this.mouse&&M!=="mouse"&&(this.mouse[1]=gt.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=gt.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=gt.invert(this.touch1[0])),this.that.__zoom=gt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var gt=(0,pt.Z)(this.that).datum();Z.call(M,this.that,new jr(M,{sourceEvent:this.sourceEvent,target:At,type:M,transform:this.that.__zoom,dispatch:Z}),gt)}};function _n(M,...gt){if(!n.apply(this,arguments))return;var L=Ee(this,gt).event(M),_t=this.__zoom,kt=Math.max(b[0],Math.min(b[1],_t.k*Math.pow(2,g.apply(this,arguments)))),It=(0,vt.Z)(M);if(L.wheel)(L.mouse[0][0]!==It[0]||L.mouse[0][1]!==It[1])&&(L.mouse[1]=_t.invert(L.mouse[0]=It)),clearTimeout(L.wheel);else{if(_t.k===kt)return;L.mouse=[It,_t.invert(It)],Le(this),L.start()}Be(M),L.wheel=setTimeout(zt,re),L.zoom("mouse",a(Ke(an(_t,kt),L.mouse[0],L.mouse[1]),L.extent,x));function zt(){L.wheel=null,L.end()}}function Dr(M,...gt){if(mt||!n.apply(this,arguments))return;var L=M.currentTarget,_t=Ee(this,gt,!0).event(M),kt=(0,pt.Z)(M.view).on("mousemove.zoom",Wt,!0).on("mouseup.zoom",Ne,!0),It=(0,vt.Z)(M,L),zt=M.clientX,Xt=M.clientY;(0,ot.Z)(M.view),Rr(M),_t.mouse=[It,this.__zoom.invert(It)],Le(this),_t.start();function Wt(Jt){if(Be(Jt),!_t.moved){var Ce=Jt.clientX-zt,Me=Jt.clientY-Xt;_t.moved=Ce*Ce+Me*Me>Kt}_t.event(Jt).zoom("mouse",a(Ke(_t.that.__zoom,_t.mouse[0]=(0,vt.Z)(Jt,L),_t.mouse[1]),_t.extent,x))}function Ne(Jt){kt.on("mousemove.zoom mouseup.zoom",null),(0,ot.D)(Jt.view,_t.moved),Be(Jt),_t.event(Jt).end()}}function Ir(M,...gt){if(n.apply(this,arguments)){var L=this.__zoom,_t=(0,vt.Z)(M.changedTouches?M.changedTouches[0]:M,this),kt=L.invert(_t),It=L.k*(M.shiftKey?.5:2),zt=a(Ke(an(L,It),_t,kt),o.apply(this,gt),x);Be(M),P>0?(0,pt.Z)(this).transition().duration(P).call(cn,zt,_t,M):(0,pt.Z)(this).call(At.transform,zt,_t,M)}}function ar(M,...gt){if(n.apply(this,arguments)){var L=M.touches,_t=L.length,kt=Ee(this,gt,M.changedTouches.length===_t).event(M),It,zt,Xt,Wt;for(Rr(M),zt=0;zt<_t;++zt)Xt=L[zt],Wt=(0,vt.Z)(Xt,this),Wt=[Wt,this.__zoom.invert(Wt),Xt.identifier],kt.touch0?!kt.touch1&&kt.touch0[2]!==Wt[2]&&(kt.touch1=Wt,kt.taps=0):(kt.touch0=Wt,It=!0,kt.taps=1+!!X);X&&(X=clearTimeout(X)),It&&(kt.taps<2&&(ut=Wt[0],X=setTimeout(function(){X=null},Nt)),Le(this),kt.start())}}function ri(M,...gt){if(this.__zooming){var L=Ee(this,gt).event(M),_t=M.changedTouches,kt=_t.length,It,zt,Xt,Wt;for(Be(M),It=0;It<kt;++It)zt=_t[It],Xt=(0,vt.Z)(zt,this),L.touch0&&L.touch0[2]===zt.identifier?L.touch0[0]=Xt:L.touch1&&L.touch1[2]===zt.identifier&&(L.touch1[0]=Xt);if(zt=L.that.__zoom,L.touch1){var Ne=L.touch0[0],Jt=L.touch0[1],Ce=L.touch1[0],Me=L.touch1[1],jt=(jt=Ce[0]-Ne[0])*jt+(jt=Ce[1]-Ne[1])*jt,We=(We=Me[0]-Jt[0])*We+(We=Me[1]-Jt[1])*We;zt=an(zt,Math.sqrt(jt/We)),Xt=[(Ne[0]+Ce[0])/2,(Ne[1]+Ce[1])/2],Wt=[(Jt[0]+Me[0])/2,(Jt[1]+Me[1])/2]}else if(L.touch0)Xt=L.touch0[0],Wt=L.touch0[1];else return;L.zoom("touch",a(Ke(zt,Xt,Wt),L.extent,x))}}function oi(M,...gt){if(this.__zooming){var L=Ee(this,gt).event(M),_t=M.changedTouches,kt=_t.length,It,zt;for(Rr(M),mt&&clearTimeout(mt),mt=setTimeout(function(){mt=null},Nt),It=0;It<kt;++It)zt=_t[It],L.touch0&&L.touch0[2]===zt.identifier?delete L.touch0:L.touch1&&L.touch1[2]===zt.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(zt=(0,vt.Z)(zt,this),Math.hypot(ut[0]-zt[0],ut[1]-zt[1])<me)){var Xt=(0,pt.Z)(this).on("dblclick.zoom");Xt&&Xt.apply(this,arguments)}}}return At.wheelDelta=function(M){return arguments.length?(g=typeof M=="function"?M:sn(+M),At):g},At.filter=function(M){return arguments.length?(n=typeof M=="function"?M:sn(!!M),At):n},At.touchable=function(M){return arguments.length?(w=typeof M=="function"?M:sn(!!M),At):w},At.extent=function(M){return arguments.length?(o=typeof M=="function"?M:sn([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),At):o},At.scaleExtent=function(M){return arguments.length?(b[0]=+M[0],b[1]=+M[1],At):[b[0],b[1]]},At.translateExtent=function(M){return arguments.length?(x[0][0]=+M[0][0],x[1][0]=+M[1][0],x[0][1]=+M[0][1],x[1][1]=+M[1][1],At):[[x[0][0],x[0][1]],[x[1][0],x[1][1]]]},At.constrain=function(M){return arguments.length?(a=M,At):a},At.duration=function(M){return arguments.length?(P=+M,At):P},At.interpolate=function(M){return arguments.length?(O=M,At):O},At.on=function(){var M=Z.on.apply(Z,arguments);return M===Z?At:M},At.clickDistance=function(M){return arguments.length?(Kt=(M=+M)*M,At):Math.sqrt(Kt)},At.tapDistance=function(M){return arguments.length?(me=+M,At):me},At}},59646:function(ft,ht,$){"use strict";$.d(ht,{X:function(){return f}});function f(q,j){if(Object.is(q,j))return!0;if(typeof q!="object"||q===null||typeof j!="object"||j===null)return!1;if(q instanceof Map&&j instanceof Map){if(q.size!==j.size)return!1;for(const[it,st]of q)if(!Object.is(st,j.get(it)))return!1;return!0}if(q instanceof Set&&j instanceof Set){if(q.size!==j.size)return!1;for(const it of q)if(!j.has(it))return!1;return!0}const Ct=Object.keys(q);if(Ct.length!==Object.keys(j).length)return!1;for(let it=0;it<Ct.length;it++)if(!Object.prototype.hasOwnProperty.call(j,Ct[it])||!Object.is(q[Ct[it]],j[Ct[it]]))return!1;return!0}var ot=(q,j)=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { shallow } from 'zustand/shallow'`."),f(q,j))}}]);
}());