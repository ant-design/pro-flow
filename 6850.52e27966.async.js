!(function(){var gs=Object.defineProperty,ps=Object.defineProperties;var ms=Object.getOwnPropertyDescriptors;var Co=Object.getOwnPropertySymbols;var wi=Object.prototype.hasOwnProperty,_i=Object.prototype.propertyIsEnumerable;var ci=Math.pow,xi=(dt,gt,$)=>gt in dt?gs(dt,gt,{enumerable:!0,configurable:!0,writable:!0,value:$}):dt[gt]=$,bt=(dt,gt)=>{for(var $ in gt||(gt={}))wi.call(gt,$)&&xi(dt,$,gt[$]);if(Co)for(var $ of Co(gt))_i.call(gt,$)&&xi(dt,$,gt[$]);return dt},te=(dt,gt)=>ps(dt,ms(gt));var Hr=(dt,gt)=>{var $={};for(var f in dt)wi.call(dt,f)&&gt.indexOf(f)<0&&($[f]=dt[f]);if(dt!=null&&Co)for(var f of Co(dt))gt.indexOf(f)<0&&_i.call(dt,f)&&($[f]=dt[f]);return $};(self.webpackChunk_ant_design_pro_flow=self.webpackChunk_ant_design_pro_flow||[]).push([[6850],{38498:function(dt,gt,$){var f=$(78770);function ot(q){if(Array.isArray(q))return f(q)}dt.exports=ot,dt.exports.__esModule=!0,dt.exports.default=dt.exports},20698:function(dt){function gt($){if(typeof Symbol!="undefined"&&$[Symbol.iterator]!=null||$["@@iterator"]!=null)return Array.from($)}dt.exports=gt,dt.exports.__esModule=!0,dt.exports.default=dt.exports},91162:function(dt){function gt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}dt.exports=gt,dt.exports.__esModule=!0,dt.exports.default=dt.exports},53649:function(dt){function gt($,f){return f||(f=$.slice(0)),Object.freeze(Object.defineProperties($,{raw:{value:Object.freeze(f)}}))}dt.exports=gt,dt.exports.__esModule=!0,dt.exports.default=dt.exports},15558:function(dt,gt,$){var f=$(38498),ot=$(20698),q=$(31479),j=$(91162);function Tt(st){return f(st)||ot(st)||q(st)||j()}dt.exports=Tt,dt.exports.__esModule=!0,dt.exports.default=dt.exports},28831:function(dt,gt,$){"use strict";$.d(gt,{u5:function(){return ge},XQ:function(){return Ai},HH:function(){return ze},s_:function(){return wr},Ly:function(){return ut},x$:function(){return fi},tV:function(){return cr},oW:function(){return Qe},Fb:function(){return qr},OQ:function(){return zn},oI:function(){return Mn},VP:function(){return se},RX:function(){return je},OW:function(){return Rn},ll:function(){return Di},B:function(){return Bi},CV:function(){return Ii},_K:function(){return Gr},oR:function(){return Ot},AC:function(){return Lt},Sj:function(){return Ri}});var f=$(50959),ot=$(76295),q=$(1909),j=$(36666),Tt=$(37151),st=$(41468),at=$(13802),mt=$(18299),vt=$(49289),Mt=$(5873),Bt=t=>()=>t;function Ut(t,{sourceEvent:e,subject:r,target:s,identifier:i,active:u,x:c,y:l,dx:p,dy:m,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:s,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:p,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:h}})}Ut.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Te(t){return!t.ctrlKey&&!t.button}function yr(){return this.parentNode}function vn(t,e){return e==null?{x:t.x,y:t.y}:e}function ln(){return navigator.maxTouchPoints||"ontouchstart"in this}function fn(){var t=Te,e=yr,r=vn,s=ln,i={},u=(0,mt.Z)("start","drag","end"),c=0,l,p,m,h,y=0;function b(S){S.on("mousedown.drag",E).filter(s).on("touchstart.drag",T).on("touchmove.drag",k,Mt.Q7).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(S,H){if(!(h||!t.call(this,S,H))){var K=I(this,e.call(this,S,H),S,H,"mouse");K&&((0,st.Z)(S.view).on("mousemove.drag",D,Mt.Dd).on("mouseup.drag",C,Mt.Dd),(0,vt.Z)(S.view),(0,Mt.rG)(S),m=!1,l=S.clientX,p=S.clientY,K("start",S))}}function D(S){if((0,Mt.ZP)(S),!m){var H=S.clientX-l,K=S.clientY-p;m=H*H+K*K>y}i.mouse("drag",S)}function C(S){(0,st.Z)(S.view).on("mousemove.drag mouseup.drag",null),(0,vt.D)(S.view,m),(0,Mt.ZP)(S),i.mouse("end",S)}function T(S,H){if(t.call(this,S,H)){var K=S.changedTouches,F=e.call(this,S,H),O=K.length,W,et;for(W=0;W<O;++W)(et=I(this,F,S,H,K[W].identifier,K[W]))&&((0,Mt.rG)(S),et("start",S,K[W]))}}function k(S){var H=S.changedTouches,K=H.length,F,O;for(F=0;F<K;++F)(O=i[H[F].identifier])&&((0,Mt.ZP)(S),O("drag",S,H[F]))}function A(S){var H=S.changedTouches,K=H.length,F,O;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),F=0;F<K;++F)(O=i[H[F].identifier])&&((0,Mt.rG)(S),O("end",S,H[F]))}function I(S,H,K,F,O,W){var et=u.copy(),U=(0,at.Z)(W||K,H),nt,N,G;if((G=r.call(S,new Ut("beforestart",{sourceEvent:K,target:b,identifier:O,active:c,x:U[0],y:U[1],dx:0,dy:0,dispatch:et}),F))!=null)return nt=G.x-U[0]||0,N=G.y-U[1]||0,function tt(ct,Et,xt){var R=U,rt;switch(ct){case"start":i[O]=tt,rt=c++;break;case"end":delete i[O],--c;case"drag":U=(0,at.Z)(xt||Et,H),rt=c;break}et.call(ct,S,new Ut(ct,{sourceEvent:Et,subject:G,target:b,identifier:O,active:rt,x:U[0]+nt,y:U[1]+N,dx:U[0]-R[0],dy:U[1]-R[1],dispatch:et}),F)}}return b.filter=function(S){return arguments.length?(t=typeof S=="function"?S:Bt(!!S),b):t},b.container=function(S){return arguments.length?(e=typeof S=="function"?S:Bt(S),b):e},b.subject=function(S){return arguments.length?(r=typeof S=="function"?S:Bt(S),b):r},b.touchable=function(S){return arguments.length?(s=typeof S=="function"?S:Bt(!!S),b):s},b.on=function(){var S=u.on.apply(u,arguments);return S===u?b:S},b.clickDistance=function(S){return arguments.length?(y=(S=+S)*S,b):Math.sqrt(y)},b}var He=$(10422);const ye=(0,f.createContext)(null),dn=ye.Provider,ie={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},En=ie.error001();function Ot(t,e){const r=(0,f.useContext)(ye);if(r===null)throw new Error(En);return(0,q.s)(r,t,e)}const Lt=()=>{const t=(0,f.useContext)(ye);if(t===null)throw new Error(En);return(0,f.useMemo)(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},xr=t=>t.userSelectionActive?"none":"all";function wr(u){var c=u,{position:t,children:e,className:r,style:s}=c,i=Hr(c,["position","children","className","style"]);const l=Ot(xr),p=`${t}`.split("-");return f.createElement("div",bt({className:(0,ot.Z)(["react-flow__panel",r,...p]),style:te(bt({},s),{pointerEvents:l})},i),e)}function _r({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:f.createElement(wr,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},f.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Or=y=>{var b=y,{x:t,y:e,label:r,labelStyle:s={},labelShowBg:i=!0,labelBgStyle:u={},labelBgPadding:c=[2,4],labelBgBorderRadius:l=2,children:p,className:m}=b,h=Hr(b,["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"]);const E=(0,f.useRef)(null),[D,C]=(0,f.useState)({x:0,y:0,width:0,height:0}),T=(0,ot.Z)(["react-flow__edge-textwrapper",m]);return(0,f.useEffect)(()=>{if(E.current){const k=E.current.getBBox();C({x:k.x,y:k.y,width:k.width,height:k.height})}},[r]),typeof r=="undefined"||!r?null:f.createElement("g",bt({transform:`translate(${t-D.width/2} ${e-D.height/2})`,className:T,visibility:D.width?"visible":"hidden"},h),i&&f.createElement("rect",{width:D.width+2*c[0],x:-c[0],y:-c[1],height:D.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:l,ry:l}),f.createElement("text",{className:"react-flow__edge-text",y:D.height/2,dy:"0.3em",ref:E,style:s},r),p)};var Zr=(0,f.memo)(Or);const hn=t=>({width:t.offsetWidth,height:t.offsetHeight}),Oe=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),Vn=(t={x:0,y:0},e)=>({x:Oe(t.x,e[0][0],e[1][0]),y:Oe(t.y,e[0][1],e[1][1])}),br=(t,e,r)=>t<e?Oe(Math.abs(t-e),1,50)/50:t>r?-Oe(Math.abs(t-r),1,50)/50:0,Fn=(t,e)=>{const r=br(t.x,35,e.width-35)*20,s=br(t.y,35,e.height-35)*20;return[r,s]},Yn=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Sn=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),ke=({x:t,y:e,width:r,height:s})=>({x:t,y:e,x2:t+r,y2:e+s}),Nn=({x:t,y:e,x2:r,y2:s})=>({x:t,y:e,width:r-t,height:s-e}),Cn=t=>te(bt({},t.positionAbsolute||{x:0,y:0}),{width:t.width||0,height:t.height||0}),Mn=(t,e)=>Nn(Sn(ke(t),ke(e))),We=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),s=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*s)},Kn=t=>Vt(t.width)&&Vt(t.height)&&Vt(t.x)&&Vt(t.y),Vt=t=>!isNaN(t)&&isFinite(t),$t=Symbol.for("internals"),vr=["Enter"," ","Escape"],Ze=(t,e)=>{},Lr=t=>"nativeEvent"in t;function xe(t){var i,u;const e=Lr(t)?t.nativeEvent:t,r=((u=(i=e.composedPath)==null?void 0:i.call(e))==null?void 0:u[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Wn=t=>"clientX"in t,we=(t,e)=>{var u,c,l,p;const r=Wn(t),s=r?t.clientX:(u=t.touches)==null?void 0:u[0].clientX,i=r?t.clientY:(c=t.touches)==null?void 0:c[0].clientY;return{x:s-((l=e==null?void 0:e.left)!=null?l:0),y:i-((p=e==null?void 0:e.top)!=null?p:0)}},Ue=()=>{var t;return typeof navigator!="undefined"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},ge=({id:t,path:e,labelX:r,labelY:s,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:y,markerStart:b,interactionWidth:E=20})=>f.createElement(f.Fragment,null,f.createElement("path",{id:t,style:h,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:b}),E&&f.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:E,className:"react-flow__edge-interaction"}),i&&Vt(r)&&Vt(s)?f.createElement(Zr,{x:r,y:s,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m}):null);ge.displayName="BaseEdge";const Xr=(t,e)=>typeof e!="undefined"&&e?`url(#${e})`:typeof t!="undefined"?`url(#react-flow__${t})`:"none";function Ge(t,e,r){return r===void 0?r:s=>{const i=e().edges.find(u=>u.id===t);i&&r(s,bt({},i))}}function An({sourceX:t,sourceY:e,targetX:r,targetY:s}){const i=Math.abs(r-t)/2,u=r<t?r+i:r-i,c=Math.abs(s-e)/2,l=s<e?s+c:s-c;return[u,l,i,c]}function Er({sourceX:t,sourceY:e,targetX:r,targetY:s,sourceControlX:i,sourceControlY:u,targetControlX:c,targetControlY:l}){const p=t*.125+i*.375+c*.375+r*.125,m=e*.125+u*.375+l*.375+s*.125,h=Math.abs(p-t),y=Math.abs(m-e);return[p,m,h,y]}var Le;(function(t){t.Strict="strict",t.Loose="loose"})(Le||(Le={}));var Re;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Re||(Re={}));var Qe;(function(t){t.Partial="partial",t.Full="full"})(Qe||(Qe={}));var De;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(De||(De={}));var Pn;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Pn||(Pn={}));var ut;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ut||(ut={}));function Tn({pos:t,x1:e,y1:r,x2:s,y2:i}){return t===ut.Left||t===ut.Right?[.5*(e+s),r]:[e,.5*(r+i)]}function Un({sourceX:t,sourceY:e,sourcePosition:r=ut.Bottom,targetX:s,targetY:i,targetPosition:u=ut.Top}){const[c,l]=Tn({pos:r,x1:t,y1:e,x2:s,y2:i}),[p,m]=Tn({pos:u,x1:s,y1:i,x2:t,y2:e}),[h,y,b,E]=Er({sourceX:t,sourceY:e,targetX:s,targetY:i,sourceControlX:c,sourceControlY:l,targetControlX:p,targetControlY:m});return[`M${t},${e} C${c},${l} ${p},${m} ${s},${i}`,h,y,b,E]}const Xe=(0,f.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:s,sourcePosition:i=ut.Bottom,targetPosition:u=ut.Top,label:c,labelStyle:l,labelShowBg:p,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:b,markerEnd:E,markerStart:D,interactionWidth:C})=>{const[T,k,A]=Un({sourceX:t,sourceY:e,sourcePosition:i,targetX:r,targetY:s,targetPosition:u});return f.createElement(ge,{path:T,labelX:k,labelY:A,label:c,labelStyle:l,labelShowBg:p,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:b,markerEnd:E,markerStart:D,interactionWidth:C})});Xe.displayName="SimpleBezierEdge";const qe={[ut.Left]:{x:-1,y:0},[ut.Right]:{x:1,y:0},[ut.Top]:{x:0,y:-1},[ut.Bottom]:{x:0,y:1}},kn=({source:t,sourcePosition:e=ut.Bottom,target:r})=>e===ut.Left||e===ut.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},Ve=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function gn({source:t,sourcePosition:e=ut.Bottom,target:r,targetPosition:s=ut.Top,center:i,offset:u}){const c=qe[e],l=qe[s],p={x:t.x+c.x*u,y:t.y+c.y*u},m={x:r.x+l.x*u,y:r.y+l.y*u},h=kn({source:p,sourcePosition:e,target:m}),y=h.x!==0?"x":"y",b=h[y];let E=[],D,C;const T={x:0,y:0},k={x:0,y:0},[A,I,S,H]=An({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(c[y]*l[y]===-1){D=i.x||A,C=i.y||I;const F=[{x:D,y:p.y},{x:D,y:m.y}],O=[{x:p.x,y:C},{x:m.x,y:C}];c[y]===b?E=y==="x"?F:O:E=y==="x"?O:F}else{const F=[{x:p.x,y:m.y}],O=[{x:m.x,y:p.y}];if(y==="x"?E=c.x===b?O:F:E=c.y===b?F:O,e===s){const N=Math.abs(t[y]-r[y]);if(N<=u){const G=Math.min(u-1,u-N);c[y]===b?T[y]=(p[y]>t[y]?-1:1)*G:k[y]=(m[y]>r[y]?-1:1)*G}}if(e!==s){const N=y==="x"?"y":"x",G=c[y]===l[N],tt=p[N]>m[N],ct=p[N]<m[N];(c[y]===1&&(!G&&tt||G&&ct)||c[y]!==1&&(!G&&ct||G&&tt))&&(E=y==="x"?F:O)}const W={x:p.x+T.x,y:p.y+T.y},et={x:m.x+k.x,y:m.y+k.y},U=Math.max(Math.abs(W.x-E[0].x),Math.abs(et.x-E[0].x)),nt=Math.max(Math.abs(W.y-E[0].y),Math.abs(et.y-E[0].y));U>=nt?(D=(W.x+et.x)/2,C=E[0].y):(D=E[0].x,C=(W.y+et.y)/2)}return[[t,{x:p.x+T.x,y:p.y+T.y},...E,{x:m.x+k.x,y:m.y+k.y},r],D,C,S,H]}function _e(t,e,r,s){const i=Math.min(Ve(t,e)/2,Ve(e,r)/2,s),{x:u,y:c}=e;if(t.x===u&&u===r.x||t.y===c&&c===r.y)return`L${u} ${c}`;if(t.y===c){const m=t.x<r.x?-1:1,h=t.y<r.y?1:-1;return`L ${u+i*m},${c}Q ${u},${c} ${u},${c+i*h}`}const l=t.x<r.x?1:-1,p=t.y<r.y?-1:1;return`L ${u},${c+i*p}Q ${u},${c} ${u+i*l},${c}`}function Rn({sourceX:t,sourceY:e,sourcePosition:r=ut.Bottom,targetX:s,targetY:i,targetPosition:u=ut.Top,borderRadius:c=5,centerX:l,centerY:p,offset:m=20}){const[h,y,b,E,D]=gn({source:{x:t,y:e},sourcePosition:r,target:{x:s,y:i},targetPosition:u,center:{x:l,y:p},offset:m});return[h.reduce((T,k,A)=>{let I="";return A>0&&A<h.length-1?I=_e(h[A-1],k,h[A+1],c):I=`${A===0?"M":"L"}${k.x} ${k.y}`,T+=I,T},""),y,b,E,D]}const pn=(0,f.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:s,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m,style:h,sourcePosition:y=ut.Bottom,targetPosition:b=ut.Top,markerEnd:E,markerStart:D,pathOptions:C,interactionWidth:T})=>{const[k,A,I]=Rn({sourceX:t,sourceY:e,sourcePosition:y,targetX:r,targetY:s,targetPosition:b,borderRadius:C==null?void 0:C.borderRadius,offset:C==null?void 0:C.offset});return f.createElement(ge,{path:k,labelX:A,labelY:I,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:E,markerStart:D,interactionWidth:T})});pn.displayName="SmoothStepEdge";const Gn=(0,f.memo)(t=>{var e;return f.createElement(pn,te(bt({},t),{pathOptions:(0,f.useMemo)(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])}))});Gn.displayName="StepEdge";function Vr({sourceX:t,sourceY:e,targetX:r,targetY:s}){const[i,u,c,l]=An({sourceX:t,sourceY:e,targetX:r,targetY:s});return[`M ${t},${e}L ${r},${s}`,i,u,c,l]}const Dn=(0,f.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:s,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:y,markerStart:b,interactionWidth:E})=>{const[D,C,T]=Vr({sourceX:t,sourceY:e,targetX:r,targetY:s});return f.createElement(ge,{path:D,labelX:C,labelY:T,label:i,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:p,labelBgBorderRadius:m,style:h,markerEnd:y,markerStart:b,interactionWidth:E})});Dn.displayName="StraightEdge";function In(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Sr({pos:t,x1:e,y1:r,x2:s,y2:i,c:u}){switch(t){case ut.Left:return[e-In(e-s,u),r];case ut.Right:return[e+In(s-e,u),r];case ut.Top:return[e,r-In(r-i,u)];case ut.Bottom:return[e,r+In(i-r,u)]}}function zn({sourceX:t,sourceY:e,sourcePosition:r=ut.Bottom,targetX:s,targetY:i,targetPosition:u=ut.Top,curvature:c=.25}){const[l,p]=Sr({pos:r,x1:t,y1:e,x2:s,y2:i,c}),[m,h]=Sr({pos:u,x1:s,y1:i,x2:t,y2:e,c}),[y,b,E,D]=Er({sourceX:t,sourceY:e,targetX:s,targetY:i,sourceControlX:l,sourceControlY:p,targetControlX:m,targetControlY:h});return[`M${t},${e} C${l},${p} ${m},${h} ${s},${i}`,y,b,E,D]}const mn=(0,f.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:s,sourcePosition:i=ut.Bottom,targetPosition:u=ut.Top,label:c,labelStyle:l,labelShowBg:p,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:b,markerEnd:E,markerStart:D,pathOptions:C,interactionWidth:T})=>{const[k,A,I]=zn({sourceX:t,sourceY:e,sourcePosition:i,targetX:r,targetY:s,targetPosition:u,curvature:C==null?void 0:C.curvature});return f.createElement(ge,{path:k,labelX:A,labelY:I,label:c,labelStyle:l,labelShowBg:p,labelBgStyle:m,labelBgPadding:h,labelBgBorderRadius:y,style:b,markerEnd:E,markerStart:D,interactionWidth:T})});mn.displayName="BezierEdge";const Qn=(0,f.createContext)(null),Fr=Qn.Provider;Qn.Consumer;const Nr=()=>(0,f.useContext)(Qn),yn=t=>"id"in t&&"source"in t&&"target"in t,qn=t=>"id"in t&&!("source"in t)&&!("target"in t),Jn=(t,e,r)=>{if(!qn(t))return[];const s=r.filter(i=>i.source===t.id).map(i=>i.target);return e.filter(i=>s.includes(i.id))},io=(t,e,r)=>{if(!qn(t))return[];const s=r.filter(i=>i.target===t.id).map(i=>i.source);return e.filter(i=>s.includes(i.id))},xn=({source:t,sourceHandle:e,target:r,targetHandle:s})=>`reactflow__edge-${t}${e||""}-${r}${s||""}`,qt=(t,e)=>typeof t=="undefined"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(s=>`${s}=${t[s]}`).join("&")}`,Cr=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),Yr=(t,e)=>{if(!t.source||!t.target)return Ze("006",ie.error006()),e;let r;return yn(t)?r=bt({},t):r=te(bt({},t),{id:xn(t)}),Cr(r,e)?e:e.concat(r)},Mr=(t,e,r,s={shouldReplaceId:!0})=>{const p=t,{id:i}=p,u=Hr(p,["id"]);if(!e.source||!e.target)return Ze("006",ie.error006()),r;if(!r.find(m=>m.id===i))return Ze("007",ie.error007(i)),r;const l=te(bt({},u),{id:s.shouldReplaceId?xn(e):i,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle});return r.filter(m=>m.id!==i).concat(l)},Je=({x:t,y:e},[r,s,i],u,[c,l])=>{const p={x:(t-r)/i,y:(e-s)/i};return u?{x:c*Math.round(p.x/c),y:l*Math.round(p.y/l)}:p},Ie=({x:t,y:e},[r,s,i])=>({x:t*i+r,y:e*i+s}),se=(t,e=[0,0])=>{var u,c;if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=((u=t.width)!=null?u:0)*e[0],s=((c=t.height)!=null?c:0)*e[1],i={x:t.position.x-r,y:t.position.y-s};return te(bt({},i),{positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-s}:i})},je=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((s,i)=>{const{x:u,y:c}=se(i,e).positionAbsolute;return Sn(s,ke({x:u,y:c,width:i.width||0,height:i.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Nn(r)},Ar=(t,e=[0,0])=>(console.warn("[DEPRECATED] `getRectOfNodes` is deprecated. Instead use `getNodesBounds` https://reactflow.dev/api-reference/utils/get-nodes-bounds."),je(t,e)),ae=(t,e,[r,s,i]=[0,0,1],u=!1,c=!1,l=[0,0])=>{const p={x:(e.x-r)/i,y:(e.y-s)/i,width:e.width/i,height:e.height/i},m=[];return t.forEach(h=>{const{width:y,height:b,selectable:E=!0,hidden:D=!1}=h;if(c&&!E||D)return!1;const{positionAbsolute:C}=se(h,l),T={x:C.x,y:C.y,width:y||0,height:b||0},k=We(p,T),A=typeof y=="undefined"||typeof b=="undefined"||y===null||b===null,I=u&&k>0,S=(y||0)*(b||0);(A||I||k>=S||h.dragging)&&m.push(h)}),m},ce=(t,e)=>{const r=t.map(s=>s.id);return e.filter(s=>r.includes(s.source)||r.includes(s.target))},Kr=(t,e,r,s,i,u=.1)=>{const{x:c,y:l,zoom:p}=tn(t,e,r,s,i,u);return console.warn("[DEPRECATED] `getTransformForBounds` is deprecated. Instead use `getViewportForBounds`. Beware that the return value is type Viewport (`{ x: number, y: number, zoom: number }`) instead of Transform (`[number, number, number]`). https://reactflow.dev/api-reference/utils/get-viewport-for-bounds"),[c,l,p]},tn=(t,e,r,s,i,u=.1)=>{const c=e/(t.width*(1+u)),l=r/(t.height*(1+u)),p=Math.min(c,l),m=Oe(p,s,i),h=t.x+t.width/2,y=t.y+t.height/2,b=e/2-h*m,E=r/2-y*m;return{x:b,y:E,zoom:m}},d=(t,e=0)=>t.transition().duration(e);function _(t,e,r,s){return(e[r]||[]).reduce((i,u)=>{var c,l,p,m;return`${t.id}-${u.id}-${r}`!==s&&i.push({id:u.id||null,type:r,nodeId:t.id,x:((l=(c=t.positionAbsolute)==null?void 0:c.x)!=null?l:0)+u.x+u.width/2,y:((m=(p=t.positionAbsolute)==null?void 0:p.y)!=null?m:0)+u.y+u.height/2}),i},[])}function V(t,e,r,s,i,u){const{x:c,y:l}=we(t),m=e.elementsFromPoint(c,l).find(D=>D.classList.contains("react-flow__handle"));if(m){const D=m.getAttribute("data-nodeid");if(D){const C=lt(void 0,m),T=m.getAttribute("data-handleid"),k=u({nodeId:D,id:T,type:C});if(k){const A=i.find(I=>I.nodeId===D&&I.type===C&&I.id===T);return{handle:{id:T,type:C,nodeId:D,x:(A==null?void 0:A.x)||r.x,y:(A==null?void 0:A.y)||r.y},validHandleResult:k}}}}let h=[],y=1/0;if(i.forEach(D=>{const C=Math.sqrt(ci(D.x-r.x,2)+ci(D.y-r.y,2));if(C<=s){const T=u(D);C<=y&&(C<y?h=[{handle:D,validHandleResult:T}]:C===y&&h.push({handle:D,validHandleResult:T}),y=C)}}),!h.length)return{handle:null,validHandleResult:z()};if(h.length===1)return h[0];const b=h.some(({validHandleResult:D})=>D.isValid),E=h.some(({handle:D})=>D.type==="target");return h.find(({handle:D,validHandleResult:C})=>E?D.type==="target":b?C.isValid:!0)||h[0]}const Y={source:null,target:null,sourceHandle:null,targetHandle:null},z=()=>({handleDomNode:null,isValid:!1,connection:Y,endHandle:null});function J(t,e,r,s,i,u,c){const l=i==="target",p=c.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),m=te(bt({},z()),{handleDomNode:p});if(p){const h=lt(void 0,p),y=p.getAttribute("data-nodeid"),b=p.getAttribute("data-handleid"),E=p.classList.contains("connectable"),D=p.classList.contains("connectableend"),C={source:l?y:r,sourceHandle:l?b:s,target:l?r:y,targetHandle:l?s:b};m.connection=C,E&&D&&(e===Le.Strict?l&&h==="source"||!l&&h==="target":y!==r||b!==s)&&(m.endHandle={nodeId:y,handleId:b,type:h},m.isValid=u(C))}return m}function ht({nodes:t,nodeId:e,handleId:r,handleType:s}){return t.reduce((i,u)=>{if(u[$t]){const{handleBounds:c}=u[$t];let l=[],p=[];c&&(l=_(u,c,"source",`${e}-${r}-${s}`),p=_(u,c,"target",`${e}-${r}-${s}`)),i.push(...l,...p)}return i},[])}function lt(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function wt(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Pt(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function Ht({event:t,handleId:e,nodeId:r,onConnect:s,isTarget:i,getState:u,setState:c,isValidConnection:l,edgeUpdaterType:p,onEdgeUpdateEnd:m}){const h=Yn(t.target),{connectionMode:y,domNode:b,autoPanOnConnect:E,connectionRadius:D,onConnectStart:C,panBy:T,getNodes:k,cancelConnection:A}=u();let I=0,S;const{x:H,y:K}=we(t),F=h==null?void 0:h.elementFromPoint(H,K),O=lt(p,F),W=b==null?void 0:b.getBoundingClientRect();if(!W||!O)return;let et,U=we(t,W),nt=!1,N=null,G=!1,tt=null;const ct=ht({nodes:k(),nodeId:r,handleId:e,handleType:O}),Et=()=>{if(!E)return;const[rt,Q]=Fn(U,W);T({x:rt,y:Q}),I=requestAnimationFrame(Et)};c({connectionPosition:U,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:O,connectionStartHandle:{nodeId:r,handleId:e,type:O},connectionEndHandle:null}),C==null||C(t,{nodeId:r,handleId:e,handleType:O});function xt(rt){const{transform:Q}=u();U=we(rt,W);const{handle:it,validHandleResult:St}=V(rt,h,Je(U,Q,!1,[1,1]),D,ct,Dt=>J(Dt,y,r,e,i?"target":"source",l,h));if(S=it,nt||(Et(),nt=!0),tt=St.handleDomNode,N=St.connection,G=St.isValid,c({connectionPosition:S&&G?Ie({x:S.x,y:S.y},Q):U,connectionStatus:Pt(!!S,G),connectionEndHandle:St.endHandle}),!S&&!G&&!tt)return wt(et);N.source!==N.target&&tt&&(wt(et),et=tt,tt.classList.add("connecting","react-flow__handle-connecting"),tt.classList.toggle("valid",G),tt.classList.toggle("react-flow__handle-valid",G))}function R(rt){var Q,it;(S||tt)&&N&&G&&(s==null||s(N)),(it=(Q=u()).onConnectEnd)==null||it.call(Q,rt),p&&(m==null||m(rt)),wt(et),A(),cancelAnimationFrame(I),nt=!1,G=!1,N=null,tt=null,h.removeEventListener("mousemove",xt),h.removeEventListener("mouseup",R),h.removeEventListener("touchmove",xt),h.removeEventListener("touchend",R)}h.addEventListener("mousemove",xt),h.addEventListener("mouseup",R),h.addEventListener("touchmove",xt),h.addEventListener("touchend",R)}const ue=()=>!0,ve=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),pe=(t,e,r)=>s=>{const{connectionStartHandle:i,connectionEndHandle:u,connectionClickStartHandle:c}=s;return{connecting:(i==null?void 0:i.nodeId)===t&&(i==null?void 0:i.handleId)===e&&(i==null?void 0:i.type)===r||(u==null?void 0:u.nodeId)===t&&(u==null?void 0:u.handleId)===e&&(u==null?void 0:u.type)===r,clickConnecting:(c==null?void 0:c.nodeId)===t&&(c==null?void 0:c.handleId)===e&&(c==null?void 0:c.type)===r}},le=(0,f.forwardRef)((D,E)=>{var C=D,{type:t="source",position:e=ut.Top,isValidConnection:r,isConnectable:s=!0,isConnectableStart:i=!0,isConnectableEnd:u=!0,id:c,onConnect:l,children:p,className:m,onMouseDown:h,onTouchStart:y}=C,b=Hr(C,["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"]);var U,nt;const T=c||null,k=t==="target",A=Lt(),I=Nr(),{connectOnClick:S,noPanClassName:H}=Ot(ve,j.X),{connecting:K,clickConnecting:F}=Ot(pe(I,T,t),j.X);I||(nt=(U=A.getState()).onError)==null||nt.call(U,"010",ie.error010());const O=N=>{const{defaultEdgeOptions:G,onConnect:tt,hasDefaultEdges:ct}=A.getState(),Et=bt(bt({},G),N);if(ct){const{edges:xt,setEdges:R}=A.getState();R(Yr(Et,xt))}tt==null||tt(Et),l==null||l(Et)},W=N=>{if(!I)return;const G=Wn(N);i&&(G&&N.button===0||!G)&&Ht({event:N,handleId:T,nodeId:I,onConnect:O,isTarget:k,getState:A.getState,setState:A.setState,isValidConnection:r||A.getState().isValidConnection||ue}),G?h==null||h(N):y==null||y(N)},et=N=>{const{onClickConnectStart:G,onClickConnectEnd:tt,connectionClickStartHandle:ct,connectionMode:Et,isValidConnection:xt}=A.getState();if(!I||!ct&&!i)return;if(!ct){G==null||G(N,{nodeId:I,handleId:T,handleType:t}),A.setState({connectionClickStartHandle:{nodeId:I,type:t,handleId:T}});return}const R=Yn(N.target),rt=r||xt||ue,{connection:Q,isValid:it}=J({nodeId:I,id:T,type:t},Et,ct.nodeId,ct.handleId||null,ct.type,rt,R);it&&O(Q),tt==null||tt(N),A.setState({connectionClickStartHandle:null})};return f.createElement("div",bt({"data-handleid":T,"data-nodeid":I,"data-handlepos":e,"data-id":`${I}-${T}-${t}`,className:(0,ot.Z)(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",H,m,{source:!k,target:k,connectable:s,connectablestart:i,connectableend:u,connecting:F,connectionindicator:s&&(i&&!K||u&&K)}]),onMouseDown:W,onTouchStart:W,onClick:S?et:void 0,ref:E},b),p)});le.displayName="Handle";var ze=(0,f.memo)(le);const jn=({data:t,isConnectable:e,targetPosition:r=ut.Top,sourcePosition:s=ut.Bottom})=>f.createElement(f.Fragment,null,f.createElement(ze,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,f.createElement(ze,{type:"source",position:s,isConnectable:e}));jn.displayName="DefaultNode";var tr=(0,f.memo)(jn);const en=({data:t,isConnectable:e,sourcePosition:r=ut.Bottom})=>f.createElement(f.Fragment,null,t==null?void 0:t.label,f.createElement(ze,{type:"source",position:r,isConnectable:e}));en.displayName="InputNode";var nn=(0,f.memo)(en);const er=({data:t,isConnectable:e,targetPosition:r=ut.Top})=>f.createElement(f.Fragment,null,f.createElement(ze,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);er.displayName="OutputNode";var nr=(0,f.memo)(er);const Wr=()=>null;Wr.displayName="GroupNode";const Mo=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected)}),Pr=t=>t.id;function Ao(t,e){return(0,j.X)(t.selectedNodes.map(Pr),e.selectedNodes.map(Pr))&&(0,j.X)(t.selectedEdges.map(Pr),e.selectedEdges.map(Pr))}const so=(0,f.memo)(({onSelectionChange:t})=>{const e=Lt(),{selectedNodes:r,selectedEdges:s}=Ot(Mo,Ao);return(0,f.useEffect)(()=>{const i={nodes:r,edges:s};t==null||t(i),e.getState().onSelectionChange.forEach(u=>u(i))},[r,s,t]),null});so.displayName="SelectionListener";const Po=t=>!!t.onSelectionChange;function To({onSelectionChange:t}){const e=Ot(Po);return t||e?f.createElement(so,{onSelectionChange:t}):null}const ko=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function $n(t,e){(0,f.useEffect)(()=>{typeof t!="undefined"&&e(t)},[t])}function Rt(t,e,r){(0,f.useEffect)(()=>{typeof e!="undefined"&&r({[t]:e})},[e])}const Ro=({nodes:t,edges:e,defaultNodes:r,defaultEdges:s,onConnect:i,onConnectStart:u,onConnectEnd:c,onClickConnectStart:l,onClickConnectEnd:p,nodesDraggable:m,nodesConnectable:h,nodesFocusable:y,edgesFocusable:b,edgesUpdatable:E,elevateNodesOnSelect:D,minZoom:C,maxZoom:T,nodeExtent:k,onNodesChange:A,onEdgesChange:I,elementsSelectable:S,connectionMode:H,snapGrid:K,snapToGrid:F,translateExtent:O,connectOnClick:W,defaultEdgeOptions:et,fitView:U,fitViewOptions:nt,onNodesDelete:N,onEdgesDelete:G,onNodeDrag:tt,onNodeDragStart:ct,onNodeDragStop:Et,onSelectionDrag:xt,onSelectionDragStart:R,onSelectionDragStop:rt,noPanClassName:Q,nodeOrigin:it,rfId:St,autoPanOnConnect:Dt,autoPanOnNodeDrag:Zt,onError:Ft,connectionRadius:oe,isValidConnection:ee,nodeDragThreshold:ne})=>{const{setNodes:de,setEdges:fe,setDefaultNodesAndEdges:Qt,setMinZoom:Ae,setMaxZoom:Gt,setTranslateExtent:cn,setNodeExtent:Yt,reset:be}=Ot(ko,j.X),Nt=Lt();return(0,f.useEffect)(()=>{const ur=s==null?void 0:s.map(lr=>bt(bt({},lr),et));return Qt(r,ur),()=>{be()}},[]),Rt("defaultEdgeOptions",et,Nt.setState),Rt("connectionMode",H,Nt.setState),Rt("onConnect",i,Nt.setState),Rt("onConnectStart",u,Nt.setState),Rt("onConnectEnd",c,Nt.setState),Rt("onClickConnectStart",l,Nt.setState),Rt("onClickConnectEnd",p,Nt.setState),Rt("nodesDraggable",m,Nt.setState),Rt("nodesConnectable",h,Nt.setState),Rt("nodesFocusable",y,Nt.setState),Rt("edgesFocusable",b,Nt.setState),Rt("edgesUpdatable",E,Nt.setState),Rt("elementsSelectable",S,Nt.setState),Rt("elevateNodesOnSelect",D,Nt.setState),Rt("snapToGrid",F,Nt.setState),Rt("snapGrid",K,Nt.setState),Rt("onNodesChange",A,Nt.setState),Rt("onEdgesChange",I,Nt.setState),Rt("connectOnClick",W,Nt.setState),Rt("fitViewOnInit",U,Nt.setState),Rt("fitViewOnInitOptions",nt,Nt.setState),Rt("onNodesDelete",N,Nt.setState),Rt("onEdgesDelete",G,Nt.setState),Rt("onNodeDrag",tt,Nt.setState),Rt("onNodeDragStart",ct,Nt.setState),Rt("onNodeDragStop",Et,Nt.setState),Rt("onSelectionDrag",xt,Nt.setState),Rt("onSelectionDragStart",R,Nt.setState),Rt("onSelectionDragStop",rt,Nt.setState),Rt("noPanClassName",Q,Nt.setState),Rt("nodeOrigin",it,Nt.setState),Rt("rfId",St,Nt.setState),Rt("autoPanOnConnect",Dt,Nt.setState),Rt("autoPanOnNodeDrag",Zt,Nt.setState),Rt("onError",Ft,Nt.setState),Rt("connectionRadius",oe,Nt.setState),Rt("isValidConnection",ee,Nt.setState),Rt("nodeDragThreshold",ne,Nt.setState),$n(t,de),$n(e,fe),$n(C,Ae),$n(T,Gt),$n(O,cn),$n(k,Yt),null},ao={display:"none"},Do={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},co="react-flow__node-desc",uo="react-flow__edge-desc",Io="react-flow__aria-live",zo=t=>t.ariaLiveMessage;function $o({rfId:t}){const e=Ot(zo);return f.createElement("div",{id:`${Io}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Do},e)}function Bo({rfId:t,disableKeyboardA11y:e}){return f.createElement(f.Fragment,null,f.createElement("div",{id:`${co}-${t}`,style:ao},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),f.createElement("div",{id:`${uo}-${t}`,style:ao},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&f.createElement($o,{rfId:t}))}var rr=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,s]=(0,f.useState)(!1),i=(0,f.useRef)(!1),u=(0,f.useRef)(new Set([])),[c,l]=(0,f.useMemo)(()=>{if(t!==null){const m=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.split("+")),h=m.reduce((y,b)=>y.concat(...b),[]);return[m,h]}return[[],[]]},[t]);return(0,f.useEffect)(()=>{const p=typeof document!="undefined"?document:null,m=(e==null?void 0:e.target)||p;if(t!==null){const h=E=>{if(i.current=E.ctrlKey||E.metaKey||E.shiftKey,(!i.current||i.current&&!e.actInsideInputWithModifier)&&xe(E))return!1;const C=fo(E.code,l);u.current.add(E[C]),lo(c,u.current,!1)&&(E.preventDefault(),s(!0))},y=E=>{if((!i.current||i.current&&!e.actInsideInputWithModifier)&&xe(E))return!1;const C=fo(E.code,l);lo(c,u.current,!0)?(s(!1),u.current.clear()):u.current.delete(E[C]),E.key==="Meta"&&u.current.clear(),i.current=!1},b=()=>{u.current.clear(),s(!1)};return m==null||m.addEventListener("keydown",h),m==null||m.addEventListener("keyup",y),window.addEventListener("blur",b),()=>{m==null||m.removeEventListener("keydown",h),m==null||m.removeEventListener("keyup",y),window.removeEventListener("blur",b)}}},[t,s]),r};function lo(t,e,r){return t.filter(s=>r||s.length===e.size).some(s=>s.every(i=>e.has(i)))}function fo(t,e){return e.includes(t)?"code":"key"}function ho(t,e,r,s){var c,l,p,m,h,y,b,E;if(!t.parentNode)return r;const i=e.get(t.parentNode),u=se(i,s);return ho(i,e,{x:((c=r.x)!=null?c:0)+u.x,y:((l=r.y)!=null?l:0)+u.y,z:((m=(p=i[$t])==null?void 0:p.z)!=null?m:0)>((h=r.z)!=null?h:0)?(b=(y=i[$t])==null?void 0:y.z)!=null?b:0:(E=r.z)!=null?E:0},s)}function go(t,e,r){t.forEach(s=>{var i,u;if(s.parentNode&&!t.has(s.parentNode))throw new Error(`Parent node ${s.parentNode} not found`);if(s.parentNode||r!=null&&r[s.id]){const{x:c,y:l,z:p}=ho(s,t,te(bt({},s.position),{z:(u=(i=s[$t])==null?void 0:i.z)!=null?u:0}),e);s.positionAbsolute={x:c,y:l},s[$t].z=p,r!=null&&r[s.id]&&(s[$t].isParent=!0)}})}function Ur(t,e,r,s){const i=new Map,u={},c=s?1e3:0;return t.forEach(l=>{var b;const p=(Vt(l.zIndex)?l.zIndex:0)+(l.selected?c:0),m=e.get(l.id),h=te(bt({},l),{positionAbsolute:{x:l.position.x,y:l.position.y}});l.parentNode&&(u[l.parentNode]=!0);const y=(m==null?void 0:m.type)&&(m==null?void 0:m.type)!==l.type;Object.defineProperty(h,$t,{enumerable:!1,value:{handleBounds:y||(b=m==null?void 0:m[$t])==null?void 0:b.handleBounds,z:p}}),i.set(l.id,h)}),go(i,r,u),i}function po(t,e={}){var D,C,T;const{getNodes:r,width:s,height:i,minZoom:u,maxZoom:c,d3Zoom:l,d3Selection:p,fitViewOnInitDone:m,fitViewOnInit:h,nodeOrigin:y}=t(),b=e.initial&&!m&&h;if(l&&p&&(b||!e.initial)){const k=r().filter(I=>{var H;const S=e.includeHiddenNodes?I.width&&I.height:!I.hidden;return(H=e.nodes)!=null&&H.length?S&&e.nodes.some(K=>K.id===I.id):S}),A=k.every(I=>I.width&&I.height);if(k.length>0&&A){const I=je(k,y),{x:S,y:H,zoom:K}=tn(I,s,i,(D=e.minZoom)!=null?D:u,(C=e.maxZoom)!=null?C:c,(T=e.padding)!=null?T:.1),F=Tt.CR.translate(S,H).scale(K);return typeof e.duration=="number"&&e.duration>0?l.transform(d(p,e.duration),F):l.transform(p,F),!0}}return!1}function Ho(t,e){return t.forEach(r=>{const s=e.get(r.id);s&&e.set(s.id,te(bt({},s),{[$t]:s[$t],selected:r.selected}))}),new Map(e)}function Oo(t,e){return e.map(r=>{const s=t.find(i=>i.id===r.id);return s&&(r.selected=s.selected),r})}function Tr({changedNodes:t,changedEdges:e,get:r,set:s}){const{nodeInternals:i,edges:u,onNodesChange:c,onEdgesChange:l,hasDefaultNodes:p,hasDefaultEdges:m}=r();t!=null&&t.length&&(p&&s({nodeInternals:Ho(t,i)}),c==null||c(t)),e!=null&&e.length&&(m&&s({edges:Oo(e,u)}),l==null||l(e))}const Bn=()=>{},Zo={zoomIn:Bn,zoomOut:Bn,zoomTo:Bn,getZoom:()=>1,setViewport:Bn,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Bn,fitBounds:Bn,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},Lo=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Xo=()=>{const t=Lt(),{d3Zoom:e,d3Selection:r}=Ot(Lo,j.X);return(0,f.useMemo)(()=>r&&e?{zoomIn:i=>e.scaleBy(d(r,i==null?void 0:i.duration),1.2),zoomOut:i=>e.scaleBy(d(r,i==null?void 0:i.duration),1/1.2),zoomTo:(i,u)=>e.scaleTo(d(r,u==null?void 0:u.duration),i),getZoom:()=>t.getState().transform[2],setViewport:(i,u)=>{var h,y,b;const[c,l,p]=t.getState().transform,m=Tt.CR.translate((h=i.x)!=null?h:c,(y=i.y)!=null?y:l).scale((b=i.zoom)!=null?b:p);e.transform(d(r,u==null?void 0:u.duration),m)},getViewport:()=>{const[i,u,c]=t.getState().transform;return{x:i,y:u,zoom:c}},fitView:i=>po(t.getState,i),setCenter:(i,u,c)=>{const{width:l,height:p,maxZoom:m}=t.getState(),h=typeof(c==null?void 0:c.zoom)!="undefined"?c.zoom:m,y=l/2-i*h,b=p/2-u*h,E=Tt.CR.translate(y,b).scale(h);e.transform(d(r,c==null?void 0:c.duration),E)},fitBounds:(i,u)=>{var D;const{width:c,height:l,minZoom:p,maxZoom:m}=t.getState(),{x:h,y,zoom:b}=tn(i,c,l,p,m,(D=u==null?void 0:u.padding)!=null?D:.1),E=Tt.CR.translate(h,y).scale(b);e.transform(d(r,u==null?void 0:u.duration),E)},project:i=>{const{transform:u,snapToGrid:c,snapGrid:l}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),Je(i,u,c,l)},screenToFlowPosition:i=>{const{transform:u,snapToGrid:c,snapGrid:l,domNode:p}=t.getState();if(!p)return i;const{x:m,y:h}=p.getBoundingClientRect(),y={x:i.x-m,y:i.y-h};return Je(y,u,c,l)},flowToScreenPosition:i=>{const{transform:u,domNode:c}=t.getState();if(!c)return i;const{x:l,y:p}=c.getBoundingClientRect(),m=Ie(i,u);return{x:m.x+l,y:m.y+p}},viewportInitialized:!0}:Zo,[e,r])};function Gr(){const t=Xo(),e=Lt(),r=(0,f.useCallback)(()=>e.getState().getNodes().map(C=>bt({},C)),[]),s=(0,f.useCallback)(C=>e.getState().nodeInternals.get(C),[]),i=(0,f.useCallback)(()=>{const{edges:C=[]}=e.getState();return C.map(T=>bt({},T))},[]),u=(0,f.useCallback)(C=>{const{edges:T=[]}=e.getState();return T.find(k=>k.id===C)},[]),c=(0,f.useCallback)(C=>{const{getNodes:T,setNodes:k,hasDefaultNodes:A,onNodesChange:I}=e.getState(),S=T(),H=typeof C=="function"?C(S):C;if(A)k(H);else if(I){const K=H.length===0?S.map(F=>({type:"remove",id:F.id})):H.map(F=>({item:F,type:"reset"}));I(K)}},[]),l=(0,f.useCallback)(C=>{const{edges:T=[],setEdges:k,hasDefaultEdges:A,onEdgesChange:I}=e.getState(),S=typeof C=="function"?C(T):C;if(A)k(S);else if(I){const H=S.length===0?T.map(K=>({type:"remove",id:K.id})):S.map(K=>({item:K,type:"reset"}));I(H)}},[]),p=(0,f.useCallback)(C=>{const T=Array.isArray(C)?C:[C],{getNodes:k,setNodes:A,hasDefaultNodes:I,onNodesChange:S}=e.getState();if(I){const K=[...k(),...T];A(K)}else if(S){const H=T.map(K=>({item:K,type:"add"}));S(H)}},[]),m=(0,f.useCallback)(C=>{const T=Array.isArray(C)?C:[C],{edges:k=[],setEdges:A,hasDefaultEdges:I,onEdgesChange:S}=e.getState();if(I)A([...k,...T]);else if(S){const H=T.map(K=>({item:K,type:"add"}));S(H)}},[]),h=(0,f.useCallback)(()=>{const{getNodes:C,edges:T=[],transform:k}=e.getState(),[A,I,S]=k;return{nodes:C().map(H=>bt({},H)),edges:T.map(H=>bt({},H)),viewport:{x:A,y:I,zoom:S}}},[]),y=(0,f.useCallback)(({nodes:C,edges:T})=>{const{nodeInternals:k,getNodes:A,edges:I,hasDefaultNodes:S,hasDefaultEdges:H,onNodesDelete:K,onEdgesDelete:F,onNodesChange:O,onEdgesChange:W}=e.getState(),et=(C||[]).map(tt=>tt.id),U=(T||[]).map(tt=>tt.id),nt=A().reduce((tt,ct)=>{const Et=!et.includes(ct.id)&&ct.parentNode&&tt.find(R=>R.id===ct.parentNode);return(typeof ct.deletable=="boolean"?ct.deletable:!0)&&(et.includes(ct.id)||Et)&&tt.push(ct),tt},[]),N=I.filter(tt=>typeof tt.deletable=="boolean"?tt.deletable:!0),G=N.filter(tt=>U.includes(tt.id));if(nt||G){const tt=ce(nt,N),ct=[...G,...tt],Et=ct.reduce((xt,R)=>(xt.includes(R.id)||xt.push(R.id),xt),[]);if((H||S)&&(H&&e.setState({edges:I.filter(xt=>!Et.includes(xt.id))}),S&&(nt.forEach(xt=>{k.delete(xt.id)}),e.setState({nodeInternals:new Map(k)}))),Et.length>0&&(F==null||F(ct),W&&W(Et.map(xt=>({id:xt,type:"remove"})))),nt.length>0&&(K==null||K(nt),O)){const xt=nt.map(R=>({id:R.id,type:"remove"}));O(xt)}}},[]),b=(0,f.useCallback)(C=>{const T=Kn(C),k=T?null:e.getState().nodeInternals.get(C.id);return!T&&!k?[null,null,T]:[T?C:Cn(k),k,T]},[]),E=(0,f.useCallback)((C,T=!0,k)=>{const[A,I,S]=b(C);return A?(k||e.getState().getNodes()).filter(H=>{if(!S&&(H.id===I.id||!H.positionAbsolute))return!1;const K=Cn(H),F=We(K,A);return T&&F>0||F>=A.width*A.height}):[]},[]),D=(0,f.useCallback)((C,T,k=!0)=>{const[A]=b(C);if(!A)return!1;const I=We(A,T);return k&&I>0||I>=A.width*A.height},[]);return(0,f.useMemo)(()=>te(bt({},t),{getNodes:r,getNode:s,getEdges:i,getEdge:u,setNodes:c,setEdges:l,addNodes:p,addEdges:m,toObject:h,deleteElements:y,getIntersectingNodes:E,isNodeIntersecting:D}),[t,r,s,i,u,c,l,p,m,h,y,E,D])}const or={actInsideInputWithModifier:!1};var Vo=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=Lt(),{deleteElements:s}=Gr(),i=rr(t,or),u=rr(e);(0,f.useEffect)(()=>{if(i){const{edges:c,getNodes:l}=r.getState(),p=l().filter(h=>h.selected),m=c.filter(h=>h.selected);s({nodes:p,edges:m}),r.setState({nodesSelectionActive:!1})}},[i]),(0,f.useEffect)(()=>{r.setState({multiSelectionActive:u})},[u])};function mo(t){const e=Lt();(0,f.useEffect)(()=>{let r;const s=()=>{var u,c;if(!t.current)return;const i=hn(t.current);(i.height===0||i.width===0)&&((c=(u=e.getState()).onError)==null||c.call(u,"004",ie.error004())),e.setState({width:i.width||500,height:i.height||500})};return s(),window.addEventListener("resize",s),t.current&&(r=new ResizeObserver(()=>s()),r.observe(t.current)),()=>{window.removeEventListener("resize",s),r&&t.current&&r.unobserve(t.current)}},[])}const Qr={position:"absolute",width:"100%",height:"100%",top:0,left:0},Fo=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,kr=t=>({x:t.x,y:t.y,zoom:t.k}),Hn=(t,e)=>t.target.closest(`.${e}`),yo=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),xo=t=>{const e=t.ctrlKey&&Ue()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Yo=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Ko=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:s,zoomOnScroll:i=!0,zoomOnPinch:u=!0,panOnScroll:c=!1,panOnScrollSpeed:l=.5,panOnScrollMode:p=Re.Free,zoomOnDoubleClick:m=!0,elementsSelectable:h,panOnDrag:y=!0,defaultViewport:b,translateExtent:E,minZoom:D,maxZoom:C,zoomActivationKeyCode:T,preventScrolling:k=!0,children:A,noWheelClassName:I,noPanClassName:S})=>{const H=(0,f.useRef)(),K=Lt(),F=(0,f.useRef)(!1),O=(0,f.useRef)(!1),W=(0,f.useRef)(null),et=(0,f.useRef)({x:0,y:0,zoom:0}),{d3Zoom:U,d3Selection:nt,d3ZoomHandler:N,userSelectionActive:G}=Ot(Yo,j.X),tt=rr(T),ct=(0,f.useRef)(0),Et=(0,f.useRef)(!1),xt=(0,f.useRef)();return mo(W),(0,f.useEffect)(()=>{if(W.current){const R=W.current.getBoundingClientRect(),rt=(0,Tt.sP)().scaleExtent([D,C]).translateExtent(E),Q=(0,st.Z)(W.current).call(rt),it=Tt.CR.translate(b.x,b.y).scale(Oe(b.zoom,D,C)),St=[[0,0],[R.width,R.height]],Dt=rt.constrain()(it,St,E);rt.transform(Q,Dt),rt.wheelDelta(xo),K.setState({d3Zoom:rt,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[Dt.x,Dt.y,Dt.k],domNode:W.current.closest(".react-flow")})}},[]),(0,f.useEffect)(()=>{nt&&U&&(c&&!tt&&!G?nt.on("wheel.zoom",R=>{if(Hn(R,I))return!1;R.preventDefault(),R.stopImmediatePropagation();const rt=nt.property("__zoom").k||1,Q=Ue();if(R.ctrlKey&&u&&Q){const ne=(0,at.Z)(R),de=xo(R),fe=rt*Math.pow(2,de);U.scaleTo(nt,fe,ne,R);return}const it=R.deltaMode===1?20:1;let St=p===Re.Vertical?0:R.deltaX*it,Dt=p===Re.Horizontal?0:R.deltaY*it;!Q&&R.shiftKey&&p!==Re.Vertical&&(St=R.deltaY*it,Dt=0),U.translateBy(nt,-(St/rt)*l,-(Dt/rt)*l,{internal:!0});const Zt=kr(nt.property("__zoom")),{onViewportChangeStart:Ft,onViewportChange:oe,onViewportChangeEnd:ee}=K.getState();clearTimeout(xt.current),Et.current||(Et.current=!0,e==null||e(R,Zt),Ft==null||Ft(Zt)),Et.current&&(t==null||t(R,Zt),oe==null||oe(Zt),xt.current=setTimeout(()=>{r==null||r(R,Zt),ee==null||ee(Zt),Et.current=!1},150))},{passive:!1}):typeof N!="undefined"&&nt.on("wheel.zoom",function(R,rt){if(!k||Hn(R,I))return null;R.preventDefault(),N.call(this,R,rt)},{passive:!1}))},[G,c,p,nt,U,N,tt,u,k,I,e,t,r]),(0,f.useEffect)(()=>{U&&U.on("start",R=>{var it,St;if(!R.sourceEvent||R.sourceEvent.internal)return null;ct.current=(it=R.sourceEvent)==null?void 0:it.button;const{onViewportChangeStart:rt}=K.getState(),Q=kr(R.transform);F.current=!0,et.current=Q,((St=R.sourceEvent)==null?void 0:St.type)==="mousedown"&&K.setState({paneDragging:!0}),rt==null||rt(Q),e==null||e(R.sourceEvent,Q)})},[U,e]),(0,f.useEffect)(()=>{U&&(G&&!F.current?U.on("zoom",null):G||U.on("zoom",R=>{var Q,it;const{onViewportChange:rt}=K.getState();if(K.setState({transform:[R.transform.x,R.transform.y,R.transform.k]}),O.current=!!(s&&yo(y,(Q=ct.current)!=null?Q:0)),(t||rt)&&!((it=R.sourceEvent)!=null&&it.internal)){const St=kr(R.transform);rt==null||rt(St),t==null||t(R.sourceEvent,St)}}))},[G,U,t,y,s]),(0,f.useEffect)(()=>{U&&U.on("end",R=>{var Q;if(!R.sourceEvent||R.sourceEvent.internal)return null;const{onViewportChangeEnd:rt}=K.getState();if(F.current=!1,K.setState({paneDragging:!1}),s&&yo(y,(Q=ct.current)!=null?Q:0)&&!O.current&&s(R.sourceEvent),O.current=!1,(r||rt)&&Fo(et.current,R.transform)){const it=kr(R.transform);et.current=it,clearTimeout(H.current),H.current=setTimeout(()=>{rt==null||rt(it),r==null||r(R.sourceEvent,it)},c?150:0)}})},[U,c,y,r,s]),(0,f.useEffect)(()=>{U&&U.filter(R=>{const rt=tt||i,Q=u&&R.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&R.button===1&&R.type==="mousedown"&&(Hn(R,"react-flow__node")||Hn(R,"react-flow__edge")))return!0;if(!y&&!rt&&!c&&!m&&!u||G||!m&&R.type==="dblclick"||Hn(R,I)&&R.type==="wheel"||Hn(R,S)&&(R.type!=="wheel"||c&&R.type==="wheel"&&!tt)||!u&&R.ctrlKey&&R.type==="wheel"||!rt&&!c&&!Q&&R.type==="wheel"||!y&&(R.type==="mousedown"||R.type==="touchstart")||Array.isArray(y)&&!y.includes(R.button)&&(R.type==="mousedown"||R.type==="touchstart"))return!1;const it=Array.isArray(y)&&y.includes(R.button)||!R.button||R.button<=1;return(!R.ctrlKey||R.type==="wheel")&&it})},[G,U,i,u,c,m,y,h,tt]),f.createElement("div",{className:"react-flow__renderer",ref:W,style:Qr},A)},Wo=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Uo(){const{userSelectionActive:t,userSelectionRect:e}=Ot(Wo,j.X);return t&&e?f.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function wo(t,e){var s,i;const r=t.find(u=>u.id===e.parentNode);if(r){const u=e.position.x+e.width-r.width,c=e.position.y+e.height-r.height;if(u>0||c>0||e.position.x<0||e.position.y<0){if(r.style=bt({},r.style)||{},r.style.width=(s=r.style.width)!=null?s:r.width,r.style.height=(i=r.style.height)!=null?i:r.height,u>0&&(r.style.width+=u),c>0&&(r.style.height+=c),e.position.x<0){const l=Math.abs(e.position.x);r.position.x=r.position.x-l,r.style.width+=l,e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);r.position.y=r.position.y-l,r.style.height+=l,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function _o(t,e){if(t.some(s=>s.type==="reset"))return t.filter(s=>s.type==="reset").map(s=>s.item);const r=t.filter(s=>s.type==="add").map(s=>s.item);return e.reduce((s,i)=>{const u=t.filter(l=>l.id===i.id);if(u.length===0)return s.push(i),s;const c=bt({},i);for(const l of u)if(l)switch(l.type){case"select":{c.selected=l.selected;break}case"position":{typeof l.position!="undefined"&&(c.position=l.position),typeof l.positionAbsolute!="undefined"&&(c.positionAbsolute=l.positionAbsolute),typeof l.dragging!="undefined"&&(c.dragging=l.dragging),c.expandParent&&wo(s,c);break}case"dimensions":{typeof l.dimensions!="undefined"&&(c.width=l.dimensions.width,c.height=l.dimensions.height),typeof l.updateStyle!="undefined"&&(c.style=bt(bt({},c.style||{}),l.dimensions)),typeof l.resizing=="boolean"&&(c.resizing=l.resizing),c.expandParent&&wo(s,c);break}case"remove":return s}return s.push(c),s},r)}function qr(t,e){return _o(t,e)}function Go(t,e){return _o(t,e)}const rn=(t,e)=>({id:t,type:"select",selected:e});function On(t,e){return t.reduce((r,s)=>{const i=e.includes(s.id);return!s.selected&&i?(s.selected=!0,r.push(rn(s.id,!0))):s.selected&&!i&&(s.selected=!1,r.push(rn(s.id,!1))),r},[])}const Ee=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},Qo=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),Jr=(0,f.memo)(({isSelecting:t,selectionMode:e=Qe.Full,panOnDrag:r,onSelectionStart:s,onSelectionEnd:i,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:p,onPaneMouseMove:m,onPaneMouseLeave:h,children:y})=>{const b=(0,f.useRef)(null),E=Lt(),D=(0,f.useRef)(0),C=(0,f.useRef)(0),T=(0,f.useRef)(),{userSelectionActive:k,elementsSelectable:A,dragging:I}=Ot(Qo,j.X),S=()=>{E.setState({userSelectionActive:!1,userSelectionRect:null}),D.current=0,C.current=0},H=N=>{u==null||u(N),E.getState().resetSelectedElements(),E.setState({nodesSelectionActive:!1})},K=N=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){N.preventDefault();return}c==null||c(N)},F=l?N=>l(N):void 0,O=N=>{const{resetSelectedElements:G,domNode:tt}=E.getState();if(T.current=tt==null?void 0:tt.getBoundingClientRect(),!A||!t||N.button!==0||N.target!==b.current||!T.current)return;const{x:ct,y:Et}=we(N,T.current);G(),E.setState({userSelectionRect:{width:0,height:0,startX:ct,startY:Et,x:ct,y:Et}}),s==null||s(N)},W=N=>{var de,fe;const{userSelectionRect:G,nodeInternals:tt,edges:ct,transform:Et,onNodesChange:xt,onEdgesChange:R,nodeOrigin:rt,getNodes:Q}=E.getState();if(!t||!T.current||!G)return;E.setState({userSelectionActive:!0,nodesSelectionActive:!1});const it=we(N,T.current),St=(de=G.startX)!=null?de:0,Dt=(fe=G.startY)!=null?fe:0,Zt=te(bt({},G),{x:it.x<St?it.x:St,y:it.y<Dt?it.y:Dt,width:Math.abs(it.x-St),height:Math.abs(it.y-Dt)}),Ft=Q(),oe=ae(tt,Zt,Et,e===Qe.Partial,!0,rt),ee=ce(oe,ct).map(Qt=>Qt.id),ne=oe.map(Qt=>Qt.id);if(D.current!==ne.length){D.current=ne.length;const Qt=On(Ft,ne);Qt.length&&(xt==null||xt(Qt))}if(C.current!==ee.length){C.current=ee.length;const Qt=On(ct,ee);Qt.length&&(R==null||R(Qt))}E.setState({userSelectionRect:Zt})},et=N=>{if(N.button!==0)return;const{userSelectionRect:G}=E.getState();!k&&G&&N.target===b.current&&(H==null||H(N)),E.setState({nodesSelectionActive:D.current>0}),S(),i==null||i(N)},U=N=>{k&&(E.setState({nodesSelectionActive:D.current>0}),i==null||i(N)),S()},nt=A&&(t||k);return f.createElement("div",{className:(0,ot.Z)(["react-flow__pane",{dragging:I,selection:t}]),onClick:nt?void 0:Ee(H,b),onContextMenu:Ee(K,b),onWheel:Ee(F,b),onMouseEnter:nt?void 0:p,onMouseDown:nt?O:void 0,onMouseMove:nt?W:m,onMouseUp:nt?et:void 0,onMouseLeave:nt?U:h,ref:b,style:Qr},y,f.createElement(Uo,null))});Jr.displayName="Pane";function $e(t,e){if(!t.parentNode)return!1;const r=e.get(t.parentNode);return r?r.selected?!0:$e(r,e):!1}function qo(t,e,r){let s=t;do{if(s!=null&&s.matches(e))return!0;if(s===r.current)return!1;s=s.parentElement}while(s);return!1}function ui(t,e,r,s){return Array.from(t.values()).filter(i=>(i.selected||i.id===s)&&(!i.parentNode||!$e(i,t))&&(i.draggable||e&&typeof i.draggable=="undefined")).map(i=>{var u,c,l,p;return{id:i.id,position:i.position||{x:0,y:0},positionAbsolute:i.positionAbsolute||{x:0,y:0},distance:{x:r.x-((c=(u=i.positionAbsolute)==null?void 0:u.x)!=null?c:0),y:r.y-((p=(l=i.positionAbsolute)==null?void 0:l.y)!=null?p:0)},delta:{x:0,y:0},extent:i.extent,parentNode:i.parentNode,width:i.width,height:i.height,expandParent:i.expandParent}})}function Jo(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function bo(t,e,r,s,i=[0,0],u){const c=Jo(t,t.extent||s);let l=c;if(t.extent==="parent"&&!t.expandParent)if(t.parentNode&&t.width&&t.height){const h=r.get(t.parentNode),{x:y,y:b}=se(h,i).positionAbsolute;l=h&&Vt(y)&&Vt(b)&&Vt(h.width)&&Vt(h.height)?[[y+t.width*i[0],b+t.height*i[1]],[y+h.width-t.width+t.width*i[0],b+h.height-t.height+t.height*i[1]]]:l}else u==null||u("005",ie.error005()),l=c;else if(t.extent&&t.parentNode&&t.extent!=="parent"){const h=r.get(t.parentNode),{x:y,y:b}=se(h,i).positionAbsolute;l=[[t.extent[0][0]+y,t.extent[0][1]+b],[t.extent[1][0]+y,t.extent[1][1]+b]]}let p={x:0,y:0};if(t.parentNode){const h=r.get(t.parentNode);p=se(h,i).positionAbsolute}const m=l&&l!=="parent"?Vn(e,l):e;return{position:{x:m.x-p.x,y:m.y-p.y},positionAbsolute:m}}function jr({nodeId:t,dragItems:e,nodeInternals:r}){const s=e.map(i=>{const u=r.get(i.id);return te(bt({},u),{position:i.position,positionAbsolute:i.positionAbsolute})});return[t?s.find(i=>i.id===t):s[0],s]}const vo=(t,e,r,s)=>{const i=e.querySelectorAll(t);if(!i||!i.length)return null;const u=Array.from(i),c=e.getBoundingClientRect(),l={x:c.width*s[0],y:c.height*s[1]};return u.map(p=>{const m=p.getBoundingClientRect();return bt({id:p.getAttribute("data-handleid"),position:p.getAttribute("data-handlepos"),x:(m.left-c.left-l.x)/r,y:(m.top-c.top-l.y)/r},hn(p))})};function on(t,e,r){return r===void 0?r:s=>{const i=e().nodeInternals.get(t);i&&r(s,bt({},i))}}function to({id:t,store:e,unselect:r=!1,nodeRef:s}){const{addSelectedNodes:i,unselectNodesAndEdges:u,multiSelectionActive:c,nodeInternals:l,onError:p}=e.getState(),m=l.get(t);if(!m){p==null||p("012",ie.error012(t));return}e.setState({nodesSelectionActive:!1}),m.selected?(r||m.selected&&c)&&(u({nodes:[m],edges:[]}),requestAnimationFrame(()=>{var h;return(h=s==null?void 0:s.current)==null?void 0:h.blur()})):i([t])}function Fe(){const t=Lt();return(0,f.useCallback)(({sourceEvent:r})=>{const{transform:s,snapGrid:i,snapToGrid:u}=t.getState(),c=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,p={x:(c-s[0])/s[2],y:(l-s[1])/s[2]};return bt({xSnapped:u?i[0]*Math.round(p.x/i[0]):p.x,ySnapped:u?i[1]*Math.round(p.y/i[1]):p.y},p)},[])}function Zn(t){return(e,r,s)=>t==null?void 0:t(e,s)}function Eo({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:s,nodeId:i,isSelectable:u,selectNodesOnDrag:c}){const l=Lt(),[p,m]=(0,f.useState)(!1),h=(0,f.useRef)([]),y=(0,f.useRef)({x:null,y:null}),b=(0,f.useRef)(0),E=(0,f.useRef)(null),D=(0,f.useRef)({x:0,y:0}),C=(0,f.useRef)(null),T=(0,f.useRef)(!1),k=(0,f.useRef)(!1),A=Fe();return(0,f.useEffect)(()=>{if(t!=null&&t.current){const I=(0,st.Z)(t.current),S=({x:F,y:O})=>{const{nodeInternals:W,onNodeDrag:et,onSelectionDrag:U,updateNodePositions:nt,nodeExtent:N,snapGrid:G,snapToGrid:tt,nodeOrigin:ct,onError:Et}=l.getState();y.current={x:F,y:O};let xt=!1,R={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&N){const Q=je(h.current,ct);R=ke(Q)}if(h.current=h.current.map(Q=>{var Zt,Ft;const it={x:F-Q.distance.x,y:O-Q.distance.y};tt&&(it.x=G[0]*Math.round(it.x/G[0]),it.y=G[1]*Math.round(it.y/G[1]));const St=[[N[0][0],N[0][1]],[N[1][0],N[1][1]]];h.current.length>1&&N&&!Q.extent&&(St[0][0]=Q.positionAbsolute.x-R.x+N[0][0],St[1][0]=Q.positionAbsolute.x+((Zt=Q.width)!=null?Zt:0)-R.x2+N[1][0],St[0][1]=Q.positionAbsolute.y-R.y+N[0][1],St[1][1]=Q.positionAbsolute.y+((Ft=Q.height)!=null?Ft:0)-R.y2+N[1][1]);const Dt=bo(Q,it,W,St,ct,Et);return xt=xt||Q.position.x!==Dt.position.x||Q.position.y!==Dt.position.y,Q.position=Dt.position,Q.positionAbsolute=Dt.positionAbsolute,Q}),!xt)return;nt(h.current,!0,!0),m(!0);const rt=i?et:Zn(U);if(rt&&C.current){const[Q,it]=jr({nodeId:i,dragItems:h.current,nodeInternals:W});rt(C.current,Q,it)}},H=()=>{var W,et;if(!E.current)return;const[F,O]=Fn(D.current,E.current);if(F!==0||O!==0){const{transform:U,panBy:nt}=l.getState();y.current.x=((W=y.current.x)!=null?W:0)-F/U[2],y.current.y=((et=y.current.y)!=null?et:0)-O/U[2],nt({x:F,y:O})&&S(y.current)}b.current=requestAnimationFrame(H)},K=F=>{var ct;const{nodeInternals:O,multiSelectionActive:W,nodesDraggable:et,unselectNodesAndEdges:U,onNodeDragStart:nt,onSelectionDragStart:N}=l.getState();k.current=!0;const G=i?nt:Zn(N);(!c||!u)&&!W&&i&&((ct=O.get(i))!=null&&ct.selected||U()),i&&u&&c&&to({id:i,store:l,nodeRef:t});const tt=A(F);if(y.current=tt,h.current=ui(O,et,tt,i),G&&h.current){const[Et,xt]=jr({nodeId:i,dragItems:h.current,nodeInternals:O});G(F.sourceEvent,Et,xt)}};if(e)I.on(".drag",null);else{const F=fn().on("start",O=>{const{domNode:W,nodeDragThreshold:et}=l.getState();et===0&&K(O);const U=A(O);y.current=U,E.current=(W==null?void 0:W.getBoundingClientRect())||null,D.current=we(O.sourceEvent,E.current)}).on("drag",O=>{var nt,N,G,tt;const W=A(O),{autoPanOnNodeDrag:et,nodeDragThreshold:U}=l.getState();if(!T.current&&k.current&&et&&(T.current=!0,H()),!k.current){const ct=W.xSnapped-((N=(nt=y==null?void 0:y.current)==null?void 0:nt.x)!=null?N:0),Et=W.ySnapped-((tt=(G=y==null?void 0:y.current)==null?void 0:G.y)!=null?tt:0);Math.sqrt(ct*ct+Et*Et)>U&&K(O)}(y.current.x!==W.xSnapped||y.current.y!==W.ySnapped)&&h.current&&k.current&&(C.current=O.sourceEvent,D.current=we(O.sourceEvent,E.current),S(W))}).on("end",O=>{if(k.current&&(m(!1),T.current=!1,k.current=!1,cancelAnimationFrame(b.current),h.current)){const{updateNodePositions:W,nodeInternals:et,onNodeDragStop:U,onSelectionDragStop:nt}=l.getState(),N=i?U:Zn(nt);if(W(h.current,!1,!1),N){const[G,tt]=jr({nodeId:i,dragItems:h.current,nodeInternals:et});N(O.sourceEvent,G,tt)}}}).filter(O=>{const W=O.target;return!O.button&&(!r||!qo(W,`.${r}`,t))&&(!s||qo(W,s,t))});return I.call(F),()=>{I.on(".drag",null)}}}},[t,e,r,s,u,l,i,c,A]),p}function Rr(){const t=Lt();return(0,f.useCallback)(r=>{const{nodeInternals:s,nodeExtent:i,updateNodePositions:u,getNodes:c,snapToGrid:l,snapGrid:p,onError:m,nodesDraggable:h}=t.getState(),y=c().filter(A=>A.selected&&(A.draggable||h&&typeof A.draggable=="undefined")),b=l?p[0]:5,E=l?p[1]:5,D=r.isShiftPressed?4:1,C=r.x*b*D,T=r.y*E*D,k=y.map(A=>{if(A.positionAbsolute){const I={x:A.positionAbsolute.x+C,y:A.positionAbsolute.y+T};l&&(I.x=p[0]*Math.round(I.x/p[0]),I.y=p[1]*Math.round(I.y/p[1]));const{positionAbsolute:S,position:H}=bo(A,I,s,i,void 0,m);A.position=H,A.positionAbsolute=S}return A});u(k,!0,!1)},[])}const Be={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ir=t=>{const e=({id:r,type:s,data:i,xPos:u,yPos:c,xPosOrigin:l,yPosOrigin:p,selected:m,onClick:h,onMouseEnter:y,onMouseMove:b,onMouseLeave:E,onContextMenu:D,onDoubleClick:C,style:T,className:k,isDraggable:A,isSelectable:I,isConnectable:S,isFocusable:H,selectNodesOnDrag:K,sourcePosition:F,targetPosition:O,hidden:W,resizeObserver:et,dragHandle:U,zIndex:nt,isParent:N,noDragClassName:G,noPanClassName:tt,initialized:ct,disableKeyboardA11y:Et,ariaLabel:xt,rfId:R,hasHandleBounds:rt})=>{const Q=Lt(),it=(0,f.useRef)(null),St=(0,f.useRef)(F),Dt=(0,f.useRef)(O),Zt=(0,f.useRef)(s),Ft=I||A||h||y||b||E,oe=Rr(),ee=on(r,Q.getState,y),ne=on(r,Q.getState,b),de=on(r,Q.getState,E),fe=on(r,Q.getState,D),Qt=on(r,Q.getState,C),Ae=Yt=>{const{nodeDragThreshold:be}=Q.getState();if(I&&(!K||!A||be>0)&&to({id:r,store:Q,nodeRef:it}),h){const Nt=Q.getState().nodeInternals.get(r);Nt&&h(Yt,bt({},Nt))}},Gt=Yt=>{if(!xe(Yt))if(vr.includes(Yt.key)&&I){const be=Yt.key==="Escape";to({id:r,store:Q,unselect:be,nodeRef:it})}else!Et&&A&&m&&Object.prototype.hasOwnProperty.call(Be,Yt.key)&&(Q.setState({ariaLiveMessage:`Moved selected node ${Yt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~c}`}),oe({x:Be[Yt.key].x,y:Be[Yt.key].y,isShiftPressed:Yt.shiftKey}))};(0,f.useEffect)(()=>()=>{it.current&&(et==null||et.unobserve(it.current))},[]),(0,f.useEffect)(()=>{if(it.current&&!W){const Yt=it.current;(!ct||!rt)&&(et==null||et.unobserve(Yt),et==null||et.observe(Yt))}},[W,ct,rt]),(0,f.useEffect)(()=>{const Yt=Zt.current!==s,be=St.current!==F,Nt=Dt.current!==O;it.current&&(Yt||be||Nt)&&(Yt&&(Zt.current=s),be&&(St.current=F),Nt&&(Dt.current=O),Q.getState().updateNodeDimensions([{id:r,nodeElement:it.current,forceUpdate:!0}]))},[r,s,F,O]);const cn=Eo({nodeRef:it,disabled:W||!A,noDragClassName:G,handleSelector:U,nodeId:r,isSelectable:I,selectNodesOnDrag:K});return W?null:f.createElement("div",{className:(0,ot.Z)(["react-flow__node",`react-flow__node-${s}`,{[tt]:A},k,{selected:m,selectable:I,parent:N,dragging:cn}]),ref:it,style:bt({zIndex:nt,transform:`translate(${l}px,${p}px)`,pointerEvents:Ft?"all":"none",visibility:ct?"visible":"hidden"},T),"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:ee,onMouseMove:ne,onMouseLeave:de,onContextMenu:fe,onClick:Ae,onDoubleClick:Qt,onKeyDown:H?Gt:void 0,tabIndex:H?0:void 0,role:H?"button":void 0,"aria-describedby":Et?void 0:`${co}-${R}`,"aria-label":xt},f.createElement(Fr,{value:r},f.createElement(t,{id:r,data:i,type:s,xPos:u,yPos:c,selected:m,isConnectable:S,sourcePosition:F,targetPosition:O,dragging:cn,dragHandle:U,zIndex:nt})))};return e.displayName="NodeWrapper",(0,f.memo)(e)};const jo=t=>{const e=t.getNodes().filter(r=>r.selected);return te(bt({},je(e,t.nodeOrigin)),{transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive})};function So({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const s=Lt(),{width:i,height:u,x:c,y:l,transformString:p,userSelectionActive:m}=Ot(jo,j.X),h=Rr(),y=(0,f.useRef)(null);if((0,f.useEffect)(()=>{var D;r||(D=y.current)==null||D.focus({preventScroll:!0})},[r]),Eo({nodeRef:y}),m||!i||!u)return null;const b=t?D=>{const C=s.getState().getNodes().filter(T=>T.selected);t(D,C)}:void 0,E=D=>{Object.prototype.hasOwnProperty.call(Be,D.key)&&h({x:Be[D.key].x,y:Be[D.key].y,isShiftPressed:D.shiftKey})};return f.createElement("div",{className:(0,ot.Z)(["react-flow__nodesselection","react-flow__container",e]),style:{transform:p}},f.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:b,tabIndex:r?void 0:-1,onKeyDown:r?void 0:E,style:{width:i,height:u,top:l,left:c}}))}var ti=(0,f.memo)(So);const ei=t=>t.nodesSelectionActive,No=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:s,onPaneMouseLeave:i,onPaneContextMenu:u,onPaneScroll:c,deleteKeyCode:l,onMove:p,onMoveStart:m,onMoveEnd:h,selectionKeyCode:y,selectionOnDrag:b,selectionMode:E,onSelectionStart:D,onSelectionEnd:C,multiSelectionKeyCode:T,panActivationKeyCode:k,zoomActivationKeyCode:A,elementsSelectable:I,zoomOnScroll:S,zoomOnPinch:H,panOnScroll:K,panOnScrollSpeed:F,panOnScrollMode:O,zoomOnDoubleClick:W,panOnDrag:et,defaultViewport:U,translateExtent:nt,minZoom:N,maxZoom:G,preventScrolling:tt,onSelectionContextMenu:ct,noWheelClassName:Et,noPanClassName:xt,disableKeyboardA11y:R})=>{const rt=Ot(ei),Q=rr(y),it=rr(k),St=it||et,Dt=it||K,Zt=Q||b&&St!==!0;return Vo({deleteKeyCode:l,multiSelectionKeyCode:T}),f.createElement(Ko,{onMove:p,onMoveStart:m,onMoveEnd:h,onPaneContextMenu:u,elementsSelectable:I,zoomOnScroll:S,zoomOnPinch:H,panOnScroll:Dt,panOnScrollSpeed:F,panOnScrollMode:O,zoomOnDoubleClick:W,panOnDrag:!Q&&St,defaultViewport:U,translateExtent:nt,minZoom:N,maxZoom:G,zoomActivationKeyCode:A,preventScrolling:tt,noWheelClassName:Et,noPanClassName:xt},f.createElement(Jr,{onSelectionStart:D,onSelectionEnd:C,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:s,onPaneMouseLeave:i,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:St,isSelecting:!!Zt,selectionMode:E},t,rt&&f.createElement(ti,{onSelectionContextMenu:ct,noPanClassName:xt,disableKeyboardA11y:R})))};No.displayName="FlowRenderer";var ni=(0,f.memo)(No);function n(t){return Ot((0,f.useCallback)(r=>t?ae(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function o(t){const e={input:ir(t.input||nn),default:ir(t.default||tr),output:ir(t.output||nr),group:ir(t.group||Wr)},r={},s=Object.keys(t).filter(i=>!["input","default","output","group"].includes(i)).reduce((i,u)=>(i[u]=ir(t[u]||tr),i),r);return bt(bt({},e),s)}const a=({x:t,y:e,width:r,height:s,origin:i})=>!r||!s?{x:t,y:e}:i[0]<0||i[1]<0||i[0]>1||i[1]>1?{x:t,y:e}:{x:t-r*i[0],y:e-s*i[1]},g=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),w=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:s,elementsSelectable:i,updateNodeDimensions:u,onError:c}=Ot(g,j.X),l=n(t.onlyRenderVisibleElements),p=(0,f.useRef)(),m=(0,f.useMemo)(()=>{if(typeof ResizeObserver=="undefined")return null;const h=new ResizeObserver(y=>{const b=y.map(E=>({id:E.target.getAttribute("data-id"),nodeElement:E.target,forceUpdate:!0}));u(b)});return p.current=h,h},[]);return(0,f.useEffect)(()=>()=>{var h;(h=p==null?void 0:p.current)==null||h.disconnect()},[]),f.createElement("div",{className:"react-flow__nodes",style:Qr},l.map(h=>{var H,K,F,O,W,et,U,nt;let y=h.type||"default";t.nodeTypes[y]||(c==null||c("003",ie.error003(y)),y="default");const b=t.nodeTypes[y]||t.nodeTypes.default,E=!!(h.draggable||e&&typeof h.draggable=="undefined"),D=!!(h.selectable||i&&typeof h.selectable=="undefined"),C=!!(h.connectable||r&&typeof h.connectable=="undefined"),T=!!(h.focusable||s&&typeof h.focusable=="undefined"),k=t.nodeExtent?Vn(h.positionAbsolute,t.nodeExtent):h.positionAbsolute,A=(H=k==null?void 0:k.x)!=null?H:0,I=(K=k==null?void 0:k.y)!=null?K:0,S=a({x:A,y:I,width:(F=h.width)!=null?F:0,height:(O=h.height)!=null?O:0,origin:t.nodeOrigin});return f.createElement(b,{key:h.id,id:h.id,className:h.className,style:h.style,type:y,data:h.data,sourcePosition:h.sourcePosition||ut.Bottom,targetPosition:h.targetPosition||ut.Top,hidden:h.hidden,xPos:A,yPos:I,xPosOrigin:S.x,yPosOrigin:S.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!h.selected,isDraggable:E,isSelectable:D,isConnectable:C,isFocusable:T,resizeObserver:m,dragHandle:h.dragHandle,zIndex:(et=(W=h[$t])==null?void 0:W.z)!=null?et:0,isParent:!!((U=h[$t])!=null&&U.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!h.width&&!!h.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:h.ariaLabel,hasHandleBounds:!!((nt=h[$t])!=null&&nt.handleBounds)})}))};w.displayName="NodeRenderer";var v=(0,f.memo)(w);const x=(t,e,r)=>r===ut.Left?t-e:r===ut.Right?t+e:t,P=(t,e,r)=>r===ut.Top?t-e:r===ut.Bottom?t+e:t,B="react-flow__edgeupdater",Z=({position:t,centerX:e,centerY:r,radius:s=10,onMouseDown:i,onMouseEnter:u,onMouseOut:c,type:l})=>f.createElement("circle",{onMouseDown:i,onMouseEnter:u,onMouseOut:c,className:(0,ot.Z)([B,`${B}-${l}`]),cx:x(e,s,t),cy:P(r,s,t),r:s,stroke:"transparent",fill:"transparent"}),X=()=>!0;var ft=t=>{const e=({id:r,className:s,type:i,data:u,onClick:c,onEdgeDoubleClick:l,selected:p,animated:m,label:h,labelStyle:y,labelShowBg:b,labelBgStyle:E,labelBgPadding:D,labelBgBorderRadius:C,style:T,source:k,target:A,sourceX:I,sourceY:S,targetX:H,targetY:K,sourcePosition:F,targetPosition:O,elementsSelectable:W,hidden:et,sourceHandleId:U,targetHandleId:nt,onContextMenu:N,onMouseEnter:G,onMouseMove:tt,onMouseLeave:ct,edgeUpdaterRadius:Et,onEdgeUpdate:xt,onEdgeUpdateStart:R,onEdgeUpdateEnd:rt,markerEnd:Q,markerStart:it,rfId:St,ariaLabel:Dt,isFocusable:Zt,isUpdatable:Ft,pathOptions:oe,interactionWidth:ee})=>{const ne=(0,f.useRef)(null),[de,fe]=(0,f.useState)(!1),[Qt,Ae]=(0,f.useState)(!1),Gt=Lt(),cn=(0,f.useMemo)(()=>`url('#${qt(it,St)}')`,[it,St]),Yt=(0,f.useMemo)(()=>`url('#${qt(Q,St)}')`,[Q,St]);if(et)return null;const be=he=>{var un;const{edges:Pe,addSelectedEdges:hr,unselectNodesAndEdges:gr,multiSelectionActive:pr}=Gt.getState(),bn=Pe.find(ro=>ro.id===r);bn&&(W&&(Gt.setState({nodesSelectionActive:!1}),bn.selected&&pr?(gr({nodes:[],edges:[bn]}),(un=ne.current)==null||un.blur()):hr([r])),c&&c(he,bn))},Nt=Ge(r,Gt.getState,l),ur=Ge(r,Gt.getState,N),lr=Ge(r,Gt.getState,G),eo=Ge(r,Gt.getState,tt),zr=Ge(r,Gt.getState,ct),fr=(he,Pe)=>{if(he.button!==0)return;const{edges:hr,isValidConnection:gr}=Gt.getState(),pr=Pe?A:k,bn=(Pe?nt:U)||null,un=Pe?"target":"source",ro=gr||X,ii=Pe,oo=hr.find(mr=>mr.id===r);Ae(!0),R==null||R(he,oo,un);const si=mr=>{Ae(!1),rt==null||rt(mr,oo,un)};Ht({event:he,handleId:bn,nodeId:pr,onConnect:mr=>xt==null?void 0:xt(oo,mr),isTarget:ii,getState:Gt.getState,setState:Gt.setState,isValidConnection:ro,edgeUpdaterType:un,onEdgeUpdateEnd:si})},Ln=he=>fr(he,!0),$r=he=>fr(he,!1),Xn=()=>fe(!0),dr=()=>fe(!1),no=!W&&!c,Br=he=>{var Pe;if(vr.includes(he.key)&&W){const{unselectNodesAndEdges:hr,addSelectedEdges:gr,edges:pr}=Gt.getState();he.key==="Escape"?((Pe=ne.current)==null||Pe.blur(),hr({edges:[pr.find(un=>un.id===r)]})):gr([r])}};return f.createElement("g",{className:(0,ot.Z)(["react-flow__edge",`react-flow__edge-${i}`,s,{selected:p,animated:m,inactive:no,updating:de}]),onClick:be,onDoubleClick:Nt,onContextMenu:ur,onMouseEnter:lr,onMouseMove:eo,onMouseLeave:zr,onKeyDown:Zt?Br:void 0,tabIndex:Zt?0:void 0,role:Zt?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":Dt===null?void 0:Dt||`Edge from ${k} to ${A}`,"aria-describedby":Zt?`${uo}-${St}`:void 0,ref:ne},!Qt&&f.createElement(t,{id:r,source:k,target:A,selected:p,animated:m,label:h,labelStyle:y,labelShowBg:b,labelBgStyle:E,labelBgPadding:D,labelBgBorderRadius:C,data:u,style:T,sourceX:I,sourceY:S,targetX:H,targetY:K,sourcePosition:F,targetPosition:O,sourceHandleId:U,targetHandleId:nt,markerStart:cn,markerEnd:Yt,pathOptions:oe,interactionWidth:ee}),Ft&&f.createElement(f.Fragment,null,(Ft==="source"||Ft===!0)&&f.createElement(Z,{position:F,centerX:I,centerY:S,radius:Et,onMouseDown:Ln,onMouseEnter:Xn,onMouseOut:dr,type:"source"}),(Ft==="target"||Ft===!0)&&f.createElement(Z,{position:O,centerX:H,centerY:K,radius:Et,onMouseDown:$r,onMouseEnter:Xn,onMouseOut:dr,type:"target"})))};return e.displayName="EdgeWrapper",(0,f.memo)(e)};function yt(t){const e={default:ft(t.default||mn),straight:ft(t.bezier||Dn),step:ft(t.step||Gn),smoothstep:ft(t.step||pn),simplebezier:ft(t.simplebezier||Xe)},r={},s=Object.keys(t).filter(i=>!["default","bezier"].includes(i)).reduce((i,u)=>(i[u]=ft(t[u]||mn),i),r);return bt(bt({},e),s)}function Ct(t,e,r=null){const s=((r==null?void 0:r.x)||0)+e.x,i=((r==null?void 0:r.y)||0)+e.y,u=(r==null?void 0:r.width)||e.width,c=(r==null?void 0:r.height)||e.height;switch(t){case ut.Top:return{x:s+u/2,y:i};case ut.Right:return{x:s+u,y:i+c/2};case ut.Bottom:return{x:s+u/2,y:i+c};case ut.Left:return{x:s,y:i+c/2}}}function re(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const Kt=(t,e,r,s,i,u)=>{const c=Ct(r,t,e),l=Ct(u,s,i);return{sourceX:c.x,sourceY:c.y,targetX:l.x,targetY:l.y}};function me({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:s,targetWidth:i,targetHeight:u,width:c,height:l,transform:p}){const m={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+i),y2:Math.max(t.y+s,e.y+u)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const h=ke({x:(0-p[0])/p[2],y:(0-p[1])/p[2],width:c/p[2],height:l/p[2]}),y=Math.max(0,Math.min(h.x2,m.x2)-Math.max(h.x,m.x)),b=Math.max(0,Math.min(h.y2,m.y2)-Math.max(h.y,m.y));return Math.ceil(y*b)>0}function At(t){var s,i,u,c,l;const e=((s=t==null?void 0:t[$t])==null?void 0:s.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((i=t==null?void 0:t.positionAbsolute)==null?void 0:i.x)!="undefined"&&typeof((u=t==null?void 0:t.positionAbsolute)==null?void 0:u.y)!="undefined";return[{x:((c=t==null?void 0:t.positionAbsolute)==null?void 0:c.x)||0,y:((l=t==null?void 0:t.positionAbsolute)==null?void 0:l.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const sn=[{level:0,isMaxLevel:!0,edges:[]}];function Ye(t,e,r=!1){let s=-1;const i=t.reduce((c,l)=>{var h,y;const p=Vt(l.zIndex);let m=p?l.zIndex:0;if(r){const b=e.get(l.target),E=e.get(l.source),D=l.selected||(b==null?void 0:b.selected)||(E==null?void 0:E.selected),C=Math.max(((h=E==null?void 0:E[$t])==null?void 0:h.z)||0,((y=b==null?void 0:b[$t])==null?void 0:y.z)||0,1e3);m=(p?l.zIndex:0)+(D?C:0)}return c[m]?c[m].push(l):c[m]=[l],s=m>s?m:s,c},{}),u=Object.entries(i).map(([c,l])=>{const p=+c;return{edges:l,level:p,isMaxLevel:p===s}});return u.length===0?sn:u}function wn(t,e,r){const s=Ot((0,f.useCallback)(i=>t?i.edges.filter(u=>{const c=e.get(u.source),l=e.get(u.target);return(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&me({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:l.width,targetHeight:l.height,width:i.width,height:i.height,transform:i.transform})}):i.edges,[t,e]));return Ye(s,e,r)}const an=({color:t="none",strokeWidth:e=1})=>f.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Se=({color:t="none",strokeWidth:e=1})=>f.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),sr={[Pn.Arrow]:an,[Pn.ArrowClosed]:Se};function _n(t){const e=Lt();return(0,f.useMemo)(()=>{var i,u;return Object.prototype.hasOwnProperty.call(sr,t)?sr[t]:((u=(i=e.getState()).onError)==null||u.call(i,"009",ie.error009(t)),null)},[t])}const Dr=({id:t,type:e,color:r,width:s=12.5,height:i=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:l="auto-start-reverse"})=>{const p=_n(e);return p?f.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${s}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:l,refX:"0",refY:"0"},f.createElement(p,{color:r,strokeWidth:c})):null},Ir=({defaultColor:t,rfId:e})=>r=>{const s=[];return r.edges.reduce((i,u)=>([u.markerStart,u.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const l=qt(c,e);s.includes(l)||(i.push(bt({id:l,color:c.color||t},c)),s.push(l))}}),i),[]).sort((i,u)=>i.id.localeCompare(u.id))},ar=({defaultColor:t,rfId:e})=>{const r=Ot((0,f.useCallback)(Ir({defaultColor:t,rfId:e}),[t,e]),(s,i)=>!(s.length!==i.length||s.some((u,c)=>u.id!==i[c].id)));return f.createElement("defs",null,r.map(s=>f.createElement(Dr,{id:s.id,key:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient})))};ar.displayName="MarkerDefinitions";var ri=(0,f.memo)(ar);const oi=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),M=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:s,edgeTypes:i,noPanClassName:u,onEdgeUpdate:c,onEdgeContextMenu:l,onEdgeMouseEnter:p,onEdgeMouseMove:m,onEdgeMouseLeave:h,onEdgeClick:y,edgeUpdaterRadius:b,onEdgeDoubleClick:E,onEdgeUpdateStart:D,onEdgeUpdateEnd:C,children:T})=>{const{edgesFocusable:k,edgesUpdatable:A,elementsSelectable:I,width:S,height:H,connectionMode:K,nodeInternals:F,onError:O}=Ot(oi,j.X),W=wn(e,F,r);return S?f.createElement(f.Fragment,null,W.map(({level:et,edges:U,isMaxLevel:nt})=>f.createElement("svg",{key:et,style:{zIndex:et},width:S,height:H,className:"react-flow__edges react-flow__container"},nt&&f.createElement(ri,{defaultColor:t,rfId:s}),f.createElement("g",null,U.map(N=>{var Ae,Gt;const[G,tt,ct]=At(F.get(N.source)),[Et,xt,R]=At(F.get(N.target));if(!ct||!R)return null;let rt=N.type||"default";i[rt]||(O==null||O("011",ie.error011(rt)),rt="default");const Q=i[rt]||i.default,it=K===Le.Strict?xt.target:((Ae=xt.target)!=null?Ae:[]).concat((Gt=xt.source)!=null?Gt:[]),St=re(tt.source,N.sourceHandle),Dt=re(it,N.targetHandle),Zt=(St==null?void 0:St.position)||ut.Bottom,Ft=(Dt==null?void 0:Dt.position)||ut.Top,oe=!!(N.focusable||k&&typeof N.focusable=="undefined"),ee=typeof c!="undefined"&&(N.updatable||A&&typeof N.updatable=="undefined");if(!St||!Dt)return O==null||O("008",ie.error008(St,N)),null;const{sourceX:ne,sourceY:de,targetX:fe,targetY:Qt}=Kt(G,St,Zt,Et,Dt,Ft);return f.createElement(Q,{key:N.id,id:N.id,className:(0,ot.Z)([N.className,u]),type:rt,data:N.data,selected:!!N.selected,animated:!!N.animated,hidden:!!N.hidden,label:N.label,labelStyle:N.labelStyle,labelShowBg:N.labelShowBg,labelBgStyle:N.labelBgStyle,labelBgPadding:N.labelBgPadding,labelBgBorderRadius:N.labelBgBorderRadius,style:N.style,source:N.source,target:N.target,sourceHandleId:N.sourceHandle,targetHandleId:N.targetHandle,markerEnd:N.markerEnd,markerStart:N.markerStart,sourceX:ne,sourceY:de,targetX:fe,targetY:Qt,sourcePosition:Zt,targetPosition:Ft,elementsSelectable:I,onEdgeUpdate:c,onContextMenu:l,onMouseEnter:p,onMouseMove:m,onMouseLeave:h,onClick:y,edgeUpdaterRadius:b,onEdgeDoubleClick:E,onEdgeUpdateStart:D,onEdgeUpdateEnd:C,rfId:s,ariaLabel:N.ariaLabel,isFocusable:oe,isUpdatable:ee,pathOptions:"pathOptions"in N?N.pathOptions:void 0,interactionWidth:N.interactionWidth})})))),T):null};M.displayName="EdgeRenderer";var pt=(0,f.memo)(M);const L=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function _t({children:t}){const e=Ot(L);return f.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function kt(t){const e=Gr(),r=(0,f.useRef)(!1);(0,f.useEffect)(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const It={[ut.Left]:ut.Right,[ut.Right]:ut.Left,[ut.Top]:ut.Bottom,[ut.Bottom]:ut.Top},zt=({nodeId:t,handleType:e,style:r,type:s=De.Bezier,CustomComponent:i,connectionStatus:u})=>{var K,F,O,W,et,U,nt;const{fromNode:c,handleId:l,toX:p,toY:m,connectionMode:h}=Ot((0,f.useCallback)(N=>({fromNode:N.nodeInternals.get(t),handleId:N.connectionHandleId,toX:(N.connectionPosition.x-N.transform[0])/N.transform[2],toY:(N.connectionPosition.y-N.transform[1])/N.transform[2],connectionMode:N.connectionMode}),[t]),j.X),y=(K=c==null?void 0:c[$t])==null?void 0:K.handleBounds;let b=y==null?void 0:y[e];if(h===Le.Loose&&(b=b||(y==null?void 0:y[e==="source"?"target":"source"])),!c||!b)return null;const E=l?b.find(N=>N.id===l):b[0],D=E?E.x+E.width/2:((F=c.width)!=null?F:0)/2,C=E?E.y+E.height/2:(O=c.height)!=null?O:0,T=((et=(W=c.positionAbsolute)==null?void 0:W.x)!=null?et:0)+D,k=((nt=(U=c.positionAbsolute)==null?void 0:U.y)!=null?nt:0)+C,A=E==null?void 0:E.position,I=A?It[A]:null;if(!A||!I)return null;if(i)return f.createElement(i,{connectionLineType:s,connectionLineStyle:r,fromNode:c,fromHandle:E,fromX:T,fromY:k,toX:p,toY:m,fromPosition:A,toPosition:I,connectionStatus:u});let S="";const H={sourceX:T,sourceY:k,sourcePosition:A,targetX:p,targetY:m,targetPosition:I};return s===De.Bezier?[S]=zn(H):s===De.Step?[S]=Rn(te(bt({},H),{borderRadius:0})):s===De.SmoothStep?[S]=Rn(H):s===De.SimpleBezier?[S]=Un(H):S=`M${T},${k} ${p},${m}`,f.createElement("path",{d:S,fill:"none",className:"react-flow__connection-path",style:r})};zt.displayName="ConnectionLine";const Xt=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Wt({containerStyle:t,style:e,type:r,component:s}){const{nodeId:i,handleType:u,nodesConnectable:c,width:l,height:p,connectionStatus:m}=Ot(Xt,j.X);return!(i&&u&&l&&c)?null:f.createElement("svg",{style:t,width:l,height:p,className:"react-flow__edges react-flow__connectionline react-flow__container"},f.createElement("g",{className:(0,ot.Z)(["react-flow__connection",m])},f.createElement(zt,{nodeId:i,handleType:u,style:e,type:r,CustomComponent:s,connectionStatus:m})))}function Ne(t,e){const r=(0,f.useRef)(null),s=Lt();return(0,f.useMemo)(()=>e(t),[t])}const Jt=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:s,onMoveEnd:i,onInit:u,onNodeClick:c,onEdgeClick:l,onNodeDoubleClick:p,onEdgeDoubleClick:m,onNodeMouseEnter:h,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:E,onSelectionContextMenu:D,onSelectionStart:C,onSelectionEnd:T,connectionLineType:k,connectionLineStyle:A,connectionLineComponent:I,connectionLineContainerStyle:S,selectionKeyCode:H,selectionOnDrag:K,selectionMode:F,multiSelectionKeyCode:O,panActivationKeyCode:W,zoomActivationKeyCode:et,deleteKeyCode:U,onlyRenderVisibleElements:nt,elementsSelectable:N,selectNodesOnDrag:G,defaultViewport:tt,translateExtent:ct,minZoom:Et,maxZoom:xt,preventScrolling:R,defaultMarkerColor:rt,zoomOnScroll:Q,zoomOnPinch:it,panOnScroll:St,panOnScrollSpeed:Dt,panOnScrollMode:Zt,zoomOnDoubleClick:Ft,panOnDrag:oe,onPaneClick:ee,onPaneMouseEnter:ne,onPaneMouseMove:de,onPaneMouseLeave:fe,onPaneScroll:Qt,onPaneContextMenu:Ae,onEdgeUpdate:Gt,onEdgeContextMenu:cn,onEdgeMouseEnter:Yt,onEdgeMouseMove:be,onEdgeMouseLeave:Nt,edgeUpdaterRadius:ur,onEdgeUpdateStart:lr,onEdgeUpdateEnd:eo,noDragClassName:zr,noWheelClassName:fr,noPanClassName:Ln,elevateEdgesOnSelect:$r,disableKeyboardA11y:Xn,nodeOrigin:dr,nodeExtent:no,rfId:Br})=>{const he=Ne(t,o),Pe=Ne(e,yt);return kt(u),f.createElement(ni,{onPaneClick:ee,onPaneMouseEnter:ne,onPaneMouseMove:de,onPaneMouseLeave:fe,onPaneContextMenu:Ae,onPaneScroll:Qt,deleteKeyCode:U,selectionKeyCode:H,selectionOnDrag:K,selectionMode:F,onSelectionStart:C,onSelectionEnd:T,multiSelectionKeyCode:O,panActivationKeyCode:W,zoomActivationKeyCode:et,elementsSelectable:N,onMove:r,onMoveStart:s,onMoveEnd:i,zoomOnScroll:Q,zoomOnPinch:it,zoomOnDoubleClick:Ft,panOnScroll:St,panOnScrollSpeed:Dt,panOnScrollMode:Zt,panOnDrag:oe,defaultViewport:tt,translateExtent:ct,minZoom:Et,maxZoom:xt,onSelectionContextMenu:D,preventScrolling:R,noDragClassName:zr,noWheelClassName:fr,noPanClassName:Ln,disableKeyboardA11y:Xn},f.createElement(_t,null,f.createElement(pt,{edgeTypes:Pe,onEdgeClick:l,onEdgeDoubleClick:m,onEdgeUpdate:Gt,onlyRenderVisibleElements:nt,onEdgeContextMenu:cn,onEdgeMouseEnter:Yt,onEdgeMouseMove:be,onEdgeMouseLeave:Nt,onEdgeUpdateStart:lr,onEdgeUpdateEnd:eo,edgeUpdaterRadius:ur,defaultMarkerColor:rt,noPanClassName:Ln,elevateEdgesOnSelect:!!$r,disableKeyboardA11y:Xn,rfId:Br},f.createElement(Wt,{style:A,type:k,component:I,containerStyle:S})),f.createElement("div",{className:"react-flow__edgelabel-renderer"}),f.createElement(v,{nodeTypes:he,onNodeClick:c,onNodeDoubleClick:p,onNodeMouseEnter:h,onNodeMouseMove:y,onNodeMouseLeave:b,onNodeContextMenu:E,selectNodesOnDrag:G,onlyRenderVisibleElements:nt,noPanClassName:Ln,noDragClassName:zr,disableKeyboardA11y:Xn,nodeOrigin:dr,nodeExtent:no,rfId:Br})))};Jt.displayName="GraphView";var Ce=(0,f.memo)(Jt);const Me=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],jt={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Me,nodeExtent:Me,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Le.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Ze,isValidConnection:void 0},Ke=()=>(0,q.F)((t,e)=>te(bt({},jt),{setNodes:r=>{const{nodeInternals:s,nodeOrigin:i,elevateNodesOnSelect:u}=e();t({nodeInternals:Ur(r,s,i,u)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:s={}}=e();t({edges:r.map(i=>bt(bt({},s),i))})},setDefaultNodesAndEdges:(r,s)=>{const i=typeof r!="undefined",u=typeof s!="undefined",c=i?Ur(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:u?s:[],hasDefaultNodes:i,hasDefaultEdges:u})},updateNodeDimensions:r=>{const{onNodesChange:s,nodeInternals:i,fitViewOnInit:u,fitViewOnInitDone:c,fitViewOnInitOptions:l,domNode:p,nodeOrigin:m}=e(),h=p==null?void 0:p.querySelector(".react-flow__viewport");if(!h)return;const y=window.getComputedStyle(h),{m22:b}=new window.DOMMatrixReadOnly(y.transform),E=r.reduce((C,T)=>{const k=i.get(T.id);if(k){const A=hn(T.nodeElement);!!(A.width&&A.height&&(k.width!==A.width||k.height!==A.height||T.forceUpdate))&&(i.set(k.id,bt(te(bt({},k),{[$t]:te(bt({},k[$t]),{handleBounds:{source:vo(".source",T.nodeElement,b,m),target:vo(".target",T.nodeElement,b,m)}})}),A)),C.push({id:k.id,type:"dimensions",dimensions:A}))}return C},[]);go(i,m);const D=c||u&&!c&&po(e,bt({initial:!0},l));t({nodeInternals:new Map(i),fitViewOnInitDone:D}),(E==null?void 0:E.length)>0&&(s==null||s(E))},updateNodePositions:(r,s=!0,i=!1)=>{const{triggerNodeChanges:u}=e(),c=r.map(l=>{const p={id:l.id,type:"position",dragging:i};return s&&(p.positionAbsolute=l.positionAbsolute,p.position=l.position),p});u(c)},triggerNodeChanges:r=>{const{onNodesChange:s,nodeInternals:i,hasDefaultNodes:u,nodeOrigin:c,getNodes:l,elevateNodesOnSelect:p}=e();if(r!=null&&r.length){if(u){const m=qr(r,l()),h=Ur(m,i,c,p);t({nodeInternals:h})}s==null||s(r)}},addSelectedNodes:r=>{const{multiSelectionActive:s,edges:i,getNodes:u}=e();let c,l=null;s?c=r.map(p=>rn(p,!0)):(c=On(u(),r),l=On(i,[])),Tr({changedNodes:c,changedEdges:l,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:s,edges:i,getNodes:u}=e();let c,l=null;s?c=r.map(p=>rn(p,!0)):(c=On(i,r),l=On(u(),[])),Tr({changedNodes:l,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:s}={})=>{const{edges:i,getNodes:u}=e(),c=r||u(),l=s||i,p=c.map(h=>(h.selected=!1,rn(h.id,!1))),m=l.map(h=>rn(h.id,!1));Tr({changedNodes:p,changedEdges:m,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:s,maxZoom:i}=e();s==null||s.scaleExtent([r,i]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:s,minZoom:i}=e();s==null||s.scaleExtent([i,r]),t({maxZoom:r})},setTranslateExtent:r=>{var s;(s=e().d3Zoom)==null||s.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:s}=e(),u=s().filter(l=>l.selected).map(l=>rn(l.id,!1)),c=r.filter(l=>l.selected).map(l=>rn(l.id,!1));Tr({changedNodes:u,changedEdges:c,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:s}=e();s.forEach(i=>{i.positionAbsolute=Vn(i.position,r)}),t({nodeExtent:r,nodeInternals:new Map(s)})},panBy:r=>{const{transform:s,width:i,height:u,d3Zoom:c,d3Selection:l,translateExtent:p}=e();if(!c||!l||!r.x&&!r.y)return!1;const m=Tt.CR.translate(s[0]+r.x,s[1]+r.y).scale(s[2]),h=[[0,0],[i,u]],y=c==null?void 0:c.constrain()(m,h,p);return c.transform(l,y),s[0]!==y.x||s[1]!==y.y||s[2]!==y.k},cancelConnection:()=>t({connectionNodeId:jt.connectionNodeId,connectionHandleId:jt.connectionHandleId,connectionHandleType:jt.connectionHandleType,connectionStatus:jt.connectionStatus,connectionStartHandle:jt.connectionStartHandle,connectionEndHandle:jt.connectionEndHandle}),reset:()=>t(bt({},jt))}),Object.is),cr=({children:t})=>{const e=(0,f.useRef)(null);return e.current||(e.current=Ke()),f.createElement(dn,{value:e.current},t)};cr.displayName="ReactFlowProvider";const li=({children:t})=>(0,f.useContext)(ye)?f.createElement(f.Fragment,null,t):f.createElement(cr,null,t);li.displayName="ReactFlowWrapper";const bi={input:nn,default:tr,output:nr,group:Wr},vi={default:mn,straight:Dn,step:Gn,smoothstep:pn,simplebezier:Xe},Ei=[0,0],Si=[15,15],Ni={x:0,y:0,zoom:1},Ci={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},fi=(0,f.forwardRef)((vs,hs)=>{var yi=vs,{nodes:t,edges:e,defaultNodes:r,defaultEdges:s,className:i,nodeTypes:u=bi,edgeTypes:c=vi,onNodeClick:l,onEdgeClick:p,onInit:m,onMove:h,onMoveStart:y,onMoveEnd:b,onConnect:E,onConnectStart:D,onConnectEnd:C,onClickConnectStart:T,onClickConnectEnd:k,onNodeMouseEnter:A,onNodeMouseMove:I,onNodeMouseLeave:S,onNodeContextMenu:H,onNodeDoubleClick:K,onNodeDragStart:F,onNodeDrag:O,onNodeDragStop:W,onNodesDelete:et,onEdgesDelete:U,onSelectionChange:nt,onSelectionDragStart:N,onSelectionDrag:G,onSelectionDragStop:tt,onSelectionContextMenu:ct,onSelectionStart:Et,onSelectionEnd:xt,connectionMode:R=Le.Strict,connectionLineType:rt=De.Bezier,connectionLineStyle:Q,connectionLineComponent:it,connectionLineContainerStyle:St,deleteKeyCode:Dt="Backspace",selectionKeyCode:Zt="Shift",selectionOnDrag:Ft=!1,selectionMode:oe=Qe.Full,panActivationKeyCode:ee="Space",multiSelectionKeyCode:ne=Ue()?"Meta":"Control",zoomActivationKeyCode:de=Ue()?"Meta":"Control",snapToGrid:fe=!1,snapGrid:Qt=Si,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:Gt=!0,nodesDraggable:cn,nodesConnectable:Yt,nodesFocusable:be,nodeOrigin:Nt=Ei,edgesFocusable:ur,edgesUpdatable:lr,elementsSelectable:eo,defaultViewport:zr=Ni,minZoom:fr=.5,maxZoom:Ln=2,translateExtent:$r=Me,preventScrolling:Xn=!0,nodeExtent:dr,defaultMarkerColor:no="#b1b1b7",zoomOnScroll:Br=!0,zoomOnPinch:he=!0,panOnScroll:Pe=!1,panOnScrollSpeed:hr=.5,panOnScrollMode:gr=Re.Free,zoomOnDoubleClick:pr=!0,panOnDrag:bn=!0,onPaneClick:un,onPaneMouseEnter:ro,onPaneMouseMove:ii,onPaneMouseLeave:oo,onPaneScroll:si,onPaneContextMenu:hi,children:mr,onEdgeUpdate:Hi,onEdgeContextMenu:Oi,onEdgeDoubleClick:Zi,onEdgeMouseEnter:Li,onEdgeMouseMove:Xi,onEdgeMouseLeave:Vi,onEdgeUpdateStart:Fi,onEdgeUpdateEnd:Yi,edgeUpdaterRadius:Ki=10,onNodesChange:Wi,onEdgesChange:Ui,noDragClassName:Gi="nodrag",noWheelClassName:Qi="nowheel",noPanClassName:gi="nopan",fitView:qi=!1,fitViewOptions:Ji,connectOnClick:ji=!0,attributionPosition:ts,proOptions:es,defaultEdgeOptions:ns,elevateNodesOnSelect:rs=!0,elevateEdgesOnSelect:os=!1,disableKeyboardA11y:pi=!1,autoPanOnConnect:is=!0,autoPanOnNodeDrag:ss=!0,connectionRadius:as=20,isValidConnection:cs,onError:us,style:ls,id:mi,nodeDragThreshold:fs}=yi,ds=Hr(yi,["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesUpdatable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold"]);const ai=mi||"1";return f.createElement("div",te(bt({},ds),{style:bt(bt({},ls),Ci),ref:hs,className:(0,ot.Z)(["react-flow",i]),"data-testid":"rf__wrapper",id:mi}),f.createElement(li,null,f.createElement(Ce,{onInit:m,onMove:h,onMoveStart:y,onMoveEnd:b,onNodeClick:l,onEdgeClick:p,onNodeMouseEnter:A,onNodeMouseMove:I,onNodeMouseLeave:S,onNodeContextMenu:H,onNodeDoubleClick:K,nodeTypes:u,edgeTypes:c,connectionLineType:rt,connectionLineStyle:Q,connectionLineComponent:it,connectionLineContainerStyle:St,selectionKeyCode:Zt,selectionOnDrag:Ft,selectionMode:oe,deleteKeyCode:Dt,multiSelectionKeyCode:ne,panActivationKeyCode:ee,zoomActivationKeyCode:de,onlyRenderVisibleElements:Ae,selectNodesOnDrag:Gt,defaultViewport:zr,translateExtent:$r,minZoom:fr,maxZoom:Ln,preventScrolling:Xn,zoomOnScroll:Br,zoomOnPinch:he,zoomOnDoubleClick:pr,panOnScroll:Pe,panOnScrollSpeed:hr,panOnScrollMode:gr,panOnDrag:bn,onPaneClick:un,onPaneMouseEnter:ro,onPaneMouseMove:ii,onPaneMouseLeave:oo,onPaneScroll:si,onPaneContextMenu:hi,onSelectionContextMenu:ct,onSelectionStart:Et,onSelectionEnd:xt,onEdgeUpdate:Hi,onEdgeContextMenu:Oi,onEdgeDoubleClick:Zi,onEdgeMouseEnter:Li,onEdgeMouseMove:Xi,onEdgeMouseLeave:Vi,onEdgeUpdateStart:Fi,onEdgeUpdateEnd:Yi,edgeUpdaterRadius:Ki,defaultMarkerColor:no,noDragClassName:Gi,noWheelClassName:Qi,noPanClassName:gi,elevateEdgesOnSelect:os,rfId:ai,disableKeyboardA11y:pi,nodeOrigin:Nt,nodeExtent:dr}),f.createElement(Ro,{nodes:t,edges:e,defaultNodes:r,defaultEdges:s,onConnect:E,onConnectStart:D,onConnectEnd:C,onClickConnectStart:T,onClickConnectEnd:k,nodesDraggable:cn,nodesConnectable:Yt,nodesFocusable:be,edgesFocusable:ur,edgesUpdatable:lr,elementsSelectable:eo,elevateNodesOnSelect:rs,minZoom:fr,maxZoom:Ln,nodeExtent:dr,onNodesChange:Wi,onEdgesChange:Ui,snapToGrid:fe,snapGrid:Qt,connectionMode:R,translateExtent:$r,connectOnClick:ji,defaultEdgeOptions:ns,fitView:qi,fitViewOptions:Ji,onNodesDelete:et,onEdgesDelete:U,onNodeDragStart:F,onNodeDrag:O,onNodeDragStop:W,onSelectionDrag:G,onSelectionDragStart:N,onSelectionDragStop:tt,noPanClassName:gi,nodeOrigin:Nt,rfId:ai,autoPanOnConnect:is,autoPanOnNodeDrag:ss,onError:us,connectionRadius:as,isValidConnection:cs,nodeDragThreshold:fs}),f.createElement(To,{onSelectionChange:nt}),mr,f.createElement(_r,{proOptions:es,position:ts}),f.createElement(Bo,{rfId:ai,disableKeyboardA11y:pi})))});fi.displayName="ReactFlow";const Mi=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function Ai({children:t}){const e=Ot(Mi);return e?(0,He.createPortal)(t,e):null}function ys(){const t=Lt();return useCallback(e=>{const{domNode:r,updateNodeDimensions:s}=t.getState(),u=(Array.isArray(e)?e:[e]).reduce((c,l)=>{const p=r==null?void 0:r.querySelector(`.react-flow__node[data-id="${l}"]`);return p&&c.push({id:l,nodeElement:p,forceUpdate:!0}),c},[]);requestAnimationFrame(()=>s(u))},[])}const Pi=t=>t.getNodes();function xs(){return Ot(Pi,shallow)}const Ti=t=>t.edges;function ws(){return Ot(Ti,shallow)}const ki=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2]});function Ri(){return Ot(ki,j.X)}function di(t){return e=>{const[r,s]=(0,f.useState)(e),i=(0,f.useCallback)(u=>s(c=>t(u,c)),[]);return[r,s,i]}}const _s=di(qr),Di=di(Go);function Ii({onStart:t,onChange:e,onEnd:r}){const s=Lt();(0,f.useEffect)(()=>{s.setState({onViewportChangeStart:t})},[t]),(0,f.useEffect)(()=>{s.setState({onViewportChange:e})},[e]),(0,f.useEffect)(()=>{s.setState({onViewportChangeEnd:r})},[r])}function bs({onChange:t}){const e=Lt();useEffect(()=>{const r=[...e.getState().onSelectionChange,t];return e.setState({onSelectionChange:r}),()=>{const s=e.getState().onSelectionChange.filter(i=>i!==t);e.setState({onSelectionChange:s})}},[t])}const zi=t=>e=>e.nodeInternals.size===0?!1:e.getNodes().filter(r=>t.includeHiddenNodes?!0:!r.hidden).every(r=>{var s;return((s=r[$t])==null?void 0:s.handleBounds)!==void 0}),$i={includeHiddenNodes:!1};function Bi(t=$i){return Ot(zi(t))}},18299:function(dt,gt){"use strict";var $={value:function(){}};function f(){for(var st=0,at=arguments.length,mt={},vt;st<at;++st){if(!(vt=arguments[st]+"")||vt in mt||/[\s.]/.test(vt))throw new Error("illegal type: "+vt);mt[vt]=[]}return new ot(mt)}function ot(st){this._=st}function q(st,at){return st.trim().split(/^|\s+/).map(function(mt){var vt="",Mt=mt.indexOf(".");if(Mt>=0&&(vt=mt.slice(Mt+1),mt=mt.slice(0,Mt)),mt&&!at.hasOwnProperty(mt))throw new Error("unknown type: "+mt);return{type:mt,name:vt}})}ot.prototype=f.prototype={constructor:ot,on:function(at,mt){var vt=this._,Mt=q(at+"",vt),Bt,Ut=-1,Te=Mt.length;if(arguments.length<2){for(;++Ut<Te;)if((Bt=(at=Mt[Ut]).type)&&(Bt=j(vt[Bt],at.name)))return Bt;return}if(mt!=null&&typeof mt!="function")throw new Error("invalid callback: "+mt);for(;++Ut<Te;)if(Bt=(at=Mt[Ut]).type)vt[Bt]=Tt(vt[Bt],at.name,mt);else if(mt==null)for(Bt in vt)vt[Bt]=Tt(vt[Bt],at.name,null);return this},copy:function(){var at={},mt=this._;for(var vt in mt)at[vt]=mt[vt].slice();return new ot(at)},call:function(at,mt){if((Bt=arguments.length-2)>0)for(var vt=new Array(Bt),Mt=0,Bt,Ut;Mt<Bt;++Mt)vt[Mt]=arguments[Mt+2];if(!this._.hasOwnProperty(at))throw new Error("unknown type: "+at);for(Ut=this._[at],Mt=0,Bt=Ut.length;Mt<Bt;++Mt)Ut[Mt].value.apply(mt,vt)},apply:function(at,mt,vt){if(!this._.hasOwnProperty(at))throw new Error("unknown type: "+at);for(var Mt=this._[at],Bt=0,Ut=Mt.length;Bt<Ut;++Bt)Mt[Bt].value.apply(mt,vt)}};function j(st,at){for(var mt=0,vt=st.length,Mt;mt<vt;++mt)if((Mt=st[mt]).name===at)return Mt.value}function Tt(st,at,mt){for(var vt=0,Mt=st.length;vt<Mt;++vt)if(st[vt].name===at){st[vt]=$,st=st.slice(0,vt).concat(st.slice(vt+1));break}return mt!=null&&st.push({name:at,value:mt}),st}gt.Z=f},76295:function(dt,gt,$){"use strict";$.d(gt,{Z:function(){return f}});function f(ot){if(typeof ot=="string"||typeof ot=="number")return""+ot;let q="";if(Array.isArray(ot))for(let j=0,Tt;j<ot.length;j++)(Tt=f(ot[j]))!==""&&(q+=(q&&" ")+Tt);else for(let j in ot)ot[j]&&(q+=(q&&" ")+j);return q}},49289:function(dt,gt,$){"use strict";$.d(gt,{D:function(){return j},Z:function(){return q}});var f=$(41468),ot=$(5873);function q(Tt){var st=Tt.document.documentElement,at=(0,f.Z)(Tt).on("dragstart.drag",ot.ZP,ot.Dd);"onselectstart"in st?at.on("selectstart.drag",ot.ZP,ot.Dd):(st.__noselect=st.style.MozUserSelect,st.style.MozUserSelect="none")}function j(Tt,st){var at=Tt.document.documentElement,mt=(0,f.Z)(Tt).on("dragstart.drag",null);st&&(mt.on("click.drag",ot.ZP,ot.Dd),setTimeout(function(){mt.on("click.drag",null)},0)),"onselectstart"in at?mt.on("selectstart.drag",null):(at.style.MozUserSelect=at.__noselect,delete at.__noselect)}},5873:function(dt,gt,$){"use strict";$.d(gt,{Dd:function(){return ot},Q7:function(){return f},ZP:function(){return j},rG:function(){return q}});const f={passive:!1},ot={capture:!0,passive:!1};function q(Tt){Tt.stopImmediatePropagation()}function j(Tt){Tt.preventDefault(),Tt.stopImmediatePropagation()}},73409:function(dt,gt,$){"use strict";$.d(gt,{P:function(){return ot},Z:function(){return f}});function f(q){return function(){return this.matches(q)}}function ot(q){return function(j){return j.matches(q)}}},60021:function(dt,gt,$){"use strict";$.d(gt,{Z:function(){return ot}});var f=$(17110);function ot(q){var j=q+="",Tt=j.indexOf(":");return Tt>=0&&(j=q.slice(0,Tt))!=="xmlns"&&(q=q.slice(Tt+1)),f.Z.hasOwnProperty(j)?{space:f.Z[j],local:q}:q}},17110:function(dt,gt,$){"use strict";$.d(gt,{P:function(){return f}});var f="http://www.w3.org/1999/xhtml";gt.Z={svg:"http://www.w3.org/2000/svg",xhtml:f,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},13802:function(dt,gt,$){"use strict";$.d(gt,{Z:function(){return ot}});function f(q){let j;for(;j=q.sourceEvent;)q=j;return q}function ot(q,j){if(q=f(q),j===void 0&&(j=q.currentTarget),j){var Tt=j.ownerSVGElement||j;if(Tt.createSVGPoint){var st=Tt.createSVGPoint();return st.x=q.clientX,st.y=q.clientY,st=st.matrixTransform(j.getScreenCTM().inverse()),[st.x,st.y]}if(j.getBoundingClientRect){var at=j.getBoundingClientRect();return[q.clientX-at.left-j.clientLeft,q.clientY-at.top-j.clientTop]}}return[q.pageX,q.pageY]}},41468:function(dt,gt,$){"use strict";$.d(gt,{Z:function(){return ot}});var f=$(1776);function ot(q){return typeof q=="string"?new f.Y1([[document.querySelector(q)]],[document.documentElement]):new f.Y1([[q]],f.Jz)}},1776:function(dt,gt,$){"use strict";$.d(gt,{Y1:function(){return ae},ZP:function(){return tn},Jz:function(){return Ar}});var f=$(66456);function ot(d){typeof d!="function"&&(d=(0,f.Z)(d));for(var _=this._groups,V=_.length,Y=new Array(V),z=0;z<V;++z)for(var J=_[z],ht=J.length,lt=Y[z]=new Array(ht),wt,Pt,Ht=0;Ht<ht;++Ht)(wt=J[Ht])&&(Pt=d.call(wt,wt.__data__,Ht,J))&&("__data__"in wt&&(Pt.__data__=wt.__data__),lt[Ht]=Pt);return new ae(Y,this._parents)}function q(d){return d==null?[]:Array.isArray(d)?d:Array.from(d)}var j=$(16851);function Tt(d){return function(){return q(d.apply(this,arguments))}}function st(d){typeof d=="function"?d=Tt(d):d=(0,j.Z)(d);for(var _=this._groups,V=_.length,Y=[],z=[],J=0;J<V;++J)for(var ht=_[J],lt=ht.length,wt,Pt=0;Pt<lt;++Pt)(wt=ht[Pt])&&(Y.push(d.call(wt,wt.__data__,Pt,ht)),z.push(wt));return new ae(Y,z)}var at=$(73409),mt=Array.prototype.find;function vt(d){return function(){return mt.call(this.children,d)}}function Mt(){return this.firstElementChild}function Bt(d){return this.select(d==null?Mt:vt(typeof d=="function"?d:(0,at.P)(d)))}var Ut=Array.prototype.filter;function Te(){return Array.from(this.children)}function yr(d){return function(){return Ut.call(this.children,d)}}function vn(d){return this.selectAll(d==null?Te:yr(typeof d=="function"?d:(0,at.P)(d)))}function ln(d){typeof d!="function"&&(d=(0,at.Z)(d));for(var _=this._groups,V=_.length,Y=new Array(V),z=0;z<V;++z)for(var J=_[z],ht=J.length,lt=Y[z]=[],wt,Pt=0;Pt<ht;++Pt)(wt=J[Pt])&&d.call(wt,wt.__data__,Pt,J)&&lt.push(wt);return new ae(Y,this._parents)}function fn(d){return new Array(d.length)}function He(){return new ae(this._enter||this._groups.map(fn),this._parents)}function ye(d,_){this.ownerDocument=d.ownerDocument,this.namespaceURI=d.namespaceURI,this._next=null,this._parent=d,this.__data__=_}ye.prototype={constructor:ye,appendChild:function(d){return this._parent.insertBefore(d,this._next)},insertBefore:function(d,_){return this._parent.insertBefore(d,_)},querySelector:function(d){return this._parent.querySelector(d)},querySelectorAll:function(d){return this._parent.querySelectorAll(d)}};function dn(d){return function(){return d}}function ie(d,_,V,Y,z,J){for(var ht=0,lt,wt=_.length,Pt=J.length;ht<Pt;++ht)(lt=_[ht])?(lt.__data__=J[ht],Y[ht]=lt):V[ht]=new ye(d,J[ht]);for(;ht<wt;++ht)(lt=_[ht])&&(z[ht]=lt)}function En(d,_,V,Y,z,J,ht){var lt,wt,Pt=new Map,Ht=_.length,ue=J.length,ve=new Array(Ht),pe;for(lt=0;lt<Ht;++lt)(wt=_[lt])&&(ve[lt]=pe=ht.call(wt,wt.__data__,lt,_)+"",Pt.has(pe)?z[lt]=wt:Pt.set(pe,wt));for(lt=0;lt<ue;++lt)pe=ht.call(d,J[lt],lt,J)+"",(wt=Pt.get(pe))?(Y[lt]=wt,wt.__data__=J[lt],Pt.delete(pe)):V[lt]=new ye(d,J[lt]);for(lt=0;lt<Ht;++lt)(wt=_[lt])&&Pt.get(ve[lt])===wt&&(z[lt]=wt)}function Ot(d){return d.__data__}function Lt(d,_){if(!arguments.length)return Array.from(this,Ot);var V=_?En:ie,Y=this._parents,z=this._groups;typeof d!="function"&&(d=dn(d));for(var J=z.length,ht=new Array(J),lt=new Array(J),wt=new Array(J),Pt=0;Pt<J;++Pt){var Ht=Y[Pt],ue=z[Pt],ve=ue.length,pe=xr(d.call(Ht,Ht&&Ht.__data__,Pt,Y)),le=pe.length,ze=lt[Pt]=new Array(le),jn=ht[Pt]=new Array(le),tr=wt[Pt]=new Array(ve);V(Ht,ue,ze,jn,tr,pe,_);for(var en=0,nn=0,er,nr;en<le;++en)if(er=ze[en]){for(en>=nn&&(nn=en+1);!(nr=jn[nn])&&++nn<le;);er._next=nr||null}}return ht=new ae(ht,Y),ht._enter=lt,ht._exit=wt,ht}function xr(d){return typeof d=="object"&&"length"in d?d:Array.from(d)}function wr(){return new ae(this._exit||this._groups.map(fn),this._parents)}function _r(d,_,V){var Y=this.enter(),z=this,J=this.exit();return typeof d=="function"?(Y=d(Y),Y&&(Y=Y.selection())):Y=Y.append(d+""),_!=null&&(z=_(z),z&&(z=z.selection())),V==null?J.remove():V(J),Y&&z?Y.merge(z).order():z}function Or(d){for(var _=d.selection?d.selection():d,V=this._groups,Y=_._groups,z=V.length,J=Y.length,ht=Math.min(z,J),lt=new Array(z),wt=0;wt<ht;++wt)for(var Pt=V[wt],Ht=Y[wt],ue=Pt.length,ve=lt[wt]=new Array(ue),pe,le=0;le<ue;++le)(pe=Pt[le]||Ht[le])&&(ve[le]=pe);for(;wt<z;++wt)lt[wt]=V[wt];return new ae(lt,this._parents)}function Zr(){for(var d=this._groups,_=-1,V=d.length;++_<V;)for(var Y=d[_],z=Y.length-1,J=Y[z],ht;--z>=0;)(ht=Y[z])&&(J&&ht.compareDocumentPosition(J)^4&&J.parentNode.insertBefore(ht,J),J=ht);return this}function hn(d){d||(d=Oe);function _(ue,ve){return ue&&ve?d(ue.__data__,ve.__data__):!ue-!ve}for(var V=this._groups,Y=V.length,z=new Array(Y),J=0;J<Y;++J){for(var ht=V[J],lt=ht.length,wt=z[J]=new Array(lt),Pt,Ht=0;Ht<lt;++Ht)(Pt=ht[Ht])&&(wt[Ht]=Pt);wt.sort(_)}return new ae(z,this._parents).order()}function Oe(d,_){return d<_?-1:d>_?1:d>=_?0:NaN}function Vn(){var d=arguments[0];return arguments[0]=this,d.apply(null,arguments),this}function br(){return Array.from(this)}function Fn(){for(var d=this._groups,_=0,V=d.length;_<V;++_)for(var Y=d[_],z=0,J=Y.length;z<J;++z){var ht=Y[z];if(ht)return ht}return null}function Yn(){let d=0;for(const _ of this)++d;return d}function Sn(){return!this.node()}function ke(d){for(var _=this._groups,V=0,Y=_.length;V<Y;++V)for(var z=_[V],J=0,ht=z.length,lt;J<ht;++J)(lt=z[J])&&d.call(lt,lt.__data__,J,z);return this}var Nn=$(60021);function Cn(d){return function(){this.removeAttribute(d)}}function Mn(d){return function(){this.removeAttributeNS(d.space,d.local)}}function We(d,_){return function(){this.setAttribute(d,_)}}function Kn(d,_){return function(){this.setAttributeNS(d.space,d.local,_)}}function Vt(d,_){return function(){var V=_.apply(this,arguments);V==null?this.removeAttribute(d):this.setAttribute(d,V)}}function $t(d,_){return function(){var V=_.apply(this,arguments);V==null?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,V)}}function vr(d,_){var V=(0,Nn.Z)(d);if(arguments.length<2){var Y=this.node();return V.local?Y.getAttributeNS(V.space,V.local):Y.getAttribute(V)}return this.each((_==null?V.local?Mn:Cn:typeof _=="function"?V.local?$t:Vt:V.local?Kn:We)(V,_))}var Ze=$(77932);function Lr(d){return function(){delete this[d]}}function xe(d,_){return function(){this[d]=_}}function Wn(d,_){return function(){var V=_.apply(this,arguments);V==null?delete this[d]:this[d]=V}}function we(d,_){return arguments.length>1?this.each((_==null?Lr:typeof _=="function"?Wn:xe)(d,_)):this.node()[d]}function Ue(d){return d.trim().split(/^|\s+/)}function ge(d){return d.classList||new Xr(d)}function Xr(d){this._node=d,this._names=Ue(d.getAttribute("class")||"")}Xr.prototype={add:function(d){var _=this._names.indexOf(d);_<0&&(this._names.push(d),this._node.setAttribute("class",this._names.join(" ")))},remove:function(d){var _=this._names.indexOf(d);_>=0&&(this._names.splice(_,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(d){return this._names.indexOf(d)>=0}};function Ge(d,_){for(var V=ge(d),Y=-1,z=_.length;++Y<z;)V.add(_[Y])}function An(d,_){for(var V=ge(d),Y=-1,z=_.length;++Y<z;)V.remove(_[Y])}function Er(d){return function(){Ge(this,d)}}function Le(d){return function(){An(this,d)}}function Re(d,_){return function(){(_.apply(this,arguments)?Ge:An)(this,d)}}function Qe(d,_){var V=Ue(d+"");if(arguments.length<2){for(var Y=ge(this.node()),z=-1,J=V.length;++z<J;)if(!Y.contains(V[z]))return!1;return!0}return this.each((typeof _=="function"?Re:_?Er:Le)(V,_))}function De(){this.textContent=""}function Pn(d){return function(){this.textContent=d}}function ut(d){return function(){var _=d.apply(this,arguments);this.textContent=_==null?"":_}}function Tn(d){return arguments.length?this.each(d==null?De:(typeof d=="function"?ut:Pn)(d)):this.node().textContent}function Un(){this.innerHTML=""}function Xe(d){return function(){this.innerHTML=d}}function qe(d){return function(){var _=d.apply(this,arguments);this.innerHTML=_==null?"":_}}function kn(d){return arguments.length?this.each(d==null?Un:(typeof d=="function"?qe:Xe)(d)):this.node().innerHTML}function Ve(){this.nextSibling&&this.parentNode.appendChild(this)}function gn(){return this.each(Ve)}function _e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Rn(){return this.each(_e)}var pn=$(17110);function Gn(d){return function(){var _=this.ownerDocument,V=this.namespaceURI;return V===pn.P&&_.documentElement.namespaceURI===pn.P?_.createElement(d):_.createElementNS(V,d)}}function Vr(d){return function(){return this.ownerDocument.createElementNS(d.space,d.local)}}function Dn(d){var _=(0,Nn.Z)(d);return(_.local?Vr:Gn)(_)}function In(d){var _=typeof d=="function"?d:Dn(d);return this.select(function(){return this.appendChild(_.apply(this,arguments))})}function Sr(){return null}function zn(d,_){var V=typeof d=="function"?d:Dn(d),Y=_==null?Sr:typeof _=="function"?_:(0,f.Z)(_);return this.select(function(){return this.insertBefore(V.apply(this,arguments),Y.apply(this,arguments)||null)})}function mn(){var d=this.parentNode;d&&d.removeChild(this)}function Qn(){return this.each(mn)}function Fr(){var d=this.cloneNode(!1),_=this.parentNode;return _?_.insertBefore(d,this.nextSibling):d}function Nr(){var d=this.cloneNode(!0),_=this.parentNode;return _?_.insertBefore(d,this.nextSibling):d}function yn(d){return this.select(d?Nr:Fr)}function qn(d){return arguments.length?this.property("__data__",d):this.node().__data__}function Jn(d){return function(_){d.call(this,_,this.__data__)}}function io(d){return d.trim().split(/^|\s+/).map(function(_){var V="",Y=_.indexOf(".");return Y>=0&&(V=_.slice(Y+1),_=_.slice(0,Y)),{type:_,name:V}})}function xn(d){return function(){var _=this.__on;if(_){for(var V=0,Y=-1,z=_.length,J;V<z;++V)J=_[V],(!d.type||J.type===d.type)&&J.name===d.name?this.removeEventListener(J.type,J.listener,J.options):_[++Y]=J;++Y?_.length=Y:delete this.__on}}}function qt(d,_,V){return function(){var Y=this.__on,z,J=Jn(_);if(Y){for(var ht=0,lt=Y.length;ht<lt;++ht)if((z=Y[ht]).type===d.type&&z.name===d.name){this.removeEventListener(z.type,z.listener,z.options),this.addEventListener(z.type,z.listener=J,z.options=V),z.value=_;return}}this.addEventListener(d.type,J,V),z={type:d.type,name:d.name,value:_,listener:J,options:V},Y?Y.push(z):this.__on=[z]}}function Cr(d,_,V){var Y=io(d+""),z,J=Y.length,ht;if(arguments.length<2){var lt=this.node().__on;if(lt){for(var wt=0,Pt=lt.length,Ht;wt<Pt;++wt)for(z=0,Ht=lt[wt];z<J;++z)if((ht=Y[z]).type===Ht.type&&ht.name===Ht.name)return Ht.value}return}for(lt=_?qt:xn,z=0;z<J;++z)this.each(lt(Y[z],_,V));return this}var Yr=$(4010);function Mr(d,_,V){var Y=(0,Yr.Z)(d),z=Y.CustomEvent;typeof z=="function"?z=new z(_,V):(z=Y.document.createEvent("Event"),V?(z.initEvent(_,V.bubbles,V.cancelable),z.detail=V.detail):z.initEvent(_,!1,!1)),d.dispatchEvent(z)}function Je(d,_){return function(){return Mr(this,d,_)}}function Ie(d,_){return function(){return Mr(this,d,_.apply(this,arguments))}}function se(d,_){return this.each((typeof _=="function"?Ie:Je)(d,_))}function*je(){for(var d=this._groups,_=0,V=d.length;_<V;++_)for(var Y=d[_],z=0,J=Y.length,ht;z<J;++z)(ht=Y[z])&&(yield ht)}var Ar=[null];function ae(d,_){this._groups=d,this._parents=_}function ce(){return new ae([[document.documentElement]],Ar)}function Kr(){return this}ae.prototype=ce.prototype={constructor:ae,select:ot,selectAll:st,selectChild:Bt,selectChildren:vn,filter:ln,data:Lt,enter:He,exit:wr,join:_r,merge:Or,selection:Kr,order:Zr,sort:hn,call:Vn,nodes:br,node:Fn,size:Yn,empty:Sn,each:ke,attr:vr,style:Ze.Z,property:we,classed:Qe,text:Tn,html:kn,raise:gn,lower:Rn,append:In,insert:zn,remove:Qn,clone:yn,datum:qn,on:Cr,dispatch:se,[Symbol.iterator]:je};var tn=ce},77932:function(dt,gt,$){"use strict";$.d(gt,{S:function(){return st},Z:function(){return Tt}});var f=$(4010);function ot(at){return function(){this.style.removeProperty(at)}}function q(at,mt,vt){return function(){this.style.setProperty(at,mt,vt)}}function j(at,mt,vt){return function(){var Mt=mt.apply(this,arguments);Mt==null?this.style.removeProperty(at):this.style.setProperty(at,Mt,vt)}}function Tt(at,mt,vt){return arguments.length>1?this.each((mt==null?ot:typeof mt=="function"?j:q)(at,mt,vt==null?"":vt)):st(this.node(),at)}function st(at,mt){return at.style.getPropertyValue(mt)||(0,f.Z)(at).getComputedStyle(at,null).getPropertyValue(mt)}},66456:function(dt,gt,$){"use strict";$.d(gt,{Z:function(){return ot}});function f(){}function ot(q){return q==null?f:function(){return this.querySelector(q)}}},16851:function(dt,gt,$){"use strict";$.d(gt,{Z:function(){return ot}});function f(){return[]}function ot(q){return q==null?f:function(){return this.querySelectorAll(q)}}},4010:function(dt,gt,$){"use strict";$.d(gt,{Z:function(){return f}});function f(ot){return ot.ownerDocument&&ot.ownerDocument.defaultView||ot.document&&ot||ot.defaultView}},37151:function(dt,gt,$){"use strict";$.d(gt,{sP:function(){return ni},CR:function(){return Zn}});var f=$(18299),ot=$(49289),q=1e-12;function j(n){return((n=Math.exp(n))+1/n)/2}function Tt(n){return((n=Math.exp(n))-1/n)/2}function st(n){return((n=Math.exp(2*n))-1)/(n+1)}var at=function n(o,a,g){function w(v,x){var P=v[0],B=v[1],Z=v[2],X=x[0],ft=x[1],yt=x[2],Ct=X-P,re=ft-B,Kt=Ct*Ct+re*re,me,At;if(Kt<q)At=Math.log(yt/Z)/o,me=function(_n){return[P+_n*Ct,B+_n*re,Z*Math.exp(o*_n*At)]};else{var sn=Math.sqrt(Kt),Ye=(yt*yt-Z*Z+g*Kt)/(2*Z*a*sn),wn=(yt*yt-Z*Z-g*Kt)/(2*yt*a*sn),an=Math.log(Math.sqrt(Ye*Ye+1)-Ye),Se=Math.log(Math.sqrt(wn*wn+1)-wn);At=(Se-an)/o,me=function(_n){var Dr=_n*At,Ir=j(an),ar=Z/(a*sn)*(Ir*st(o*Dr+an)-Tt(an));return[P+ar*Ct,B+ar*re,Z*Ir/j(o*Dr+an)]}}return me.duration=At*1e3*o/Math.SQRT2,me}return w.rho=function(v){var x=Math.max(.001,+v),P=x*x,B=P*P;return n(x,P,B)},w}(Math.SQRT2,2,4),mt=$(41468),vt=$(13802),Mt=$(1776),Bt=0,Ut=0,Te=0,yr=1e3,vn,ln,fn=0,He=0,ye=0,dn=typeof performance=="object"&&performance.now?performance:Date,ie=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function En(){return He||(ie(Ot),He=dn.now()+ye)}function Ot(){He=0}function Lt(){this._call=this._time=this._next=null}Lt.prototype=xr.prototype={constructor:Lt,restart:function(n,o,a){if(typeof n!="function")throw new TypeError("callback is not a function");a=(a==null?En():+a)+(o==null?0:+o),!this._next&&ln!==this&&(ln?ln._next=this:vn=this,ln=this),this._call=n,this._time=a,hn()},stop:function(){this._call&&(this._call=null,this._time=1/0,hn())}};function xr(n,o,a){var g=new Lt;return g.restart(n,o,a),g}function wr(){En(),++Bt;for(var n=vn,o;n;)(o=He-n._time)>=0&&n._call.call(void 0,o),n=n._next;--Bt}function _r(){He=(fn=dn.now())+ye,Bt=Ut=0;try{wr()}finally{Bt=0,Zr(),He=0}}function Or(){var n=dn.now(),o=n-fn;o>yr&&(ye-=o,fn=n)}function Zr(){for(var n,o=vn,a,g=1/0;o;)o._call?(g>o._time&&(g=o._time),n=o,o=o._next):(a=o._next,o._next=null,o=n?n._next=a:vn=a);ln=n,hn(g)}function hn(n){if(!Bt){Ut&&(Ut=clearTimeout(Ut));var o=n-He;o>24?(n<1/0&&(Ut=setTimeout(_r,n-dn.now()-ye)),Te&&(Te=clearInterval(Te))):(Te||(fn=dn.now(),Te=setInterval(Or,yr)),Bt=1,ie(_r))}}function Oe(n,o,a){var g=new Lt;return o=o==null?0:+o,g.restart(w=>{g.stop(),n(w+o)},o,a),g}var Vn=(0,f.Z)("start","end","cancel","interrupt"),br=[],Fn=0,Yn=1,Sn=2,ke=3,Nn=4,Cn=5,Mn=6;function We(n,o,a,g,w,v){var x=n.__transition;if(!x)n.__transition={};else if(a in x)return;vr(n,a,{name:o,index:g,group:w,on:Vn,tween:br,time:v.time,delay:v.delay,duration:v.duration,ease:v.ease,timer:null,state:Fn})}function Kn(n,o){var a=$t(n,o);if(a.state>Fn)throw new Error("too late; already scheduled");return a}function Vt(n,o){var a=$t(n,o);if(a.state>ke)throw new Error("too late; already running");return a}function $t(n,o){var a=n.__transition;if(!a||!(a=a[o]))throw new Error("transition not found");return a}function vr(n,o,a){var g=n.__transition,w;g[o]=a,a.timer=xr(v,0,a.time);function v(Z){a.state=Yn,a.timer.restart(x,a.delay,a.time),a.delay<=Z&&x(Z-a.delay)}function x(Z){var X,ft,yt,Ct;if(a.state!==Yn)return B();for(X in g)if(Ct=g[X],Ct.name===a.name){if(Ct.state===ke)return Oe(x);Ct.state===Nn?(Ct.state=Mn,Ct.timer.stop(),Ct.on.call("interrupt",n,n.__data__,Ct.index,Ct.group),delete g[X]):+X<o&&(Ct.state=Mn,Ct.timer.stop(),Ct.on.call("cancel",n,n.__data__,Ct.index,Ct.group),delete g[X])}if(Oe(function(){a.state===ke&&(a.state=Nn,a.timer.restart(P,a.delay,a.time),P(Z))}),a.state=Sn,a.on.call("start",n,n.__data__,a.index,a.group),a.state===Sn){for(a.state=ke,w=new Array(yt=a.tween.length),X=0,ft=-1;X<yt;++X)(Ct=a.tween[X].value.call(n,n.__data__,a.index,a.group))&&(w[++ft]=Ct);w.length=ft+1}}function P(Z){for(var X=Z<a.duration?a.ease.call(null,Z/a.duration):(a.timer.restart(B),a.state=Cn,1),ft=-1,yt=w.length;++ft<yt;)w[ft].call(n,X);a.state===Cn&&(a.on.call("end",n,n.__data__,a.index,a.group),B())}function B(){a.state=Mn,a.timer.stop(),delete g[o];for(var Z in g)return;delete n.__transition}}function Ze(n,o){var a=n.__transition,g,w,v=!0,x;if(a){o=o==null?null:o+"";for(x in a){if((g=a[x]).name!==o){v=!1;continue}w=g.state>Sn&&g.state<Cn,g.state=Mn,g.timer.stop(),g.on.call(w?"interrupt":"cancel",n,n.__data__,g.index,g.group),delete a[x]}v&&delete n.__transition}}function Lr(n){return this.each(function(){Ze(this,n)})}function xe(n,o){return n=+n,o=+o,function(a){return n*(1-a)+o*a}}var Wn=180/Math.PI,we={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ue(n,o,a,g,w,v){var x,P,B;return(x=Math.sqrt(n*n+o*o))&&(n/=x,o/=x),(B=n*a+o*g)&&(a-=n*B,g-=o*B),(P=Math.sqrt(a*a+g*g))&&(a/=P,g/=P,B/=P),n*g<o*a&&(n=-n,o=-o,B=-B,x=-x),{translateX:w,translateY:v,rotate:Math.atan2(o,n)*Wn,skewX:Math.atan(B)*Wn,scaleX:x,scaleY:P}}var ge;function Xr(n){var o=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return o.isIdentity?we:Ue(o.a,o.b,o.c,o.d,o.e,o.f)}function Ge(n){return n==null||(ge||(ge=document.createElementNS("http://www.w3.org/2000/svg","g")),ge.setAttribute("transform",n),!(n=ge.transform.baseVal.consolidate()))?we:(n=n.matrix,Ue(n.a,n.b,n.c,n.d,n.e,n.f))}function An(n,o,a,g){function w(Z){return Z.length?Z.pop()+" ":""}function v(Z,X,ft,yt,Ct,re){if(Z!==ft||X!==yt){var Kt=Ct.push("translate(",null,o,null,a);re.push({i:Kt-4,x:xe(Z,ft)},{i:Kt-2,x:xe(X,yt)})}else(ft||yt)&&Ct.push("translate("+ft+o+yt+a)}function x(Z,X,ft,yt){Z!==X?(Z-X>180?X+=360:X-Z>180&&(Z+=360),yt.push({i:ft.push(w(ft)+"rotate(",null,g)-2,x:xe(Z,X)})):X&&ft.push(w(ft)+"rotate("+X+g)}function P(Z,X,ft,yt){Z!==X?yt.push({i:ft.push(w(ft)+"skewX(",null,g)-2,x:xe(Z,X)}):X&&ft.push(w(ft)+"skewX("+X+g)}function B(Z,X,ft,yt,Ct,re){if(Z!==ft||X!==yt){var Kt=Ct.push(w(Ct)+"scale(",null,",",null,")");re.push({i:Kt-4,x:xe(Z,ft)},{i:Kt-2,x:xe(X,yt)})}else(ft!==1||yt!==1)&&Ct.push(w(Ct)+"scale("+ft+","+yt+")")}return function(Z,X){var ft=[],yt=[];return Z=n(Z),X=n(X),v(Z.translateX,Z.translateY,X.translateX,X.translateY,ft,yt),x(Z.rotate,X.rotate,ft,yt),P(Z.skewX,X.skewX,ft,yt),B(Z.scaleX,Z.scaleY,X.scaleX,X.scaleY,ft,yt),Z=X=null,function(Ct){for(var re=-1,Kt=yt.length,me;++re<Kt;)ft[(me=yt[re]).i]=me.x(Ct);return ft.join("")}}}var Er=An(Xr,"px, ","px)","deg)"),Le=An(Ge,", ",")",")"),Re=$(60021);function Qe(n,o){var a,g;return function(){var w=Vt(this,n),v=w.tween;if(v!==a){g=a=v;for(var x=0,P=g.length;x<P;++x)if(g[x].name===o){g=g.slice(),g.splice(x,1);break}}w.tween=g}}function De(n,o,a){var g,w;if(typeof a!="function")throw new Error;return function(){var v=Vt(this,n),x=v.tween;if(x!==g){w=(g=x).slice();for(var P={name:o,value:a},B=0,Z=w.length;B<Z;++B)if(w[B].name===o){w[B]=P;break}B===Z&&w.push(P)}v.tween=w}}function Pn(n,o){var a=this._id;if(n+="",arguments.length<2){for(var g=$t(this.node(),a).tween,w=0,v=g.length,x;w<v;++w)if((x=g[w]).name===n)return x.value;return null}return this.each((o==null?Qe:De)(a,n,o))}function ut(n,o,a){var g=n._id;return n.each(function(){var w=Vt(this,g);(w.value||(w.value={}))[o]=a.apply(this,arguments)}),function(w){return $t(w,g).value[o]}}function Tn(n,o,a){n.prototype=o.prototype=a,a.constructor=n}function Un(n,o){var a=Object.create(n.prototype);for(var g in o)a[g]=o[g];return a}function Xe(){}var qe=.7,kn=1/qe,Ve="\\s*([+-]?\\d+)\\s*",gn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Rn=/^#([0-9a-f]{3,8})$/,pn=new RegExp("^rgb\\(".concat(Ve,",").concat(Ve,",").concat(Ve,"\\)$")),Gn=new RegExp("^rgb\\(".concat(_e,",").concat(_e,",").concat(_e,"\\)$")),Vr=new RegExp("^rgba\\(".concat(Ve,",").concat(Ve,",").concat(Ve,",").concat(gn,"\\)$")),Dn=new RegExp("^rgba\\(".concat(_e,",").concat(_e,",").concat(_e,",").concat(gn,"\\)$")),In=new RegExp("^hsl\\(".concat(gn,",").concat(_e,",").concat(_e,"\\)$")),Sr=new RegExp("^hsla\\(".concat(gn,",").concat(_e,",").concat(_e,",").concat(gn,"\\)$")),zn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Tn(Xe,yn,{copy:function(o){return Object.assign(new this.constructor,this,o)},displayable:function(){return this.rgb().displayable()},hex:mn,formatHex:mn,formatHex8:Qn,formatHsl:Fr,formatRgb:Nr,toString:Nr});function mn(){return this.rgb().formatHex()}function Qn(){return this.rgb().formatHex8()}function Fr(){return Ar(this).formatHsl()}function Nr(){return this.rgb().formatRgb()}function yn(n){var o,a;return n=(n+"").trim().toLowerCase(),(o=Rn.exec(n))?(a=o[1].length,o=parseInt(o[1],16),a===6?qn(o):a===3?new qt(o>>8&15|o>>4&240,o>>4&15|o&240,(o&15)<<4|o&15,1):a===8?Jn(o>>24&255,o>>16&255,o>>8&255,(o&255)/255):a===4?Jn(o>>12&15|o>>8&240,o>>8&15|o>>4&240,o>>4&15|o&240,((o&15)<<4|o&15)/255):null):(o=pn.exec(n))?new qt(o[1],o[2],o[3],1):(o=Gn.exec(n))?new qt(o[1]*255/100,o[2]*255/100,o[3]*255/100,1):(o=Vr.exec(n))?Jn(o[1],o[2],o[3],o[4]):(o=Dn.exec(n))?Jn(o[1]*255/100,o[2]*255/100,o[3]*255/100,o[4]):(o=In.exec(n))?je(o[1],o[2]/100,o[3]/100,1):(o=Sr.exec(n))?je(o[1],o[2]/100,o[3]/100,o[4]):zn.hasOwnProperty(n)?qn(zn[n]):n==="transparent"?new qt(NaN,NaN,NaN,0):null}function qn(n){return new qt(n>>16&255,n>>8&255,n&255,1)}function Jn(n,o,a,g){return g<=0&&(n=o=a=NaN),new qt(n,o,a,g)}function io(n){return n instanceof Xe||(n=yn(n)),n?(n=n.rgb(),new qt(n.r,n.g,n.b,n.opacity)):new qt}function xn(n,o,a,g){return arguments.length===1?io(n):new qt(n,o,a,g==null?1:g)}function qt(n,o,a,g){this.r=+n,this.g=+o,this.b=+a,this.opacity=+g}Tn(qt,xn,Un(Xe,{brighter:function(o){return o=o==null?kn:Math.pow(kn,o),new qt(this.r*o,this.g*o,this.b*o,this.opacity)},darker:function(o){return o=o==null?qe:Math.pow(qe,o),new qt(this.r*o,this.g*o,this.b*o,this.opacity)},rgb:function(){return this},clamp:function(){return new qt(Ie(this.r),Ie(this.g),Ie(this.b),Je(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cr,formatHex:Cr,formatHex8:Yr,formatRgb:Mr,toString:Mr}));function Cr(){return"#".concat(se(this.r)).concat(se(this.g)).concat(se(this.b))}function Yr(){return"#".concat(se(this.r)).concat(se(this.g)).concat(se(this.b)).concat(se((isNaN(this.opacity)?1:this.opacity)*255))}function Mr(){var n=Je(this.opacity);return"".concat(n===1?"rgb(":"rgba(").concat(Ie(this.r),", ").concat(Ie(this.g),", ").concat(Ie(this.b)).concat(n===1?")":", ".concat(n,")"))}function Je(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ie(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function se(n){return n=Ie(n),(n<16?"0":"")+n.toString(16)}function je(n,o,a,g){return g<=0?n=o=a=NaN:a<=0||a>=1?n=o=NaN:o<=0&&(n=NaN),new ce(n,o,a,g)}function Ar(n){if(n instanceof ce)return new ce(n.h,n.s,n.l,n.opacity);if(n instanceof Xe||(n=yn(n)),!n)return new ce;if(n instanceof ce)return n;n=n.rgb();var o=n.r/255,a=n.g/255,g=n.b/255,w=Math.min(o,a,g),v=Math.max(o,a,g),x=NaN,P=v-w,B=(v+w)/2;return P?(o===v?x=(a-g)/P+(a<g)*6:a===v?x=(g-o)/P+2:x=(o-a)/P+4,P/=B<.5?v+w:2-v-w,x*=60):P=B>0&&B<1?0:x,new ce(x,P,B,n.opacity)}function ae(n,o,a,g){return arguments.length===1?Ar(n):new ce(n,o,a,g==null?1:g)}function ce(n,o,a,g){this.h=+n,this.s=+o,this.l=+a,this.opacity=+g}Tn(ce,ae,Un(Xe,{brighter:function(o){return o=o==null?kn:Math.pow(kn,o),new ce(this.h,this.s,this.l*o,this.opacity)},darker:function(o){return o=o==null?qe:Math.pow(qe,o),new ce(this.h,this.s,this.l*o,this.opacity)},rgb:function(){var o=this.h%360+(this.h<0)*360,a=isNaN(o)||isNaN(this.s)?0:this.s,g=this.l,w=g+(g<.5?g:1-g)*a,v=2*g-w;return new qt(d(o>=240?o-240:o+120,v,w),d(o,v,w),d(o<120?o+240:o-120,v,w),this.opacity)},clamp:function(){return new ce(Kr(this.h),tn(this.s),tn(this.l),Je(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var o=Je(this.opacity);return"".concat(o===1?"hsl(":"hsla(").concat(Kr(this.h),", ").concat(tn(this.s)*100,"%, ").concat(tn(this.l)*100,"%").concat(o===1?")":", ".concat(o,")"))}}));function Kr(n){return n=(n||0)%360,n<0?n+360:n}function tn(n){return Math.max(0,Math.min(1,n||0))}function d(n,o,a){return(n<60?o+(a-o)*n/60:n<180?a:n<240?o+(a-o)*(240-n)/60:o)*255}function _(n,o,a,g,w){var v=n*n,x=v*n;return((1-3*n+3*v-x)*o+(4-6*v+3*x)*a+(1+3*n+3*v-3*x)*g+x*w)/6}function V(n){var o=n.length-1;return function(a){var g=a<=0?a=0:a>=1?(a=1,o-1):Math.floor(a*o),w=n[g],v=n[g+1],x=g>0?n[g-1]:2*w-v,P=g<o-1?n[g+2]:2*v-w;return _((a-g/o)*o,x,w,v,P)}}function Y(n){var o=n.length;return function(a){var g=Math.floor(((a%=1)<0?++a:a)*o),w=n[(g+o-1)%o],v=n[g%o],x=n[(g+1)%o],P=n[(g+2)%o];return _((a-g/o)*o,w,v,x,P)}}var z=function(n){return function(){return n}};function J(n,o){return function(a){return n+a*o}}function ht(n,o,a){return n=Math.pow(n,a),o=Math.pow(o,a)-n,a=1/a,function(g){return Math.pow(n+g*o,a)}}function lt(n,o){var a=o-n;return a?J(n,a>180||a<-180?a-360*Math.round(a/360):a):constant(isNaN(n)?o:n)}function wt(n){return(n=+n)==1?Pt:function(o,a){return a-o?ht(o,a,n):z(isNaN(o)?a:o)}}function Pt(n,o){var a=o-n;return a?J(n,a):z(isNaN(n)?o:n)}var Ht=function n(o){var a=wt(o);function g(w,v){var x=a((w=xn(w)).r,(v=xn(v)).r),P=a(w.g,v.g),B=a(w.b,v.b),Z=Pt(w.opacity,v.opacity);return function(X){return w.r=x(X),w.g=P(X),w.b=B(X),w.opacity=Z(X),w+""}}return g.gamma=n,g}(1);function ue(n){return function(o){var a=o.length,g=new Array(a),w=new Array(a),v=new Array(a),x,P;for(x=0;x<a;++x)P=xn(o[x]),g[x]=P.r||0,w[x]=P.g||0,v[x]=P.b||0;return g=n(g),w=n(w),v=n(v),P.opacity=1,function(B){return P.r=g(B),P.g=w(B),P.b=v(B),P+""}}}var ve=ue(V),pe=ue(Y),le=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ze=new RegExp(le.source,"g");function jn(n){return function(){return n}}function tr(n){return function(o){return n(o)+""}}function en(n,o){var a=le.lastIndex=ze.lastIndex=0,g,w,v,x=-1,P=[],B=[];for(n=n+"",o=o+"";(g=le.exec(n))&&(w=ze.exec(o));)(v=w.index)>a&&(v=o.slice(a,v),P[x]?P[x]+=v:P[++x]=v),(g=g[0])===(w=w[0])?P[x]?P[x]+=w:P[++x]=w:(P[++x]=null,B.push({i:x,x:xe(g,w)})),a=ze.lastIndex;return a<o.length&&(v=o.slice(a),P[x]?P[x]+=v:P[++x]=v),P.length<2?B[0]?tr(B[0].x):jn(o):(o=B.length,function(Z){for(var X=0,ft;X<o;++X)P[(ft=B[X]).i]=ft.x(Z);return P.join("")})}function nn(n,o){var a;return(typeof o=="number"?xe:o instanceof yn?Ht:(a=yn(o))?(o=a,Ht):en)(n,o)}function er(n){return function(){this.removeAttribute(n)}}function nr(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Wr(n,o,a){var g,w=a+"",v;return function(){var x=this.getAttribute(n);return x===w?null:x===g?v:v=o(g=x,a)}}function Mo(n,o,a){var g,w=a+"",v;return function(){var x=this.getAttributeNS(n.space,n.local);return x===w?null:x===g?v:v=o(g=x,a)}}function Pr(n,o,a){var g,w,v;return function(){var x,P=a(this),B;return P==null?void this.removeAttribute(n):(x=this.getAttribute(n),B=P+"",x===B?null:x===g&&B===w?v:(w=B,v=o(g=x,P)))}}function Ao(n,o,a){var g,w,v;return function(){var x,P=a(this),B;return P==null?void this.removeAttributeNS(n.space,n.local):(x=this.getAttributeNS(n.space,n.local),B=P+"",x===B?null:x===g&&B===w?v:(w=B,v=o(g=x,P)))}}function so(n,o){var a=(0,Re.Z)(n),g=a==="transform"?Le:nn;return this.attrTween(n,typeof o=="function"?(a.local?Ao:Pr)(a,g,ut(this,"attr."+n,o)):o==null?(a.local?nr:er)(a):(a.local?Mo:Wr)(a,g,o))}function Po(n,o){return function(a){this.setAttribute(n,o.call(this,a))}}function To(n,o){return function(a){this.setAttributeNS(n.space,n.local,o.call(this,a))}}function ko(n,o){var a,g;function w(){var v=o.apply(this,arguments);return v!==g&&(a=(g=v)&&To(n,v)),a}return w._value=o,w}function $n(n,o){var a,g;function w(){var v=o.apply(this,arguments);return v!==g&&(a=(g=v)&&Po(n,v)),a}return w._value=o,w}function Rt(n,o){var a="attr."+n;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(o==null)return this.tween(a,null);if(typeof o!="function")throw new Error;var g=(0,Re.Z)(n);return this.tween(a,(g.local?ko:$n)(g,o))}function Ro(n,o){return function(){Kn(this,n).delay=+o.apply(this,arguments)}}function ao(n,o){return o=+o,function(){Kn(this,n).delay=o}}function Do(n){var o=this._id;return arguments.length?this.each((typeof n=="function"?Ro:ao)(o,n)):$t(this.node(),o).delay}function co(n,o){return function(){Vt(this,n).duration=+o.apply(this,arguments)}}function uo(n,o){return o=+o,function(){Vt(this,n).duration=o}}function Io(n){var o=this._id;return arguments.length?this.each((typeof n=="function"?co:uo)(o,n)):$t(this.node(),o).duration}function zo(n,o){if(typeof o!="function")throw new Error;return function(){Vt(this,n).ease=o}}function $o(n){var o=this._id;return arguments.length?this.each(zo(o,n)):$t(this.node(),o).ease}function Bo(n,o){return function(){var a=o.apply(this,arguments);if(typeof a!="function")throw new Error;Vt(this,n).ease=a}}function rr(n){if(typeof n!="function")throw new Error;return this.each(Bo(this._id,n))}var lo=$(73409);function fo(n){typeof n!="function"&&(n=(0,lo.Z)(n));for(var o=this._groups,a=o.length,g=new Array(a),w=0;w<a;++w)for(var v=o[w],x=v.length,P=g[w]=[],B,Z=0;Z<x;++Z)(B=v[Z])&&n.call(B,B.__data__,Z,v)&&P.push(B);return new Ee(g,this._parents,this._name,this._id)}function ho(n){if(n._id!==this._id)throw new Error;for(var o=this._groups,a=n._groups,g=o.length,w=a.length,v=Math.min(g,w),x=new Array(g),P=0;P<v;++P)for(var B=o[P],Z=a[P],X=B.length,ft=x[P]=new Array(X),yt,Ct=0;Ct<X;++Ct)(yt=B[Ct]||Z[Ct])&&(ft[Ct]=yt);for(;P<g;++P)x[P]=o[P];return new Ee(x,this._parents,this._name,this._id)}function go(n){return(n+"").trim().split(/^|\s+/).every(function(o){var a=o.indexOf(".");return a>=0&&(o=o.slice(0,a)),!o||o==="start"})}function Ur(n,o,a){var g,w,v=go(o)?Kn:Vt;return function(){var x=v(this,n),P=x.on;P!==g&&(w=(g=P).copy()).on(o,a),x.on=w}}function po(n,o){var a=this._id;return arguments.length<2?$t(this.node(),a).on.on(n):this.each(Ur(a,n,o))}function Ho(n){return function(){var o=this.parentNode;for(var a in this.__transition)if(+a!==n)return;o&&o.removeChild(this)}}function Oo(){return this.on("end.remove",Ho(this._id))}var Tr=$(66456);function Bn(n){var o=this._name,a=this._id;typeof n!="function"&&(n=(0,Tr.Z)(n));for(var g=this._groups,w=g.length,v=new Array(w),x=0;x<w;++x)for(var P=g[x],B=P.length,Z=v[x]=new Array(B),X,ft,yt=0;yt<B;++yt)(X=P[yt])&&(ft=n.call(X,X.__data__,yt,P))&&("__data__"in X&&(ft.__data__=X.__data__),Z[yt]=ft,We(Z[yt],o,a,yt,Z,$t(X,a)));return new Ee(v,this._parents,o,a)}var Zo=$(16851);function Lo(n){var o=this._name,a=this._id;typeof n!="function"&&(n=(0,Zo.Z)(n));for(var g=this._groups,w=g.length,v=[],x=[],P=0;P<w;++P)for(var B=g[P],Z=B.length,X,ft=0;ft<Z;++ft)if(X=B[ft]){for(var yt=n.call(X,X.__data__,ft,B),Ct,re=$t(X,a),Kt=0,me=yt.length;Kt<me;++Kt)(Ct=yt[Kt])&&We(Ct,o,a,Kt,yt,re);v.push(yt),x.push(X)}return new Ee(v,x,o,a)}var Xo=Mt.ZP.prototype.constructor;function Gr(){return new Xo(this._groups,this._parents)}var or=$(77932);function Vo(n,o){var a,g,w;return function(){var v=(0,or.S)(this,n),x=(this.style.removeProperty(n),(0,or.S)(this,n));return v===x?null:v===a&&x===g?w:w=o(a=v,g=x)}}function mo(n){return function(){this.style.removeProperty(n)}}function Qr(n,o,a){var g,w=a+"",v;return function(){var x=(0,or.S)(this,n);return x===w?null:x===g?v:v=o(g=x,a)}}function Fo(n,o,a){var g,w,v;return function(){var x=(0,or.S)(this,n),P=a(this),B=P+"";return P==null&&(B=P=(this.style.removeProperty(n),(0,or.S)(this,n))),x===B?null:x===g&&B===w?v:(w=B,v=o(g=x,P))}}function kr(n,o){var a,g,w,v="style."+o,x="end."+v,P;return function(){var B=Vt(this,n),Z=B.on,X=B.value[v]==null?P||(P=mo(o)):void 0;(Z!==a||w!==X)&&(g=(a=Z).copy()).on(x,w=X),B.on=g}}function Hn(n,o,a){var g=(n+="")=="transform"?Er:nn;return o==null?this.styleTween(n,Vo(n,g)).on("end.style."+n,mo(n)):typeof o=="function"?this.styleTween(n,Fo(n,g,ut(this,"style."+n,o))).each(kr(this._id,n)):this.styleTween(n,Qr(n,g,o),a).on("end.style."+n,null)}function yo(n,o,a){return function(g){this.style.setProperty(n,o.call(this,g),a)}}function xo(n,o,a){var g,w;function v(){var x=o.apply(this,arguments);return x!==w&&(g=(w=x)&&yo(n,x,a)),g}return v._value=o,v}function Yo(n,o,a){var g="style."+(n+="");if(arguments.length<2)return(g=this.tween(g))&&g._value;if(o==null)return this.tween(g,null);if(typeof o!="function")throw new Error;return this.tween(g,xo(n,o,a==null?"":a))}function Ko(n){return function(){this.textContent=n}}function Wo(n){return function(){var o=n(this);this.textContent=o==null?"":o}}function Uo(n){return this.tween("text",typeof n=="function"?Wo(ut(this,"text",n)):Ko(n==null?"":n+""))}function wo(n){return function(o){this.textContent=n.call(this,o)}}function _o(n){var o,a;function g(){var w=n.apply(this,arguments);return w!==a&&(o=(a=w)&&wo(w)),o}return g._value=n,g}function qr(n){var o="text";if(arguments.length<1)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,_o(n))}function Go(){for(var n=this._name,o=this._id,a=Jr(),g=this._groups,w=g.length,v=0;v<w;++v)for(var x=g[v],P=x.length,B,Z=0;Z<P;++Z)if(B=x[Z]){var X=$t(B,o);We(B,n,a,Z,x,{time:X.time+X.delay+X.duration,delay:0,duration:X.duration,ease:X.ease})}return new Ee(g,this._parents,n,a)}function rn(){var n,o,a=this,g=a._id,w=a.size();return new Promise(function(v,x){var P={value:x},B={value:function(){--w===0&&v()}};a.each(function(){var Z=Vt(this,g),X=Z.on;X!==n&&(o=(n=X).copy(),o._.cancel.push(P),o._.interrupt.push(P),o._.end.push(B)),Z.on=o}),w===0&&v()})}var On=0;function Ee(n,o,a,g){this._groups=n,this._parents=o,this._name=a,this._id=g}function Qo(n){return(0,Mt.ZP)().transition(n)}function Jr(){return++On}var $e=Mt.ZP.prototype;Ee.prototype=Qo.prototype={constructor:Ee,select:Bn,selectAll:Lo,selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:fo,merge:ho,selection:Gr,transition:Go,call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:po,attr:so,attrTween:Rt,style:Hn,styleTween:Yo,text:Uo,textTween:qr,remove:Oo,tween:Pn,delay:Do,duration:Io,ease:$o,easeVarying:rr,end:rn,[Symbol.iterator]:$e[Symbol.iterator]};function qo(n){return n*n*n}function ui(n){return--n*n*n+1}function Jo(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var bo={time:null,delay:0,duration:250,ease:Jo};function jr(n,o){for(var a;!(a=n.__transition)||!(a=a[o]);)if(!(n=n.parentNode))throw new Error(`transition ${o} not found`);return a}function vo(n){var o,a;n instanceof Ee?(o=n._id,n=n._name):(o=Jr(),(a=bo).time=En(),n=n==null?null:n+"");for(var g=this._groups,w=g.length,v=0;v<w;++v)for(var x=g[v],P=x.length,B,Z=0;Z<P;++Z)(B=x[Z])&&We(B,n,o,Z,x,a||jr(B,o));return new Ee(g,this._parents,n,o)}Mt.ZP.prototype.interrupt=Lr,Mt.ZP.prototype.transition=vo;var on=n=>()=>n;function to(n,{sourceEvent:o,target:a,transform:g,dispatch:w}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:g,enumerable:!0,configurable:!0},_:{value:w}})}function Fe(n,o,a){this.k=n,this.x=o,this.y=a}Fe.prototype={constructor:Fe,scale:function(n){return n===1?this:new Fe(this.k*n,this.x,this.y)},translate:function(n,o){return n===0&o===0?this:new Fe(this.k,this.x+this.k*n,this.y+this.k*o)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Zn=new Fe(1,0,0);Eo.prototype=Fe.prototype;function Eo(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Zn;return n.__zoom}function Rr(n){n.stopImmediatePropagation()}function Be(n){n.preventDefault(),n.stopImmediatePropagation()}function ir(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function jo(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function So(){return this.__zoom||Zn}function ti(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function ei(){return navigator.maxTouchPoints||"ontouchstart"in this}function No(n,o,a){var g=n.invertX(o[0][0])-a[0][0],w=n.invertX(o[1][0])-a[1][0],v=n.invertY(o[0][1])-a[0][1],x=n.invertY(o[1][1])-a[1][1];return n.translate(w>g?(g+w)/2:Math.min(0,g)||Math.max(0,w),x>v?(v+x)/2:Math.min(0,v)||Math.max(0,x))}function ni(){var n=ir,o=jo,a=No,g=ti,w=ei,v=[0,1/0],x=[[-1/0,-1/0],[1/0,1/0]],P=250,B=at,Z=(0,f.Z)("start","zoom","end"),X,ft,yt,Ct=500,re=150,Kt=0,me=10;function At(M){M.property("__zoom",So).on("wheel.zoom",_n,{passive:!1}).on("mousedown.zoom",Dr).on("dblclick.zoom",Ir).filter(w).on("touchstart.zoom",ar).on("touchmove.zoom",ri).on("touchend.zoom touchcancel.zoom",oi).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}At.transform=function(M,pt,L,_t){var kt=M.selection?M.selection():M;kt.property("__zoom",So),M!==kt?an(M,pt,L,_t):kt.interrupt().each(function(){Se(this,arguments).event(_t).start().zoom(null,typeof pt=="function"?pt.apply(this,arguments):pt).end()})},At.scaleBy=function(M,pt,L,_t){At.scaleTo(M,function(){var kt=this.__zoom.k,It=typeof pt=="function"?pt.apply(this,arguments):pt;return kt*It},L,_t)},At.scaleTo=function(M,pt,L,_t){At.transform(M,function(){var kt=o.apply(this,arguments),It=this.__zoom,zt=L==null?wn(kt):typeof L=="function"?L.apply(this,arguments):L,Xt=It.invert(zt),Wt=typeof pt=="function"?pt.apply(this,arguments):pt;return a(Ye(sn(It,Wt),zt,Xt),kt,x)},L,_t)},At.translateBy=function(M,pt,L,_t){At.transform(M,function(){return a(this.__zoom.translate(typeof pt=="function"?pt.apply(this,arguments):pt,typeof L=="function"?L.apply(this,arguments):L),o.apply(this,arguments),x)},null,_t)},At.translateTo=function(M,pt,L,_t,kt){At.transform(M,function(){var It=o.apply(this,arguments),zt=this.__zoom,Xt=_t==null?wn(It):typeof _t=="function"?_t.apply(this,arguments):_t;return a(Zn.translate(Xt[0],Xt[1]).scale(zt.k).translate(typeof pt=="function"?-pt.apply(this,arguments):-pt,typeof L=="function"?-L.apply(this,arguments):-L),It,x)},_t,kt)};function sn(M,pt){return pt=Math.max(v[0],Math.min(v[1],pt)),pt===M.k?M:new Fe(pt,M.x,M.y)}function Ye(M,pt,L){var _t=pt[0]-L[0]*M.k,kt=pt[1]-L[1]*M.k;return _t===M.x&&kt===M.y?M:new Fe(M.k,_t,kt)}function wn(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function an(M,pt,L,_t){M.on("start.zoom",function(){Se(this,arguments).event(_t).start()}).on("interrupt.zoom end.zoom",function(){Se(this,arguments).event(_t).end()}).tween("zoom",function(){var kt=this,It=arguments,zt=Se(kt,It).event(_t),Xt=o.apply(kt,It),Wt=L==null?wn(Xt):typeof L=="function"?L.apply(kt,It):L,Ne=Math.max(Xt[1][0]-Xt[0][0],Xt[1][1]-Xt[0][1]),Jt=kt.__zoom,Ce=typeof pt=="function"?pt.apply(kt,It):pt,Me=B(Jt.invert(Wt).concat(Ne/Jt.k),Ce.invert(Wt).concat(Ne/Ce.k));return function(jt){if(jt===1)jt=Ce;else{var Ke=Me(jt),cr=Ne/Ke[2];jt=new Fe(cr,Wt[0]-Ke[0]*cr,Wt[1]-Ke[1]*cr)}zt.zoom(null,jt)}})}function Se(M,pt,L){return!L&&M.__zooming||new sr(M,pt)}function sr(M,pt){this.that=M,this.args=pt,this.active=0,this.sourceEvent=null,this.extent=o.apply(M,pt),this.taps=0}sr.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,pt){return this.mouse&&M!=="mouse"&&(this.mouse[1]=pt.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=pt.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=pt.invert(this.touch1[0])),this.that.__zoom=pt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var pt=(0,mt.Z)(this.that).datum();Z.call(M,this.that,new to(M,{sourceEvent:this.sourceEvent,target:At,type:M,transform:this.that.__zoom,dispatch:Z}),pt)}};function _n(M,...pt){if(!n.apply(this,arguments))return;var L=Se(this,pt).event(M),_t=this.__zoom,kt=Math.max(v[0],Math.min(v[1],_t.k*Math.pow(2,g.apply(this,arguments)))),It=(0,vt.Z)(M);if(L.wheel)(L.mouse[0][0]!==It[0]||L.mouse[0][1]!==It[1])&&(L.mouse[1]=_t.invert(L.mouse[0]=It)),clearTimeout(L.wheel);else{if(_t.k===kt)return;L.mouse=[It,_t.invert(It)],Ze(this),L.start()}Be(M),L.wheel=setTimeout(zt,re),L.zoom("mouse",a(Ye(sn(_t,kt),L.mouse[0],L.mouse[1]),L.extent,x));function zt(){L.wheel=null,L.end()}}function Dr(M,...pt){if(yt||!n.apply(this,arguments))return;var L=M.currentTarget,_t=Se(this,pt,!0).event(M),kt=(0,mt.Z)(M.view).on("mousemove.zoom",Wt,!0).on("mouseup.zoom",Ne,!0),It=(0,vt.Z)(M,L),zt=M.clientX,Xt=M.clientY;(0,ot.Z)(M.view),Rr(M),_t.mouse=[It,this.__zoom.invert(It)],Ze(this),_t.start();function Wt(Jt){if(Be(Jt),!_t.moved){var Ce=Jt.clientX-zt,Me=Jt.clientY-Xt;_t.moved=Ce*Ce+Me*Me>Kt}_t.event(Jt).zoom("mouse",a(Ye(_t.that.__zoom,_t.mouse[0]=(0,vt.Z)(Jt,L),_t.mouse[1]),_t.extent,x))}function Ne(Jt){kt.on("mousemove.zoom mouseup.zoom",null),(0,ot.D)(Jt.view,_t.moved),Be(Jt),_t.event(Jt).end()}}function Ir(M,...pt){if(n.apply(this,arguments)){var L=this.__zoom,_t=(0,vt.Z)(M.changedTouches?M.changedTouches[0]:M,this),kt=L.invert(_t),It=L.k*(M.shiftKey?.5:2),zt=a(Ye(sn(L,It),_t,kt),o.apply(this,pt),x);Be(M),P>0?(0,mt.Z)(this).transition().duration(P).call(an,zt,_t,M):(0,mt.Z)(this).call(At.transform,zt,_t,M)}}function ar(M,...pt){if(n.apply(this,arguments)){var L=M.touches,_t=L.length,kt=Se(this,pt,M.changedTouches.length===_t).event(M),It,zt,Xt,Wt;for(Rr(M),zt=0;zt<_t;++zt)Xt=L[zt],Wt=(0,vt.Z)(Xt,this),Wt=[Wt,this.__zoom.invert(Wt),Xt.identifier],kt.touch0?!kt.touch1&&kt.touch0[2]!==Wt[2]&&(kt.touch1=Wt,kt.taps=0):(kt.touch0=Wt,It=!0,kt.taps=1+!!X);X&&(X=clearTimeout(X)),It&&(kt.taps<2&&(ft=Wt[0],X=setTimeout(function(){X=null},Ct)),Ze(this),kt.start())}}function ri(M,...pt){if(this.__zooming){var L=Se(this,pt).event(M),_t=M.changedTouches,kt=_t.length,It,zt,Xt,Wt;for(Be(M),It=0;It<kt;++It)zt=_t[It],Xt=(0,vt.Z)(zt,this),L.touch0&&L.touch0[2]===zt.identifier?L.touch0[0]=Xt:L.touch1&&L.touch1[2]===zt.identifier&&(L.touch1[0]=Xt);if(zt=L.that.__zoom,L.touch1){var Ne=L.touch0[0],Jt=L.touch0[1],Ce=L.touch1[0],Me=L.touch1[1],jt=(jt=Ce[0]-Ne[0])*jt+(jt=Ce[1]-Ne[1])*jt,Ke=(Ke=Me[0]-Jt[0])*Ke+(Ke=Me[1]-Jt[1])*Ke;zt=sn(zt,Math.sqrt(jt/Ke)),Xt=[(Ne[0]+Ce[0])/2,(Ne[1]+Ce[1])/2],Wt=[(Jt[0]+Me[0])/2,(Jt[1]+Me[1])/2]}else if(L.touch0)Xt=L.touch0[0],Wt=L.touch0[1];else return;L.zoom("touch",a(Ye(zt,Xt,Wt),L.extent,x))}}function oi(M,...pt){if(this.__zooming){var L=Se(this,pt).event(M),_t=M.changedTouches,kt=_t.length,It,zt;for(Rr(M),yt&&clearTimeout(yt),yt=setTimeout(function(){yt=null},Ct),It=0;It<kt;++It)zt=_t[It],L.touch0&&L.touch0[2]===zt.identifier?delete L.touch0:L.touch1&&L.touch1[2]===zt.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(zt=(0,vt.Z)(zt,this),Math.hypot(ft[0]-zt[0],ft[1]-zt[1])<me)){var Xt=(0,mt.Z)(this).on("dblclick.zoom");Xt&&Xt.apply(this,arguments)}}}return At.wheelDelta=function(M){return arguments.length?(g=typeof M=="function"?M:on(+M),At):g},At.filter=function(M){return arguments.length?(n=typeof M=="function"?M:on(!!M),At):n},At.touchable=function(M){return arguments.length?(w=typeof M=="function"?M:on(!!M),At):w},At.extent=function(M){return arguments.length?(o=typeof M=="function"?M:on([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),At):o},At.scaleExtent=function(M){return arguments.length?(v[0]=+M[0],v[1]=+M[1],At):[v[0],v[1]]},At.translateExtent=function(M){return arguments.length?(x[0][0]=+M[0][0],x[1][0]=+M[1][0],x[0][1]=+M[0][1],x[1][1]=+M[1][1],At):[[x[0][0],x[0][1]],[x[1][0],x[1][1]]]},At.constrain=function(M){return arguments.length?(a=M,At):a},At.duration=function(M){return arguments.length?(P=+M,At):P},At.interpolate=function(M){return arguments.length?(B=M,At):B},At.on=function(){var M=Z.on.apply(Z,arguments);return M===Z?At:M},At.clickDistance=function(M){return arguments.length?(Kt=(M=+M)*M,At):Math.sqrt(Kt)},At.tapDistance=function(M){return arguments.length?(me=+M,At):me},At}},36666:function(dt,gt,$){"use strict";$.d(gt,{X:function(){return f}});function f(q,j){if(Object.is(q,j))return!0;if(typeof q!="object"||q===null||typeof j!="object"||j===null)return!1;if(q instanceof Map&&j instanceof Map){if(q.size!==j.size)return!1;for(const[st,at]of q)if(!Object.is(at,j.get(st)))return!1;return!0}if(q instanceof Set&&j instanceof Set){if(q.size!==j.size)return!1;for(const st of q)if(!j.has(st))return!1;return!0}const Tt=Object.keys(q);if(Tt.length!==Object.keys(j).length)return!1;for(const st of Tt)if(!Object.prototype.hasOwnProperty.call(j,st)||!Object.is(q[st],j[st]))return!1;return!0}var ot=(q,j)=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { shallow } from 'zustand/shallow'`."),f(q,j))}}]);
}());