!(function(){var ya=Object.defineProperty,wa=Object.defineProperties;var ba=Object.getOwnPropertyDescriptors;var Vc=Object.getOwnPropertySymbols;var va=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable;var Fc=(k,x,b)=>x in k?ya(k,x,{enumerable:!0,configurable:!0,writable:!0,value:b}):k[x]=b,Fr=(k,x)=>{for(var b in x||(x={}))va.call(x,b)&&Fc(k,b,x[b]);if(Vc)for(var b of Vc(x))Sa.call(x,b)&&Fc(k,b,x[b]);return k},ti=(k,x)=>wa(k,ba(x));(self.webpackChunk_ant_design_pro_flow=self.webpackChunk_ant_design_pro_flow||[]).push([[7465],{87707:function(k,x,b){"use strict";b.d(x,{Z:function(){return Ft}});var E=b(53262),B=b(48230),v=b(74966),R=b(4594),I=b(35639),L=b(69271),P=b(38567),H,W,Ct,$=(0,P.kc)(function(At,rt){var X=At.token,q=At.css,Mt=At.cx,It=At.prefixCls,Ht=rt.size,Jt=rt.className,Yt="".concat(It,"-").concat(X.editorPrefix,"-icon"),Vt=typeof Ht=="number"?q(H||(H=(0,L.Z)([`
          width: `,`px !important;
          height: `,`px !important;
        `])),Ht,Ht):"",zt=q(W||(W=(0,L.Z)([`
    display: flex;
    align-items: center;
    justify-content: center;

    &:hover {
      color: `,` !important;
    }

    &:active {
      scale: 0.8;
      color: `,`;
    }

    transition: color 600ms `,", scale 400ms ",`,
      background-color 100ms `,`;
  `])),X.colorText,X.colorText,X.motionEaseOut,X.motionEaseOut,X.motionEaseOut);return{container:Mt(Yt,zt,Vt,Jt),tooltip:q(Ct||(Ct=(0,L.Z)([`
      pointer-events: none;
    `])))}}),j=b(11527),ct=["placement","title","icon","cursor","onClick","className","arrow","size","tooltipDelay"],gt=function(rt){var X=rt.placement,q=rt.title,Mt=rt.icon,It=rt.cursor,Ht=rt.onClick,Jt=rt.className,Yt=rt.arrow,Vt=Yt===void 0?!1:Yt,zt=rt.size,ft=zt===void 0?"default":zt,Rt=rt.tooltipDelay,kt=Rt===void 0?.5:Rt,K=(0,B.Z)(rt,ct),ut=$({size:ft}),Pt=ut.styles,te=ut.cx,Zt=(0,j.jsx)(v.ZP,(0,E.Z)((0,E.Z)({icon:Mt,className:te(Pt.container,Jt),type:"text",style:{cursor:It},size:typeof ft=="number"||ft==="default"?"middle":ft},K),{},{onClick:Ht}));return(0,j.jsx)(j.Fragment,{children:q?(0,j.jsx)(R.Z,{arrow:Vt,overlayClassName:Pt.tooltip,title:q,mouseEnterDelay:kt,placement:X,children:Zt}):Zt})},mt=function(rt){var X=rt||{},q=X.size,Mt=$({size:q}),It=Mt.theme;return(0,j.jsx)(I.iV,{componentToken:{Button:{colorText:It.colorTextTertiary,colorBgTextHover:It.colorFillSecondary,colorBgTextActive:It.colorFill}},children:(0,j.jsx)(gt,(0,E.Z)({},rt))})},Ft=mt},35639:function(k,x,b){"use strict";b.d(x,{iV:function(){return zt}});var E=b(53262),B=b(93535),v=b(13501),R=b(13018),I=b(73114),L=function(kt,K){var ut=I.Z.darkAlgorithm(kt,K);return(0,E.Z)((0,E.Z)({},ut),{},{colorBgLayout:"#20252b",colorBgContainer:"#282c34",colorBgElevated:"#32363e"})},P=function(kt){var K={algorithm:[I.Z.compactAlgorithm]};return kt==="dark"&&K.algorithm.push(L),K},H=b(38567),W=function(){return{focusedOutlineColor:"#4c9ffe",colorTypeBoolean:"#D8C152",colorTypeNumber:"#5295C4",colorTypeString:"#149E6D",colorTypeBoolArray:"#D8C152",colorTypeNumberArray:"#239BEF",colorTypeStringArray:"#62AE8D"}},Ct=W({}),$=b(69271),j=b(72683),ct,gt,mt,Ft,At,rt,X,q,Mt,It,Ht,Jt=function(kt){var K=kt.token,ut=kt.css,Pt=ut(ct||(ct=(0,$.Z)([`
    cursor: pointer;
    transition: 150ms background-color ease-in-out;
    &:hover {
      background: `,`;
    }
  `])),K.colorFillQuaternary),te=ut(gt||(gt=(0,$.Z)([`
    color: `,`;
    background-color: `,`;
    border-color: transparent;
  `])),K.colorText,K.colorFillTertiary),Zt=ut(mt||(mt=(0,$.Z)([`
    color: `,` !important;
    background-color: `,` !important;
    border-color: `,` !important;
    box-shadow: none;
  `])),K.colorText,K.colorFillQuaternary,K.colorPrimary),se=ut(Ft||(Ft=(0,$.Z)([`
    color: `,`;
    background: `,`;
    border-color: transparent;
  `])),K.colorTextSecondary,K.colorFillQuaternary);return{defaultButton:ut(At||(At=(0,$.Z)([`
      `,`;

      &:hover {
        color: `,` !important;
        background: `,` !important;
        border-color: transparent !important;
      }
      &:focus {
        `,`;
        border-color: `,` !important;
      }
    `])),se,K.colorText,K.colorFillSecondary,se,K.colorPrimary),textInfo:ut(rt||(rt=(0,$.Z)([`
      color: `,`;
      &:hover {
        color: `,`;
      }
    `])),K.colorTextSecondary,K.colorText),textDefault:ut(X||(X=(0,$.Z)([`
      color: `,`;
    `])),K.colorTextSecondary),containerBgHover:ut(q||(q=(0,$.Z)([`
      cursor: pointer;
      transition: 150ms background-color ease-in-out;

      &:hover {
        background: `,`;
      }
    `])),K.colorFillQuaternary),containerBgL2:ut(Mt||(Mt=(0,$.Z)([`
      `,`;
      border-radius: 4px;
      background: `,`;

      &:hover {
        background: `,`;
      }
    `])),Pt,K.colorFillQuaternary,K.colorFillTertiary),controlContainerFocused:Zt,controlContainer:ut(It||(It=(0,$.Z)([`
      &:hover {
        `,`
      }
      &:focus {
        `,`
      }
    `])),te,Zt),backgroundBlur:ut(Ht||(Ht=(0,$.Z)([`
      background: `,`;
      backdrop-filter: blur(10px);
    `])),(0,j.DZ)(.4)(K.colorBgElevated))}},Yt=b(11527),Vt=function(kt){var K=(0,v.S)(),ut=P(kt),Pt={colorBgContainer:K==null?void 0:K.colorFillQuaternary,colorBorder:"transparent",controlOutline:"transparent"};return ut.components={Input:Pt,InputNumber:Pt,Select:Pt,Tree:{colorBgContainer:"transparent"},TreeSelect:Pt},ut},zt=function(kt){var K=kt.children,ut=kt.componentToken,Pt=(0,R.r)(),te=Pt.appearance,Zt=Pt.themeMode,se=Vt(te);return se.components=(0,E.Z)((0,E.Z)({},se.components),ut),(0,Yt.jsx)(B.ZP,{theme:se,children:(0,Yt.jsx)(H.f6,{appearance:te,themeMode:Zt,theme:P,customToken:W,customStylish:Jt,children:K})})},ft=function(kt){return function(K){return _jsx(zt,{children:_jsx(kt,_objectSpread({},K))})}}},38567:function(k,x,b){"use strict";b.d(x,{f6:function(){return R},kc:function(){return v}});var E=b(75639),B=(0,E.F)({customToken:{editorPrefix:"editor"}}),v=B.createStyles,R=B.ThemeProvider},22653:function(k,x,b){"use strict";var E=b(50959),B=b(6694),v=b(63907);function R(I){v.Z&&((0,B.mf)(I)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof I)));var L=(0,E.useRef)(I);L.current=(0,E.useMemo)(function(){return I},[I]);var P=(0,E.useRef)();return P.current||(P.current=function(){for(var H=[],W=0;W<arguments.length;W++)H[W]=arguments[W];return L.current.apply(this,H)}),P.current}x.Z=R},99744:function(k,x,b){"use strict";b.d(x,{Z:function(){return Me}});var E=b(50959),B=b(82187),v=b.n(B),R=b(95965),I=b(36293),L=b(92262),H=N=>{const{getPrefixCls:Bt,direction:lt}=(0,E.useContext)(R.E_),{prefixCls:Q,className:pt}=N,Gt=Bt("input-group",Q),ie=Bt("input"),[xt,Xt]=(0,L.ZP)(ie),oe=v()(Gt,{[`${Gt}-lg`]:N.size==="large",[`${Gt}-sm`]:N.size==="small",[`${Gt}-compact`]:N.compact,[`${Gt}-rtl`]:lt==="rtl"},Xt,pt),Qt=(0,E.useContext)(I.aM),ce=(0,E.useMemo)(()=>Object.assign(Object.assign({},Qt),{isFormItemInput:!1}),[Qt]);return xt(E.createElement("span",{className:oe,style:N.style,onMouseEnter:N.onMouseEnter,onMouseLeave:N.onMouseLeave,onFocus:N.onFocus,onBlur:N.onBlur},E.createElement(I.aM.Provider,{value:ce},N.children)))},W=b(67115),Ct=b(37469),$={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},j=$,ct=b(3940),gt=function(Bt,lt){return E.createElement(ct.Z,(0,Ct.Z)({},Bt,{ref:lt,icon:j}))},mt=E.forwardRef(gt),Ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},At=Ft,rt=function(Bt,lt){return E.createElement(ct.Z,(0,Ct.Z)({},Bt,{ref:lt,icon:At}))},X=E.forwardRef(rt),q=b(36760),Mt=b(78404),It=b(12597),Ht=function(N,Bt){var lt={};for(var Q in N)Object.prototype.hasOwnProperty.call(N,Q)&&Bt.indexOf(Q)<0&&(lt[Q]=N[Q]);if(N!=null&&typeof Object.getOwnPropertySymbols=="function")for(var pt=0,Q=Object.getOwnPropertySymbols(N);pt<Q.length;pt++)Bt.indexOf(Q[pt])<0&&Object.prototype.propertyIsEnumerable.call(N,Q[pt])&&(lt[Q[pt]]=N[Q[pt]]);return lt};const Jt=N=>N?E.createElement(X,null):E.createElement(mt,null),Yt={click:"onClick",hover:"onMouseOver"};var zt=E.forwardRef((N,Bt)=>{const{visibilityToggle:lt=!0}=N,Q=typeof lt=="object"&&lt.visible!==void 0,[pt,Gt]=(0,E.useState)(()=>Q?lt.visible:!1),ie=(0,E.useRef)(null);E.useEffect(()=>{Q&&Gt(lt.visible)},[Q,lt]);const xt=(0,It.Z)(ie),Xt=()=>{const{disabled:Fe}=N;Fe||(pt&&xt(),Gt($t=>{var le;const Te=!$t;return typeof lt=="object"&&((le=lt.onVisibleChange)===null||le===void 0||le.call(lt,Te)),Te}))},oe=Fe=>{const{action:$t="click",iconRender:le=Jt}=N,Te=Yt[$t]||"",c=le(pt),d={[Te]:Xt,className:`${Fe}-icon`,key:"passwordIcon",onMouseDown:w=>{w.preventDefault()},onMouseUp:w=>{w.preventDefault()}};return E.cloneElement(E.isValidElement(c)?c:E.createElement("span",null,c),d)},{className:Qt,prefixCls:ce,inputPrefixCls:me,size:qt}=N,Le=Ht(N,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:Nt}=E.useContext(R.E_),je=Nt("input",me),Pe=Nt("input-password",ce),ke=lt&&oe(Pe),ye=v()(Pe,Qt,{[`${Pe}-${qt}`]:!!qt}),Ve=Object.assign(Object.assign({},(0,q.Z)(Le,["suffix","iconRender","visibilityToggle"])),{type:pt?"text":"password",className:ye,prefixCls:je,suffix:ke});return qt&&(Ve.size=qt),E.createElement(W.Z,Object.assign({ref:(0,Mt.sQ)(Bt,ie)},Ve))}),ft=b(46327),Rt=b(34375),kt=b(74966),K=b(83979),ut=b(67810),Pt=function(N,Bt){var lt={};for(var Q in N)Object.prototype.hasOwnProperty.call(N,Q)&&Bt.indexOf(Q)<0&&(lt[Q]=N[Q]);if(N!=null&&typeof Object.getOwnPropertySymbols=="function")for(var pt=0,Q=Object.getOwnPropertySymbols(N);pt<Q.length;pt++)Bt.indexOf(Q[pt])<0&&Object.prototype.propertyIsEnumerable.call(N,Q[pt])&&(lt[Q[pt]]=N[Q[pt]]);return lt},Zt=E.forwardRef((N,Bt)=>{const{prefixCls:lt,inputPrefixCls:Q,className:pt,size:Gt,suffix:ie,enterButton:xt=!1,addonAfter:Xt,loading:oe,disabled:Qt,onSearch:ce,onChange:me,onCompositionStart:qt,onCompositionEnd:Le}=N,Nt=Pt(N,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:je,direction:Pe}=E.useContext(R.E_),ke=E.useRef(!1),ye=je("input-search",lt),Ve=je("input",Q),{compactSize:Fe}=(0,ut.ri)(ye,Pe),$t=(0,K.Z)(J=>{var M;return(M=Gt!=null?Gt:Fe)!==null&&M!==void 0?M:J}),le=E.useRef(null),Te=J=>{J&&J.target&&J.type==="click"&&ce&&ce(J.target.value,J,{source:"clear"}),me&&me(J)},c=J=>{var M;document.activeElement===((M=le.current)===null||M===void 0?void 0:M.input)&&J.preventDefault()},d=J=>{var M,it;ce&&ce((it=(M=le.current)===null||M===void 0?void 0:M.input)===null||it===void 0?void 0:it.value,J,{source:"input"})},w=J=>{ke.current||oe||d(J)},S=typeof xt=="boolean"?E.createElement(ft.Z,null):null,U=`${ye}-button`;let z;const V=xt||{},Z=V.type&&V.type.__ANT_BUTTON===!0;Z||V.type==="button"?z=(0,Rt.Tm)(V,Object.assign({onMouseDown:c,onClick:J=>{var M,it;(it=(M=V==null?void 0:V.props)===null||M===void 0?void 0:M.onClick)===null||it===void 0||it.call(M,J),d(J)},key:"enterButton"},Z?{className:U,size:$t}:{})):z=E.createElement(kt.ZP,{className:U,type:xt?"primary":void 0,size:$t,disabled:Qt,key:"enterButton",onMouseDown:c,onClick:d,loading:oe,icon:S},xt),Xt&&(z=[z,(0,Rt.Tm)(Xt,{key:"addonAfter"})]);const C=v()(ye,{[`${ye}-rtl`]:Pe==="rtl",[`${ye}-${$t}`]:!!$t,[`${ye}-with-button`]:!!xt},pt),D=J=>{ke.current=!0,qt==null||qt(J)},tt=J=>{ke.current=!1,Le==null||Le(J)};return E.createElement(W.Z,Object.assign({ref:(0,Mt.sQ)(le,Bt),onPressEnter:w},Nt,{size:$t,onCompositionStart:D,onCompositionEnd:tt,prefixCls:Ve,addonAfter:z,suffix:ie,onChange:Te,className:C,disabled:Qt}))}),se=b(32777);const ee=W.Z;ee.Group=H,ee.Search=Zt,ee.TextArea=se.Z,ee.Password=zt;var Me=ee},6218:function(k,x,b){"use strict";b.d(x,{N:function(){return I}});var E=b(67469),B=b(3341),v=b.n(B),R=b(50959),I=function(P){return function(H,W){var Ct=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[W],$=arguments.length>3?arguments[3]:void 0,j=$!=null?$:P.setState;(0,R.useEffect)(function(){if(typeof W!="undefined"){var ct,gt=(ct=P.getState)===null||ct===void 0?void 0:ct.call(P);if(v()(gt==null?void 0:gt[H],W))return;j((0,E.Z)({},H,W),!1,{type:"\u{1F4AD} useStoreUpdater / ".concat(H),payload:W})}},Ct)}}},31965:function(k,x,b){"use strict";b.d(x,{v:function(){return B}});var E=b(51650),B=function(R){return R?E.mW:function(I){return I}}},62657:function(k){function x(b){if(b===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b}k.exports=x,k.exports.__esModule=!0,k.exports.default=k.exports},335:function(k,x,b){var E=b(31479);function B(v,R){var I=typeof Symbol!="undefined"&&v[Symbol.iterator]||v["@@iterator"];if(!I){if(Array.isArray(v)||(I=E(v))||R&&v&&typeof v.length=="number"){I&&(v=I);var L=0,P=function(){};return{s:P,n:function(){return L>=v.length?{done:!0}:{done:!1,value:v[L++]}},e:function(j){throw j},f:P}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var H=!0,W=!1,Ct;return{s:function(){I=I.call(v)},n:function(){var j=I.next();return H=j.done,j},e:function(j){W=!0,Ct=j},f:function(){try{!H&&I.return!=null&&I.return()}finally{if(W)throw Ct}}}}k.exports=B,k.exports.__esModule=!0,k.exports.default=k.exports},83136:function(k,x,b){var E=b(38836),B=b(68919),v=b(75254);function R(I){var L=B();return function(){var H=E(I),W;if(L){var Ct=E(this).constructor;W=Reflect.construct(H,arguments,Ct)}else W=H.apply(this,arguments);return v(this,W)}}k.exports=R,k.exports.__esModule=!0,k.exports.default=k.exports},38836:function(k){function x(b){return k.exports=x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)},k.exports.__esModule=!0,k.exports.default=k.exports,x(b)}k.exports=x,k.exports.__esModule=!0,k.exports.default=k.exports},21742:function(k,x,b){var E=b(80038);function B(v,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");v.prototype=Object.create(R&&R.prototype,{constructor:{value:v,writable:!0,configurable:!0}}),Object.defineProperty(v,"prototype",{writable:!1}),R&&E(v,R)}k.exports=B,k.exports.__esModule=!0,k.exports.default=k.exports},68919:function(k){function x(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(b){return!1}}k.exports=x,k.exports.__esModule=!0,k.exports.default=k.exports},67825:function(k,x,b){var E=b(64382);function B(v,R){if(v==null)return{};var I=E(v,R),L,P;if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(v);for(P=0;P<H.length;P++)L=H[P],!(R.indexOf(L)>=0)&&Object.prototype.propertyIsEnumerable.call(v,L)&&(I[L]=v[L])}return I}k.exports=B,k.exports.__esModule=!0,k.exports.default=k.exports},64382:function(k){function x(b,E){if(b==null)return{};var B={},v=Object.keys(b),R,I;for(I=0;I<v.length;I++)R=v[I],!(E.indexOf(R)>=0)&&(B[R]=b[R]);return B}k.exports=x,k.exports.__esModule=!0,k.exports.default=k.exports},75254:function(k,x,b){var E=b(31759).default,B=b(62657);function v(R,I){if(I&&(E(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(R)}k.exports=v,k.exports.__esModule=!0,k.exports.default=k.exports},80038:function(k){function x(b,E){return k.exports=x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(v,R){return v.__proto__=R,v},k.exports.__esModule=!0,k.exports.default=k.exports,x(b,E)}k.exports=x,k.exports.__esModule=!0,k.exports.default=k.exports},41974:function(k,x,b){"use strict";b.d(x,{Uy:function(){return je}});var E=Symbol.for("immer-nothing"),B=Symbol.for("immer-draftable"),v=Symbol.for("immer-state"),R=[];function I(c,...d){throw new Error(`[Immer] minified error nr: ${c}. Full error at: https://bit.ly/3cXEKWf`)}var L=Object.getPrototypeOf;function P(c){return!!c&&!!c[v]}function H(c){var d;return c?Ct(c)||Array.isArray(c)||!!c[B]||!!((d=c.constructor)!=null&&d[B])||rt(c)||X(c):!1}var W=Object.prototype.constructor.toString();function Ct(c){if(!c||typeof c!="object")return!1;const d=L(c);if(d===null)return!0;const w=Object.hasOwnProperty.call(d,"constructor")&&d.constructor;return w===Object?!0:typeof w=="function"&&Function.toString.call(w)===W}function $(c){return P(c)||I(15,c),c[v].base_}function j(c,d){ct(c)===0?Reflect.ownKeys(c).forEach(w=>{d(w,c[w],c)}):c.forEach((w,S)=>d(S,w,c))}function ct(c){const d=c[v];return d?d.type_:Array.isArray(c)?1:rt(c)?2:X(c)?3:0}function gt(c,d){return ct(c)===2?c.has(d):Object.prototype.hasOwnProperty.call(c,d)}function mt(c,d){return ct(c)===2?c.get(d):c[d]}function Ft(c,d,w){const S=ct(c);S===2?c.set(d,w):S===3?c.add(w):c[d]=w}function At(c,d){return c===d?c!==0||1/c===1/d:c!==c&&d!==d}function rt(c){return c instanceof Map}function X(c){return c instanceof Set}function q(c){return c.copy_||c.base_}function Mt(c,d){if(rt(c))return new Map(c);if(X(c))return new Set(c);if(Array.isArray(c))return Array.prototype.slice.call(c);if(!d&&Ct(c))return L(c)?Fr({},c):Object.assign(Object.create(null),c);const w=Object.getOwnPropertyDescriptors(c);delete w[v];let S=Reflect.ownKeys(w);for(let U=0;U<S.length;U++){const z=S[U],V=w[z];V.writable===!1&&(V.writable=!0,V.configurable=!0),(V.get||V.set)&&(w[z]={configurable:!0,writable:!0,enumerable:V.enumerable,value:c[z]})}return Object.create(L(c),w)}function It(c,d=!1){return Jt(c)||P(c)||!H(c)||(ct(c)>1&&(c.set=c.add=c.clear=c.delete=Ht),Object.freeze(c),d&&Object.entries(c).forEach(([w,S])=>It(S,!0))),c}function Ht(){I(2)}function Jt(c){return Object.isFrozen(c)}var Yt={};function Vt(c){const d=Yt[c];return d||I(0,c),d}function zt(c,d){Yt[c]||(Yt[c]=d)}var ft;function Rt(){return ft}function kt(c,d){return{drafts_:[],parent_:c,immer_:d,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function K(c,d){d&&(Vt("Patches"),c.patches_=[],c.inversePatches_=[],c.patchListener_=d)}function ut(c){Pt(c),c.drafts_.forEach(Zt),c.drafts_=null}function Pt(c){c===ft&&(ft=c.parent_)}function te(c){return ft=kt(ft,c)}function Zt(c){const d=c[v];d.type_===0||d.type_===1?d.revoke_():d.revoked_=!0}function se(c,d){d.unfinalizedDrafts_=d.drafts_.length;const w=d.drafts_[0];return c!==void 0&&c!==w?(w[v].modified_&&(ut(d),I(4)),H(c)&&(c=ee(d,c),d.parent_||N(d,c)),d.patches_&&Vt("Patches").generateReplacementPatches_(w[v].base_,c,d.patches_,d.inversePatches_)):c=ee(d,w,[]),ut(d),d.patches_&&d.patchListener_(d.patches_,d.inversePatches_),c!==E?c:void 0}function ee(c,d,w){if(Jt(d))return d;const S=d[v];if(!S)return j(d,(U,z)=>Me(c,S,d,U,z,w)),d;if(S.scope_!==c)return d;if(!S.modified_)return N(c,S.base_,!0),S.base_;if(!S.finalized_){S.finalized_=!0,S.scope_.unfinalizedDrafts_--;const U=S.copy_;let z=U,V=!1;S.type_===3&&(z=new Set(U),U.clear(),V=!0),j(z,(Z,C)=>Me(c,S,U,Z,C,w,V)),N(c,U,!1),w&&c.patches_&&Vt("Patches").generatePatches_(S,w,c.patches_,c.inversePatches_)}return S.copy_}function Me(c,d,w,S,U,z,V){if(P(U)){const Z=z&&d&&d.type_!==3&&!gt(d.assigned_,S)?z.concat(S):void 0,C=ee(c,U,Z);if(Ft(w,S,C),P(C))c.canAutoFreeze_=!1;else return}else V&&w.add(U);if(H(U)&&!Jt(U)){if(!c.immer_.autoFreeze_&&c.unfinalizedDrafts_<1)return;ee(c,U),(!d||!d.scope_.parent_)&&typeof S!="symbol"&&Object.prototype.propertyIsEnumerable.call(w,S)&&N(c,U)}}function N(c,d,w=!1){!c.parent_&&c.immer_.autoFreeze_&&c.canAutoFreeze_&&It(d,w)}function Bt(c,d){const w=Array.isArray(c),S={type_:w?1:0,scope_:d?d.scope_:Rt(),modified_:!1,finalized_:!1,assigned_:{},parent_:d,base_:c,draft_:null,copy_:null,revoke_:null,isManual_:!1};let U=S,z=lt;w&&(U=[S],z=Q);const{revoke:V,proxy:Z}=Proxy.revocable(U,z);return S.draft_=Z,S.revoke_=V,Z}var lt={get(c,d){if(d===v)return c;const w=q(c);if(!gt(w,d))return Gt(c,w,d);const S=w[d];return c.finalized_||!H(S)?S:S===pt(c.base_,d)?(Xt(c),c.copy_[d]=Qt(S,c)):S},has(c,d){return d in q(c)},ownKeys(c){return Reflect.ownKeys(q(c))},set(c,d,w){const S=ie(q(c),d);if(S!=null&&S.set)return S.set.call(c.draft_,w),!0;if(!c.modified_){const U=pt(q(c),d),z=U==null?void 0:U[v];if(z&&z.base_===w)return c.copy_[d]=w,c.assigned_[d]=!1,!0;if(At(w,U)&&(w!==void 0||gt(c.base_,d)))return!0;Xt(c),xt(c)}return c.copy_[d]===w&&(w!==void 0||d in c.copy_)||Number.isNaN(w)&&Number.isNaN(c.copy_[d])||(c.copy_[d]=w,c.assigned_[d]=!0),!0},deleteProperty(c,d){return pt(c.base_,d)!==void 0||d in c.base_?(c.assigned_[d]=!1,Xt(c),xt(c)):delete c.assigned_[d],c.copy_&&delete c.copy_[d],!0},getOwnPropertyDescriptor(c,d){const w=q(c),S=Reflect.getOwnPropertyDescriptor(w,d);return S&&{writable:!0,configurable:c.type_!==1||d!=="length",enumerable:S.enumerable,value:w[d]}},defineProperty(){I(11)},getPrototypeOf(c){return L(c.base_)},setPrototypeOf(){I(12)}},Q={};j(lt,(c,d)=>{Q[c]=function(){return arguments[0]=arguments[0][0],d.apply(this,arguments)}}),Q.deleteProperty=function(c,d){return Q.set.call(this,c,d,void 0)},Q.set=function(c,d,w){return lt.set.call(this,c[0],d,w,c[0])};function pt(c,d){const w=c[v];return(w?q(w):c)[d]}function Gt(c,d,w){var U;const S=ie(d,w);return S?"value"in S?S.value:(U=S.get)==null?void 0:U.call(c.draft_):void 0}function ie(c,d){if(!(d in c))return;let w=L(c);for(;w;){const S=Object.getOwnPropertyDescriptor(w,d);if(S)return S;w=L(w)}}function xt(c){c.modified_||(c.modified_=!0,c.parent_&&xt(c.parent_))}function Xt(c){c.copy_||(c.copy_=Mt(c.base_,c.scope_.immer_.useStrictShallowCopy_))}var oe=class{constructor(c){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(d,w,S)=>{if(typeof d=="function"&&typeof w!="function"){const z=w;w=d;const V=this;return function(C=z,...D){return V.produce(C,tt=>w.call(this,tt,...D))}}typeof w!="function"&&I(6),S!==void 0&&typeof S!="function"&&I(7);let U;if(H(d)){const z=te(this),V=Qt(d,void 0);let Z=!0;try{U=w(V),Z=!1}finally{Z?ut(z):Pt(z)}return K(z,S),se(U,z)}else if(!d||typeof d!="object"){if(U=w(d),U===void 0&&(U=d),U===E&&(U=void 0),this.autoFreeze_&&It(U,!0),S){const z=[],V=[];Vt("Patches").generateReplacementPatches_(d,U,z,V),S(z,V)}return U}else I(1,d)},this.produceWithPatches=(d,w)=>{if(typeof d=="function")return(V,...Z)=>this.produceWithPatches(V,C=>d(C,...Z));let S,U;return[this.produce(d,w,(V,Z)=>{S=V,U=Z}),S,U]},typeof(c==null?void 0:c.autoFreeze)=="boolean"&&this.setAutoFreeze(c.autoFreeze),typeof(c==null?void 0:c.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(c.useStrictShallowCopy)}createDraft(c){H(c)||I(8),P(c)&&(c=ce(c));const d=te(this),w=Qt(c,void 0);return w[v].isManual_=!0,Pt(d),w}finishDraft(c,d){const w=c&&c[v];(!w||!w.isManual_)&&I(9);const{scope_:S}=w;return K(S,d),se(void 0,S)}setAutoFreeze(c){this.autoFreeze_=c}setUseStrictShallowCopy(c){this.useStrictShallowCopy_=c}applyPatches(c,d){let w;for(w=d.length-1;w>=0;w--){const U=d[w];if(U.path.length===0&&U.op==="replace"){c=U.value;break}}w>-1&&(d=d.slice(w+1));const S=Vt("Patches").applyPatches_;return P(c)?S(c,d):this.produce(c,U=>S(U,d))}};function Qt(c,d){const w=rt(c)?Vt("MapSet").proxyMap_(c,d):X(c)?Vt("MapSet").proxySet_(c,d):Bt(c,d);return(d?d.scope_:Rt()).drafts_.push(w),w}function ce(c){return P(c)||I(10,c),me(c)}function me(c){if(!H(c)||Jt(c))return c;const d=c[v];let w;if(d){if(!d.modified_)return d.base_;d.finalized_=!0,w=Mt(c,d.scope_.immer_.useStrictShallowCopy_)}else w=Mt(c,!0);return j(w,(S,U)=>{Ft(w,S,me(U))}),d&&(d.finalized_=!1),w}function qt(){const d="replace",w="add",S="remove";function U(M,it,at,yt){switch(M.type_){case 0:case 2:return V(M,it,at,yt);case 1:return z(M,it,at,yt);case 3:return Z(M,it,at,yt)}}function z(M,it,at,yt){let{base_:Lt,assigned_:wt}=M,bt=M.copy_;bt.length<Lt.length&&([Lt,bt]=[bt,Lt],[at,yt]=[yt,at]);for(let Y=0;Y<Lt.length;Y++)if(wt[Y]&&bt[Y]!==Lt[Y]){const st=it.concat([Y]);at.push({op:d,path:st,value:J(bt[Y])}),yt.push({op:d,path:st,value:J(Lt[Y])})}for(let Y=Lt.length;Y<bt.length;Y++){const st=it.concat([Y]);at.push({op:w,path:st,value:J(bt[Y])})}for(let Y=bt.length-1;Lt.length<=Y;--Y){const st=it.concat([Y]);yt.push({op:S,path:st})}}function V(M,it,at,yt){const{base_:Lt,copy_:wt}=M;j(M.assigned_,(bt,Y)=>{const st=mt(Lt,bt),we=mt(wt,bt),be=Y?gt(Lt,bt)?d:w:S;if(st===we&&be===d)return;const Kt=it.concat(bt);at.push(be===S?{op:be,path:Kt}:{op:be,path:Kt,value:we}),yt.push(be===w?{op:S,path:Kt}:be===S?{op:w,path:Kt,value:J(st)}:{op:d,path:Kt,value:J(st)})})}function Z(M,it,at,yt){let{base_:Lt,copy_:wt}=M,bt=0;Lt.forEach(Y=>{if(!wt.has(Y)){const st=it.concat([bt]);at.push({op:S,path:st,value:Y}),yt.unshift({op:w,path:st,value:Y})}bt++}),bt=0,wt.forEach(Y=>{if(!Lt.has(Y)){const st=it.concat([bt]);at.push({op:w,path:st,value:Y}),yt.unshift({op:S,path:st,value:Y})}bt++})}function C(M,it,at,yt){at.push({op:d,path:[],value:it===E?void 0:it}),yt.push({op:d,path:[],value:M})}function D(M,it){return it.forEach(at=>{const{path:yt,op:Lt}=at;let wt=M;for(let we=0;we<yt.length-1;we++){const be=ct(wt);let Kt=yt[we];typeof Kt!="string"&&typeof Kt!="number"&&(Kt=""+Kt),(be===0||be===1)&&(Kt==="__proto__"||Kt==="constructor")&&I(16+3),typeof wt=="function"&&Kt==="prototype"&&I(16+3),wt=mt(wt,Kt),typeof wt!="object"&&I(16+2,yt.join("/"))}const bt=ct(wt),Y=tt(at.value),st=yt[yt.length-1];switch(Lt){case d:switch(bt){case 2:return wt.set(st,Y);case 3:I(16);default:return wt[st]=Y}case w:switch(bt){case 1:return st==="-"?wt.push(Y):wt.splice(st,0,Y);case 2:return wt.set(st,Y);case 3:return wt.add(Y);default:return wt[st]=Y}case S:switch(bt){case 1:return wt.splice(st,1);case 2:return wt.delete(st);case 3:return wt.delete(at.value);default:return delete wt[st]}default:I(16+1,Lt)}}),M}function tt(M){if(!H(M))return M;if(Array.isArray(M))return M.map(tt);if(rt(M))return new Map(Array.from(M.entries()).map(([at,yt])=>[at,tt(yt)]));if(X(M))return new Set(Array.from(M).map(tt));const it=Object.create(L(M));for(const at in M)it[at]=tt(M[at]);return gt(M,B)&&(it[B]=M[B]),it}function J(M){return P(M)?tt(M):M}zt("Patches",{applyPatches_:D,generatePatches_:U,generateReplacementPatches_:C})}function Le(){class c extends Map{constructor(C,D){super(),this[v]={type_:2,parent_:D,scope_:D?D.scope_:Rt(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:C,draft_:this,isManual_:!1,revoked_:!1}}get size(){return q(this[v]).size}has(C){return q(this[v]).has(C)}set(C,D){const tt=this[v];return V(tt),(!q(tt).has(C)||q(tt).get(C)!==D)&&(w(tt),xt(tt),tt.assigned_.set(C,!0),tt.copy_.set(C,D),tt.assigned_.set(C,!0)),this}delete(C){if(!this.has(C))return!1;const D=this[v];return V(D),w(D),xt(D),D.base_.has(C)?D.assigned_.set(C,!1):D.assigned_.delete(C),D.copy_.delete(C),!0}clear(){const C=this[v];V(C),q(C).size&&(w(C),xt(C),C.assigned_=new Map,j(C.base_,D=>{C.assigned_.set(D,!1)}),C.copy_.clear())}forEach(C,D){const tt=this[v];q(tt).forEach((J,M,it)=>{C.call(D,this.get(M),M,this)})}get(C){const D=this[v];V(D);const tt=q(D).get(C);if(D.finalized_||!H(tt)||tt!==D.base_.get(C))return tt;const J=Qt(tt,D);return w(D),D.copy_.set(C,J),J}keys(){return q(this[v]).keys()}values(){const C=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const D=C.next();return D.done?D:{done:!1,value:this.get(D.value)}}}}entries(){const C=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const D=C.next();if(D.done)return D;const tt=this.get(D.value);return{done:!1,value:[D.value,tt]}}}}[Symbol.iterator](){return this.entries()}}function d(Z,C){return new c(Z,C)}function w(Z){Z.copy_||(Z.assigned_=new Map,Z.copy_=new Map(Z.base_))}class S extends Set{constructor(C,D){super(),this[v]={type_:3,parent_:D,scope_:D?D.scope_:Rt(),modified_:!1,finalized_:!1,copy_:void 0,base_:C,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return q(this[v]).size}has(C){const D=this[v];return V(D),D.copy_?!!(D.copy_.has(C)||D.drafts_.has(C)&&D.copy_.has(D.drafts_.get(C))):D.base_.has(C)}add(C){const D=this[v];return V(D),this.has(C)||(z(D),xt(D),D.copy_.add(C)),this}delete(C){if(!this.has(C))return!1;const D=this[v];return V(D),z(D),xt(D),D.copy_.delete(C)||(D.drafts_.has(C)?D.copy_.delete(D.drafts_.get(C)):!1)}clear(){const C=this[v];V(C),q(C).size&&(z(C),xt(C),C.copy_.clear())}values(){const C=this[v];return V(C),z(C),C.copy_.values()}entries(){const C=this[v];return V(C),z(C),C.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(C,D){const tt=this.values();let J=tt.next();for(;!J.done;)C.call(D,J.value,J.value,this),J=tt.next()}}function U(Z,C){return new S(Z,C)}function z(Z){Z.copy_||(Z.copy_=new Set,Z.base_.forEach(C=>{if(H(C)){const D=Qt(C,Z);Z.drafts_.set(C,D),Z.copy_.add(D)}else Z.copy_.add(C)}))}function V(Z){Z.revoked_&&I(3,JSON.stringify(q(Z)))}zt("MapSet",{proxyMap_:d,proxySet_:U})}var Nt=new oe,je=Nt.produce,Pe=Nt.produceWithPatches.bind(Nt),ke=Nt.setAutoFreeze.bind(Nt),ye=Nt.setUseStrictShallowCopy.bind(Nt),Ve=Nt.applyPatches.bind(Nt),Fe=Nt.createDraft.bind(Nt),$t=Nt.finishDraft.bind(Nt);function le(c){return c}function Te(c){return c}},13727:function(k,x,b){"use strict";b.d(x,{Z:function(){return rt}});var E=b(99615),B=E.Z.Symbol,v=B,R=Object.prototype,I=R.hasOwnProperty,L=R.toString,P=v?v.toStringTag:void 0;function H(X){var q=I.call(X,P),Mt=X[P];try{X[P]=void 0;var It=!0}catch(Jt){}var Ht=L.call(X);return It&&(q?X[P]=Mt:delete X[P]),Ht}var W=H,Ct=Object.prototype,$=Ct.toString;function j(X){return $.call(X)}var ct=j,gt="[object Null]",mt="[object Undefined]",Ft=v?v.toStringTag:void 0;function At(X){return X==null?X===void 0?mt:gt:Ft&&Ft in Object(X)?W(X):ct(X)}var rt=At},97889:function(k,x){"use strict";var b=typeof global=="object"&&global&&global.Object===Object&&global;x.Z=b},99615:function(k,x,b){"use strict";var E=b(97889),B=typeof self=="object"&&self&&self.Object===Object&&self,v=E.Z||B||Function("return this")();x.Z=v},82433:function(k,x){"use strict";function b(E){var B=typeof E;return E!=null&&(B=="object"||B=="function")}x.Z=b},13795:function(k,x){"use strict";function b(E){return E!=null&&typeof E=="object"}x.Z=b},62071:function(k,x,b){"use strict";b.d(x,{Z:function(){return bo}});function E(){this.__data__=[],this.size=0}var B=E;function v(a,g){return a===g||a!==a&&g!==g}var R=v;function I(a,g){for(var m=a.length;m--;)if(R(a[m][0],g))return m;return-1}var L=I,P=Array.prototype,H=P.splice;function W(a){var g=this.__data__,m=L(g,a);if(m<0)return!1;var A=g.length-1;return m==A?g.pop():H.call(g,m,1),--this.size,!0}var Ct=W;function $(a){var g=this.__data__,m=L(g,a);return m<0?void 0:g[m][1]}var j=$;function ct(a){return L(this.__data__,a)>-1}var gt=ct;function mt(a,g){var m=this.__data__,A=L(m,a);return A<0?(++this.size,m.push([a,g])):m[A][1]=g,this}var Ft=mt;function At(a){var g=-1,m=a==null?0:a.length;for(this.clear();++g<m;){var A=a[g];this.set(A[0],A[1])}}At.prototype.clear=B,At.prototype.delete=Ct,At.prototype.get=j,At.prototype.has=gt,At.prototype.set=Ft;var rt=At;function X(){this.__data__=new rt,this.size=0}var q=X;function Mt(a){var g=this.__data__,m=g.delete(a);return this.size=g.size,m}var It=Mt;function Ht(a){return this.__data__.get(a)}var Jt=Ht;function Yt(a){return this.__data__.has(a)}var Vt=Yt,zt=b(13727),ft=b(82433),Rt="[object AsyncFunction]",kt="[object Function]",K="[object GeneratorFunction]",ut="[object Proxy]";function Pt(a){if(!(0,ft.Z)(a))return!1;var g=(0,zt.Z)(a);return g==kt||g==K||g==Rt||g==ut}var te=Pt,Zt=b(99615),se=Zt.Z["__core-js_shared__"],ee=se,Me=function(){var a=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function N(a){return!!Me&&Me in a}var Bt=N,lt=Function.prototype,Q=lt.toString;function pt(a){if(a!=null){try{return Q.call(a)}catch(g){}try{return a+""}catch(g){}}return""}var Gt=pt,ie=/[\\^$.*+?()[\]{}|]/g,xt=/^\[object .+?Constructor\]$/,Xt=Function.prototype,oe=Object.prototype,Qt=Xt.toString,ce=oe.hasOwnProperty,me=RegExp("^"+Qt.call(ce).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qt(a){if(!(0,ft.Z)(a)||Bt(a))return!1;var g=te(a)?me:xt;return g.test(Gt(a))}var Le=qt;function Nt(a,g){return a==null?void 0:a[g]}var je=Nt;function Pe(a,g){var m=je(a,g);return Le(m)?m:void 0}var ke=Pe,ye=ke(Zt.Z,"Map"),Ve=ye,Fe=ke(Object,"create"),$t=Fe;function le(){this.__data__=$t?$t(null):{},this.size=0}var Te=le;function c(a){var g=this.has(a)&&delete this.__data__[a];return this.size-=g?1:0,g}var d=c,w="__lodash_hash_undefined__",S=Object.prototype,U=S.hasOwnProperty;function z(a){var g=this.__data__;if($t){var m=g[a];return m===w?void 0:m}return U.call(g,a)?g[a]:void 0}var V=z,Z=Object.prototype,C=Z.hasOwnProperty;function D(a){var g=this.__data__;return $t?g[a]!==void 0:C.call(g,a)}var tt=D,J="__lodash_hash_undefined__";function M(a,g){var m=this.__data__;return this.size+=this.has(a)?0:1,m[a]=$t&&g===void 0?J:g,this}var it=M;function at(a){var g=-1,m=a==null?0:a.length;for(this.clear();++g<m;){var A=a[g];this.set(A[0],A[1])}}at.prototype.clear=Te,at.prototype.delete=d,at.prototype.get=V,at.prototype.has=tt,at.prototype.set=it;var yt=at;function Lt(){this.size=0,this.__data__={hash:new yt,map:new(Ve||rt),string:new yt}}var wt=Lt;function bt(a){var g=typeof a;return g=="string"||g=="number"||g=="symbol"||g=="boolean"?a!=="__proto__":a===null}var Y=bt;function st(a,g){var m=a.__data__;return Y(g)?m[typeof g=="string"?"string":"hash"]:m.map}var we=st;function be(a){var g=we(this,a).delete(a);return this.size-=g?1:0,g}var Kt=be;function ei(a){return we(this,a).get(a)}var ni=ei;function ri(a){return we(this,a).has(a)}var si=ri;function ii(a,g){var m=we(this,a),A=m.size;return m.set(a,g),this.size+=m.size==A?0:1,this}var oi=ii;function tn(a){var g=-1,m=a==null?0:a.length;for(this.clear();++g<m;){var A=a[g];this.set(A[0],A[1])}}tn.prototype.clear=wt,tn.prototype.delete=Kt,tn.prototype.get=ni,tn.prototype.has=si,tn.prototype.set=oi;var ci=tn,li=200;function ai(a,g){var m=this.__data__;if(m instanceof rt){var A=m.__data__;if(!Ve||A.length<li-1)return A.push([a,g]),this.size=++m.size,this;m=this.__data__=new ci(A)}return m.set(a,g),this.size=m.size,this}var ui=ai;function en(a){var g=this.__data__=new rt(a);this.size=g.size}en.prototype.clear=q,en.prototype.delete=It,en.prototype.get=Jt,en.prototype.has=Vt,en.prototype.set=ui;var di=en,hi=function(){try{var a=ke(Object,"defineProperty");return a({},"",{}),a}catch(g){}}(),Nn=hi;function fi(a,g,m){g=="__proto__"&&Nn?Nn(a,g,{configurable:!0,enumerable:!0,value:m,writable:!0}):a[g]=m}var Qn=fi;function gi(a,g,m){(m!==void 0&&!R(a[g],m)||m===void 0&&!(g in a))&&Qn(a,g,m)}var qn=gi;function pi(a){return function(g,m,A){for(var ot=-1,St=Object(g),Dt=A(g),et=Dt.length;et--;){var Ot=Dt[a?et:++ot];if(m(St[Ot],Ot,St)===!1)break}return g}}var tr=pi,zr=tr(),_i=zr,Zr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Gr=Zr&&typeof module=="object"&&module&&!module.nodeType&&module,mi=Gr&&Gr.exports===Zr,Hr=mi?Zt.Z.Buffer:void 0,er=Hr?Hr.allocUnsafe:void 0;function yi(a,g){if(g)return a.slice();var m=a.length,A=er?er(m):new a.constructor(m);return a.copy(A),A}var wi=yi,bi=Zt.Z.Uint8Array,nr=bi;function vi(a){var g=new a.constructor(a.byteLength);return new nr(g).set(new nr(a)),g}var Si=vi;function $r(a,g){var m=g?Si(a.buffer):a.buffer;return new a.constructor(m,a.byteOffset,a.length)}var Kr=$r;function Wr(a,g){var m=-1,A=a.length;for(g||(g=Array(A));++m<A;)g[m]=a[m];return g}var Jr=Wr,Rn=Object.create,Ei=function(){function a(){}return function(g){if(!(0,ft.Z)(g))return{};if(Rn)return Rn(g);a.prototype=g;var m=new a;return a.prototype=void 0,m}}(),Yr=Ei;function nn(a,g){return function(m){return a(g(m))}}var Ci=nn,Xr=Ci(Object.getPrototypeOf,Object),Qr=Xr,fn=Object.prototype;function ki(a){var g=a&&a.constructor,m=typeof g=="function"&&g.prototype||fn;return a===m}var qr=ki;function Ti(a){return typeof a.constructor=="function"&&!qr(a)?Yr(Qr(a)):{}}var Ii=Ti,ve=b(13795),gn="[object Arguments]";function Di(a){return(0,ve.Z)(a)&&(0,zt.Z)(a)==gn}var rr=Di,ts=Object.prototype,ae=ts.hasOwnProperty,es=ts.propertyIsEnumerable,vt=rr(function(){return arguments}())?rr:function(a){return(0,ve.Z)(a)&&ae.call(a,"callee")&&!es.call(a,"callee")},rn=vt,Ln=Array.isArray,sr=Ln,Oi=9007199254740991;function Ai(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Oi}var ns=Ai;function xi(a){return a!=null&&ns(a.length)&&!te(a)}var ir=xi;function dt(a){return(0,ve.Z)(a)&&ir(a)}var sn=dt;function jn(){return!1}var rs=jn,or=typeof exports=="object"&&exports&&!exports.nodeType&&exports,cr=or&&typeof module=="object"&&module&&!module.nodeType&&module,Ge=cr&&cr.exports===or,ss=Ge?Zt.Z.Buffer:void 0,is=ss?ss.isBuffer:void 0,Ui=is||rs,on=Ui,ne="[object Object]",pn=Function.prototype,os=Object.prototype,lr=pn.toString,cs=os.hasOwnProperty,Mi=lr.call(Object);function ar(a){if(!(0,ve.Z)(a)||(0,zt.Z)(a)!=ne)return!1;var g=Qr(a);if(g===null)return!0;var m=cs.call(g,"constructor")&&g.constructor;return typeof m=="function"&&m instanceof m&&lr.call(m)==Mi}var ls=ar,cn="[object Arguments]",ur="[object Array]",Pi="[object Boolean]",Bi="[object Date]",_n="[object Error]",mn="[object Function]",Ni="[object Map]",dr="[object Number]",Vn="[object Object]",as="[object RegExp]",Ri="[object Set]",us="[object String]",ds="[object WeakMap]",hr="[object ArrayBuffer]",Li="[object DataView]",ji="[object Float32Array]",hs="[object Float64Array]",fs="[object Int8Array]",yn="[object Int16Array]",Vi="[object Int32Array]",Fi="[object Uint8Array]",zi="[object Uint8ClampedArray]",Zi="[object Uint16Array]",Gi="[object Uint32Array]",Tt={};Tt[ji]=Tt[hs]=Tt[fs]=Tt[yn]=Tt[Vi]=Tt[Fi]=Tt[zi]=Tt[Zi]=Tt[Gi]=!0,Tt[cn]=Tt[ur]=Tt[hr]=Tt[Pi]=Tt[Li]=Tt[Bi]=Tt[_n]=Tt[mn]=Tt[Ni]=Tt[dr]=Tt[Vn]=Tt[as]=Tt[Ri]=Tt[us]=Tt[ds]=!1;function Hi(a){return(0,ve.Z)(a)&&ns(a.length)&&!!Tt[(0,zt.Z)(a)]}var $i=Hi;function He(a){return function(g){return a(g)}}var Se=He,Ie=b(97889),wn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,bn=wn&&typeof module=="object"&&module&&!module.nodeType&&module,Ki=bn&&bn.exports===wn,fr=Ki&&Ie.Z.process,gs=function(){try{var a=bn&&bn.require&&bn.require("util").types;return a||fr&&fr.binding&&fr.binding("util")}catch(g){}}(),ps=gs,vn=ps&&ps.isTypedArray,_s=vn?Se(vn):$i,ms=_s;function Wi(a,g){if(!(g==="constructor"&&typeof a[g]=="function")&&g!="__proto__")return a[g]}var gr=Wi,Ji=Object.prototype,Yi=Ji.hasOwnProperty;function pr(a,g,m){var A=a[g];(!(Yi.call(a,g)&&R(A,m))||m===void 0&&!(g in a))&&Qn(a,g,m)}var ys=pr;function _r(a,g,m,A){var ot=!m;m||(m={});for(var St=-1,Dt=g.length;++St<Dt;){var et=g[St],Ot=A?A(m[et],a[et],et,m,a):void 0;Ot===void 0&&(Ot=a[et]),ot?Qn(m,et,Ot):ys(m,et,Ot)}return m}var Fn=_r;function ws(a,g){for(var m=-1,A=Array(a);++m<a;)A[m]=g(m);return A}var Xi=ws,Qi=9007199254740991,ze=/^(?:0|[1-9]\d*)$/;function $e(a,g){var m=typeof a;return g=g==null?Qi:g,!!g&&(m=="number"||m!="symbol"&&ze.test(a))&&a>-1&&a%1==0&&a<g}var bs=$e,qi=Object.prototype,Ee=qi.hasOwnProperty;function vs(a,g){var m=sr(a),A=!m&&rn(a),ot=!m&&!A&&on(a),St=!m&&!A&&!ot&&ms(a),Dt=m||A||ot||St,et=Dt?Xi(a.length,String):[],Ot=et.length;for(var fe in a)(g||Ee.call(a,fe))&&!(Dt&&(fe=="length"||ot&&(fe=="offset"||fe=="parent")||St&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||bs(fe,Ot)))&&et.push(fe);return et}var zn=vs;function Zn(a){var g=[];if(a!=null)for(var m in Object(a))g.push(m);return g}var to=Zn,Sn=Object.prototype,Ss=Sn.hasOwnProperty;function eo(a){if(!(0,ft.Z)(a))return to(a);var g=qr(a),m=[];for(var A in a)A=="constructor"&&(g||!Ss.call(a,A))||m.push(A);return m}var no=eo;function ro(a){return ir(a)?zn(a,!0):no(a)}var Gn=ro;function Es(a){return Fn(a,Gn(a))}var mr=Es;function De(a,g,m,A,ot,St,Dt){var et=gr(a,m),Ot=gr(g,m),fe=Dt.get(Ot);if(fe){qn(a,m,fe);return}var ue=St?St(et,Ot,m+"",a,g,Dt):void 0,En=ue===void 0;if(En){var vr=sr(Ot),ge=!vr&&on(Ot),Us=!vr&&!ge&&ms(Ot);ue=Ot,vr||ge||Us?sr(et)?ue=et:sn(et)?ue=Jr(et):ge?(En=!1,ue=wi(Ot,!0)):Us?(En=!1,ue=Kr(Ot,!0)):ue=[]:ls(Ot)||rn(Ot)?(ue=et,rn(et)?ue=mr(et):(!(0,ft.Z)(et)||te(et))&&(ue=Ii(Ot))):En=!1}En&&(Dt.set(Ot,ue),ot(ue,Ot,A,St,Dt),Dt.delete(Ot)),qn(a,m,ue)}var so=De;function Cs(a,g,m,A,ot){a!==g&&_i(g,function(St,Dt){if(ot||(ot=new di),(0,ft.Z)(St))so(a,g,Dt,m,Cs,A,ot);else{var et=A?A(gr(a,Dt),St,Dt+"",a,g,ot):void 0;et===void 0&&(et=St),qn(a,Dt,et)}},Gn)}var io=Cs;function he(a){return a}var Hn=he;function ks(a,g,m){switch(m.length){case 0:return a.call(g);case 1:return a.call(g,m[0]);case 2:return a.call(g,m[0],m[1]);case 3:return a.call(g,m[0],m[1],m[2])}return a.apply(g,m)}var oo=ks,yr=Math.max;function co(a,g,m){return g=yr(g===void 0?a.length-1:g,0),function(){for(var A=arguments,ot=-1,St=yr(A.length-g,0),Dt=Array(St);++ot<St;)Dt[ot]=A[g+ot];ot=-1;for(var et=Array(g+1);++ot<g;)et[ot]=A[ot];return et[g]=m(Dt),oo(a,this,et)}}var Ts=co;function lo(a){return function(){return a}}var wr=lo,Is=Nn?function(a,g){return Nn(a,"toString",{configurable:!0,enumerable:!1,value:wr(g),writable:!0})}:Hn,ao=Is,Ds=800,Os=16,uo=Date.now;function ho(a){var g=0,m=0;return function(){var A=uo(),ot=Os-(A-m);if(m=A,ot>0){if(++g>=Ds)return arguments[0]}else g=0;return a.apply(void 0,arguments)}}var fo=ho,go=fo(ao),po=go;function As(a,g){return po(Ts(a,g,Hn),a+"")}var _o=As;function xs(a,g,m){if(!(0,ft.Z)(m))return!1;var A=typeof g;return(A=="number"?ir(m)&&bs(g,m.length):A=="string"&&g in m)?R(m[g],a):!1}var mo=xs;function yo(a){return _o(function(g,m){var A=-1,ot=m.length,St=ot>1?m[ot-1]:void 0,Dt=ot>2?m[2]:void 0;for(St=a.length>3&&typeof St=="function"?(ot--,St):void 0,Dt&&mo(m[0],m[1],Dt)&&(St=ot<3?void 0:St,ot=1),g=Object(g);++A<ot;){var et=m[A];et&&a(g,et,A,St)}return g})}var wo=yo,br=wo(function(a,g,m){io(a,g,m)}),bo=br},67197:function(k,x,b){"use strict";b.d(x,{kP:function(){return v}});let E=I=>crypto.getRandomValues(new Uint8Array(I)),B=(I,L,P)=>{let H=(2<<Math.log(I.length-1)/Math.LN2)-1,W=-~(1.6*H*L/I.length);return(Ct=L)=>{let $="";for(;;){let j=P(W),ct=W;for(;ct--;)if($+=I[j[ct]&H]||"",$.length===Ct)return $}}},v=(I,L=21)=>B(I,L,E),R=(I=21)=>crypto.getRandomValues(new Uint8Array(I)).reduce((L,P)=>(P&=63,P<36?L+=P.toString(36):P<62?L+=(P-26).toString(36).toUpperCase():P>62?L+="-":L+="_",L),"")},51653:function(k,x,b){"use strict";b.d(x,{QW:function(){return ln},H6:function(){return Sl}});const E=()=>new Map,B=e=>{const t=E();return e.forEach((n,r)=>{t.set(r,n)}),t},v=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},R=(e,t)=>{const n=[];for(const[r,s]of e)n.push(t(s,r));return n},I=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},L=(e,t)=>{for(const[n,r]of e)if(!t(r,n))return!1;return!0},P=()=>new Set,H=e=>Array.from(e),W=e=>e.values().next().value||void 0,Ct=e=>new Set(e),$=e=>e[e.length-1],j=()=>[],ct=e=>e.slice(),gt=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},mt=Array.from,Ft=(e,t)=>{for(let n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0},At=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},rt=(e,t)=>e.length===t.length&&Ft(e,(n,r)=>n===t[r]),X=e=>Mt(e,[],(t,n)=>t.concat(n)),q=(e,t)=>{const n=new Array(e);for(let r=0;r<e;r++)n[r]=t(r,n);return n},Mt=(e,t,n)=>e.reduce(n,t),It=Array.isArray,Ht=e=>mt(set.from(e)),Jt=(e,t)=>{const n=set.create(),r=[];for(let s=0;s<e.length;s++){const i=e[s],o=t(i);n.has(o)||(n.add(o),r.push(i))}return r},Yt=(e,t)=>{const n=Array(e.length);for(let r=0;r<e.length;r++)n[r]=t(e[r],r,e);return n};class Vt{constructor(){this._observers=E()}on(t,n){return v(this._observers,t,P).add(n),n}once(t,n){const r=(...s)=>{this.off(t,r),n(...s)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return mt((this._observers.get(t)||E()).values()).forEach(r=>r(...n))}destroy(){this._observers=E()}}class zt{constructor(){this._observers=map.create()}on(t,n){map.setIfUndefined(this._observers,t,set.create).add(n)}once(t,n){const r=(...s)=>{this.off(t,r),n(...s)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return array.from((this._observers.get(t)||map.create()).values()).forEach(r=>r(...n))}destroy(){this._observers=map.create()}}const ft=Math.floor,Rt=Math.ceil,kt=Math.abs,K=Math.imul,ut=Math.round,Pt=Math.log10,te=Math.log2,Zt=Math.log,se=Math.sqrt,ee=(e,t)=>e+t,Me=(e,t)=>e<t?e:t,N=(e,t)=>e>t?e:t,Bt=Number.isNaN,lt=Math.pow,Q=e=>Math.pow(10,e),pt=Math.sign,Gt=e=>e!==0?e<0:1/e<0,ie=1,xt=2,Xt=4,oe=8,Qt=16,ce=32,me=64,qt=128,Le=256,Nt=512,je=1024,Pe=2048,ke=4096,ye=8192,Ve=16384,Fe=32768,$t=65536,le=1<<17,Te=1<<18,c=1<<19,d=1<<20,w=1<<21,S=1<<22,U=1<<23,z=1<<24,V=1<<25,Z=1<<26,C=1<<27,D=1<<28,tt=1<<29,J=1<<30,M=null,it=0,at=1,yt=3,Lt=7,wt=15,bt=31,Y=63,st=127,we=255,be=511,Kt=1023,ei=2047,ni=4095,ri=8191,si=16383,ii=32767,oi=65535,tn=le-1,ci=Te-1,li=c-1,ai=d-1,ui=w-1,en=S-1,di=U-1,hi=z-1,Nn=V-1,fi=Z-1,Qn=C-1,gi=D-1,qn=tt-1,pi=J-1,tr=2147483647,zr=4294967295,_i=Number.MAX_SAFE_INTEGER,Zr=Number.MIN_SAFE_INTEGER,Gr=null,mi=tr,Hr=zr,er=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&ft(e)===e),yi=Number.isNaN,wi=Number.parseInt,bi=e=>{e&=binary.BITS32;let t=0;for(;e;)e&=e-1,t++;return t},nr=String.fromCharCode,vi=String.fromCodePoint,Si=nr(65535),$r=e=>e.toLowerCase(),Kr=/^\s*/g,Wr=e=>e.replace(Kr,""),Jr=/([A-Z])/g,Rn=(e,t)=>Wr(e.replace(Jr,n=>`${t}${$r(n)}`)),Ei=e=>unescape(encodeURIComponent(e)).length,Yr=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=t.codePointAt(s);return r},nn=typeof TextEncoder!="undefined"?new TextEncoder:null,Xr=nn?e=>nn.encode(e):Yr,Qr=e=>{let t=e.length,n="",r=0;for(;t>0;){const s=t<1e4?t:1e4,i=e.subarray(r,r+s);r+=s,n+=String.fromCodePoint.apply(null,i),t-=s}return decodeURIComponent(escape(n))};let fn=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});fn&&fn.decode(new Uint8Array).length===1&&(fn=null);const ki=e=>fn.decode(e),qr=null,Ti=(e,t,n,r="")=>e.slice(0,t)+r+e.slice(t+n),Ii=(e,t)=>array.unfold(t,()=>e).join("");class ve{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const gn=()=>new ve,Di=e=>{const t=gn();return e(t),ae(t)},rr=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},ts=e=>e.cpos>0||e.bufs.length>0,ae=e=>{const t=new Uint8Array(rr(e));let n=0;for(let r=0;r<e.bufs.length;r++){const s=e.bufs[r];t.set(s,n),n+=s.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},es=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(N(n,t)*2),e.cpos=0)},vt=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},rn=(e,t,n)=>{let r=null;for(let s=0;s<e.bufs.length&&r===null;s++){const i=e.bufs[s];t<i.length?r=i:t-=i.length}r===null&&(r=e.cbuf),r[t]=n},Ln=vt,sr=null,Oi=(e,t)=>{vt(e,t&binary.BITS8),vt(e,t>>>8&binary.BITS8)},Ai=(e,t,n)=>{rn(e,t,n&binary.BITS8),rn(e,t+1,n>>>8&binary.BITS8)},ns=(e,t)=>{for(let n=0;n<4;n++)vt(e,t&binary.BITS8),t>>>=8},xi=(e,t)=>{for(let n=3;n>=0;n--)vt(e,t>>>8*n&binary.BITS8)},ir=(e,t,n)=>{for(let r=0;r<4;r++)rn(e,t+r,n&binary.BITS8),n>>>=8},dt=(e,t)=>{for(;t>st;)vt(e,qt|st&t),t=ft(t/128);vt(e,st&t)},sn=(e,t)=>{const n=Gt(t);for(n&&(t=-t),vt(e,(t>Y?qt:0)|(n?me:0)|Y&t),t=ft(t/64);t>0;)vt(e,(t>st?qt:0)|st&t),t=ft(t/128)},jn=new Uint8Array(3e4),rs=jn.length/3,or=(e,t)=>{if(t.length<rs){const n=nn.encodeInto(t,jn).written||0;dt(e,n);for(let r=0;r<n;r++)vt(e,jn[r])}else ne(e,Xr(t))},cr=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;dt(e,r);for(let s=0;s<r;s++)vt(e,n.codePointAt(s))},Ge=nn&&nn.encodeInto?or:cr,ss=(e,t)=>is(e,string.encodeUtf8(t)),is=(e,t)=>{for(let n=0;n<t.length;n++){const r=t[n];(r===0||r===1)&&vt(e,1),vt(e,t[n])}vt(e,0)},Ui=(e,t)=>on(e,ae(t)),on=(e,t)=>{const n=e.cbuf.length,r=e.cpos,s=Me(n-r,t.length),i=t.length-s;e.cbuf.set(t.subarray(0,s),r),e.cpos+=s,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(N(n*2,i)),e.cbuf.set(t.subarray(s)),e.cpos=i)},ne=(e,t)=>{dt(e,t.byteLength),on(e,t)},pn=(e,t)=>{es(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},os=(e,t)=>pn(e,4).setFloat32(0,t,!1),lr=(e,t)=>pn(e,8).setFloat64(0,t,!1),cs=(e,t)=>pn(e,8).setBigInt64(0,t,!1),Mi=(e,t)=>pn(e,8).setBigUint64(0,t,!1),ar=new DataView(new ArrayBuffer(4)),ls=e=>(ar.setFloat32(0,e),ar.getFloat32(0)===e),cn=(e,t)=>{switch(typeof t){case"string":vt(e,119),Ge(e,t);break;case"number":er(t)&&kt(t)<=tr?(vt(e,125),sn(e,t)):ls(t)?(vt(e,124),os(e,t)):(vt(e,123),lr(e,t));break;case"bigint":vt(e,122),cs(e,t);break;case"object":if(t===null)vt(e,126);else if(It(t)){vt(e,117),dt(e,t.length);for(let n=0;n<t.length;n++)cn(e,t[n])}else if(t instanceof Uint8Array)vt(e,116),ne(e,t);else{vt(e,118);const n=Object.keys(t);dt(e,n.length);for(let r=0;r<n.length;r++){const s=n[r];Ge(e,s),cn(e,t[s])}}break;case"boolean":vt(e,t?120:121);break;default:vt(e,127)}};class ur extends ve{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&dt(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}class Pi extends null{constructor(t){super(),this.s=t}write(t){sn(this,t-this.s),this.s=t}}class Bi extends null{constructor(t){super(),this.s=t,this.count=0}write(t){this.s===t&&this.count>0?this.count++:(this.count>0&&dt(this,this.count-1),this.count=1,sn(this,t-this.s),this.s=t)}}const _n=e=>{e.count>0&&(sn(e.encoder,e.count===1?e.s:-e.s),e.count>1&&dt(e.encoder,e.count-2))};class mn{constructor(){this.encoder=new ve,this.s=0,this.count=0}write(t){this.s===t?this.count++:(_n(this),this.count=1,this.s=t)}toUint8Array(){return _n(this),ae(this.encoder)}}class Ni{constructor(){this.encoder=new ve,this.s=0,this.count=0}write(t){this.s+this.count===t?this.count++:(_n(this),this.count=1,this.s=t)}toUint8Array(){return _n(this),ae(this.encoder)}}const dr=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);sn(e.encoder,t),e.count>1&&dt(e.encoder,e.count-2)}};class Vn{constructor(){this.encoder=new ve,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(dr(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return dr(this),ae(this.encoder)}}class as{constructor(){this.sarr=[],this.s="",this.lensE=new mn}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new ve;return this.sarr.push(this.s),this.s="",Ge(t,this.sarr.join("")),on(t,this.lensE.toUint8Array()),ae(t)}}const Ri=crypto.subtle,us=crypto.getRandomValues.bind(crypto),ds=Math.random,hr=()=>us(new Uint32Array(1))[0],Li=()=>{const e=getRandomValues(new Uint32Array(8));return(e[0]&binary.BITS21)*(binary.BITS32+1)+(e[1]>>>0)},ji=e=>e[math.floor(ds()*e.length)],hs=[1e7]+-1e3+-4e3+-8e3+-1e11,fs=()=>hs.replace(/[018]/g,e=>(e^hr()&15>>e/4).toString(16)),yn=e=>new Promise(e),Vi=e=>new Promise(e),Fi=Promise.all.bind(Promise),zi=e=>Promise.reject(e),Zi=e=>Promise.resolve(e),Gi=e=>Promise.resolve(e),Tt=(e,t,n=10)=>yn((r,s)=>{const i=time.getUnixTime(),o=e>0,u=setInterval(()=>{t()?(clearInterval(u),r()):o&&time.getUnixTime()-i>e&&(clearInterval(u),s(new Error("Timeout")))},n)}),Hi=e=>yn((t,n)=>setTimeout(t,e)),$i=e=>e instanceof Promise||e&&e.then&&e.catch&&e.finally,He=e=>new Error(e),Se=()=>{throw He("Method unimplemented")},Ie=()=>{throw He("Unexpected case")},wn=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&wn(e,t,n+1)}},bn=()=>{},Ki=e=>e(),fr=e=>e,gs=(e,t)=>e===t,ps=(e,t)=>e===t||e!=null&&t!=null&&e.constructor===t.constructor&&(array.isArray(e)&&array.equalFlat(e,t)||typeof e=="object"&&object.equalFlat(e,t)),vn=(e,t)=>{if(e==null||t==null)return gs(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!vn(e.get(n),t.get(n)))return!1;break}case Object:if(object.length(e)!==object.length(t))return!1;for(const n in e)if(!object.hasProperty(e,n)||!vn(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!vn(e[n],t[n]))return!1;break;default:return!1}return!0},_s=(e,t)=>t.includes(e),ms=It,Wi=e=>e&&e.constructor===String,gr=e=>e!=null&&e.constructor===Number,Ji=(e,t)=>e&&e.constructor===t,Yi=e=>t=>t&&t.constructor===e,pr=e=>e===void 0?null:e;class ys{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let _r=new ys,Fn=!0;try{typeof localStorage!="undefined"&&localStorage&&(_r=localStorage,Fn=!1)}catch(e){}const ws=_r,Xi=e=>Fn||addEventListener("storage",e),Qi=e=>Fn||removeEventListener("storage",e);var ze=b(14224);const $e=typeof ze!="undefined"&&ze.release&&/node|io\.js/.test(ze.release.name)&&Object.prototype.toString.call(typeof ze!="undefined"?ze:0)==="[object process]",bs=typeof window!="undefined"&&typeof document!="undefined"&&!$e,qi=typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1;let Ee;const vs=[],zn=()=>{if(Ee===void 0)if($e){Ee=E();const e=ze.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Ee.set(t,""),t=r):t!==null?(Ee.set(t,r),t=null):vs.push(r)}t!==null&&Ee.set(t,"")}else typeof location=="object"?(Ee=E(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Ee.set(`--${Rn(t,"-")}`,n),Ee.set(`-${Rn(t,"-")}`,n)}})):Ee=E();return Ee},Zn=e=>zn().has(e),to=(e,t)=>zn().get(e)||t,Sn=e=>pr($e?{NODE_ENV:"production",PUBLIC_PATH:"/"}[e.toUpperCase().replaceAll("-","_")]:ws.getItem(e)),Ss=e=>zn().get("--"+e)||Sn(e),eo=e=>{const t=Ss(e);if(t==null)throw new Error(`Expected configuration "${e.toUpperCase().replaceAll("-","_")}"`);return t},ro=(e=>Zn("--"+e)||Sn(e)!==null)("production"),Gn=$e&&_s({NODE_ENV:"production",PUBLIC_PATH:"/"}.FORCE_COLOR,["true","1","2"]),Es=!Zn("no-colors")&&(!$e||ze.stdout.isTTY||Gn)&&(!$e||Zn("color")||Gn||Sn("COLORTERM")!==null||(Sn("TERM")||"").includes("color"));class mr{constructor(t,n){this.left=t,this.right=n}}const De=(e,t)=>new mr(e,t),so=(e,t)=>new mr(t,e),Cs=(e,t)=>e.forEach(n=>t(n.left,n.right)),io=(e,t)=>e.map(n=>t(n.left,n.right)),he=typeof document!="undefined"?document:{},Hn=e=>he.createElement(e),ks=()=>he.createDocumentFragment(),oo=e=>he.createTextNode(e),yr=typeof DOMParser!="undefined"?new DOMParser:null,co=(e,t,n)=>e.dispatchEvent(new CustomEvent(t,n)),Ts=(e,t)=>(pair.forEach(t,(n,r)=>{r===!1?e.removeAttribute(n):r===!0?e.setAttribute(n,""):e.setAttribute(n,r)}),e),lo=(e,t)=>(t.forEach((n,r)=>{e.setAttribute(r,n)}),e),wr=e=>{const t=ks();for(let n=0;n<e.length;n++)A(t,e[n]);return t},Is=(e,t)=>(A(e,wr(t)),e),ao=e=>e.remove(),Ds=(e,t,n)=>e.addEventListener(t,n),Os=(e,t,n)=>e.removeEventListener(t,n),uo=(e,t)=>(pair.forEach(t,(n,r)=>Ds(e,n,r)),e),ho=(e,t)=>(pair.forEach(t,(n,r)=>Os(e,n,r)),e),fo=(e,t=[],n=[])=>Is(Ts(Hn(e),t),n),go=(e,t)=>{const n=Hn("canvas");return n.height=t,n.width=e,n},po=null,As=e=>`${e.left}:${e.right};`,_o=e=>e.map(As).join(""),xs=e=>R(e,(t,n)=>`${n}:${t};`).join(""),mo=(e,t)=>e.querySelector(t),yo=(e,t)=>e.querySelectorAll(t),wo=e=>he.getElementById(e),br=e=>yr.parseFromString(`<html><body>${e}</body></html>`,"text/html").body,bo=e=>wr(br(e).childNodes),a=e=>br(e).firstElementChild,g=(e,t)=>e.replaceWith(t),m=(e,t,n)=>e.insertBefore(t,n),A=(e,t)=>e.appendChild(t),ot=he.ELEMENT_NODE,St=he.TEXT_NODE,Dt=he.CDATA_SECTION_NODE,et=he.COMMENT_NODE,Ot=he.DOCUMENT_NODE,fe=he.DOCUMENT_TYPE_NODE,ue=he.DOCUMENT_FRAGMENT_NODE,En=(e,t)=>e.nodeType===t,vr=(e,t)=>{let n=t.parentNode;for(;n&&n!==e;)n=n.parentNode;return n===e},ge=Symbol,Us=e=>typeof e=="symbol",Ea=()=>new Date,vo=Date.now,Ca=e=>{if(e<6e4){const i=metric.prefix(e,-1);return math.round(i.n*100)/100+i.prefix+"s"}e=math.floor(e/1e3);const t=e%60,n=math.floor(e/60)%60,r=math.floor(e/3600)%24,s=math.floor(e/86400);return s>0?s+"d"+(r>0||n>30?" "+(n>30?r+1:r)+"h":""):r>0?r+"h"+(n>0||t>30?" "+(t>30?n+1:n)+"min":""):n+"min"+(t>0?" "+t+"s":"")},So=ge(),Eo=ge(),Co=ge(),zc=ge(),ko=ge(),To=ge(),Io=ge(),Sr=ge(),Do=ge(),Zc=e=>{var s;e.length===1&&((s=e[0])==null?void 0:s.constructor)===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const i=e[r];i===void 0?t.push("undefined"):i.constructor===String||i.constructor===Number?t.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n},Oo=[ko,Io,Sr,Co];let Ms=0,Ao=vo();const ka=(e,t)=>{const n=Oo[Ms],r=env.getVariable("log"),s=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(t));return Ms=(Ms+1)%Oo.length,t+=": ",s?(...i)=>{var u;i.length===1&&((u=i[0])==null?void 0:u.constructor)===Function&&(i=i[0]());const o=time.getUnixTime(),l=o-Ao;Ao=o,e(n,t,Do,...i.map(_=>{switch(_!=null&&_.constructor===Uint8Array&&(_=Array.from(_)),typeof _){case"string":case"symbol":return _;default:return json.stringify(_)}}),n," +"+l+"ms")}:func.nop},xo={[So]:De("font-weight","bold"),[Eo]:De("font-weight","normal"),[Co]:De("color","blue"),[ko]:De("color","green"),[zc]:De("color","grey"),[To]:De("color","red"),[Io]:De("color","purple"),[Sr]:De("color","orange"),[Do]:De("color","black")},Er=Es?e=>{var o;e.length===1&&((o=e[0])==null?void 0:o.constructor)===Function&&(e=e[0]());const t=[],n=[],r=E();let s=[],i=0;for(;i<e.length;i++){const l=e[i],u=xo[l];if(u!==void 0)r.set(u.left,u.right);else{if(l===void 0)break;if(l.constructor===String||l.constructor===Number){const _=xs(r);i>0||_.length>0?(t.push("%c"+l),n.push(_)):t.push(l)}else break}}for(i>0&&(s=n,s.unshift(t.join("")));i<e.length;i++){const l=e[i];l instanceof Symbol||s.push(l)}return s}:Zc,Uo=(...e)=>{console.log(...Er(e)),Be.forEach(t=>t.print(e))},Gc=(...e)=>{console.warn(...Er(e)),e.unshift(Sr),Be.forEach(t=>t.print(e))},Ia=e=>{console.error(e),Be.forEach(t=>t.printError(e))},Mo=(e,t)=>{env.isBrowser&&console.log("%c                      ",`font-size: ${t}px; background-size: contain; background-repeat: no-repeat; background-image: url(${e})`),Be.forEach(n=>n.printImg(e,t))},Da=(e,t)=>Mo(`data:image/gif;base64,${e}`,t),Oa=(...e)=>{console.group(...Er(e)),Be.forEach(t=>t.group(e))},Aa=(...e)=>{console.groupCollapsed(...Er(e)),Be.forEach(t=>t.groupCollapsed(e))},xa=()=>{console.groupEnd(),Be.forEach(e=>e.groupEnd())},Ua=e=>Be.forEach(t=>t.printDom(e())),Ma=(e,t)=>Mo(e.toDataURL(),t),Be=P(),Po=e=>{const t=[],n=new Map;let r=0;for(;r<e.length;r++){let s=e[r];const i=xo[s];if(i!==void 0)n.set(i.left,i.right);else if(s===void 0&&(s="undefined "),s.constructor===String||s.constructor===Number){const o=dom.element("span",[pair.create("style",dom.mapToStyleString(n))],[dom.text(s.toString())]);o.innerHTML===""&&(o.innerHTML="&nbsp;"),t.push(o)}else break}for(;r<e.length;r++){let s=e[r];s instanceof Symbol||(s.constructor!==String&&s.constructor!==Number&&(s=" "+json.stringify(s)+" "),t.push(dom.element("span",[],[dom.text(s)])))}return t},Bo="font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;";class Hc{constructor(t){this.dom=t,this.ccontainer=this.dom,this.depth=0,Be.add(this)}group(t,n=!1){eventloop.enqueue(()=>{const r=dom.element("span",[pair.create("hidden",n),pair.create("style","color:grey;font-size:120%;")],[dom.text("\u25BC")]),s=dom.element("span",[pair.create("hidden",!n),pair.create("style","color:grey;font-size:125%;")],[dom.text("\u25B6")]),i=dom.element("div",[pair.create("style",`${Bo};padding-left:${this.depth*10}px`)],[r,s,dom.text(" ")].concat(Po(t))),o=dom.element("div",[pair.create("hidden",n)]),l=dom.element("div",[],[i,o]);dom.append(this.ccontainer,[l]),this.ccontainer=o,this.depth++,dom.addEventListener(i,"click",u=>{o.toggleAttribute("hidden"),r.toggleAttribute("hidden"),s.toggleAttribute("hidden")})})}groupCollapsed(t){this.group(t,!0)}groupEnd(){eventloop.enqueue(()=>{this.depth>0&&(this.depth--,this.ccontainer=this.ccontainer.parentElement.parentElement)})}print(t){eventloop.enqueue(()=>{dom.append(this.ccontainer,[dom.element("div",[pair.create("style",`${Bo};padding-left:${this.depth*10}px`)],Po(t))])})}printError(t){this.print([common.RED,common.BOLD,t.toString()])}printImg(t,n){eventloop.enqueue(()=>{dom.append(this.ccontainer,[dom.element("img",[pair.create("src",t),pair.create("height",`${math.round(n*1.5)}px`)])])})}printDom(t){eventloop.enqueue(()=>{dom.append(this.ccontainer,[t])})}destroy(){eventloop.enqueue(()=>{Be.delete(this)})}}const Pa=e=>new Hc(e),Ba=e=>common.createModuleLogger(Uo,e),Na=(e,t)=>({[Symbol.iterator](){return this},next(){const n=e.next();return{value:n.done?void 0:t(n.value),done:n.done}}}),No=e=>({[Symbol.iterator](){return this},next:e}),$c=(e,t)=>No(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),Ps=(e,t)=>No(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}}),Ra=()=>Object.create(null),Kc=Object.assign,Wc=Object.keys,Jc=(e,t)=>{for(const n in e)t(e[n],n)},La=(e,t)=>{const n=[];for(const r in e)n.push(t(e[r],r));return n},Ro=e=>Wc(e).length,ja=(e,t)=>{for(const n in e)if(t(e[n],n))return!0;return!1},Yc=e=>{for(const t in e)return!1;return!0},Xc=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},Qc=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),qc=(e,t)=>e===t||Ro(e)===Ro(t)&&Xc(e,(n,r)=>(n!==void 0||Qc(t,r))&&t[r]===n);class Va extends null{constructor(t,n){super(),this.doc=t,this.awareness=n}}class Bs{constructor(t,n){this.clock=t,this.len=n}}class Cn{constructor(){this.clients=new Map}}const kn=(e,t,n)=>t.clients.forEach((r,s)=>{const i=e.doc.store.clients.get(s);for(let o=0;o<r.length;o++){const l=r[o];nc(e,i,l.clock,l.len,n)}}),tl=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const s=ft((n+r)/2),i=e[s],o=i.clock;if(o<=t){if(t<o+i.len)return s;n=s+1}else r=s-1}return null},Tn=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&tl(n,t.clock)!==null},Ns=e=>{e.clients.forEach(t=>{t.sort((s,i)=>s.clock-i.clock);let n,r;for(n=1,r=1;n<t.length;n++){const s=t[r-1],i=t[n];s.clock+s.len>=i.clock?s.len=N(s.len,i.clock+i.len-s.clock):(r<n&&(t[r]=i),r++)}t.length=r})},In=e=>{const t=new Cn;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,s)=>{if(!t.clients.has(s)){const i=r.slice();for(let o=n+1;o<e.length;o++)gt(i,e[o].clients.get(s)||[]);t.clients.set(s,i)}});return Ns(t),t},$n=(e,t,n,r)=>{v(e.clients,t,()=>[]).push(new Bs(n,r))},Rs=()=>new Cn,Lo=e=>{const t=Rs();return e.clients.forEach((n,r)=>{const s=[];for(let i=0;i<n.length;i++){const o=n[i];if(o.deleted){const l=o.id.clock;let u=o.length;if(i+1<n.length)for(let _=n[i+1];i+1<n.length&&_.deleted;_=n[++i+1])u+=_.length;s.push(new Bs(l,u))}}s.length>0&&t.clients.set(r,s)}),t},Ne=(e,t)=>{dt(e.restEncoder,t.clients.size),mt(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),dt(e.restEncoder,n);const s=r.length;dt(e.restEncoder,s);for(let i=0;i<s;i++){const o=r[i];e.writeDsClock(o.clock),e.writeDsLen(o.len)}})},Ze=e=>{const t=new Cn,n=decoding.readVarUint(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const s=decoding.readVarUint(e.restDecoder),i=decoding.readVarUint(e.restDecoder);if(i>0){const o=map.setIfUndefined(t.clients,s,()=>[]);for(let l=0;l<i;l++)o.push(new Bs(e.readDsClock(),e.readDsLen()))}}return t},jo=(e,t,n)=>{const r=new Cn,s=decoding.readVarUint(e.restDecoder);for(let i=0;i<s;i++){e.resetDsCurVal();const o=decoding.readVarUint(e.restDecoder),l=decoding.readVarUint(e.restDecoder),u=n.clients.get(o)||[],_=Ut(n,o);for(let h=0;h<l;h++){const p=e.readDsClock(),y=p+e.readDsLen();if(p<_){_<y&&$n(r,o,_,y-_);let T=Ae(u,p),O=u[T];for(!O.deleted&&O.id.clock<p&&(u.splice(T+1,0,Vr(t,O,p-O.id.clock)),T++);T<u.length&&(O=u[T++],O.id.clock<y);)O.deleted||(y<O.id.clock+O.length&&u.splice(T,0,Vr(t,O,y-O.id.clock)),O.delete(t))}else $n(r,o,p,y-p)}}if(r.clients.size>0){const i=new Re;return encoding.writeVarUint(i.restEncoder,0),Ne(i,r),i.toUint8Array()}return null},el=(e,t)=>{if(e.clients.size!==t.clients.size)return!1;for(const[n,r]of e.clients.entries()){const s=t.clients.get(n);if(s===void 0||r.length!==s.length)return!1;for(let i=0;i<r.length;i++){const o=r[i],l=s[i];if(o.clock!==l.clock||o.len!==l.len)return!1}}return!0},Vo=hr;class ln extends Vt{constructor({guid:t=fs(),collectionid:n=null,gc:r=!0,gcFilter:s=()=>!0,meta:i=null,autoLoad:o=!1,shouldLoad:l=!0}={}){super(),this.gc=r,this.gcFilter=s,this.clientID=Vo(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new qo,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=l,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=yn(_=>{this.on("load",()=>{this.isLoaded=!0,_(this)})});const u=()=>yn(_=>{const h=p=>{(p===void 0||p===!0)&&(this.off("sync",h),_())};this.on("sync",h)});this.on("sync",_=>{_===!1&&this.isSynced&&(this.whenSynced=u()),this.isSynced=_===void 0||_===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=u()}load(){const t=this._item;t!==null&&!this.shouldLoad&&Et(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(mt(this.subdocs).map(t=>t.guid))}transact(t,n=null){return Et(this,t,n)}get(t,n=Wt){const r=v(this.share,t,()=>{const i=new n;return i._integrate(this,null),i}),s=r.constructor;if(n!==Wt&&s!==n)if(s===Wt){const i=new n;i._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=i}),i._start=r._start;for(let o=i._start;o!==null;o=o.right)o.parent=i;return i._length=r._length,this.share.set(t,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,Ye)}getText(t=""){return this.get(t,Un)}getMap(t=""){return this.get(t,un)}getXmlElement(t=""){return this.get(t,hn)}getXmlFragment(t=""){return this.get(t,dn)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){mt(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new ln(ti(Fr({guid:this.guid},n.opts),{shouldLoad:!1})),n.doc._item=t,Et(t.parent.doc,r=>{const s=n.doc;t.deleted||r.subdocsAdded.add(s),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}}class Cr{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return decoding.readVarUint(this.restDecoder)}readDsLen(){return decoding.readVarUint(this.restDecoder)}}class Oe extends null{readLeftID(){return G(decoding.readVarUint(this.restDecoder),decoding.readVarUint(this.restDecoder))}readRightID(){return G(decoding.readVarUint(this.restDecoder),decoding.readVarUint(this.restDecoder))}readClient(){return decoding.readVarUint(this.restDecoder)}readInfo(){return decoding.readUint8(this.restDecoder)}readString(){return decoding.readVarString(this.restDecoder)}readParentInfo(){return decoding.readVarUint(this.restDecoder)===1}readTypeRef(){return decoding.readVarUint(this.restDecoder)}readLen(){return decoding.readVarUint(this.restDecoder)}readAny(){return decoding.readAny(this.restDecoder)}readBuf(){return buffer.copyUint8Array(decoding.readVarUint8Array(this.restDecoder))}readJSON(){return JSON.parse(decoding.readVarString(this.restDecoder))}readKey(){return decoding.readVarString(this.restDecoder)}}class nl{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=decoding.readVarUint(this.restDecoder),this.dsCurrVal}readDsLen(){const t=decoding.readVarUint(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Ce extends null{constructor(t){super(t),this.keys=[],decoding.readVarUint(t),this.keyClockDecoder=new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(t)),this.clientDecoder=new decoding.UintOptRleDecoder(decoding.readVarUint8Array(t)),this.leftClockDecoder=new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(t)),this.rightClockDecoder=new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(t)),this.infoDecoder=new decoding.RleDecoder(decoding.readVarUint8Array(t),decoding.readUint8),this.stringDecoder=new decoding.StringDecoder(decoding.readVarUint8Array(t)),this.parentInfoDecoder=new decoding.RleDecoder(decoding.readVarUint8Array(t),decoding.readUint8),this.typeRefDecoder=new decoding.UintOptRleDecoder(decoding.readVarUint8Array(t)),this.lenDecoder=new decoding.UintOptRleDecoder(decoding.readVarUint8Array(t))}readLeftID(){return new On(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new On(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return decoding.readAny(this.restDecoder)}readBuf(){return decoding.readVarUint8Array(this.restDecoder)}readJSON(){return decoding.readAny(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class Dn{constructor(){this.restEncoder=gn()}toUint8Array(){return ae(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){dt(this.restEncoder,t)}writeDsLen(t){dt(this.restEncoder,t)}}class an extends Dn{writeLeftID(t){dt(this.restEncoder,t.client),dt(this.restEncoder,t.clock)}writeRightID(t){dt(this.restEncoder,t.client),dt(this.restEncoder,t.clock)}writeClient(t){dt(this.restEncoder,t)}writeInfo(t){Ln(this.restEncoder,t)}writeString(t){Ge(this.restEncoder,t)}writeParentInfo(t){dt(this.restEncoder,t?1:0)}writeTypeRef(t){dt(this.restEncoder,t)}writeLen(t){dt(this.restEncoder,t)}writeAny(t){cn(this.restEncoder,t)}writeBuf(t){ne(this.restEncoder,t)}writeJSON(t){Ge(this.restEncoder,JSON.stringify(t))}writeKey(t){Ge(this.restEncoder,t)}}class kr{constructor(){this.restEncoder=gn(),this.dsCurrVal=0}toUint8Array(){return ae(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,dt(this.restEncoder,n)}writeDsLen(t){t===0&&Ie(),dt(this.restEncoder,t-1),this.dsCurrVal+=t}}class Re extends kr{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Vn,this.clientEncoder=new mn,this.leftClockEncoder=new Vn,this.rightClockEncoder=new Vn,this.infoEncoder=new ur(Ln),this.stringEncoder=new as,this.parentInfoEncoder=new ur(Ln),this.typeRefEncoder=new mn,this.lenEncoder=new mn}toUint8Array(){const t=gn();return dt(t,0),ne(t,this.keyClockEncoder.toUint8Array()),ne(t,this.clientEncoder.toUint8Array()),ne(t,this.leftClockEncoder.toUint8Array()),ne(t,this.rightClockEncoder.toUint8Array()),ne(t,ae(this.infoEncoder)),ne(t,this.stringEncoder.toUint8Array()),ne(t,ae(this.parentInfoEncoder)),ne(t,this.typeRefEncoder.toUint8Array()),ne(t,this.lenEncoder.toUint8Array()),on(t,ae(this.restEncoder)),ae(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){cn(this.restEncoder,t)}writeBuf(t){ne(this.restEncoder,t)}writeJSON(t){cn(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const rl=(e,t,n,r)=>{r=N(r,t[0].id.clock);const s=Ae(t,r);dt(e.restEncoder,t.length-s),e.writeClient(n),dt(e.restEncoder,r);const i=t[s];i.write(e,r-i.id.clock);for(let o=s+1;o<t.length;o++)t[o].write(e,0)},Ls=(e,t,n)=>{const r=new Map;n.forEach((s,i)=>{Ut(t,i)>s&&r.set(i,s)}),Kn(t).forEach((s,i)=>{n.has(i)||r.set(i,0)}),dt(e.restEncoder,r.size),mt(r.entries()).sort((s,i)=>i[0]-s[0]).forEach(([s,i])=>{rl(e,t.clients.get(s),s,i)})},sl=(e,t)=>{const n=map.create(),r=decoding.readVarUint(e.restDecoder);for(let s=0;s<r;s++){const i=decoding.readVarUint(e.restDecoder),o=new Array(i),l=e.readClient();let u=decoding.readVarUint(e.restDecoder);n.set(l,{i:0,refs:o});for(let _=0;_<i;_++){const h=e.readInfo();switch(binary.BITS5&h){case 0:{const p=e.readLen();o[_]=new pe(G(l,u),p),u+=p;break}case 10:{const p=decoding.readVarUint(e.restDecoder);o[_]=new de(G(l,u),p),u+=p;break}default:{const p=(h&(binary.BIT7|binary.BIT8))===0,y=new _t(G(l,u),null,(h&binary.BIT8)===binary.BIT8?e.readLeftID():null,null,(h&binary.BIT7)===binary.BIT7?e.readRightID():null,p?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,p&&(h&binary.BIT6)===binary.BIT6?e.readString():null,Nc(e,h));o[_]=y,u+=y.length}}}}return n},il=(e,t,n)=>{const r=[];let s=array.from(n.keys()).sort((T,O)=>T-O);if(s.length===0)return null;const i=()=>{if(s.length===0)return null;let T=n.get(s[s.length-1]);for(;T.refs.length===T.i;)if(s.pop(),s.length>0)T=n.get(s[s.length-1]);else return null;return T};let o=i();if(o===null)return null;const l=new qo,u=new Map,_=(T,O)=>{const ht=u.get(T);(ht==null||ht>O)&&u.set(T,O)};let h=o.refs[o.i++];const p=new Map,y=()=>{for(const T of r){const O=T.id.client,ht=n.get(O);ht?(ht.i--,l.clients.set(O,ht.refs.slice(ht.i)),n.delete(O),ht.i=0,ht.refs=[]):l.clients.set(O,[T]),s=s.filter(F=>F!==O)}r.length=0};for(;;){if(h.constructor!==de){const O=map.setIfUndefined(p,h.id.client,()=>Ut(t,h.id.client))-h.id.clock;if(O<0)r.push(h),_(h.id.client,h.id.clock-1),y();else{const ht=h.getMissing(e,t);if(ht!==null){r.push(h);const F=n.get(ht)||{refs:[],i:0};if(F.refs.length===F.i)_(ht,Ut(t,ht)),y();else{h=F.refs[F.i++];continue}}else(O===0||O<h.length)&&(h.integrate(e,O),p.set(h.id.client,h.id.clock+h.length))}}if(r.length>0)h=r.pop();else if(o!==null&&o.i<o.refs.length)h=o.refs[o.i++];else{if(o=i(),o===null)break;h=o.refs[o.i++]}}if(l.clients.size>0){const T=new Re;return Ls(T,l,new Map),encoding.writeVarUint(T.restEncoder,0),{missing:u,update:T.toUint8Array()}}return null},ol=(e,t)=>Ls(e,t.doc.store,t.beforeState),Fo=(e,t,n,r=new Ce(e))=>Et(t,s=>{s.local=!1;let i=!1;const o=s.doc,l=o.store,u=sl(r,o),_=il(s,l,u),h=l.pendingStructs;if(h){for(const[y,T]of h.missing)if(T<Ut(l,y)){i=!0;break}if(_){for(const[y,T]of _.missing){const O=h.missing.get(y);(O==null||O>T)&&h.missing.set(y,T)}h.update=Ar([h.update,_.update])}}else l.pendingStructs=_;const p=jo(r,s,l);if(l.pendingDs){const y=new Ce(decoding.createDecoder(l.pendingDs));decoding.readVarUint(y.restDecoder);const T=jo(y,s,l);p&&T?l.pendingDs=Ar([p,T]):l.pendingDs=p||T}else l.pendingDs=p;if(i){const y=l.pendingStructs.update;l.pendingStructs=null,js(s.doc,y)}},n,!1),Fa=(e,t,n)=>Fo(e,t,n,new Oe(e)),js=(e,t,n,r=Ce)=>{const s=decoding.createDecoder(t);Fo(s,e,n,new r(s))},za=(e,t,n)=>js(e,t,n,Oe),cl=(e,t,n=new Map)=>{Ls(e,t.store,n),Ne(e,Lo(t.store))},ll=(e,t=new Uint8Array([0]),n=new Re)=>{const r=Zo(t);cl(n,e,r);const s=[n.toUint8Array()];if(e.store.pendingDs&&s.push(e.store.pendingDs),e.store.pendingStructs&&s.push(uc(e.store.pendingStructs.update,t)),s.length>1){if(n.constructor===an)return Tl(s.map((i,o)=>o===0?i:Al(i)));if(n.constructor===Re)return Ar(s)}return s[0]},Za=(e,t)=>ll(e,t,new an),zo=e=>{const t=new Map,n=decoding.readVarUint(e.restDecoder);for(let r=0;r<n;r++){const s=decoding.readVarUint(e.restDecoder),i=decoding.readVarUint(e.restDecoder);t.set(s,i)}return t},Zo=e=>zo(new Cr(decoding.createDecoder(e))),Vs=(e,t)=>(encoding.writeVarUint(e.restEncoder,t.size),array.from(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{encoding.writeVarUint(e.restEncoder,n),encoding.writeVarUint(e.restEncoder,r)}),e),al=(e,t)=>Vs(e,Kn(t.store)),ul=(e,t=new kr)=>(e instanceof Map?Vs(t,e):al(t,e),t.toUint8Array()),Ga=e=>ul(e,new Dn);class dl{constructor(){this.l=[]}}const Go=()=>new dl,Ho=(e,t)=>e.l.push(t),$o=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(s=>t!==s),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Ko=(e,t,n)=>wn(e.l,[t,n]);class On{constructor(t,n){this.client=t,this.clock=n}}const An=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,G=(e,t)=>new On(e,t),Wo=(e,t)=>{encoding.writeVarUint(e,t.client),encoding.writeVarUint(e,t.clock)},Jo=e=>G(decoding.readVarUint(e),decoding.readVarUint(e)),Yo=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Ie()},Tr=(e,t)=>{for(;t!==null;){if(t.parent===e)return!0;t=t.parent._item}return!1},Ha=e=>{const t=[];let n=e._start;for(;n;)t.push(n),n=n.right;console.log("Children: ",t),console.log("Children content: ",t.filter(r=>!r.deleted).map(r=>r.content))};class $a{constructor(t,n=t.getMap("users")){const r=new Map;this.yusers=n,this.doc=t,this.clients=new Map,this.dss=r;const s=(i,o)=>{const l=i.get("ds"),u=i.get("ids"),_=h=>this.clients.set(h,o);l.observe(h=>{h.changes.added.forEach(p=>{p.content.getContent().forEach(y=>{y instanceof Uint8Array&&this.dss.set(o,In([this.dss.get(o)||Rs(),Ze(new Cr(decoding.createDecoder(y)))]))})})}),this.dss.set(o,In(l.map(h=>Ze(new Cr(decoding.createDecoder(h)))))),u.observe(h=>h.changes.added.forEach(p=>p.content.getContent().forEach(_))),u.forEach(_)};n.observe(i=>{i.keysChanged.forEach(o=>s(n.get(o),o))}),n.forEach(s)}setUserMapping(t,n,r,{filter:s=()=>!0}={}){const i=this.yusers;let o=i.get(r);o||(o=new un,o.set("ids",new Ye),o.set("ds",new Ye),i.set(r,o)),o.get("ids").push([n]),i.observe(l=>{setTimeout(()=>{const u=i.get(r);if(u!==o){o=u,this.clients.forEach((p,y)=>{r===p&&o.get("ids").push([y])});const _=new Dn,h=this.dss.get(r);h&&(Ne(_,h),o.get("ds").push([_.toUint8Array()]))}},0)}),t.on("afterTransaction",l=>{setTimeout(()=>{const u=o.get("ds"),_=l.deleteSet;if(l.local&&_.clients.size>0&&s(l,_)){const h=new Dn;Ne(h,_),u.push([h.toUint8Array()])}})})}getUserByClientId(t){return this.clients.get(t)||null}getUserByDeletedId(t){for(const[n,r]of this.dss.entries())if(Tn(r,t))return n;return null}}class Fs{constructor(t,n,r,s=0){this.type=t,this.tname=n,this.item=r,this.assoc=s}}const Ka=e=>{const t={};return e.type&&(t.type=e.type),e.tname&&(t.tname=e.tname),e.item&&(t.item=e.item),e.assoc!=null&&(t.assoc=e.assoc),t},Wa=e=>new Fs(e.type==null?null:G(e.type.client,e.type.clock),e.tname||null,e.item==null?null:G(e.item.client,e.item.clock),e.assoc==null?0:e.assoc);class hl{constructor(t,n,r=0){this.type=t,this.index=n,this.assoc=r}}const fl=(e,t,n=0)=>new hl(e,t,n),Ir=(e,t,n)=>{let r=null,s=null;return e._item===null?s=Yo(e):r=G(e._item.id.client,e._item.id.clock),new Fs(r,s,t,n)},Ja=(e,t,n=0)=>{let r=e._start;if(n<0){if(t===0)return Ir(e,null,n);t--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>t)return Ir(e,G(r.id.client,r.id.clock+t),n);t-=r.length}if(r.right===null&&n<0)return Ir(e,r.lastId,n);r=r.right}return Ir(e,null,n)},gl=(e,t)=>{const{type:n,tname:r,item:s,assoc:i}=t;if(s!==null)encoding.writeVarUint(e,0),Wo(e,s);else if(r!==null)encoding.writeUint8(e,1),encoding.writeVarString(e,r);else if(n!==null)encoding.writeUint8(e,2),Wo(e,n);else throw error.unexpectedCase();return encoding.writeVarInt(e,i),e},Ya=e=>{const t=encoding.createEncoder();return gl(t,e),encoding.toUint8Array(t)},pl=e=>{let t=null,n=null,r=null;switch(decoding.readVarUint(e)){case 0:r=Jo(e);break;case 1:n=decoding.readVarString(e);break;case 2:t=Jo(e)}const s=decoding.hasContent(e)?decoding.readVarInt(e):0;return new Fs(t,n,r,s)},Xa=e=>pl(decoding.createDecoder(e)),Qa=(e,t)=>{const n=t.store,r=e.item,s=e.type,i=e.tname,o=e.assoc;let l=null,u=0;if(r!==null){if(Ut(n,r.client)<=r.clock)return null;const _=Qs(n,r),h=_.item;if(!(h instanceof _t))return null;if(l=h.parent,l._item===null||!l._item.deleted){u=h.deleted||!h.countable?0:_.diff+(o>=0?0:1);let p=h.left;for(;p!==null;)!p.deleted&&p.countable&&(u+=p.length),p=p.left}}else{if(i!==null)l=t.get(i);else if(s!==null){if(Ut(n,s.client)<=s.clock)return null;const{item:_}=Qs(n,s);if(_ instanceof _t&&_.content instanceof Ue)l=_.content.type;else return null}else throw error.unexpectedCase();o>=0?u=l._length:u=0}return fl(l,u,e.assoc)},qa=(e,t)=>e===t||e!==null&&t!==null&&e.tname===t.tname&&An(e.item,t.item)&&An(e.type,t.type)&&e.assoc===t.assoc;class Xo{constructor(t,n){this.ds=t,this.sv=n}}const tu=(e,t)=>{const n=e.ds.clients,r=t.ds.clients,s=e.sv,i=t.sv;if(s.size!==i.size||n.size!==r.size)return!1;for(const[o,l]of s.entries())if(i.get(o)!==l)return!1;for(const[o,l]of n.entries()){const u=r.get(o)||[];if(l.length!==u.length)return!1;for(let _=0;_<l.length;_++){const h=l[_],p=u[_];if(h.clock!==p.clock||h.len!==p.len)return!1}}return!0},_l=(e,t=new kr)=>(Ne(t,e.ds),Vs(t,e.sv),t.toUint8Array()),eu=e=>_l(e,new Dn),ml=(e,t=new nl(decoding.createDecoder(e)))=>new Xo(Ze(t),zo(t)),nu=e=>ml(e,new Cr(decoding.createDecoder(e))),Qo=(e,t)=>new Xo(e,t),ru=Qo(Rs(),new Map),su=e=>Qo(Lo(e.store),Kn(e.store)),Ke=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!Tn(t.ds,e.id),zs=(e,t)=>{const n=v(e.meta,zs,P),r=e.doc.store;n.has(t)||(t.sv.forEach((s,i)=>{s<Ut(r,i)&&re(e,G(i,s))}),kn(e,t.ds,s=>{}),n.add(t))},iu=(e,t,n=new ln)=>{if(e.gc)throw new Error("Garbage-collection must be disabled in `originDoc`!");const{sv:r,ds:s}=t,i=new Re;return e.transact(o=>{let l=0;r.forEach(u=>{u>0&&l++}),encoding.writeVarUint(i.restEncoder,l);for(const[u,_]of r){if(_===0)continue;_<Ut(e.store,u)&&re(o,G(u,_));const h=e.store.clients.get(u)||[],p=Ae(h,_-1);encoding.writeVarUint(i.restEncoder,p+1),i.writeClient(u),encoding.writeVarUint(i.restEncoder,0);for(let y=0;y<=p;y++)h[y].write(i,0)}Ne(i,s)}),js(n,i.toUint8Array(),"snapshot"),n},yl=(e,t,n=Ce)=>{const r=new n(decoding.createDecoder(t)),s=new We(r,!1);for(let o=s.curr;o!==null;o=s.next())if((e.sv.get(o.id.client)||0)<o.id.clock+o.length)return!1;const i=In([e.ds,Ze(r)]);return el(e.ds,i)},ou=(e,t)=>yl(e,t,Oe);class qo{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const Kn=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const s=n[n.length-1];t.set(r,s.id.clock+s.length)}),t},Ut=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},tc=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw Ie()}n.push(t)},Ae=(e,t)=>{let n=0,r=e.length-1,s=e[r],i=s.id.clock;if(i===t)return r;let o=ft(t/(i+s.length-1)*r);for(;n<=r;){if(s=e[o],i=s.id.clock,i<=t){if(t<i+s.length)return o;n=o+1}else r=o-1;o=ft((n+r)/2)}throw Ie()},Dr=(e,t)=>{const n=e.clients.get(t.client);return n[Ae(n,t.clock)]},Zs=(e,t,n)=>{const r=Ae(t,n),s=t[r];return s.id.clock<n&&s instanceof _t?(t.splice(r+1,0,Vr(e,s,n-s.id.clock)),r+1):r},re=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[Zs(e,n,t.clock)]},ec=(e,t,n)=>{const r=t.clients.get(n.client),s=Ae(r,n.clock),i=r[s];return n.clock!==i.id.clock+i.length-1&&i.constructor!==pe&&r.splice(s+1,0,Vr(e,i,n.clock-i.id.clock+1)),i},wl=(e,t,n)=>{const r=e.clients.get(t.id.client);r[Ae(r,t.id.clock)]=n},nc=(e,t,n,r,s)=>{if(r===0)return;const i=n+r;let o=Zs(e,t,n),l;do l=t[o++],i<l.id.clock+l.length&&Zs(e,t,i),s(l);while(o<t.length&&t[o].id.clock<i)};class bl{constructor(t,n,r){this.doc=t,this.deleteSet=new Cn,this.beforeState=Kn(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const rc=(e,t)=>t.deleteSet.clients.size===0&&!I(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(Ns(t.deleteSet),ol(e,t),Ne(e,t.deleteSet),!0),sc=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&v(e.changed,t,P).add(n)},Or=(e,t)=>{let n=e[t],r=e[t-1],s=t;for(;s>0;n=r,r=e[--s-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof _t&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=t-s;return i&&e.splice(t+1-i,i),i},ic=(e,t,n)=>{for(const[r,s]of e.clients.entries()){const i=t.clients.get(r);for(let o=s.length-1;o>=0;o--){const l=s[o],u=l.clock+l.len;for(let _=Ae(i,l.clock),h=i[_];_<i.length&&h.id.clock<u;h=i[++_]){const p=i[_];if(l.clock+l.len<=p.id.clock)break;p instanceof _t&&p.deleted&&!p.keep&&n(p)&&p.gc(t,!1)}}}},oc=(e,t)=>{e.clients.forEach((n,r)=>{const s=t.clients.get(r);for(let i=n.length-1;i>=0;i--){const o=n[i],l=Me(s.length-1,1+Ae(s,o.clock+o.len-1));for(let u=l,_=s[u];u>0&&_.id.clock>=o.clock;_=s[u])u-=1+Or(s,u)}})},lu=(e,t,n)=>{ic(e,t,n),oc(e,t)},cc=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,s=r.store,i=n.deleteSet,o=n._mergeStructs;try{Ns(i),n.afterState=Kn(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const l=[];n.changed.forEach((u,_)=>l.push(()=>{(_._item===null||!_._item.deleted)&&_._callObserver(n,u)})),l.push(()=>{n.changedParentTypes.forEach((u,_)=>{_._dEH.l.length>0&&(_._item===null||!_._item.deleted)&&(u=u.filter(h=>h.target._item===null||!h.target._item.deleted),u.forEach(h=>{h.currentTarget=_,h._path=null}),u.sort((h,p)=>h.path.length-p.path.length),Ko(_._dEH,u,n))})}),l.push(()=>r.emit("afterTransaction",[n,r])),wn(l,[]),n._needFormattingCleanup&&Gl(n)}finally{r.gc&&ic(i,s,r.gcFilter),oc(i,s),n.afterState.forEach((h,p)=>{const y=n.beforeState.get(p)||0;if(y!==h){const T=s.clients.get(p),O=N(Ae(T,y),1);for(let ht=T.length-1;ht>=O;)ht-=1+Or(T,ht)}});for(let h=o.length-1;h>=0;h--){const{client:p,clock:y}=o[h].id,T=s.clients.get(p),O=Ae(T,y);O+1<T.length&&Or(T,O+1)>1||O>0&&Or(T,O)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(Uo(Sr,So,"[yjs] ",Eo,To,"Changed the client-id because another client seems to be using it."),r.clientID=Vo()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const h=new an;rc(h,n)&&r.emit("update",[h.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const h=new Re;rc(h,n)&&r.emit("updateV2",[h.toUint8Array(),n.origin,r,n])}const{subdocsAdded:l,subdocsLoaded:u,subdocsRemoved:_}=n;(l.size>0||_.size>0||u.size>0)&&(l.forEach(h=>{h.clientID=r.clientID,h.collectionid==null&&(h.collectionid=r.collectionid),r.subdocs.add(h)}),_.forEach(h=>r.subdocs.delete(h)),r.emit("subdocs",[{loaded:u,added:l,removed:_},r,n]),_.forEach(h=>h.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):cc(e,t+1)}}},Et=(e,t,n=null,r=!0)=>{const s=e._transactionCleanups;let i=!1,o=null;e._transaction===null&&(i=!0,e._transaction=new bl(e,n,r),s.push(e._transaction),s.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{o=t(e._transaction)}finally{if(i){const l=e._transaction===s[0];e._transaction=null,l&&cc(s,0)}}return o};class vl{constructor(t,n){this.insertions=n,this.deletions=t,this.meta=new Map}}const lc=(e,t,n)=>{kn(e,n.deletions,r=>{r instanceof _t&&t.scope.some(s=>Tr(s,r))&&qs(r,!1)})},ac=(e,t,n)=>{let r=null;const s=e.doc,i=e.scope;if(Et(s,o=>{for(;t.length>0&&e.currStackItem===null;){const l=s.store,u=t.pop(),_=new Set,h=[];let p=!1;kn(o,u.insertions,y=>{if(y instanceof _t){if(y.redone!==null){let{item:T,diff:O}=Qs(l,y.id);O>0&&(T=re(o,G(T.id.client,T.id.clock+O))),y=T}!y.deleted&&i.some(T=>Tr(T,y))&&h.push(y)}}),kn(o,u.deletions,y=>{y instanceof _t&&i.some(T=>Tr(T,y))&&!Tn(u.insertions,y.id)&&_.add(y)}),_.forEach(y=>{p=Bc(o,y,_,u.insertions,e.ignoreRemoteMapChanges,e)!==null||p});for(let y=h.length-1;y>=0;y--){const T=h[y];e.deleteFilter(T)&&(T.delete(o),p=!0)}e.currStackItem=p?u:null}o.changed.forEach((l,u)=>{l.has(null)&&u._searchMarker&&(u._searchMarker.length=0)}),r=o},e),e.currStackItem!=null){const o=r.changedParentTypes;e.emit("stack-item-popped",[{stackItem:e.currStackItem,type:n,changedParentTypes:o,origin:e},e]),e.currStackItem=null}return e.currStackItem};class Sl extends Vt{constructor(t,{captureTimeout:n=500,captureTransaction:r=u=>!0,deleteFilter:s=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:l=It(t)?t[0].doc:t.doc}={}){super(),this.scope=[],this.doc=l,this.addToScope(t),this.deleteFilter=s,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.currStackItem=null,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=n,this.afterTransactionHandler=u=>{if(!this.captureTransaction(u)||!this.scope.some(F=>u.changedParentTypes.has(F))||!this.trackedOrigins.has(u.origin)&&(!u.origin||!this.trackedOrigins.has(u.origin.constructor)))return;const _=this.undoing,h=this.redoing,p=_?this.redoStack:this.undoStack;_?this.stopCapturing():h||this.clear(!1,!0);const y=new Cn;u.afterState.forEach((F,nt)=>{const _e=u.beforeState.get(nt)||0,jc=F-_e;jc>0&&$n(y,nt,_e,jc)});const T=vo();let O=!1;if(this.lastChange>0&&T-this.lastChange<this.captureTimeout&&p.length>0&&!_&&!h){const F=p[p.length-1];F.deletions=In([F.deletions,u.deleteSet]),F.insertions=In([F.insertions,y])}else p.push(new vl(u.deleteSet,y)),O=!0;!_&&!h&&(this.lastChange=T),kn(u,u.deleteSet,F=>{F instanceof _t&&this.scope.some(nt=>Tr(nt,F))&&qs(F,!0)});const ht=[{stackItem:p[p.length-1],origin:u.origin,type:_?"redo":"undo",changedParentTypes:u.changedParentTypes},this];O?this.emit("stack-item-added",ht):this.emit("stack-item-updated",ht)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(t){t=It(t)?t:[t],t.forEach(n=>{this.scope.every(r=>r!==n)&&(n.doc!==this.doc&&Gc("[yjs#509] Not same Y.Doc"),this.scope.push(n))})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,n=!0){(t&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{t&&(this.undoStack.forEach(s=>lc(r,this,s)),this.undoStack=[]),n&&(this.redoStack.forEach(s=>lc(r,this,s)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let t;try{t=ac(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){this.redoing=!0;let t;try{t=ac(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*El(e){const t=decoding.readVarUint(e.restDecoder);for(let n=0;n<t;n++){const r=decoding.readVarUint(e.restDecoder),s=e.readClient();let i=decoding.readVarUint(e.restDecoder);for(let o=0;o<r;o++){const l=e.readInfo();if(l===10){const u=decoding.readVarUint(e.restDecoder);yield new de(G(s,i),u),i+=u}else if(binary.BITS5&l){const u=(l&(binary.BIT7|binary.BIT8))===0,_=new _t(G(s,i),null,(l&binary.BIT8)===binary.BIT8?e.readLeftID():null,null,(l&binary.BIT7)===binary.BIT7?e.readRightID():null,u?e.readParentInfo()?e.readString():e.readLeftID():null,u&&(l&binary.BIT6)===binary.BIT6?e.readString():null,Nc(e,l));yield _,i+=_.length}else{const u=e.readLen();yield new pe(G(s,i),u),i+=u}}}}class We{constructor(t,n){this.gen=El(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===de);return this.curr}}const au=e=>Cl(e,Oe),Cl=(e,t=Ce)=>{const n=[],r=new t(decoding.createDecoder(e)),s=new We(r,!1);for(let o=s.curr;o!==null;o=s.next())n.push(o);logging.print("Structs: ",n);const i=Ze(r);logging.print("DeleteSet: ",i)},uu=e=>kl(e,Oe),kl=(e,t=Ce)=>{const n=[],r=new t(decoding.createDecoder(e)),s=new We(r,!1);for(let i=s.curr;i!==null;i=s.next())n.push(i);return{structs:n,ds:Ze(r)}};class Gs{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Tl=e=>Ar(e,Oe,an),Il=(e,t=kr,n=Ce)=>{const r=new t,s=new We(new n(decoding.createDecoder(e)),!1);let i=s.curr;if(i!==null){let o=0,l=i.id.client,u=i.id.clock!==0,_=u?0:i.id.clock+i.length;for(;i!==null;i=s.next())l!==i.id.client&&(_!==0&&(o++,encoding.writeVarUint(r.restEncoder,l),encoding.writeVarUint(r.restEncoder,_)),l=i.id.client,_=0,u=i.id.clock!==0),i.constructor===de&&(u=!0),u||(_=i.id.clock+i.length);_!==0&&(o++,encoding.writeVarUint(r.restEncoder,l),encoding.writeVarUint(r.restEncoder,_));const h=encoding.createEncoder();return encoding.writeVarUint(h,o),encoding.writeBinaryEncoder(h,r.restEncoder),r.restEncoder=h,r.toUint8Array()}else return encoding.writeVarUint(r.restEncoder,0),r.toUint8Array()},du=e=>Il(e,Dn,Oe),Dl=(e,t=Ce)=>{const n=new Map,r=new Map,s=new We(new t(decoding.createDecoder(e)),!1);let i=s.curr;if(i!==null){let o=i.id.client,l=i.id.clock;for(n.set(o,l);i!==null;i=s.next())o!==i.id.client&&(r.set(o,l),n.set(i.id.client,i.id.clock),o=i.id.client),l=i.id.clock+i.length;r.set(o,l)}return{from:n,to:r}},hu=e=>Dl(e,Oe),Ol=(e,t)=>{if(e.constructor===pe){const{client:n,clock:r}=e.id;return new pe(G(n,r+t),e.length-t)}else if(e.constructor===de){const{client:n,clock:r}=e.id;return new de(G(n,r+t),e.length-t)}else{const n=e,{client:r,clock:s}=n.id;return new _t(G(r,s+t),null,G(r,s+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Ar=(e,t=Ce,n=Re)=>{if(e.length===1)return e[0];const r=e.map(h=>new t(decoding.createDecoder(h)));let s=r.map(h=>new We(h,!0)),i=null;const o=new n,l=new Gs(o);for(;s=s.filter(y=>y.curr!==null),s.sort((y,T)=>{if(y.curr.id.client===T.curr.id.client){const O=y.curr.id.clock-T.curr.id.clock;return O===0?y.curr.constructor===T.curr.constructor?0:y.curr.constructor===de?1:-1:O}else return T.curr.id.client-y.curr.id.client}),s.length!==0;){const h=s[0],p=h.curr.id.client;if(i!==null){let y=h.curr,T=!1;for(;y!==null&&y.id.clock+y.length<=i.struct.id.clock+i.struct.length&&y.id.client>=i.struct.id.client;)y=h.next(),T=!0;if(y===null||y.id.client!==p||T&&y.id.clock>i.struct.id.clock+i.struct.length)continue;if(p!==i.struct.id.client)Je(l,i.struct,i.offset),i={struct:y,offset:0},h.next();else if(i.struct.id.clock+i.struct.length<y.id.clock)if(i.struct.constructor===de)i.struct.length=y.id.clock+y.length-i.struct.id.clock;else{Je(l,i.struct,i.offset);const O=y.id.clock-i.struct.id.clock-i.struct.length;i={struct:new de(G(p,i.struct.id.clock+i.struct.length),O),offset:0}}else{const O=i.struct.id.clock+i.struct.length-y.id.clock;O>0&&(i.struct.constructor===de?i.struct.length-=O:y=Ol(y,O)),i.struct.mergeWith(y)||(Je(l,i.struct,i.offset),i={struct:y,offset:0},h.next())}}else i={struct:h.curr,offset:0},h.next();for(let y=h.curr;y!==null&&y.id.client===p&&y.id.clock===i.struct.id.clock+i.struct.length&&y.constructor!==de;y=h.next())Je(l,i.struct,i.offset),i={struct:y,offset:0}}i!==null&&(Je(l,i.struct,i.offset),i=null),Hs(l);const u=r.map(h=>Ze(h)),_=In(u);return Ne(o,_),o.toUint8Array()},uc=(e,t,n=Ce,r=Re)=>{const s=Zo(t),i=new r,o=new Gs(i),l=new n(decoding.createDecoder(e)),u=new We(l,!1);for(;u.curr;){const h=u.curr,p=h.id.client,y=s.get(p)||0;if(u.curr.constructor===de){u.next();continue}if(h.id.clock+h.length>y)for(Je(o,h,math.max(y-h.id.clock,0)),u.next();u.curr&&u.curr.id.client===p;)Je(o,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===p&&u.curr.id.clock+u.curr.length<=y;)u.next()}Hs(o);const _=Ze(l);return Ne(i,_),i.toUint8Array()},fu=(e,t)=>uc(e,t,Oe,an),dc=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:encoding.toUint8Array(e.encoder.restEncoder)}),e.encoder.restEncoder=encoding.createEncoder(),e.written=0)},Je=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&dc(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),encoding.writeVarUint(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},Hs=e=>{dc(e);const t=e.encoder.restEncoder;encoding.writeVarUint(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];encoding.writeVarUint(t,r.written),encoding.writeUint8Array(t,r.restEncoder)}},xr=(e,t,n,r)=>{const s=new n(decoding.createDecoder(e)),i=new We(s,!1),o=new r,l=new Gs(o);for(let _=i.curr;_!==null;_=i.next())Je(l,t(_),0);Hs(l);const u=Ze(s);return Ne(o,u),o.toUint8Array()},hc=({formatting:e=!0,subdocs:t=!0,yxml:n=!0}={})=>{let r=0;const s=map.create(),i=map.create(),o=map.create(),l=map.create();return l.set(null,null),u=>{switch(u.constructor){case pe:case de:return u;case _t:{const _=u,h=_.content;switch(h.constructor){case Pn:break;case Ue:{if(n){const p=h.type;p instanceof hn&&(p.nodeName=map.setIfUndefined(i,p.nodeName,()=>"node-"+r)),p instanceof Yn&&(p.hookName=map.setIfUndefined(i,p.hookName,()=>"hook-"+r))}break}case qe:{const p=h;p.arr=p.arr.map(()=>r);break}case Mn:{const p=h;p.content=new Uint8Array([r]);break}case Bn:{const p=h;t&&(p.opts={},p.doc.guid=r+"");break}case Qe:{const p=h;p.embed={};break}case jt:{const p=h;e&&(p.key=map.setIfUndefined(o,p.key,()=>r+""),p.value=map.setIfUndefined(l,p.value,()=>({i:r})));break}case Xn:{const p=h;p.arr=p.arr.map(()=>r);break}case xe:{const p=h;p.str=string.repeat(r%10+"",p.str.length);break}default:error.unexpectedCase()}return _.parentSub&&(_.parentSub=map.setIfUndefined(s,_.parentSub,()=>r+"")),r++,u}default:error.unexpectedCase()}}},gu=(e,t)=>xr(e,hc(t),Oe,an),pu=(e,t)=>xr(e,hc(t),Ce,Re),_u=e=>xr(e,f.id,Oe,Re),Al=e=>xr(e,f.id,Ce,an),fc="You must not compute changes after the event-handler fired.";class Ur{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=xl(this.currentTarget,this.target))}deletes(t){return Tn(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw He(fc);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(s=>{if(s!==null){const i=n._map.get(s);let o,l;if(this.adds(i)){let u=i.left;for(;u!==null&&this.adds(u);)u=u.left;if(this.deletes(i))if(u!==null&&this.deletes(u))o="delete",l=$(u.content.getContent());else return;else u!==null&&this.deletes(u)?(o="update",l=$(u.content.getContent())):(o="add",l=void 0)}else if(this.deletes(i))o="delete",l=$(i.content.getContent());else return;t.set(s,{action:o,oldValue:l})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw He(fc);const n=this.target,r=P(),s=P(),i=[];if(t={added:r,deleted:s,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let l=null;const u=()=>{l&&i.push(l)};for(let _=n._start;_!==null;_=_.right)_.deleted?this.deletes(_)&&!this.adds(_)&&((l===null||l.delete===void 0)&&(u(),l={delete:0}),l.delete+=_.length,s.add(_)):this.adds(_)?((l===null||l.insert===void 0)&&(u(),l={insert:[]}),l.insert=l.insert.concat(_.content.getContent()),r.add(_)):((l===null||l.retain===void 0)&&(u(),l={retain:0}),l.retain+=_.length);l!==null&&l.retain===void 0&&u()}this._changes=t}return t}}const xl=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,s=t._item.parent._start;for(;s!==t._item&&s!==null;)s.deleted||r++,s=s.right;n.unshift(r)}t=t._item.parent}return n},gc=80;let $s=0;class Ul{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=$s++}}const Ml=e=>{e.timestamp=$s++},pc=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=$s++},Pl=(e,t,n)=>{if(e.length>=gc){const r=e.reduce((s,i)=>s.timestamp<i.timestamp?s:i);return pc(r,t,n),r}else{const r=new Ul(t,n);return e.push(r),r}},Mr=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((i,o)=>kt(t-i.index)<kt(t-o.index)?i:o);let r=e._start,s=0;for(n!==null&&(r=n.p,s=n.index,Ml(n));r.right!==null&&s<t;){if(!r.deleted&&r.countable){if(t<s+r.length)break;s+=r.length}r=r.right}for(;r.left!==null&&s>t;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);return n!==null&&kt(n.index-s)<r.parent.length/gc?(pc(n,r,s),n):Pl(e._searchMarker,r,s)},Wn=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const s=e[r];if(n>0){let i=s.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(s.index-=i.length);if(i===null||i.marker===!0){e.splice(r,1);continue}s.p=i,i.marker=!0}(t<s.index||n>0&&t===s.index)&&(s.index=N(t,s.index+n))}},mu=e=>{let t=e._start;const n=[];for(;t;)n.push(t),t=t.right;return n},Pr=(e,t,n)=>{const r=e,s=t.changedParentTypes;for(;v(s,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;Ko(r._eH,n,t)};class Wt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Go(),this._dEH=Go(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw Se()}clone(){throw Se()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Ho(this._eH,t)}observeDeep(t){Ho(this._dEH,t)}unobserve(t){$o(this._eH,t)}unobserveDeep(t){$o(this._dEH,t)}toJSON(){}}const _c=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const s=[];let i=e._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const o=i.content.getContent();if(o.length<=t)t-=o.length;else{for(let l=t;l<o.length&&r>0;l++)s.push(o[l]),r--;t=0}}i=i.right}return s},mc=e=>{const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let s=0;s<r.length;s++)t.push(r[s])}n=n.right}return t},yu=(e,t)=>{const n=[];let r=e._start;for(;r!==null;){if(r.countable&&Ke(r,t)){const s=r.content.getContent();for(let i=0;i<s.length;i++)n.push(s[i])}r=r.right}return n},Jn=(e,t)=>{let n=0,r=e._start;for(;r!==null;){if(r.countable&&!r.deleted){const s=r.content.getContent();for(let i=0;i<s.length;i++)t(s[i],n++,e)}r=r.right}},yc=(e,t)=>{const n=[];return Jn(e,(r,s)=>{n.push(t(r,s,e))}),n},Bl=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const s=n[r++];return n.length<=r&&(n=null),{done:!1,value:s}}}},wc=(e,t)=>{const n=Mr(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Br=(e,t,n,r)=>{let s=n;const i=e.doc,o=i.clientID,l=i.store,u=n===null?t._start:n.right;let _=[];const h=()=>{_.length>0&&(s=new _t(G(o,Ut(l,o)),s,s&&s.lastId,u,u&&u.id,t,null,new qe(_)),s.integrate(e,0),_=[])};r.forEach(p=>{if(p===null)_.push(p);else switch(p.constructor){case Number:case Object:case Boolean:case Array:case String:_.push(p);break;default:switch(h(),p.constructor){case Uint8Array:case ArrayBuffer:s=new _t(G(o,Ut(l,o)),s,s&&s.lastId,u,u&&u.id,t,null,new Mn(new Uint8Array(p))),s.integrate(e,0);break;case ln:s=new _t(G(o,Ut(l,o)),s,s&&s.lastId,u,u&&u.id,t,null,new Bn(p)),s.integrate(e,0);break;default:if(p instanceof Wt)s=new _t(G(o,Ut(l,o)),s,s&&s.lastId,u,u&&u.id,t,null,new Ue(p)),s.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),h()},bc=()=>He("Length exceeded!"),vc=(e,t,n,r)=>{if(n>t._length)throw bc();if(n===0)return t._searchMarker&&Wn(t._searchMarker,n,r.length),Br(e,t,null,r);const s=n,i=Mr(t,n);let o=t._start;for(i!==null&&(o=i.p,n-=i.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&re(e,G(o.id.client,o.id.clock+n));break}n-=o.length}return t._searchMarker&&Wn(t._searchMarker,s,r.length),Br(e,t,o,r)},Nl=(e,t,n)=>{let s=(t._searchMarker||[]).reduce((i,o)=>o.index>i.index?o:i,{index:0,p:t._start}).p;if(s)for(;s.right;)s=s.right;return Br(e,t,s,n)},Sc=(e,t,n,r)=>{if(r===0)return;const s=n,i=r,o=Mr(t,n);let l=t._start;for(o!==null&&(l=o.p,n-=o.index);l!==null&&n>0;l=l.right)!l.deleted&&l.countable&&(n<l.length&&re(e,G(l.id.client,l.id.clock+n)),n-=l.length);for(;r>0&&l!==null;)l.deleted||(r<l.length&&re(e,G(l.id.client,l.id.clock+r)),l.delete(e),r-=l.length),l=l.right;if(r>0)throw bc();t._searchMarker&&Wn(t._searchMarker,s,-i+r)},Nr=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},Ks=(e,t,n,r)=>{const s=t._map.get(n)||null,i=e.doc,o=i.clientID;let l;if(r==null)l=new qe([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:l=new qe([r]);break;case Uint8Array:l=new Mn(r);break;case ln:l=new Bn(r);break;default:if(r instanceof Wt)l=new Ue(r);else throw new Error("Unexpected content type")}new _t(G(o,Ut(i.store,o)),s,s&&s.lastId,null,null,t,n,l).integrate(e,0)},Ws=(e,t)=>{const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Ec=e=>{const t={};return e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},Cc=(e,t)=>{const n=e._map.get(t);return n!==void 0&&!n.deleted},wu=(e,t,n)=>{let r=e._map.get(t)||null;for(;r!==null&&(!n.sv.has(r.id.client)||r.id.clock>=(n.sv.get(r.id.client)||0));)r=r.left;return r!==null&&Ke(r,n)?r.content.getContent()[r.length-1]:void 0},Rl=(e,t)=>{const n={};return e._map.forEach((r,s)=>{let i=r;for(;i!==null&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;i!==null&&Ke(i,t)&&(n[s]=i.content.getContent()[i.length-1])}),n},Rr=e=>$c(e.entries(),t=>!t[1].deleted);class Ll extends Ur{constructor(t,n){super(t,n),this._transaction=n}}class Ye extends Wt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new Ye;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Ye}clone(){const t=new Ye;return t.insert(0,this.toArray().map(n=>n instanceof Wt?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,n){super._callObserver(t,n),Pr(this,t,new Ll(this,t))}insert(t,n){this.doc!==null?Et(this.doc,r=>{vc(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?Et(this.doc,n=>{Nl(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?Et(this.doc,r=>{Sc(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return wc(this,t)}toArray(){return mc(this)}slice(t=0,n=this.length){return _c(this,t,n)}toJSON(){return this.map(t=>t instanceof Wt?t.toJSON():t)}map(t){return yc(this,t)}forEach(t){Jn(this,t)}[Symbol.iterator](){return Bl(this)}_write(t){t.writeTypeRef(la)}}const jl=e=>new Ye;class Vl extends Ur{constructor(t,n,r){super(t,n),this.keysChanged=r}}class un extends Wt{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,s)=>{this.set(s,r)}),this._prelimContent=null}_copy(){return new un}clone(){const t=new un;return this.forEach((n,r)=>{t.set(r,n instanceof Wt?n.clone():n)}),t}_callObserver(t,n){Pr(this,t,new Vl(this,t,n))}toJSON(){const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const s=n.content.getContent()[n.length-1];t[r]=s instanceof Wt?s.toJSON():s}}),t}get size(){return[...Rr(this._map)].length}keys(){return Ps(Rr(this._map),t=>t[0])}values(){return Ps(Rr(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return Ps(Rr(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?Et(this.doc,n=>{Nr(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?Et(this.doc,r=>{Ks(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return Ws(this,t)}has(t){return Cc(this,t)}clear(){this.doc!==null?Et(this.doc,t=>{this.forEach(function(n,r,s){Nr(t,s,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(aa)}}const Fl=e=>new un,Xe=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&qc(e,t);class Js{constructor(t,n,r,s){this.left=t,this.right=n,this.index=r,this.currentAttributes=s}forward(){switch(this.right===null&&Ie(),this.right.content.constructor){case jt:this.right.deleted||xn(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const kc=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case jt:t.right.deleted||xn(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&re(e,G(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Lr=(e,t,n,r)=>{const s=new Map,i=r?Mr(t,n):null;if(i){const o=new Js(i.p.left,i.p,i.index,s);return kc(e,o,n-i.index)}else{const o=new Js(null,t._start,0,s);return kc(e,o,n)}},Tc=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===jt&&Xe(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const s=e.doc,i=s.clientID;r.forEach((o,l)=>{const u=n.left,_=n.right,h=new _t(G(i,Ut(s.store,i)),u,u&&u.lastId,_,_&&_.id,t,null,new jt(l,o));h.integrate(e,0),n.right=h,n.forward()})},xn=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},Ic=(e,t)=>{var n;for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===jt&&Xe((n=t[e.right.content.key])!=null?n:null,e.right.content.value)))break;e.forward()}},Dc=(e,t,n,r)=>{var l;const s=e.doc,i=s.clientID,o=new Map;for(const u in r){const _=r[u],h=(l=n.currentAttributes.get(u))!=null?l:null;if(!Xe(h,_)){o.set(u,h);const{left:p,right:y}=n;n.right=new _t(G(i,Ut(s.store,i)),p,p&&p.lastId,y,y&&y.id,t,null,new jt(u,_)),n.right.integrate(e,0),n.forward()}}return o},Ys=(e,t,n,r,s)=>{n.currentAttributes.forEach((y,T)=>{s[T]===void 0&&(s[T]=null)});const i=e.doc,o=i.clientID;Ic(n,s);const l=Dc(e,t,n,s),u=r.constructor===String?new xe(r):r instanceof Wt?new Ue(r):new Qe(r);let{left:_,right:h,index:p}=n;t._searchMarker&&Wn(t._searchMarker,n.index,u.getLength()),h=new _t(G(o,Ut(i.store,o)),_,_&&_.lastId,h,h&&h.id,t,null,u),h.integrate(e,0),n.right=h,n.index=p,n.forward(),Tc(e,t,n,l)},Oc=(e,t,n,r,s)=>{const i=e.doc,o=i.clientID;Ic(n,s);const l=Dc(e,t,n,s);t:for(;n.right!==null&&(r>0||l.size>0&&(n.right.deleted||n.right.content.constructor===jt));){if(!n.right.deleted)switch(n.right.content.constructor){case jt:{const{key:u,value:_}=n.right.content,h=s[u];if(h!==void 0){if(Xe(h,_))l.delete(u);else{if(r===0)break t;l.set(u,_)}n.right.delete(e)}else n.currentAttributes.set(u,_);break}default:r<n.right.length&&re(e,G(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let u="";for(;r>0;r--)u+=`
`;n.right=new _t(G(o,Ut(i.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new xe(u)),n.right.integrate(e,0),n.forward()}Tc(e,t,n,l)},Ac=(e,t,n,r,s)=>{var _,h;let i=t;const o=E();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===jt){const p=i.content;o.set(p.key,p)}i=i.right}let l=0,u=!1;for(;t!==i;){if(n===t&&(u=!0),!t.deleted){const p=t.content;switch(p.constructor){case jt:{const{key:y,value:T}=p,O=(_=r.get(y))!=null?_:null;(o.get(y)!==p||O===T)&&(t.delete(e),l++,!u&&((h=s.get(y))!=null?h:null)===T&&O!==T&&(O===null?s.delete(y):s.set(y,O))),!u&&!t.deleted&&xn(s,p);break}}}t=t.right}return l},zl=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===jt){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},Zl=e=>{let t=0;return Et(e.doc,n=>{let r=e._start,s=e._start,i=E();const o=B(i);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case jt:xn(o,s.content);break;default:t+=Ac(n,r,s,i,o),i=B(o),r=s;break}s=s.right}}),t},Gl=e=>{const t=new Set,n=e.doc;for(const[r,s]of e.afterState.entries()){const i=e.beforeState.get(r)||0;s!==i&&nc(e,n.store.clients.get(r),i,s,o=>{!o.deleted&&o.content.constructor===jt&&o.constructor!==pe&&t.add(o.parent)})}Et(n,r=>{kn(e,e.deleteSet,s=>{if(s instanceof pe||!s.parent._hasFormatting||t.has(s.parent))return;const i=s.parent;s.content.constructor===jt?t.add(i):zl(r,s)});for(const s of t)Zl(s)})},xc=(e,t,n)=>{const r=n,s=B(t.currentAttributes),i=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case Ue:case Qe:case xe:n<t.right.length&&re(e,G(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}i&&Ac(e,i,t.right,s,t.currentAttributes);const o=(t.left||t.right).parent;return o._searchMarker&&Wn(o._searchMarker,t.index,-r+n),t};class Hl extends Ur{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];Et(t,r=>{var T,O,ht;const s=new Map,i=new Map;let o=this.target._start,l=null;const u={};let _="",h=0,p=0;const y=()=>{if(l!==null){let F=null;switch(l){case"delete":p>0&&(F={delete:p}),p=0;break;case"insert":(typeof _=="object"||_.length>0)&&(F={insert:_},s.size>0&&(F.attributes={},s.forEach((nt,_e)=>{nt!==null&&(F.attributes[_e]=nt)}))),_="";break;case"retain":h>0&&(F={retain:h},Yc(u)||(F.attributes=Kc({},u))),h=0;break}F&&n.push(F),l=null}};for(;o!==null;){switch(o.content.constructor){case Ue:case Qe:this.adds(o)?this.deletes(o)||(y(),l="insert",_=o.content.getContent()[0],y()):this.deletes(o)?(l!=="delete"&&(y(),l="delete"),p+=1):o.deleted||(l!=="retain"&&(y(),l="retain"),h+=1);break;case xe:this.adds(o)?this.deletes(o)||(l!=="insert"&&(y(),l="insert"),_+=o.content.str):this.deletes(o)?(l!=="delete"&&(y(),l="delete"),p+=o.length):o.deleted||(l!=="retain"&&(y(),l="retain"),h+=o.length);break;case jt:{const{key:F,value:nt}=o.content;if(this.adds(o)){if(!this.deletes(o)){const _e=(T=s.get(F))!=null?T:null;Xe(_e,nt)?nt!==null&&o.delete(r):(l==="retain"&&y(),Xe(nt,(O=i.get(F))!=null?O:null)?delete u[F]:u[F]=nt)}}else if(this.deletes(o)){i.set(F,nt);const _e=(ht=s.get(F))!=null?ht:null;Xe(_e,nt)||(l==="retain"&&y(),u[F]=_e)}else if(!o.deleted){i.set(F,nt);const _e=u[F];_e!==void 0&&(Xe(_e,nt)?_e!==null&&o.delete(r):(l==="retain"&&y(),nt===null?delete u[F]:u[F]=nt))}o.deleted||(l==="insert"&&y(),xn(s,o.content));break}}o=o.right}for(y();n.length>0;){const F=n[n.length-1];if(F.retain!==void 0&&F.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class Un extends Wt{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new Un}clone(){const t=new Un;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new Hl(this,t,n);Pr(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===xe&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?Et(this.doc,r=>{const s=new Js(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const o=t[i];if(o.insert!==void 0){const l=!n&&typeof o.insert=="string"&&i===t.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof l!="string"||l.length>0)&&Ys(r,this,s,l,o.attributes||{})}else o.retain!==void 0?Oc(r,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&xc(r,s,o.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){const s=[],i=new Map,o=this.doc;let l="",u=this._start;function _(){if(l.length>0){const p={};let y=!1;i.forEach((O,ht)=>{y=!0,p[ht]=O});const T={insert:l};y&&(T.attributes=p),s.push(T),l=""}}const h=()=>{for(;u!==null;){if(Ke(u,t)||n!==void 0&&Ke(u,n))switch(u.content.constructor){case xe:{const p=i.get("ychange");t!==void 0&&!Ke(u,t)?(p===void 0||p.user!==u.id.client||p.type!=="removed")&&(_(),i.set("ychange",r?r("removed",u.id):{type:"removed"})):n!==void 0&&!Ke(u,n)?(p===void 0||p.user!==u.id.client||p.type!=="added")&&(_(),i.set("ychange",r?r("added",u.id):{type:"added"})):p!==void 0&&(_(),i.delete("ychange")),l+=u.content.str;break}case Ue:case Qe:{_();const p={insert:u.content.getContent()[0]};if(i.size>0){const y={};p.attributes=y,i.forEach((T,O)=>{y[O]=T})}s.push(p);break}case jt:Ke(u,t)&&(_(),xn(i,u.content));break}u=u.right}_()};return t||n?Et(o,p=>{t&&zs(p,t),n&&zs(p,n),h()},"cleanup"):h(),s}insert(t,n,r){if(n.length<=0)return;const s=this.doc;s!==null?Et(s,i=>{const o=Lr(i,this,t,!r);r||(r={},o.currentAttributes.forEach((l,u)=>{r[u]=l})),Ys(i,this,o,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const s=this.doc;s!==null?Et(s,i=>{const o=Lr(i,this,t,!r);Ys(i,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?Et(r,s=>{xc(s,Lr(s,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const s=this.doc;s!==null?Et(s,i=>{const o=Lr(i,this,t,!1);o.right!==null&&Oc(i,this,o,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?Et(this.doc,n=>{Nr(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?Et(this.doc,r=>{Ks(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return Ws(this,t)}getAttributes(){return Ec(this)}_write(t){t.writeTypeRef(ua)}}const $l=e=>new Un;class Xs{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===hn||n.constructor===dn)&&n._start!==null)t=n._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class dn extends Wt{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new dn}clone(){const t=new dn;return t.insert(0,this.toArray().map(n=>n instanceof Wt?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new Xs(this,t)}querySelector(t){t=t.toUpperCase();const r=new Xs(this,s=>s.nodeName&&s.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),mt(new Xs(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){Pr(this,t,new Jl(this,n,t))}toString(){return yc(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const s=t.createDocumentFragment();return r!==void 0&&r._createAssociation(s,this),Jn(this,i=>{s.insertBefore(i.toDOM(t,n,r),null)}),s}insert(t,n){this.doc!==null?Et(this.doc,r=>{vc(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)Et(this.doc,r=>{const s=t&&t instanceof Wt?t._item:t;Br(r,this,s,n)});else{const r=this._prelimContent,s=t===null?0:r.findIndex(i=>i===t)+1;if(s===0&&t!==null)throw He("Reference item not found");r.splice(s,0,...n)}}delete(t,n=1){this.doc!==null?Et(this.doc,r=>{Sc(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return mc(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return wc(this,t)}slice(t=0,n=this.length){return _c(this,t,n)}forEach(t){Jn(this,t)}_write(t){t.writeTypeRef(ha)}}const Kl=e=>new dn;class hn extends dn{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,s)=>{this.setAttribute(s,r)}),this._prelimAttrs=null}_copy(){return new hn(this.nodeName)}clone(){const t=new hn(this.nodeName),n=this.getAttributes();return Jc(n,(r,s)=>{typeof r=="string"&&t.setAttribute(s,r)}),t.insert(0,this.toArray().map(r=>r instanceof Wt?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const l in t)r.push(l);r.sort();const s=r.length;for(let l=0;l<s;l++){const u=r[l];n.push(u+'="'+t[u]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(t){this.doc!==null?Et(this.doc,n=>{Nr(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?Et(this.doc,r=>{Ks(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return Ws(this,t)}hasAttribute(t){return Cc(this,t)}getAttributes(t){return t?Rl(this,t):Ec(this)}toDOM(t=document,n={},r){const s=t.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const l=i[o];typeof l=="string"&&s.setAttribute(o,l)}return Jn(this,o=>{s.appendChild(o.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(s,this),s}_write(t){t.writeTypeRef(da),t.writeKey(this.nodeName)}}const Wl=e=>new hn(e.readKey());class Jl extends Ur{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class Yn extends un{constructor(t){super(),this.hookName=t}_copy(){return new Yn(this.hookName)}clone(){const t=new Yn(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const s=n[this.hookName];let i;return s!==void 0?i=s.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(fa),t.writeKey(this.hookName)}}const Yl=e=>new Yn(e.readKey());class jr extends Un{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new jr}clone(){const t=new jr;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const s=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(s,this),s}toString(){return this.toDelta().map(t=>{const n=[];for(const s in t.attributes){const i=[];for(const o in t.attributes[s])i.push({key:o,value:t.attributes[s][o]});i.sort((o,l)=>o.key<l.key?-1:1),n.push({nodeName:s,attrs:i})}n.sort((s,i)=>s.nodeName<i.nodeName?-1:1);let r="";for(let s=0;s<n.length;s++){const i=n[s];r+=`<${i.nodeName}`;for(let o=0;o<i.attrs.length;o++){const l=i.attrs[o];r+=` ${l.key}="${l.value}"`}r+=">"}r+=t.insert;for(let s=n.length-1;s>=0;s--)r+=`</${n[s].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(ga)}}const Xl=e=>new jr;class Uc{constructor(t,n){this.id=t,this.length=n}get deleted(){throw Se()}mergeWith(t){return!1}write(t,n,r){throw Se()}integrate(t,n){throw Se()}}const Ql=0;class pe extends Uc{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),tc(t.doc.store,this)}write(t,n){t.writeInfo(Ql),t.writeLen(this.length-n)}getMissing(t,n){return null}}class Mn{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Mn(this.content)}splice(t){throw Se()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const ql=e=>new Mn(e.readBuf());class Pn{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Pn(this.len)}splice(t){const n=new Pn(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){$n(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const ta=e=>new Pn(e.readLen()),Mc=(e,t)=>new ln(ti(Fr({guid:e},t),{shouldLoad:t.shouldLoad||t.autoLoad||!1}));class Bn{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Bn(Mc(this.doc.guid,this.opts))}splice(t){throw Se()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const ea=e=>new Bn(Mc(e.readString(),e.readAny()));class Qe{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Qe(this.embed)}splice(t){throw Se()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const na=e=>new Qe(e.readJSON());class jt{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new jt(this.key,this.value)}splice(t){throw Se()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const ra=e=>new jt(e.readKey(),e.readJSON());class Xn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Xn(this.arr)}splice(t){const n=new Xn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let s=n;s<r;s++){const i=this.arr[s];t.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const sa=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const s=e.readString();s==="undefined"?n.push(void 0):n.push(JSON.parse(s))}return new Xn(n)};class qe{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new qe(this.arr)}splice(t){const n=new qe(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let s=n;s<r;s++){const i=this.arr[s];t.writeAny(i)}}getRef(){return 8}}const ia=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new qe(n)};class xe{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new xe(this.str)}splice(t){const n=new xe(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"\uFFFD",n.str="\uFFFD"+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const oa=e=>new xe(e.readString()),ca=[jl,Fl,$l,Wl,Kl,Yl,Xl],la=0,aa=1,ua=2,da=3,ha=4,fa=5,ga=6;class Ue{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new Ue(this.type._copy())}splice(t){throw Se()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const pa=e=>new Ue(ca[e.readTypeRef()](e)),Qs=(e,t)=>{let n=t,r=0,s;do r>0&&(n=G(n.client,n.clock+r)),s=Dr(e,n),r=n.clock-s.id.clock,n=s.redone;while(n!==null&&s instanceof _t);return{item:s,diff:r}},qs=(e,t)=>{for(;e!==null&&e.keep!==t;)e.keep=t,e=e.parent._item},Vr=(e,t,n)=>{const{client:r,clock:s}=t.id,i=new _t(G(r,s+n),t,G(r,s+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),t.redone!==null&&(i.redone=G(t.redone.client,t.redone.clock+n)),t.right=i,i.right!==null&&(i.right.left=i),e._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),t.length=n,i},Pc=(e,t)=>At(e,n=>Tn(n.deletions,t)),Bc=(e,t,n,r,s,i)=>{const o=e.doc,l=o.store,u=o.clientID,_=t.redone;if(_!==null)return re(e,_);let h=t.parent._item,p=null,y;if(h!==null&&h.deleted===!0){if(h.redone===null&&(!n.has(h)||Bc(e,h,n,r,s,i)===null))return null;for(;h.redone!==null;)h=re(e,h.redone)}const T=h===null?t.parent:h.content.type;if(t.parentSub===null){for(p=t.left,y=t;p!==null;){let nt=p;for(;nt!==null&&nt.parent._item!==h;)nt=nt.redone===null?null:re(e,nt.redone);if(nt!==null&&nt.parent._item===h){p=nt;break}p=p.left}for(;y!==null;){let nt=y;for(;nt!==null&&nt.parent._item!==h;)nt=nt.redone===null?null:re(e,nt.redone);if(nt!==null&&nt.parent._item===h){y=nt;break}y=y.right}}else if(y=null,t.right&&!s){for(p=t;p!==null&&p.right!==null&&(p.right.redone||Tn(r,p.right.id)||Pc(i.undoStack,p.right.id)||Pc(i.redoStack,p.right.id));)for(p=p.right;p.redone;)p=re(e,p.redone);if(p&&p.right!==null)return null}else p=T._map.get(t.parentSub)||null;const O=Ut(l,u),ht=G(u,O),F=new _t(ht,p,p&&p.lastId,y,y&&y.id,T,t.parentSub,t.content.copy());return t.redone=ht,qs(F,!0),F.integrate(e,0),F};class _t extends Uc{constructor(t,n,r,s,i,o,l,u){super(t,u.getLength()),this.origin=r,this.left=n,this.right=s,this.rightOrigin=i,this.parent=o,this.parentSub=l,this.redone=null,this.content=u,this.info=this.content.isCountable()?xt:0}set marker(t){(this.info&oe)>0!==t&&(this.info^=oe)}get marker(){return(this.info&oe)>0}get keep(){return(this.info&ie)>0}set keep(t){this.keep!==t&&(this.info^=ie)}get countable(){return(this.info&xt)>0}get deleted(){return(this.info&Xt)>0}set deleted(t){this.deleted!==t&&(this.info^=Xt)}markDeleted(){this.info|=Xt}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=Ut(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=Ut(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===On&&this.id.client!==this.parent.client&&this.parent.clock>=Ut(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=ec(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=re(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===pe||this.right&&this.right.constructor===pe)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===_t&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===_t&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===On){const r=Dr(n,this.parent);r.constructor===pe?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=ec(t,t.doc.store,G(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,s;if(r!==null)s=r.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const i=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),i.add(s),An(this.origin,s.origin)){if(s.id.client<this.id.client)r=s,i.clear();else if(An(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(Dr(t.doc.store,s.origin)))i.has(Dr(t.doc.store,s.origin))||(r=s,i.clear());else break;s=s.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),tc(t.doc.store,this),this.content.integrate(t,this),sc(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new pe(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:G(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&An(t.origin,this.lastId)&&this.right===t&&An(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),$n(t.deleteSet,this.id.client,this.id.clock,this.length),sc(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw Ie();this.content.gc(t),n?wl(t,this,new pe(this.id,this.length)):this.content=new Pn(this.length)}write(t,n){const r=n>0?G(this.id.client,this.id.clock+n-1):this.origin,s=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&bt|(r===null?0:qt)|(s===null?0:me)|(i===null?0:ce);if(t.writeInfo(o),r!==null&&t.writeLeftID(r),s!==null&&t.writeRightID(s),r===null&&s===null){const l=this.parent;if(l._item!==void 0){const u=l._item;if(u===null){const _=Yo(l);t.writeParentInfo(!0),t.writeString(_)}else t.writeParentInfo(!1),t.writeLeftID(u.id)}else l.constructor===String?(t.writeParentInfo(!0),t.writeString(l)):l.constructor===On?(t.writeParentInfo(!1),t.writeLeftID(l)):Ie();i!==null&&t.writeString(i)}this.content.write(t,n)}}const Nc=(e,t)=>_a[t&binary.BITS5](e),_a=[()=>{Ie()},ta,sa,ql,oa,na,ra,pa,ia,ea,()=>{Ie()}],ma=10;class de extends null{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){error.unexpectedCase()}write(t,n){t.writeInfo(ma),encoding.writeVarUint(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const Rc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:{},Lc="__ $YJS$ __";Rc[Lc]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Rc[Lc]=!0},20142:function(k,x,b){"use strict";b.d(x,{Ue:function(){return Ct}});var E=b(52439),B=b(50959),v=b(7231);const{useDebugValue:R}=B,{useSyncExternalStoreWithSelector:I}=v;let L=!1;const P=j=>j;function H(j,ct=P,gt){gt&&!L&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),L=!0);const mt=I(j.subscribe,j.getState,j.getServerState||j.getInitialState,ct,gt);return R(mt),mt}const W=j=>{typeof j!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const ct=typeof j=="function"?(0,E.M)(j):j,gt=(mt,Ft)=>H(ct,mt,Ft);return Object.assign(gt,ct),gt},Ct=j=>j?W(j):W;var $=j=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`."),Ct(j))}}]);
}());