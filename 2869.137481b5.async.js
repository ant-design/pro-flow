!(function(){var ma=Object.defineProperty,wa=Object.defineProperties;var ba=Object.getOwnPropertyDescriptors;var Vc=Object.getOwnPropertySymbols;var va=Object.prototype.hasOwnProperty,Sa=Object.prototype.propertyIsEnumerable;var Fc=(T,x,m)=>x in T?ma(T,x,{enumerable:!0,configurable:!0,writable:!0,value:m}):T[x]=m,Vr=(T,x)=>{for(var m in x||(x={}))va.call(x,m)&&Fc(T,m,x[m]);if(Vc)for(var m of Vc(x))Sa.call(x,m)&&Fc(T,m,x[m]);return T},qs=(T,x)=>wa(T,ba(x));(self.webpackChunk_ant_design_pro_flow=self.webpackChunk_ant_design_pro_flow||[]).push([[2869],{63427:function(T,x,m){"use strict";m.d(x,{Z:function(){return Ft}});var C=m(53262),B=m(48230),S=m(26820),R=m(34144),I=m(24756),L=m(69271),P=m(72097),G,K,St,H=(0,P.kc)(function(It,nt){var X=It.token,q=It.css,Mt=It.cx,kt=It.prefixCls,Gt=nt.size,Jt=nt.className,Yt="".concat(kt,"-").concat(X.editorPrefix,"-icon"),Ht=typeof Gt=="number"?q(G||(G=(0,L.Z)([`
          width: `,`px !important;
          height: `,`px !important;
        `])),Gt,Gt):"",Rt=q(K||(K=(0,L.Z)([`
    display: flex;
    align-items: center;
    justify-content: center;

    &:hover {
      color: `,` !important;
    }

    &:active {
      scale: 0.8;
      color: `,`;
    }

    transition: color 600ms `,", scale 400ms ",`,
      background-color 100ms `,`;
  `])),X.colorText,X.colorText,X.motionEaseOut,X.motionEaseOut,X.motionEaseOut);return{container:Mt(Yt,Rt,Ht,Jt),tooltip:q(St||(St=(0,L.Z)([`
      pointer-events: none;
    `])))}}),j=m(11527),ot=["placement","title","icon","cursor","onClick","className","arrow","size","tooltipDelay"],ht=function(nt){var X=nt.placement,q=nt.title,Mt=nt.icon,kt=nt.cursor,Gt=nt.onClick,Jt=nt.className,Yt=nt.arrow,Ht=Yt===void 0?!1:Yt,Rt=nt.size,dt=Rt===void 0?"default":Rt,Lt=nt.tooltipDelay,Et=Lt===void 0?.5:Lt,$=(0,B.Z)(nt,ot),at=H({size:dt}),Pt=at.styles,te=at.cx,zt=(0,j.jsx)(S.ZP,(0,C.Z)((0,C.Z)({icon:Mt,className:te(Pt.container,Jt),type:"text",style:{cursor:kt},size:typeof dt=="number"||dt==="default"?"middle":dt},$),{},{onClick:Gt}));return(0,j.jsx)(j.Fragment,{children:q?(0,j.jsx)(R.Z,{arrow:Ht,overlayClassName:Pt.tooltip,title:q,mouseEnterDelay:Et,placement:X,children:zt}):zt})},pt=function(nt){var X=nt||{},q=X.size,Mt=H({size:q}),kt=Mt.theme;return(0,j.jsx)(I.iV,{componentToken:{Button:{colorText:kt.colorTextTertiary,colorBgTextHover:kt.colorFillSecondary,colorBgTextActive:kt.colorFill}},children:(0,j.jsx)(ht,(0,C.Z)({},nt))})},Ft=pt},24756:function(T,x,m){"use strict";m.d(x,{iV:function(){return Rt}});var C=m(53262),B=m(30614),S=m(71330),R=m(1792),I=m(24286),L=function(Et,$){var at=I.Z.darkAlgorithm(Et,$);return(0,C.Z)((0,C.Z)({},at),{},{colorBgLayout:"#20252b",colorBgContainer:"#282c34",colorBgElevated:"#32363e"})},P=function(Et){var $={algorithm:[I.Z.compactAlgorithm]};return Et==="dark"&&$.algorithm.push(L),$},G=m(72097),K=function(){return{focusedOutlineColor:"#4c9ffe",colorTypeBoolean:"#D8C152",colorTypeNumber:"#5295C4",colorTypeString:"#149E6D",colorTypeBoolArray:"#D8C152",colorTypeNumberArray:"#239BEF",colorTypeStringArray:"#62AE8D"}},St=K({}),H=m(69271),j=m(72683),ot,ht,pt,Ft,It,nt,X,q,Mt,kt,Gt,Jt=function(Et){var $=Et.token,at=Et.css,Pt=at(ot||(ot=(0,H.Z)([`
    cursor: pointer;
    transition: 150ms background-color ease-in-out;
    &:hover {
      background: `,`;
    }
  `])),$.colorFillQuaternary),te=at(ht||(ht=(0,H.Z)([`
    color: `,`;
    background-color: `,`;
    border-color: transparent;
  `])),$.colorText,$.colorFillTertiary),zt=at(pt||(pt=(0,H.Z)([`
    color: `,` !important;
    background-color: `,` !important;
    border-color: `,` !important;
    box-shadow: none;
  `])),$.colorText,$.colorFillQuaternary,$.colorPrimary),se=at(Ft||(Ft=(0,H.Z)([`
    color: `,`;
    background: `,`;
    border-color: transparent;
  `])),$.colorTextSecondary,$.colorFillQuaternary);return{defaultButton:at(It||(It=(0,H.Z)([`
      `,`;

      &:hover {
        color: `,` !important;
        background: `,` !important;
        border-color: transparent !important;
      }
      &:focus {
        `,`;
        border-color: `,` !important;
      }
    `])),se,$.colorText,$.colorFillSecondary,se,$.colorPrimary),textInfo:at(nt||(nt=(0,H.Z)([`
      color: `,`;
      &:hover {
        color: `,`;
      }
    `])),$.colorTextSecondary,$.colorText),textDefault:at(X||(X=(0,H.Z)([`
      color: `,`;
    `])),$.colorTextSecondary),containerBgHover:at(q||(q=(0,H.Z)([`
      cursor: pointer;
      transition: 150ms background-color ease-in-out;

      &:hover {
        background: `,`;
      }
    `])),$.colorFillQuaternary),containerBgL2:at(Mt||(Mt=(0,H.Z)([`
      `,`;
      border-radius: 4px;
      background: `,`;

      &:hover {
        background: `,`;
      }
    `])),Pt,$.colorFillQuaternary,$.colorFillTertiary),controlContainerFocused:zt,controlContainer:at(kt||(kt=(0,H.Z)([`
      &:hover {
        `,`
      }
      &:focus {
        `,`
      }
    `])),te,zt),backgroundBlur:at(Gt||(Gt=(0,H.Z)([`
      background: `,`;
      backdrop-filter: blur(10px);
    `])),(0,j.DZ)(.4)($.colorBgElevated))}},Yt=m(11527),Ht=function(Et){var $=(0,S.S)(),at=P(Et),Pt={colorBgContainer:$==null?void 0:$.colorFillQuaternary,colorBorder:"transparent",controlOutline:"transparent"};return at.components={Input:Pt,InputNumber:Pt,Select:Pt,Tree:{colorBgContainer:"transparent"},TreeSelect:Pt},at},Rt=function(Et){var $=Et.children,at=Et.componentToken,Pt=(0,R.r)(),te=Pt.appearance,zt=Pt.themeMode,se=Ht(te);return se.components=(0,C.Z)((0,C.Z)({},se.components),at),(0,Yt.jsx)(B.ZP,{theme:se,children:(0,Yt.jsx)(G.f6,{appearance:te,themeMode:zt,theme:P,customToken:K,customStylish:Jt,children:$})})},dt=function(Et){return function($){return _jsx(Rt,{children:_jsx(Et,_objectSpread({},$))})}}},72097:function(T,x,m){"use strict";m.d(x,{f6:function(){return R},kc:function(){return S}});var C=m(6693),B=(0,C.F)({customToken:{editorPrefix:"editor"}}),S=B.createStyles,R=B.ThemeProvider},22653:function(T,x,m){"use strict";var C=m(50959),B=m(6694),S=m(63907);function R(I){S.Z&&((0,B.mf)(I)||console.error("useMemoizedFn expected parameter is a function, got ".concat(typeof I)));var L=(0,C.useRef)(I);L.current=(0,C.useMemo)(function(){return I},[I]);var P=(0,C.useRef)();return P.current||(P.current=function(){for(var G=[],K=0;K<arguments.length;K++)G[K]=arguments[K];return L.current.apply(this,G)}),P.current}x.Z=R},59038:function(T,x,m){"use strict";m.d(x,{Z:function(){return Ue}});var C=m(50959),B=m(82187),S=m.n(B),R=m(88099),I=m(21675),L=m(49814),G=N=>{const{getPrefixCls:Bt,direction:ct}=(0,C.useContext)(R.E_),{prefixCls:Q,className:ft}=N,Zt=Bt("input-group",Q),ie=Bt("input"),[Ot,Xt]=(0,L.ZP)(ie),oe=S()(Zt,{[`${Zt}-lg`]:N.size==="large",[`${Zt}-sm`]:N.size==="small",[`${Zt}-compact`]:N.compact,[`${Zt}-rtl`]:ct==="rtl"},Xt,ft),Qt=(0,C.useContext)(I.aM),ce=(0,C.useMemo)(()=>Object.assign(Object.assign({},Qt),{isFormItemInput:!1}),[Qt]);return Ot(C.createElement("span",{className:oe,style:N.style,onMouseEnter:N.onMouseEnter,onMouseLeave:N.onMouseLeave,onFocus:N.onFocus,onBlur:N.onBlur},C.createElement(I.aM.Provider,{value:ce},N.children)))},K=m(93598),St=m(37469),H={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},j=H,ot=m(51626),ht=function(Bt,ct){return C.createElement(ot.Z,(0,St.Z)({},Bt,{ref:ct,icon:j}))},pt=C.forwardRef(ht),Ft={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},It=Ft,nt=function(Bt,ct){return C.createElement(ot.Z,(0,St.Z)({},Bt,{ref:ct,icon:It}))},X=C.forwardRef(nt),q=m(36842),Mt=m(57539),kt=m(96576),Gt=function(N,Bt){var ct={};for(var Q in N)Object.prototype.hasOwnProperty.call(N,Q)&&Bt.indexOf(Q)<0&&(ct[Q]=N[Q]);if(N!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Q=Object.getOwnPropertySymbols(N);ft<Q.length;ft++)Bt.indexOf(Q[ft])<0&&Object.prototype.propertyIsEnumerable.call(N,Q[ft])&&(ct[Q[ft]]=N[Q[ft]]);return ct};const Jt=N=>N?C.createElement(X,null):C.createElement(pt,null),Yt={click:"onClick",hover:"onMouseOver"};var Rt=C.forwardRef((N,Bt)=>{const{visibilityToggle:ct=!0}=N,Q=typeof ct=="object"&&ct.visible!==void 0,[ft,Zt]=(0,C.useState)(()=>Q?ct.visible:!1),ie=(0,C.useRef)(null);C.useEffect(()=>{Q&&Zt(ct.visible)},[Q,ct]);const Ot=(0,kt.Z)(ie),Xt=()=>{const{disabled:Ve}=N;Ve||(ft&&Ot(),Zt($t=>{var le;const ke=!$t;return typeof ct=="object"&&((le=ct.onVisibleChange)===null||le===void 0||le.call(ct,ke)),ke}))},oe=Ve=>{const{action:$t="click",iconRender:le=Jt}=N,ke=Yt[$t]||"",l=le(ft),g={[ke]:Xt,className:`${Ve}-icon`,key:"passwordIcon",onMouseDown:w=>{w.preventDefault()},onMouseUp:w=>{w.preventDefault()}};return C.cloneElement(C.isValidElement(l)?l:C.createElement("span",null,l),g)},{className:Qt,prefixCls:ce,inputPrefixCls:_e,size:qt}=N,Re=Gt(N,["className","prefixCls","inputPrefixCls","size"]),{getPrefixCls:Nt}=C.useContext(R.E_),Le=Nt("input",_e),Me=Nt("input-password",ce),Ce=ct&&oe(Me),ye=S()(Me,Qt,{[`${Me}-${qt}`]:!!qt}),je=Object.assign(Object.assign({},(0,q.Z)(Re,["suffix","iconRender","visibilityToggle"])),{type:ft?"text":"password",className:ye,prefixCls:Le,suffix:Ce});return qt&&(je.size=qt),C.createElement(K.Z,Object.assign({ref:(0,Mt.sQ)(Bt,ie)},je))}),dt=m(73425),Lt=m(69912),Et=m(26820),$=m(16252),at=m(33773),Pt=function(N,Bt){var ct={};for(var Q in N)Object.prototype.hasOwnProperty.call(N,Q)&&Bt.indexOf(Q)<0&&(ct[Q]=N[Q]);if(N!=null&&typeof Object.getOwnPropertySymbols=="function")for(var ft=0,Q=Object.getOwnPropertySymbols(N);ft<Q.length;ft++)Bt.indexOf(Q[ft])<0&&Object.prototype.propertyIsEnumerable.call(N,Q[ft])&&(ct[Q[ft]]=N[Q[ft]]);return ct},zt=C.forwardRef((N,Bt)=>{const{prefixCls:ct,inputPrefixCls:Q,className:ft,size:Zt,suffix:ie,enterButton:Ot=!1,addonAfter:Xt,loading:oe,disabled:Qt,onSearch:ce,onChange:_e,onCompositionStart:qt,onCompositionEnd:Re}=N,Nt=Pt(N,["prefixCls","inputPrefixCls","className","size","suffix","enterButton","addonAfter","loading","disabled","onSearch","onChange","onCompositionStart","onCompositionEnd"]),{getPrefixCls:Le,direction:Me}=C.useContext(R.E_),Ce=C.useRef(!1),ye=Le("input-search",ct),je=Le("input",Q),{compactSize:Ve}=(0,at.ri)(ye,Me),$t=(0,$.Z)(J=>{var M;return(M=Zt!=null?Zt:Ve)!==null&&M!==void 0?M:J}),le=C.useRef(null),ke=J=>{J&&J.target&&J.type==="click"&&ce&&ce(J.target.value,J,{source:"clear"}),_e&&_e(J)},l=J=>{var M;document.activeElement===((M=le.current)===null||M===void 0?void 0:M.input)&&J.preventDefault()},g=J=>{var M,st;ce&&ce((st=(M=le.current)===null||M===void 0?void 0:M.input)===null||st===void 0?void 0:st.value,J,{source:"input"})},w=J=>{Ce.current||oe||g(J)},E=typeof Ot=="boolean"?C.createElement(dt.Z,null):null,U=`${ye}-button`;let F;const V=Ot||{},z=V.type&&V.type.__ANT_BUTTON===!0;z||V.type==="button"?F=(0,Lt.Tm)(V,Object.assign({onMouseDown:l,onClick:J=>{var M,st;(st=(M=V==null?void 0:V.props)===null||M===void 0?void 0:M.onClick)===null||st===void 0||st.call(M,J),g(J)},key:"enterButton"},z?{className:U,size:$t}:{})):F=C.createElement(Et.ZP,{className:U,type:Ot?"primary":void 0,size:$t,disabled:Qt,key:"enterButton",onMouseDown:l,onClick:g,loading:oe,icon:E},Ot),Xt&&(F=[F,(0,Lt.Tm)(Xt,{key:"addonAfter"})]);const k=S()(ye,{[`${ye}-rtl`]:Me==="rtl",[`${ye}-${$t}`]:!!$t,[`${ye}-with-button`]:!!Ot},ft),O=J=>{Ce.current=!0,qt==null||qt(J)},tt=J=>{Ce.current=!1,Re==null||Re(J)};return C.createElement(K.Z,Object.assign({ref:(0,Mt.sQ)(le,Bt),onPressEnter:w},Nt,{size:$t,onCompositionStart:O,onCompositionEnd:tt,prefixCls:je,addonAfter:F,suffix:ie,onChange:ke,className:k,disabled:Qt}))}),se=m(14358);const ee=K.Z;ee.Group=G,ee.Search=zt,ee.TextArea=se.Z,ee.Password=Rt;var Ue=ee},56794:function(T,x,m){"use strict";m.d(x,{N:function(){return I}});var C=m(67469),B=m(3341),S=m.n(B),R=m(50959),I=function(P){return function(G,K){var St=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[K],H=arguments.length>3?arguments[3]:void 0,j=H!=null?H:P.setState;(0,R.useEffect)(function(){if(typeof K!="undefined"){var ot,ht=(ot=P.getState)===null||ot===void 0?void 0:ot.call(P);if(S()(ht==null?void 0:ht[G],K))return;j((0,C.Z)({},G,K),!1,{type:"\u{1F4AD} useStoreUpdater / ".concat(G),payload:K})}},St)}}},47236:function(T,x,m){"use strict";m.d(x,{v:function(){return B}});var C=m(17596),B=function(R){return R?C.mW:function(I){return I}}},62657:function(T){function x(m){if(m===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m}T.exports=x,T.exports.__esModule=!0,T.exports.default=T.exports},335:function(T,x,m){var C=m(31479);function B(S,R){var I=typeof Symbol!="undefined"&&S[Symbol.iterator]||S["@@iterator"];if(!I){if(Array.isArray(S)||(I=C(S))||R&&S&&typeof S.length=="number"){I&&(S=I);var L=0,P=function(){};return{s:P,n:function(){return L>=S.length?{done:!0}:{done:!1,value:S[L++]}},e:function(j){throw j},f:P}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var G=!0,K=!1,St;return{s:function(){I=I.call(S)},n:function(){var j=I.next();return G=j.done,j},e:function(j){K=!0,St=j},f:function(){try{!G&&I.return!=null&&I.return()}finally{if(K)throw St}}}}T.exports=B,T.exports.__esModule=!0,T.exports.default=T.exports},83136:function(T,x,m){var C=m(38836),B=m(68919),S=m(75254);function R(I){var L=B();return function(){var G=C(I),K;if(L){var St=C(this).constructor;K=Reflect.construct(G,arguments,St)}else K=G.apply(this,arguments);return S(this,K)}}T.exports=R,T.exports.__esModule=!0,T.exports.default=T.exports},38836:function(T){function x(m){return T.exports=x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(B){return B.__proto__||Object.getPrototypeOf(B)},T.exports.__esModule=!0,T.exports.default=T.exports,x(m)}T.exports=x,T.exports.__esModule=!0,T.exports.default=T.exports},21742:function(T,x,m){var C=m(80038);function B(S,R){if(typeof R!="function"&&R!==null)throw new TypeError("Super expression must either be null or a function");S.prototype=Object.create(R&&R.prototype,{constructor:{value:S,writable:!0,configurable:!0}}),Object.defineProperty(S,"prototype",{writable:!1}),R&&C(S,R)}T.exports=B,T.exports.__esModule=!0,T.exports.default=T.exports},68919:function(T){function x(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(m){return!1}}T.exports=x,T.exports.__esModule=!0,T.exports.default=T.exports},67825:function(T,x,m){var C=m(64382);function B(S,R){if(S==null)return{};var I=C(S,R),L,P;if(Object.getOwnPropertySymbols){var G=Object.getOwnPropertySymbols(S);for(P=0;P<G.length;P++)L=G[P],!(R.indexOf(L)>=0)&&Object.prototype.propertyIsEnumerable.call(S,L)&&(I[L]=S[L])}return I}T.exports=B,T.exports.__esModule=!0,T.exports.default=T.exports},64382:function(T){function x(m,C){if(m==null)return{};var B={},S=Object.keys(m),R,I;for(I=0;I<S.length;I++)R=S[I],!(C.indexOf(R)>=0)&&(B[R]=m[R]);return B}T.exports=x,T.exports.__esModule=!0,T.exports.default=T.exports},75254:function(T,x,m){var C=m(31759).default,B=m(62657);function S(R,I){if(I&&(C(I)==="object"||typeof I=="function"))return I;if(I!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B(R)}T.exports=S,T.exports.__esModule=!0,T.exports.default=T.exports},80038:function(T){function x(m,C){return T.exports=x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(S,R){return S.__proto__=R,S},T.exports.__esModule=!0,T.exports.default=T.exports,x(m,C)}T.exports=x,T.exports.__esModule=!0,T.exports.default=T.exports},64461:function(T,x,m){"use strict";m.d(x,{Uy:function(){return Le}});var C=Symbol.for("immer-nothing"),B=Symbol.for("immer-draftable"),S=Symbol.for("immer-state"),R=[];function I(l,...g){throw new Error(`[Immer] minified error nr: ${l}. Full error at: https://bit.ly/3cXEKWf`)}var L=Object.getPrototypeOf;function P(l){return!!l&&!!l[S]}function G(l){var g;return l?St(l)||Array.isArray(l)||!!l[B]||!!((g=l.constructor)!=null&&g[B])||nt(l)||X(l):!1}var K=Object.prototype.constructor.toString();function St(l){if(!l||typeof l!="object")return!1;const g=L(l);if(g===null)return!0;const w=Object.hasOwnProperty.call(g,"constructor")&&g.constructor;return w===Object?!0:typeof w=="function"&&Function.toString.call(w)===K}function H(l){return P(l)||I(15,l),l[S].base_}function j(l,g){ot(l)===0?Object.entries(l).forEach(([w,E])=>{g(w,E,l)}):l.forEach((w,E)=>g(E,w,l))}function ot(l){const g=l[S];return g?g.type_:Array.isArray(l)?1:nt(l)?2:X(l)?3:0}function ht(l,g){return ot(l)===2?l.has(g):Object.prototype.hasOwnProperty.call(l,g)}function pt(l,g){return ot(l)===2?l.get(g):l[g]}function Ft(l,g,w){const E=ot(l);E===2?l.set(g,w):E===3?l.add(w):l[g]=w}function It(l,g){return l===g?l!==0||1/l===1/g:l!==l&&g!==g}function nt(l){return l instanceof Map}function X(l){return l instanceof Set}function q(l){return l.copy_||l.base_}function Mt(l,g){if(nt(l))return new Map(l);if(X(l))return new Set(l);if(Array.isArray(l))return Array.prototype.slice.call(l);if(!g&&St(l))return L(l)?Vr({},l):Object.assign(Object.create(null),l);const w=Object.getOwnPropertyDescriptors(l);delete w[S];let E=Reflect.ownKeys(w);for(let U=0;U<E.length;U++){const F=E[U],V=w[F];V.writable===!1&&(V.writable=!0,V.configurable=!0),(V.get||V.set)&&(w[F]={configurable:!0,writable:!0,enumerable:V.enumerable,value:l[F]})}return Object.create(L(l),w)}function kt(l,g=!1){return Jt(l)||P(l)||!G(l)||(ot(l)>1&&(l.set=l.add=l.clear=l.delete=Gt),Object.freeze(l),g&&j(l,(w,E)=>kt(E,!0),!0)),l}function Gt(){I(2)}function Jt(l){return Object.isFrozen(l)}var Yt={};function Ht(l){const g=Yt[l];return g||I(0,l),g}function Rt(l,g){Yt[l]||(Yt[l]=g)}var dt;function Lt(){return dt}function Et(l,g){return{drafts_:[],parent_:l,immer_:g,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function $(l,g){g&&(Ht("Patches"),l.patches_=[],l.inversePatches_=[],l.patchListener_=g)}function at(l){Pt(l),l.drafts_.forEach(zt),l.drafts_=null}function Pt(l){l===dt&&(dt=l.parent_)}function te(l){return dt=Et(dt,l)}function zt(l){const g=l[S];g.type_===0||g.type_===1?g.revoke_():g.revoked_=!0}function se(l,g){g.unfinalizedDrafts_=g.drafts_.length;const w=g.drafts_[0];return l!==void 0&&l!==w?(w[S].modified_&&(at(g),I(4)),G(l)&&(l=ee(g,l),g.parent_||N(g,l)),g.patches_&&Ht("Patches").generateReplacementPatches_(w[S].base_,l,g.patches_,g.inversePatches_)):l=ee(g,w,[]),at(g),g.patches_&&g.patchListener_(g.patches_,g.inversePatches_),l!==C?l:void 0}function ee(l,g,w){if(Jt(g))return g;const E=g[S];if(!E)return j(g,(U,F)=>Ue(l,E,g,U,F,w),!0),g;if(E.scope_!==l)return g;if(!E.modified_)return N(l,E.base_,!0),E.base_;if(!E.finalized_){E.finalized_=!0,E.scope_.unfinalizedDrafts_--;const U=E.copy_;let F=U,V=!1;E.type_===3&&(F=new Set(U),U.clear(),V=!0),j(F,(z,k)=>Ue(l,E,U,z,k,w,V)),N(l,U,!1),w&&l.patches_&&Ht("Patches").generatePatches_(E,w,l.patches_,l.inversePatches_)}return E.copy_}function Ue(l,g,w,E,U,F,V){if(P(U)){const z=F&&g&&g.type_!==3&&!ht(g.assigned_,E)?F.concat(E):void 0,k=ee(l,U,z);if(Ft(w,E,k),P(k))l.canAutoFreeze_=!1;else return}else V&&w.add(U);if(G(U)&&!Jt(U)){if(!l.immer_.autoFreeze_&&l.unfinalizedDrafts_<1)return;ee(l,U),(!g||!g.scope_.parent_)&&N(l,U)}}function N(l,g,w=!1){!l.parent_&&l.immer_.autoFreeze_&&l.canAutoFreeze_&&kt(g,w)}function Bt(l,g){const w=Array.isArray(l),E={type_:w?1:0,scope_:g?g.scope_:Lt(),modified_:!1,finalized_:!1,assigned_:{},parent_:g,base_:l,draft_:null,copy_:null,revoke_:null,isManual_:!1};let U=E,F=ct;w&&(U=[E],F=Q);const{revoke:V,proxy:z}=Proxy.revocable(U,F);return E.draft_=z,E.revoke_=V,z}var ct={get(l,g){if(g===S)return l;const w=q(l);if(!ht(w,g))return Zt(l,w,g);const E=w[g];return l.finalized_||!G(E)?E:E===ft(l.base_,g)?(Xt(l),l.copy_[g]=Qt(E,l)):E},has(l,g){return g in q(l)},ownKeys(l){return Reflect.ownKeys(q(l))},set(l,g,w){const E=ie(q(l),g);if(E!=null&&E.set)return E.set.call(l.draft_,w),!0;if(!l.modified_){const U=ft(q(l),g),F=U==null?void 0:U[S];if(F&&F.base_===w)return l.copy_[g]=w,l.assigned_[g]=!1,!0;if(It(w,U)&&(w!==void 0||ht(l.base_,g)))return!0;Xt(l),Ot(l)}return l.copy_[g]===w&&(w!==void 0||g in l.copy_)||Number.isNaN(w)&&Number.isNaN(l.copy_[g])||(l.copy_[g]=w,l.assigned_[g]=!0),!0},deleteProperty(l,g){return ft(l.base_,g)!==void 0||g in l.base_?(l.assigned_[g]=!1,Xt(l),Ot(l)):delete l.assigned_[g],l.copy_&&delete l.copy_[g],!0},getOwnPropertyDescriptor(l,g){const w=q(l),E=Reflect.getOwnPropertyDescriptor(w,g);return E&&{writable:!0,configurable:l.type_!==1||g!=="length",enumerable:E.enumerable,value:w[g]}},defineProperty(){I(11)},getPrototypeOf(l){return L(l.base_)},setPrototypeOf(){I(12)}},Q={};j(ct,(l,g)=>{Q[l]=function(){return arguments[0]=arguments[0][0],g.apply(this,arguments)}}),Q.deleteProperty=function(l,g){return Q.set.call(this,l,g,void 0)},Q.set=function(l,g,w){return ct.set.call(this,l[0],g,w,l[0])};function ft(l,g){const w=l[S];return(w?q(w):l)[g]}function Zt(l,g,w){var U;const E=ie(g,w);return E?"value"in E?E.value:(U=E.get)==null?void 0:U.call(l.draft_):void 0}function ie(l,g){if(!(g in l))return;let w=L(l);for(;w;){const E=Object.getOwnPropertyDescriptor(w,g);if(E)return E;w=L(w)}}function Ot(l){l.modified_||(l.modified_=!0,l.parent_&&Ot(l.parent_))}function Xt(l){l.copy_||(l.copy_=Mt(l.base_,l.scope_.immer_.useStrictShallowCopy_))}var oe=class{constructor(l){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(g,w,E)=>{if(typeof g=="function"&&typeof w!="function"){const F=w;w=g;const V=this;return function(k=F,...O){return V.produce(k,tt=>w.call(this,tt,...O))}}typeof w!="function"&&I(6),E!==void 0&&typeof E!="function"&&I(7);let U;if(G(g)){const F=te(this),V=Qt(g,void 0);let z=!0;try{U=w(V),z=!1}finally{z?at(F):Pt(F)}return $(F,E),se(U,F)}else if(!g||typeof g!="object"){if(U=w(g),U===void 0&&(U=g),U===C&&(U=void 0),this.autoFreeze_&&kt(U,!0),E){const F=[],V=[];Ht("Patches").generateReplacementPatches_(g,U,F,V),E(F,V)}return U}else I(1,g)},this.produceWithPatches=(g,w)=>{if(typeof g=="function")return(V,...z)=>this.produceWithPatches(V,k=>g(k,...z));let E,U;return[this.produce(g,w,(V,z)=>{E=V,U=z}),E,U]},typeof(l==null?void 0:l.autoFreeze)=="boolean"&&this.setAutoFreeze(l.autoFreeze),typeof(l==null?void 0:l.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(l.useStrictShallowCopy)}createDraft(l){G(l)||I(8),P(l)&&(l=ce(l));const g=te(this),w=Qt(l,void 0);return w[S].isManual_=!0,Pt(g),w}finishDraft(l,g){const w=l&&l[S];(!w||!w.isManual_)&&I(9);const{scope_:E}=w;return $(E,g),se(void 0,E)}setAutoFreeze(l){this.autoFreeze_=l}setUseStrictShallowCopy(l){this.useStrictShallowCopy_=l}applyPatches(l,g){let w;for(w=g.length-1;w>=0;w--){const U=g[w];if(U.path.length===0&&U.op==="replace"){l=U.value;break}}w>-1&&(g=g.slice(w+1));const E=Ht("Patches").applyPatches_;return P(l)?E(l,g):this.produce(l,U=>E(U,g))}};function Qt(l,g){const w=nt(l)?Ht("MapSet").proxyMap_(l,g):X(l)?Ht("MapSet").proxySet_(l,g):Bt(l,g);return(g?g.scope_:Lt()).drafts_.push(w),w}function ce(l){return P(l)||I(10,l),_e(l)}function _e(l){if(!G(l)||Jt(l))return l;const g=l[S];let w;if(g){if(!g.modified_)return g.base_;g.finalized_=!0,w=Mt(l,g.scope_.immer_.useStrictShallowCopy_)}else w=Mt(l,!0);return j(w,(E,U)=>{Ft(w,E,_e(U))}),g&&(g.finalized_=!1),w}function qt(){const g="replace",w="add",E="remove";function U(M,st,lt,_t){switch(M.type_){case 0:case 2:return V(M,st,lt,_t);case 1:return F(M,st,lt,_t);case 3:return z(M,st,lt,_t)}}function F(M,st,lt,_t){let{base_:jt,assigned_:yt}=M,mt=M.copy_;mt.length<jt.length&&([jt,mt]=[mt,jt],[lt,_t]=[_t,lt]);for(let Y=0;Y<jt.length;Y++)if(yt[Y]&&mt[Y]!==jt[Y]){const rt=st.concat([Y]);lt.push({op:g,path:rt,value:J(mt[Y])}),_t.push({op:g,path:rt,value:J(jt[Y])})}for(let Y=jt.length;Y<mt.length;Y++){const rt=st.concat([Y]);lt.push({op:w,path:rt,value:J(mt[Y])})}for(let Y=mt.length-1;jt.length<=Y;--Y){const rt=st.concat([Y]);_t.push({op:E,path:rt})}}function V(M,st,lt,_t){const{base_:jt,copy_:yt}=M;j(M.assigned_,(mt,Y)=>{const rt=pt(jt,mt),me=pt(yt,mt),we=Y?ht(jt,mt)?g:w:E;if(rt===me&&we===g)return;const Wt=st.concat(mt);lt.push(we===E?{op:we,path:Wt}:{op:we,path:Wt,value:me}),_t.push(we===w?{op:E,path:Wt}:we===E?{op:w,path:Wt,value:J(rt)}:{op:g,path:Wt,value:J(rt)})})}function z(M,st,lt,_t){let{base_:jt,copy_:yt}=M,mt=0;jt.forEach(Y=>{if(!yt.has(Y)){const rt=st.concat([mt]);lt.push({op:E,path:rt,value:Y}),_t.unshift({op:w,path:rt,value:Y})}mt++}),mt=0,yt.forEach(Y=>{if(!jt.has(Y)){const rt=st.concat([mt]);lt.push({op:w,path:rt,value:Y}),_t.unshift({op:E,path:rt,value:Y})}mt++})}function k(M,st,lt,_t){lt.push({op:g,path:[],value:st===C?void 0:st}),_t.push({op:g,path:[],value:M})}function O(M,st){return st.forEach(lt=>{const{path:_t,op:jt}=lt;let yt=M;for(let me=0;me<_t.length-1;me++){const we=ot(yt);let Wt=_t[me];typeof Wt!="string"&&typeof Wt!="number"&&(Wt=""+Wt),(we===0||we===1)&&(Wt==="__proto__"||Wt==="constructor")&&I(16+3),typeof yt=="function"&&Wt==="prototype"&&I(16+3),yt=pt(yt,Wt),typeof yt!="object"&&I(16+2,_t.join("/"))}const mt=ot(yt),Y=tt(lt.value),rt=_t[_t.length-1];switch(jt){case g:switch(mt){case 2:return yt.set(rt,Y);case 3:I(16);default:return yt[rt]=Y}case w:switch(mt){case 1:return rt==="-"?yt.push(Y):yt.splice(rt,0,Y);case 2:return yt.set(rt,Y);case 3:return yt.add(Y);default:return yt[rt]=Y}case E:switch(mt){case 1:return yt.splice(rt,1);case 2:return yt.delete(rt);case 3:return yt.delete(lt.value);default:return delete yt[rt]}default:I(16+1,jt)}}),M}function tt(M){if(!G(M))return M;if(Array.isArray(M))return M.map(tt);if(nt(M))return new Map(Array.from(M.entries()).map(([lt,_t])=>[lt,tt(_t)]));if(X(M))return new Set(Array.from(M).map(tt));const st=Object.create(L(M));for(const lt in M)st[lt]=tt(M[lt]);return ht(M,B)&&(st[B]=M[B]),st}function J(M){return P(M)?tt(M):M}Rt("Patches",{applyPatches_:O,generatePatches_:U,generateReplacementPatches_:k})}function Re(){class l extends Map{constructor(k,O){super(),this[S]={type_:2,parent_:O,scope_:O?O.scope_:Lt(),modified_:!1,finalized_:!1,copy_:void 0,assigned_:void 0,base_:k,draft_:this,isManual_:!1,revoked_:!1}}get size(){return q(this[S]).size}has(k){return q(this[S]).has(k)}set(k,O){const tt=this[S];return V(tt),(!q(tt).has(k)||q(tt).get(k)!==O)&&(w(tt),Ot(tt),tt.assigned_.set(k,!0),tt.copy_.set(k,O),tt.assigned_.set(k,!0)),this}delete(k){if(!this.has(k))return!1;const O=this[S];return V(O),w(O),Ot(O),O.base_.has(k)?O.assigned_.set(k,!1):O.assigned_.delete(k),O.copy_.delete(k),!0}clear(){const k=this[S];V(k),q(k).size&&(w(k),Ot(k),k.assigned_=new Map,j(k.base_,O=>{k.assigned_.set(O,!1)}),k.copy_.clear())}forEach(k,O){const tt=this[S];q(tt).forEach((J,M,st)=>{k.call(O,this.get(M),M,this)})}get(k){const O=this[S];V(O);const tt=q(O).get(k);if(O.finalized_||!G(tt)||tt!==O.base_.get(k))return tt;const J=Qt(tt,O);return w(O),O.copy_.set(k,J),J}keys(){return q(this[S]).keys()}values(){const k=this.keys();return{[Symbol.iterator]:()=>this.values(),next:()=>{const O=k.next();return O.done?O:{done:!1,value:this.get(O.value)}}}}entries(){const k=this.keys();return{[Symbol.iterator]:()=>this.entries(),next:()=>{const O=k.next();if(O.done)return O;const tt=this.get(O.value);return{done:!1,value:[O.value,tt]}}}}[Symbol.iterator](){return this.entries()}}function g(z,k){return new l(z,k)}function w(z){z.copy_||(z.assigned_=new Map,z.copy_=new Map(z.base_))}class E extends Set{constructor(k,O){super(),this[S]={type_:3,parent_:O,scope_:O?O.scope_:Lt(),modified_:!1,finalized_:!1,copy_:void 0,base_:k,draft_:this,drafts_:new Map,revoked_:!1,isManual_:!1}}get size(){return q(this[S]).size}has(k){const O=this[S];return V(O),O.copy_?!!(O.copy_.has(k)||O.drafts_.has(k)&&O.copy_.has(O.drafts_.get(k))):O.base_.has(k)}add(k){const O=this[S];return V(O),this.has(k)||(F(O),Ot(O),O.copy_.add(k)),this}delete(k){if(!this.has(k))return!1;const O=this[S];return V(O),F(O),Ot(O),O.copy_.delete(k)||(O.drafts_.has(k)?O.copy_.delete(O.drafts_.get(k)):!1)}clear(){const k=this[S];V(k),q(k).size&&(F(k),Ot(k),k.copy_.clear())}values(){const k=this[S];return V(k),F(k),k.copy_.values()}entries(){const k=this[S];return V(k),F(k),k.copy_.entries()}keys(){return this.values()}[Symbol.iterator](){return this.values()}forEach(k,O){const tt=this.values();let J=tt.next();for(;!J.done;)k.call(O,J.value,J.value,this),J=tt.next()}}function U(z,k){return new E(z,k)}function F(z){z.copy_||(z.copy_=new Set,z.base_.forEach(k=>{if(G(k)){const O=Qt(k,z);z.drafts_.set(k,O),z.copy_.add(O)}else z.copy_.add(k)}))}function V(z){z.revoked_&&I(3,JSON.stringify(q(z)))}Rt("MapSet",{proxyMap_:g,proxySet_:U})}var Nt=new oe,Le=Nt.produce,Me=Nt.produceWithPatches.bind(Nt),Ce=Nt.setAutoFreeze.bind(Nt),ye=Nt.setUseStrictShallowCopy.bind(Nt),je=Nt.applyPatches.bind(Nt),Ve=Nt.createDraft.bind(Nt),$t=Nt.finishDraft.bind(Nt);function le(l){return l}function ke(l){return l}},13727:function(T,x,m){"use strict";m.d(x,{Z:function(){return nt}});var C=m(99615),B=C.Z.Symbol,S=B,R=Object.prototype,I=R.hasOwnProperty,L=R.toString,P=S?S.toStringTag:void 0;function G(X){var q=I.call(X,P),Mt=X[P];try{X[P]=void 0;var kt=!0}catch(Jt){}var Gt=L.call(X);return kt&&(q?X[P]=Mt:delete X[P]),Gt}var K=G,St=Object.prototype,H=St.toString;function j(X){return H.call(X)}var ot=j,ht="[object Null]",pt="[object Undefined]",Ft=S?S.toStringTag:void 0;function It(X){return X==null?X===void 0?pt:ht:Ft&&Ft in Object(X)?K(X):ot(X)}var nt=It},97889:function(T,x){"use strict";var m=typeof global=="object"&&global&&global.Object===Object&&global;x.Z=m},99615:function(T,x,m){"use strict";var C=m(97889),B=typeof self=="object"&&self&&self.Object===Object&&self,S=C.Z||B||Function("return this")();x.Z=S},82433:function(T,x){"use strict";function m(C){var B=typeof C;return C!=null&&(B=="object"||B=="function")}x.Z=m},13795:function(T,x){"use strict";function m(C){return C!=null&&typeof C=="object"}x.Z=m},62071:function(T,x,m){"use strict";m.d(x,{Z:function(){return wo}});function C(){this.__data__=[],this.size=0}var B=C;function S(a,p){return a===p||a!==a&&p!==p}var R=S;function I(a,p){for(var y=a.length;y--;)if(R(a[y][0],p))return y;return-1}var L=I,P=Array.prototype,G=P.splice;function K(a){var p=this.__data__,y=L(p,a);if(y<0)return!1;var A=p.length-1;return y==A?p.pop():G.call(p,y,1),--this.size,!0}var St=K;function H(a){var p=this.__data__,y=L(p,a);return y<0?void 0:p[y][1]}var j=H;function ot(a){return L(this.__data__,a)>-1}var ht=ot;function pt(a,p){var y=this.__data__,A=L(y,a);return A<0?(++this.size,y.push([a,p])):y[A][1]=p,this}var Ft=pt;function It(a){var p=-1,y=a==null?0:a.length;for(this.clear();++p<y;){var A=a[p];this.set(A[0],A[1])}}It.prototype.clear=B,It.prototype.delete=St,It.prototype.get=j,It.prototype.has=ht,It.prototype.set=Ft;var nt=It;function X(){this.__data__=new nt,this.size=0}var q=X;function Mt(a){var p=this.__data__,y=p.delete(a);return this.size=p.size,y}var kt=Mt;function Gt(a){return this.__data__.get(a)}var Jt=Gt;function Yt(a){return this.__data__.has(a)}var Ht=Yt,Rt=m(13727),dt=m(82433),Lt="[object AsyncFunction]",Et="[object Function]",$="[object GeneratorFunction]",at="[object Proxy]";function Pt(a){if(!(0,dt.Z)(a))return!1;var p=(0,Rt.Z)(a);return p==Et||p==$||p==Lt||p==at}var te=Pt,zt=m(99615),se=zt.Z["__core-js_shared__"],ee=se,Ue=function(){var a=/[^.]+$/.exec(ee&&ee.keys&&ee.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}();function N(a){return!!Ue&&Ue in a}var Bt=N,ct=Function.prototype,Q=ct.toString;function ft(a){if(a!=null){try{return Q.call(a)}catch(p){}try{return a+""}catch(p){}}return""}var Zt=ft,ie=/[\\^$.*+?()[\]{}|]/g,Ot=/^\[object .+?Constructor\]$/,Xt=Function.prototype,oe=Object.prototype,Qt=Xt.toString,ce=oe.hasOwnProperty,_e=RegExp("^"+Qt.call(ce).replace(ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function qt(a){if(!(0,dt.Z)(a)||Bt(a))return!1;var p=te(a)?_e:Ot;return p.test(Zt(a))}var Re=qt;function Nt(a,p){return a==null?void 0:a[p]}var Le=Nt;function Me(a,p){var y=Le(a,p);return Re(y)?y:void 0}var Ce=Me,ye=Ce(zt.Z,"Map"),je=ye,Ve=Ce(Object,"create"),$t=Ve;function le(){this.__data__=$t?$t(null):{},this.size=0}var ke=le;function l(a){var p=this.has(a)&&delete this.__data__[a];return this.size-=p?1:0,p}var g=l,w="__lodash_hash_undefined__",E=Object.prototype,U=E.hasOwnProperty;function F(a){var p=this.__data__;if($t){var y=p[a];return y===w?void 0:y}return U.call(p,a)?p[a]:void 0}var V=F,z=Object.prototype,k=z.hasOwnProperty;function O(a){var p=this.__data__;return $t?p[a]!==void 0:k.call(p,a)}var tt=O,J="__lodash_hash_undefined__";function M(a,p){var y=this.__data__;return this.size+=this.has(a)?0:1,y[a]=$t&&p===void 0?J:p,this}var st=M;function lt(a){var p=-1,y=a==null?0:a.length;for(this.clear();++p<y;){var A=a[p];this.set(A[0],A[1])}}lt.prototype.clear=ke,lt.prototype.delete=g,lt.prototype.get=V,lt.prototype.has=tt,lt.prototype.set=st;var _t=lt;function jt(){this.size=0,this.__data__={hash:new _t,map:new(je||nt),string:new _t}}var yt=jt;function mt(a){var p=typeof a;return p=="string"||p=="number"||p=="symbol"||p=="boolean"?a!=="__proto__":a===null}var Y=mt;function rt(a,p){var y=a.__data__;return Y(p)?y[typeof p=="string"?"string":"hash"]:y.map}var me=rt;function we(a){var p=me(this,a).delete(a);return this.size-=p?1:0,p}var Wt=we;function ti(a){return me(this,a).get(a)}var ei=ti;function ni(a){return me(this,a).has(a)}var ri=ni;function si(a,p){var y=me(this,a),A=y.size;return y.set(a,p),this.size+=y.size==A?0:1,this}var ii=si;function qe(a){var p=-1,y=a==null?0:a.length;for(this.clear();++p<y;){var A=a[p];this.set(A[0],A[1])}}qe.prototype.clear=yt,qe.prototype.delete=Wt,qe.prototype.get=ei,qe.prototype.has=ri,qe.prototype.set=ii;var oi=qe,ci=200;function li(a,p){var y=this.__data__;if(y instanceof nt){var A=y.__data__;if(!je||A.length<ci-1)return A.push([a,p]),this.size=++y.size,this;y=this.__data__=new oi(A)}return y.set(a,p),this.size=y.size,this}var ai=li;function tn(a){var p=this.__data__=new nt(a);this.size=p.size}tn.prototype.clear=q,tn.prototype.delete=kt,tn.prototype.get=Jt,tn.prototype.has=Ht,tn.prototype.set=ai;var ui=tn,di=function(){try{var a=Ce(Object,"defineProperty");return a({},"",{}),a}catch(p){}}(),Bn=di;function hi(a,p,y){p=="__proto__"&&Bn?Bn(a,p,{configurable:!0,enumerable:!0,value:y,writable:!0}):a[p]=y}var Xn=hi;function fi(a,p,y){(y!==void 0&&!R(a[p],y)||y===void 0&&!(p in a))&&Xn(a,p,y)}var Qn=fi;function gi(a){return function(p,y,A){for(var it=-1,bt=Object(p),Tt=A(p),et=Tt.length;et--;){var Dt=Tt[a?et:++it];if(y(bt[Dt],Dt,bt)===!1)break}return p}}var qn=gi,Fr=qn(),pi=Fr,zr=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Zr=zr&&typeof module=="object"&&module&&!module.nodeType&&module,_i=Zr&&Zr.exports===zr,Gr=_i?zt.Z.Buffer:void 0,tr=Gr?Gr.allocUnsafe:void 0;function yi(a,p){if(p)return a.slice();var y=a.length,A=tr?tr(y):new a.constructor(y);return a.copy(A),A}var mi=yi,wi=zt.Z.Uint8Array,er=wi;function bi(a){var p=new a.constructor(a.byteLength);return new er(p).set(new er(a)),p}var vi=bi;function Hr(a,p){var y=p?vi(a.buffer):a.buffer;return new a.constructor(y,a.byteOffset,a.length)}var $r=Hr;function Wr(a,p){var y=-1,A=a.length;for(p||(p=Array(A));++y<A;)p[y]=a[y];return p}var Kr=Wr,Nn=Object.create,Si=function(){function a(){}return function(p){if(!(0,dt.Z)(p))return{};if(Nn)return Nn(p);a.prototype=p;var y=new a;return a.prototype=void 0,y}}(),Jr=Si;function en(a,p){return function(y){return a(p(y))}}var Ei=en,Yr=Ei(Object.getPrototypeOf,Object),Xr=Yr,hn=Object.prototype;function Ci(a){var p=a&&a.constructor,y=typeof p=="function"&&p.prototype||hn;return a===y}var Qr=Ci;function ki(a){return typeof a.constructor=="function"&&!Qr(a)?Jr(Xr(a)):{}}var Ti=ki,be=m(13795),fn="[object Arguments]";function Di(a){return(0,be.Z)(a)&&(0,Rt.Z)(a)==fn}var nr=Di,qr=Object.prototype,ae=qr.hasOwnProperty,ts=qr.propertyIsEnumerable,wt=nr(function(){return arguments}())?nr:function(a){return(0,be.Z)(a)&&ae.call(a,"callee")&&!ts.call(a,"callee")},nn=wt,Rn=Array.isArray,rr=Rn,Ii=9007199254740991;function Oi(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=Ii}var es=Oi;function Ai(a){return a!=null&&es(a.length)&&!te(a)}var sr=Ai;function ut(a){return(0,be.Z)(a)&&sr(a)}var rn=ut;function Ln(){return!1}var ns=Ln,ir=typeof exports=="object"&&exports&&!exports.nodeType&&exports,or=ir&&typeof module=="object"&&module&&!module.nodeType&&module,Ze=or&&or.exports===ir,rs=Ze?zt.Z.Buffer:void 0,ss=rs?rs.isBuffer:void 0,xi=ss||ns,sn=xi,ne="[object Object]",gn=Function.prototype,is=Object.prototype,cr=gn.toString,os=is.hasOwnProperty,Ui=cr.call(Object);function lr(a){if(!(0,be.Z)(a)||(0,Rt.Z)(a)!=ne)return!1;var p=Xr(a);if(p===null)return!0;var y=os.call(p,"constructor")&&p.constructor;return typeof y=="function"&&y instanceof y&&cr.call(y)==Ui}var cs=lr,on="[object Arguments]",ar="[object Array]",Mi="[object Boolean]",Pi="[object Date]",pn="[object Error]",_n="[object Function]",Bi="[object Map]",ur="[object Number]",jn="[object Object]",ls="[object RegExp]",Ni="[object Set]",as="[object String]",us="[object WeakMap]",dr="[object ArrayBuffer]",Ri="[object DataView]",Li="[object Float32Array]",ds="[object Float64Array]",hs="[object Int8Array]",yn="[object Int16Array]",ji="[object Int32Array]",Vi="[object Uint8Array]",Fi="[object Uint8ClampedArray]",zi="[object Uint16Array]",Zi="[object Uint32Array]",Ct={};Ct[Li]=Ct[ds]=Ct[hs]=Ct[yn]=Ct[ji]=Ct[Vi]=Ct[Fi]=Ct[zi]=Ct[Zi]=!0,Ct[on]=Ct[ar]=Ct[dr]=Ct[Mi]=Ct[Ri]=Ct[Pi]=Ct[pn]=Ct[_n]=Ct[Bi]=Ct[ur]=Ct[jn]=Ct[ls]=Ct[Ni]=Ct[as]=Ct[us]=!1;function Gi(a){return(0,be.Z)(a)&&es(a.length)&&!!Ct[(0,Rt.Z)(a)]}var Hi=Gi;function Ge(a){return function(p){return a(p)}}var ve=Ge,Te=m(97889),mn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,wn=mn&&typeof module=="object"&&module&&!module.nodeType&&module,$i=wn&&wn.exports===mn,hr=$i&&Te.Z.process,fs=function(){try{var a=wn&&wn.require&&wn.require("util").types;return a||hr&&hr.binding&&hr.binding("util")}catch(p){}}(),gs=fs,bn=gs&&gs.isTypedArray,ps=bn?ve(bn):Hi,_s=ps;function Wi(a,p){if(!(p==="constructor"&&typeof a[p]=="function")&&p!="__proto__")return a[p]}var fr=Wi,Ki=Object.prototype,Ji=Ki.hasOwnProperty;function gr(a,p,y){var A=a[p];(!(Ji.call(a,p)&&R(A,y))||y===void 0&&!(p in a))&&Xn(a,p,y)}var ys=gr;function pr(a,p,y,A){var it=!y;y||(y={});for(var bt=-1,Tt=p.length;++bt<Tt;){var et=p[bt],Dt=A?A(y[et],a[et],et,y,a):void 0;Dt===void 0&&(Dt=a[et]),it?Xn(y,et,Dt):ys(y,et,Dt)}return y}var Vn=pr;function ms(a,p){for(var y=-1,A=Array(a);++y<a;)A[y]=p(y);return A}var Yi=ms,Xi=9007199254740991,Fe=/^(?:0|[1-9]\d*)$/;function He(a,p){var y=typeof a;return p=p==null?Xi:p,!!p&&(y=="number"||y!="symbol"&&Fe.test(a))&&a>-1&&a%1==0&&a<p}var ws=He,Qi=Object.prototype,Se=Qi.hasOwnProperty;function bs(a,p){var y=rr(a),A=!y&&nn(a),it=!y&&!A&&sn(a),bt=!y&&!A&&!it&&_s(a),Tt=y||A||it||bt,et=Tt?Yi(a.length,String):[],Dt=et.length;for(var fe in a)(p||Se.call(a,fe))&&!(Tt&&(fe=="length"||it&&(fe=="offset"||fe=="parent")||bt&&(fe=="buffer"||fe=="byteLength"||fe=="byteOffset")||ws(fe,Dt)))&&et.push(fe);return et}var Fn=bs;function zn(a){var p=[];if(a!=null)for(var y in Object(a))p.push(y);return p}var qi=zn,vn=Object.prototype,vs=vn.hasOwnProperty;function to(a){if(!(0,dt.Z)(a))return qi(a);var p=Qr(a),y=[];for(var A in a)A=="constructor"&&(p||!vs.call(a,A))||y.push(A);return y}var eo=to;function no(a){return sr(a)?Fn(a,!0):eo(a)}var Zn=no;function Ss(a){return Vn(a,Zn(a))}var _r=Ss;function De(a,p,y,A,it,bt,Tt){var et=fr(a,y),Dt=fr(p,y),fe=Tt.get(Dt);if(fe){Qn(a,y,fe);return}var ue=bt?bt(et,Dt,y+"",a,p,Tt):void 0,Sn=ue===void 0;if(Sn){var br=rr(Dt),ge=!br&&sn(Dt),xs=!br&&!ge&&_s(Dt);ue=Dt,br||ge||xs?rr(et)?ue=et:rn(et)?ue=Kr(et):ge?(Sn=!1,ue=mi(Dt,!0)):xs?(Sn=!1,ue=$r(Dt,!0)):ue=[]:cs(Dt)||nn(Dt)?(ue=et,nn(et)?ue=_r(et):(!(0,dt.Z)(et)||te(et))&&(ue=Ti(Dt))):Sn=!1}Sn&&(Tt.set(Dt,ue),it(ue,Dt,A,bt,Tt),Tt.delete(Dt)),Qn(a,y,ue)}var ro=De;function Es(a,p,y,A,it){a!==p&&pi(p,function(bt,Tt){if(it||(it=new ui),(0,dt.Z)(bt))ro(a,p,Tt,y,Es,A,it);else{var et=A?A(fr(a,Tt),bt,Tt+"",a,p,it):void 0;et===void 0&&(et=bt),Qn(a,Tt,et)}},Zn)}var so=Es;function he(a){return a}var Gn=he;function Cs(a,p,y){switch(y.length){case 0:return a.call(p);case 1:return a.call(p,y[0]);case 2:return a.call(p,y[0],y[1]);case 3:return a.call(p,y[0],y[1],y[2])}return a.apply(p,y)}var io=Cs,yr=Math.max;function oo(a,p,y){return p=yr(p===void 0?a.length-1:p,0),function(){for(var A=arguments,it=-1,bt=yr(A.length-p,0),Tt=Array(bt);++it<bt;)Tt[it]=A[p+it];it=-1;for(var et=Array(p+1);++it<p;)et[it]=A[it];return et[p]=y(Tt),io(a,this,et)}}var ks=oo;function co(a){return function(){return a}}var mr=co,Ts=Bn?function(a,p){return Bn(a,"toString",{configurable:!0,enumerable:!1,value:mr(p),writable:!0})}:Gn,lo=Ts,Ds=800,Is=16,ao=Date.now;function uo(a){var p=0,y=0;return function(){var A=ao(),it=Is-(A-y);if(y=A,it>0){if(++p>=Ds)return arguments[0]}else p=0;return a.apply(void 0,arguments)}}var ho=uo,fo=ho(lo),go=fo;function Os(a,p){return go(ks(a,p,Gn),a+"")}var po=Os;function As(a,p,y){if(!(0,dt.Z)(y))return!1;var A=typeof p;return(A=="number"?sr(y)&&ws(p,y.length):A=="string"&&p in y)?R(y[p],a):!1}var _o=As;function yo(a){return po(function(p,y){var A=-1,it=y.length,bt=it>1?y[it-1]:void 0,Tt=it>2?y[2]:void 0;for(bt=a.length>3&&typeof bt=="function"?(it--,bt):void 0,Tt&&_o(y[0],y[1],Tt)&&(bt=it<3?void 0:bt,it=1),p=Object(p);++A<it;){var et=y[A];et&&a(p,et,A,bt)}return p})}var mo=yo,wr=mo(function(a,p,y){so(a,p,y)}),wo=wr},67197:function(T,x,m){"use strict";m.d(x,{kP:function(){return S}});let C=I=>crypto.getRandomValues(new Uint8Array(I)),B=(I,L,P)=>{let G=(2<<Math.log(I.length-1)/Math.LN2)-1,K=-~(1.6*G*L/I.length);return(St=L)=>{let H="";for(;;){let j=P(K),ot=K;for(;ot--;)if(H+=I[j[ot]&G]||"",H.length===St)return H}}},S=(I,L=21)=>B(I,L,C),R=(I=21)=>crypto.getRandomValues(new Uint8Array(I)).reduce((L,P)=>(P&=63,P<36?L+=P.toString(36):P<62?L+=(P-26).toString(36).toUpperCase():P>62?L+="-":L+="_",L),"")},97649:function(T,x,m){"use strict";m.d(x,{QW:function(){return cn},H6:function(){return Sl}});const C=()=>new Map,B=e=>{const t=C();return e.forEach((n,r)=>{t.set(r,n)}),t},S=(e,t,n)=>{let r=e.get(t);return r===void 0&&e.set(t,r=n()),r},R=(e,t)=>{const n=[];for(const[r,s]of e)n.push(t(s,r));return n},I=(e,t)=>{for(const[n,r]of e)if(t(r,n))return!0;return!1},L=(e,t)=>{for(const[n,r]of e)if(!t(r,n))return!1;return!0},P=()=>new Set,G=e=>Array.from(e),K=e=>e.values().next().value||void 0,St=e=>new Set(e),H=e=>e[e.length-1],j=()=>[],ot=e=>e.slice(),ht=(e,t)=>{for(let n=0;n<t.length;n++)e.push(t[n])},pt=Array.from,Ft=(e,t)=>{for(let n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0},It=(e,t)=>{for(let n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1},nt=(e,t)=>e.length===t.length&&Ft(e,(n,r)=>n===t[r]),X=e=>Mt(e,[],(t,n)=>t.concat(n)),q=(e,t)=>{const n=new Array(e);for(let r=0;r<e;r++)n[r]=t(r,n);return n},Mt=(e,t,n)=>e.reduce(n,t),kt=Array.isArray,Gt=e=>pt(set.from(e)),Jt=(e,t)=>{const n=set.create(),r=[];for(let s=0;s<e.length;s++){const i=e[s],o=t(i);n.has(o)||(n.add(o),r.push(i))}return r},Yt=(e,t)=>{const n=Array(e.length);for(let r=0;r<e.length;r++)n[r]=t(e[r],r,e);return n};class Ht{constructor(){this._observers=map.create()}on(t,n){return map.setIfUndefined(this._observers,t,set.create).add(n),n}once(t,n){const r=(...s)=>{this.off(t,r),n(...s)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return array.from((this._observers.get(t)||map.create()).values()).forEach(r=>r(...n))}destroy(){this._observers=map.create()}}class Rt{constructor(){this._observers=C()}on(t,n){S(this._observers,t,P).add(n)}once(t,n){const r=(...s)=>{this.off(t,r),n(...s)};this.on(t,r)}off(t,n){const r=this._observers.get(t);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(t))}emit(t,n){return pt((this._observers.get(t)||C()).values()).forEach(r=>r(...n))}destroy(){this._observers=C()}}const dt=Math.floor,Lt=Math.ceil,Et=Math.abs,$=Math.imul,at=Math.round,Pt=Math.log10,te=Math.log2,zt=Math.log,se=Math.sqrt,ee=(e,t)=>e+t,Ue=(e,t)=>e<t?e:t,N=(e,t)=>e>t?e:t,Bt=Number.isNaN,ct=Math.pow,Q=e=>Math.pow(10,e),ft=Math.sign,Zt=e=>e!==0?e<0:1/e<0,ie=1,Ot=2,Xt=4,oe=8,Qt=16,ce=32,_e=64,qt=128,Re=256,Nt=512,Le=1024,Me=2048,Ce=4096,ye=8192,je=16384,Ve=32768,$t=65536,le=1<<17,ke=1<<18,l=1<<19,g=1<<20,w=1<<21,E=1<<22,U=1<<23,F=1<<24,V=1<<25,z=1<<26,k=1<<27,O=1<<28,tt=1<<29,J=1<<30,M=null,st=0,lt=1,_t=3,jt=7,yt=15,mt=31,Y=63,rt=127,me=255,we=511,Wt=1023,ti=2047,ei=4095,ni=8191,ri=16383,si=32767,ii=65535,qe=le-1,oi=ke-1,ci=l-1,li=g-1,ai=w-1,tn=E-1,ui=U-1,di=F-1,Bn=V-1,hi=z-1,Xn=k-1,fi=O-1,Qn=tt-1,gi=J-1,qn=2147483647,Fr=4294967295,pi=Number.MAX_SAFE_INTEGER,zr=Number.MIN_SAFE_INTEGER,Zr=null,_i=qn,Gr=Fr,tr=Number.isInteger||(e=>typeof e=="number"&&isFinite(e)&&dt(e)===e),yi=Number.isNaN,mi=Number.parseInt,wi=e=>{e&=binary.BITS32;let t=0;for(;e;)e&=e-1,t++;return t},er=String.fromCharCode,bi=String.fromCodePoint,vi=er(65535),Hr=e=>e.toLowerCase(),$r=/^\s*/g,Wr=e=>e.replace($r,""),Kr=/([A-Z])/g,Nn=(e,t)=>Wr(e.replace(Kr,n=>`${t}${Hr(n)}`)),Si=e=>unescape(encodeURIComponent(e)).length,Jr=e=>{const t=unescape(encodeURIComponent(e)),n=t.length,r=new Uint8Array(n);for(let s=0;s<n;s++)r[s]=t.codePointAt(s);return r},en=typeof TextEncoder!="undefined"?new TextEncoder:null,Yr=en?e=>en.encode(e):Jr,Xr=e=>{let t=e.length,n="",r=0;for(;t>0;){const s=t<1e4?t:1e4,i=e.subarray(r,r+s);r+=s,n+=String.fromCodePoint.apply(null,i),t-=s}return decodeURIComponent(escape(n))};let hn=typeof TextDecoder=="undefined"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});hn&&hn.decode(new Uint8Array).length===1&&(hn=null);const Ci=e=>hn.decode(e),Qr=null,ki=(e,t,n,r="")=>e.slice(0,t)+r+e.slice(t+n),Ti=(e,t)=>array.unfold(t,()=>e).join("");class be{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}}const fn=()=>new be,Di=e=>{const t=fn();return e(t),ae(t)},nr=e=>{let t=e.cpos;for(let n=0;n<e.bufs.length;n++)t+=e.bufs[n].length;return t},qr=e=>e.cpos>0||e.bufs.length>0,ae=e=>{const t=new Uint8Array(nr(e));let n=0;for(let r=0;r<e.bufs.length;r++){const s=e.bufs[r];t.set(s,n),n+=s.length}return t.set(new Uint8Array(e.cbuf.buffer,0,e.cpos),n),t},ts=(e,t)=>{const n=e.cbuf.length;n-e.cpos<t&&(e.bufs.push(new Uint8Array(e.cbuf.buffer,0,e.cpos)),e.cbuf=new Uint8Array(N(n,t)*2),e.cpos=0)},wt=(e,t)=>{const n=e.cbuf.length;e.cpos===n&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(n*2),e.cpos=0),e.cbuf[e.cpos++]=t},nn=(e,t,n)=>{let r=null;for(let s=0;s<e.bufs.length&&r===null;s++){const i=e.bufs[s];t<i.length?r=i:t-=i.length}r===null&&(r=e.cbuf),r[t]=n},Rn=wt,rr=null,Ii=(e,t)=>{wt(e,t&binary.BITS8),wt(e,t>>>8&binary.BITS8)},Oi=(e,t,n)=>{nn(e,t,n&binary.BITS8),nn(e,t+1,n>>>8&binary.BITS8)},es=(e,t)=>{for(let n=0;n<4;n++)wt(e,t&binary.BITS8),t>>>=8},Ai=(e,t)=>{for(let n=3;n>=0;n--)wt(e,t>>>8*n&binary.BITS8)},sr=(e,t,n)=>{for(let r=0;r<4;r++)nn(e,t+r,n&binary.BITS8),n>>>=8},ut=(e,t)=>{for(;t>rt;)wt(e,qt|rt&t),t=dt(t/128);wt(e,rt&t)},rn=(e,t)=>{const n=Zt(t);for(n&&(t=-t),wt(e,(t>Y?qt:0)|(n?_e:0)|Y&t),t=dt(t/64);t>0;)wt(e,(t>rt?qt:0)|rt&t),t=dt(t/128)},Ln=new Uint8Array(3e4),ns=Ln.length/3,ir=(e,t)=>{if(t.length<ns){const n=en.encodeInto(t,Ln).written||0;ut(e,n);for(let r=0;r<n;r++)wt(e,Ln[r])}else ne(e,Yr(t))},or=(e,t)=>{const n=unescape(encodeURIComponent(t)),r=n.length;ut(e,r);for(let s=0;s<r;s++)wt(e,n.codePointAt(s))},Ze=en&&en.encodeInto?ir:or,rs=(e,t)=>ss(e,string.encodeUtf8(t)),ss=(e,t)=>{for(let n=0;n<t.length;n++){const r=t[n];(r===0||r===1)&&wt(e,1),wt(e,t[n])}wt(e,0)},xi=(e,t)=>sn(e,ae(t)),sn=(e,t)=>{const n=e.cbuf.length,r=e.cpos,s=Ue(n-r,t.length),i=t.length-s;e.cbuf.set(t.subarray(0,s),r),e.cpos+=s,i>0&&(e.bufs.push(e.cbuf),e.cbuf=new Uint8Array(N(n*2,i)),e.cbuf.set(t.subarray(s)),e.cpos=i)},ne=(e,t)=>{ut(e,t.byteLength),sn(e,t)},gn=(e,t)=>{ts(e,t);const n=new DataView(e.cbuf.buffer,e.cpos,t);return e.cpos+=t,n},is=(e,t)=>gn(e,4).setFloat32(0,t,!1),cr=(e,t)=>gn(e,8).setFloat64(0,t,!1),os=(e,t)=>gn(e,8).setBigInt64(0,t,!1),Ui=(e,t)=>gn(e,8).setBigUint64(0,t,!1),lr=new DataView(new ArrayBuffer(4)),cs=e=>(lr.setFloat32(0,e),lr.getFloat32(0)===e),on=(e,t)=>{switch(typeof t){case"string":wt(e,119),Ze(e,t);break;case"number":tr(t)&&Et(t)<=qn?(wt(e,125),rn(e,t)):cs(t)?(wt(e,124),is(e,t)):(wt(e,123),cr(e,t));break;case"bigint":wt(e,122),os(e,t);break;case"object":if(t===null)wt(e,126);else if(kt(t)){wt(e,117),ut(e,t.length);for(let n=0;n<t.length;n++)on(e,t[n])}else if(t instanceof Uint8Array)wt(e,116),ne(e,t);else{wt(e,118);const n=Object.keys(t);ut(e,n.length);for(let r=0;r<n.length;r++){const s=n[r];Ze(e,s),on(e,t[s])}}break;case"boolean":wt(e,t?120:121);break;default:wt(e,127)}};class ar extends be{constructor(t){super(),this.w=t,this.s=null,this.count=0}write(t){this.s===t?this.count++:(this.count>0&&ut(this,this.count-1),this.count=1,this.w(this,t),this.s=t)}}class Mi extends null{constructor(t){super(),this.s=t}write(t){rn(this,t-this.s),this.s=t}}class Pi extends null{constructor(t){super(),this.s=t,this.count=0}write(t){this.s===t&&this.count>0?this.count++:(this.count>0&&ut(this,this.count-1),this.count=1,rn(this,t-this.s),this.s=t)}}const pn=e=>{e.count>0&&(rn(e.encoder,e.count===1?e.s:-e.s),e.count>1&&ut(e.encoder,e.count-2))};class _n{constructor(){this.encoder=new be,this.s=0,this.count=0}write(t){this.s===t?this.count++:(pn(this),this.count=1,this.s=t)}toUint8Array(){return pn(this),ae(this.encoder)}}class Bi{constructor(){this.encoder=new be,this.s=0,this.count=0}write(t){this.s+this.count===t?this.count++:(pn(this),this.count=1,this.s=t)}toUint8Array(){return pn(this),ae(this.encoder)}}const ur=e=>{if(e.count>0){const t=e.diff*2+(e.count===1?0:1);rn(e.encoder,t),e.count>1&&ut(e.encoder,e.count-2)}};class jn{constructor(){this.encoder=new be,this.s=0,this.count=0,this.diff=0}write(t){this.diff===t-this.s?(this.s=t,this.count++):(ur(this),this.count=1,this.diff=t-this.s,this.s=t)}toUint8Array(){return ur(this),ae(this.encoder)}}class ls{constructor(){this.sarr=[],this.s="",this.lensE=new _n}write(t){this.s+=t,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(t.length)}toUint8Array(){const t=new be;return this.sarr.push(this.s),this.s="",Ze(t,this.sarr.join("")),sn(t,this.lensE.toUint8Array()),ae(t)}}const Ni=crypto.subtle,as=crypto.getRandomValues.bind(crypto),us=Math.random,dr=()=>as(new Uint32Array(1))[0],Ri=()=>{const e=getRandomValues(new Uint32Array(8));return(e[0]&binary.BITS21)*(binary.BITS32+1)+(e[1]>>>0)},Li=e=>e[math.floor(us()*e.length)],ds=[1e7]+-1e3+-4e3+-8e3+-1e11,hs=()=>ds.replace(/[018]/g,e=>(e^dr()&15>>e/4).toString(16)),yn=e=>new Promise(e),ji=e=>new Promise(e),Vi=Promise.all.bind(Promise),Fi=e=>Promise.reject(e),zi=e=>Promise.resolve(e),Zi=e=>Promise.resolve(e),Ct=(e,t,n=10)=>yn((r,s)=>{const i=time.getUnixTime(),o=e>0,u=setInterval(()=>{t()?(clearInterval(u),r()):o&&time.getUnixTime()-i>e&&(clearInterval(u),s(new Error("Timeout")))},n)}),Gi=e=>yn((t,n)=>setTimeout(t,e)),Hi=e=>e instanceof Promise||e&&e.then&&e.catch&&e.finally,Ge=e=>new Error(e),ve=()=>{throw Ge("Method unimplemented")},Te=()=>{throw Ge("Unexpected case")},mn=(e,t,n=0)=>{try{for(;n<e.length;n++)e[n](...t)}finally{n<e.length&&mn(e,t,n+1)}},wn=()=>{},$i=e=>e(),hr=e=>e,fs=(e,t)=>e===t,gs=(e,t)=>e===t||e!=null&&t!=null&&e.constructor===t.constructor&&(array.isArray(e)&&array.equalFlat(e,t)||typeof e=="object"&&object.equalFlat(e,t)),bn=(e,t)=>{if(e==null||t==null)return fs(e,t);if(e.constructor!==t.constructor)return!1;if(e===t)return!0;switch(e.constructor){case ArrayBuffer:e=new Uint8Array(e),t=new Uint8Array(t);case Uint8Array:{if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;break}case Set:{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;break}case Map:{if(e.size!==t.size)return!1;for(const n of e.keys())if(!t.has(n)||!bn(e.get(n),t.get(n)))return!1;break}case Object:if(object.length(e)!==object.length(t))return!1;for(const n in e)if(!object.hasProperty(e,n)||!bn(e[n],t[n]))return!1;break;case Array:if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!bn(e[n],t[n]))return!1;break;default:return!1}return!0},ps=(e,t)=>t.includes(e),_s=kt,Wi=e=>e&&e.constructor===String,fr=e=>e!=null&&e.constructor===Number,Ki=(e,t)=>e&&e.constructor===t,Ji=e=>t=>t&&t.constructor===e,gr=e=>e===void 0?null:e;class ys{constructor(){this.map=new Map}setItem(t,n){this.map.set(t,n)}getItem(t){return this.map.get(t)}}let pr=new ys,Vn=!0;try{typeof localStorage!="undefined"&&localStorage&&(pr=localStorage,Vn=!1)}catch(e){}const ms=pr,Yi=e=>Vn||addEventListener("storage",e),Xi=e=>Vn||removeEventListener("storage",e);var Fe=m(14224);const He=typeof Fe!="undefined"&&Fe.release&&/node|io\.js/.test(Fe.release.name)&&Object.prototype.toString.call(typeof Fe!="undefined"?Fe:0)==="[object process]",ws=typeof window!="undefined"&&typeof document!="undefined"&&!He,Qi=typeof navigator!="undefined"?/Mac/.test(navigator.platform):!1;let Se;const bs=[],Fn=()=>{if(Se===void 0)if(He){Se=C();const e=Fe.argv;let t=null;for(let n=0;n<e.length;n++){const r=e[n];r[0]==="-"?(t!==null&&Se.set(t,""),t=r):t!==null?(Se.set(t,r),t=null):bs.push(r)}t!==null&&Se.set(t,"")}else typeof location=="object"?(Se=C(),(location.search||"?").slice(1).split("&").forEach(e=>{if(e.length!==0){const[t,n]=e.split("=");Se.set(`--${Nn(t,"-")}`,n),Se.set(`-${Nn(t,"-")}`,n)}})):Se=C();return Se},zn=e=>Fn().has(e),qi=(e,t)=>Fn().get(e)||t,vn=e=>gr(He?{NODE_ENV:"production",PUBLIC_PATH:"/"}[e.toUpperCase().replaceAll("-","_")]:ms.getItem(e)),vs=e=>Fn().get("--"+e)||vn(e),to=e=>{const t=vs(e);if(t==null)throw new Error(`Expected configuration "${e.toUpperCase().replaceAll("-","_")}"`);return t},no=(e=>zn("--"+e)||vn(e)!==null)("production"),Zn=He&&ps({NODE_ENV:"production",PUBLIC_PATH:"/"}.FORCE_COLOR,["true","1","2"]),Ss=!zn("no-colors")&&(!He||Fe.stdout.isTTY||Zn)&&(!He||zn("color")||Zn||vn("COLORTERM")!==null||(vn("TERM")||"").includes("color"));class _r{constructor(t,n){this.left=t,this.right=n}}const De=(e,t)=>new _r(e,t),ro=(e,t)=>new _r(t,e),Es=(e,t)=>e.forEach(n=>t(n.left,n.right)),so=(e,t)=>e.map(n=>t(n.left,n.right)),he=typeof document!="undefined"?document:{},Gn=e=>he.createElement(e),Cs=()=>he.createDocumentFragment(),io=e=>he.createTextNode(e),yr=typeof DOMParser!="undefined"?new DOMParser:null,oo=(e,t,n)=>e.dispatchEvent(new CustomEvent(t,n)),ks=(e,t)=>(pair.forEach(t,(n,r)=>{r===!1?e.removeAttribute(n):r===!0?e.setAttribute(n,""):e.setAttribute(n,r)}),e),co=(e,t)=>(t.forEach((n,r)=>{e.setAttribute(r,n)}),e),mr=e=>{const t=Cs();for(let n=0;n<e.length;n++)A(t,e[n]);return t},Ts=(e,t)=>(A(e,mr(t)),e),lo=e=>e.remove(),Ds=(e,t,n)=>e.addEventListener(t,n),Is=(e,t,n)=>e.removeEventListener(t,n),ao=(e,t)=>(pair.forEach(t,(n,r)=>Ds(e,n,r)),e),uo=(e,t)=>(pair.forEach(t,(n,r)=>Is(e,n,r)),e),ho=(e,t=[],n=[])=>Ts(ks(Gn(e),t),n),fo=(e,t)=>{const n=Gn("canvas");return n.height=t,n.width=e,n},go=null,Os=e=>`${e.left}:${e.right};`,po=e=>e.map(Os).join(""),As=e=>R(e,(t,n)=>`${n}:${t};`).join(""),_o=(e,t)=>e.querySelector(t),yo=(e,t)=>e.querySelectorAll(t),mo=e=>he.getElementById(e),wr=e=>yr.parseFromString(`<html><body>${e}</body></html>`,"text/html").body,wo=e=>mr(wr(e).childNodes),a=e=>wr(e).firstElementChild,p=(e,t)=>e.replaceWith(t),y=(e,t,n)=>e.insertBefore(t,n),A=(e,t)=>e.appendChild(t),it=he.ELEMENT_NODE,bt=he.TEXT_NODE,Tt=he.CDATA_SECTION_NODE,et=he.COMMENT_NODE,Dt=he.DOCUMENT_NODE,fe=he.DOCUMENT_TYPE_NODE,ue=he.DOCUMENT_FRAGMENT_NODE,Sn=(e,t)=>e.nodeType===t,br=(e,t)=>{let n=t.parentNode;for(;n&&n!==e;)n=n.parentNode;return n===e},ge=Symbol,xs=e=>typeof e=="symbol",Ea=()=>new Date,bo=Date.now,Ca=e=>{if(e<6e4){const i=metric.prefix(e,-1);return math.round(i.n*100)/100+i.prefix+"s"}e=math.floor(e/1e3);const t=e%60,n=math.floor(e/60)%60,r=math.floor(e/3600)%24,s=math.floor(e/86400);return s>0?s+"d"+(r>0||n>30?" "+(n>30?r+1:r)+"h":""):r>0?r+"h"+(n>0||t>30?" "+(t>30?n+1:n)+"min":""):n+"min"+(t>0?" "+t+"s":"")},vo=ge(),So=ge(),Eo=ge(),zc=ge(),Co=ge(),ko=ge(),To=ge(),vr=ge(),Do=ge(),Zc=e=>{var s;e.length===1&&((s=e[0])==null?void 0:s.constructor)===Function&&(e=e[0]());const t=[],n=[];let r=0;for(;r<e.length;r++){const i=e[r];i===void 0?t.push("undefined"):i.constructor===String||i.constructor===Number?t.push(i):i.constructor===Object&&n.push(JSON.stringify(i))}return n},Io=[Co,To,vr,Eo];let Us=0,Oo=bo();const ka=(e,t)=>{const n=Io[Us],r=env.getVariable("log"),s=r!==null&&(r==="*"||r==="true"||new RegExp(r,"gi").test(t));return Us=(Us+1)%Io.length,t+=": ",s?(...i)=>{var u;i.length===1&&((u=i[0])==null?void 0:u.constructor)===Function&&(i=i[0]());const o=time.getUnixTime(),c=o-Oo;Oo=o,e(n,t,Do,...i.map(h=>{switch(h!=null&&h.constructor===Uint8Array&&(h=Array.from(h)),typeof h){case"string":case"symbol":return h;default:return json.stringify(h)}}),n," +"+c+"ms")}:func.nop},Ao={[vo]:De("font-weight","bold"),[So]:De("font-weight","normal"),[Eo]:De("color","blue"),[Co]:De("color","green"),[zc]:De("color","grey"),[ko]:De("color","red"),[To]:De("color","purple"),[vr]:De("color","orange"),[Do]:De("color","black")},Sr=Ss?e=>{var o;e.length===1&&((o=e[0])==null?void 0:o.constructor)===Function&&(e=e[0]());const t=[],n=[],r=C();let s=[],i=0;for(;i<e.length;i++){const c=e[i],u=Ao[c];if(u!==void 0)r.set(u.left,u.right);else{if(c===void 0)break;if(c.constructor===String||c.constructor===Number){const h=As(r);i>0||h.length>0?(t.push("%c"+c),n.push(h)):t.push(c)}else break}}for(i>0&&(s=n,s.unshift(t.join("")));i<e.length;i++){const c=e[i];c instanceof Symbol||s.push(c)}return s}:Zc,xo=(...e)=>{console.log(...Sr(e)),Pe.forEach(t=>t.print(e))},Gc=(...e)=>{console.warn(...Sr(e)),e.unshift(vr),Pe.forEach(t=>t.print(e))},Da=e=>{console.error(e),Pe.forEach(t=>t.printError(e))},Uo=(e,t)=>{env.isBrowser&&console.log("%c                      ",`font-size: ${t}px; background-size: contain; background-repeat: no-repeat; background-image: url(${e})`),Pe.forEach(n=>n.printImg(e,t))},Ia=(e,t)=>Uo(`data:image/gif;base64,${e}`,t),Oa=(...e)=>{console.group(...Sr(e)),Pe.forEach(t=>t.group(e))},Aa=(...e)=>{console.groupCollapsed(...Sr(e)),Pe.forEach(t=>t.groupCollapsed(e))},xa=()=>{console.groupEnd(),Pe.forEach(e=>e.groupEnd())},Ua=e=>Pe.forEach(t=>t.printDom(e())),Ma=(e,t)=>Uo(e.toDataURL(),t),Pe=P(),Mo=e=>{const t=[],n=new Map;let r=0;for(;r<e.length;r++){let s=e[r];const i=Ao[s];if(i!==void 0)n.set(i.left,i.right);else if(s===void 0&&(s="undefined "),s.constructor===String||s.constructor===Number){const o=dom.element("span",[pair.create("style",dom.mapToStyleString(n))],[dom.text(s.toString())]);o.innerHTML===""&&(o.innerHTML="&nbsp;"),t.push(o)}else break}for(;r<e.length;r++){let s=e[r];s instanceof Symbol||(s.constructor!==String&&s.constructor!==Number&&(s=" "+json.stringify(s)+" "),t.push(dom.element("span",[],[dom.text(s)])))}return t},Po="font-family:monospace;border-bottom:1px solid #e2e2e2;padding:2px;";class Hc{constructor(t){this.dom=t,this.ccontainer=this.dom,this.depth=0,Pe.add(this)}group(t,n=!1){eventloop.enqueue(()=>{const r=dom.element("span",[pair.create("hidden",n),pair.create("style","color:grey;font-size:120%;")],[dom.text("\u25BC")]),s=dom.element("span",[pair.create("hidden",!n),pair.create("style","color:grey;font-size:125%;")],[dom.text("\u25B6")]),i=dom.element("div",[pair.create("style",`${Po};padding-left:${this.depth*10}px`)],[r,s,dom.text(" ")].concat(Mo(t))),o=dom.element("div",[pair.create("hidden",n)]),c=dom.element("div",[],[i,o]);dom.append(this.ccontainer,[c]),this.ccontainer=o,this.depth++,dom.addEventListener(i,"click",u=>{o.toggleAttribute("hidden"),r.toggleAttribute("hidden"),s.toggleAttribute("hidden")})})}groupCollapsed(t){this.group(t,!0)}groupEnd(){eventloop.enqueue(()=>{this.depth>0&&(this.depth--,this.ccontainer=this.ccontainer.parentElement.parentElement)})}print(t){eventloop.enqueue(()=>{dom.append(this.ccontainer,[dom.element("div",[pair.create("style",`${Po};padding-left:${this.depth*10}px`)],Mo(t))])})}printError(t){this.print([common.RED,common.BOLD,t.toString()])}printImg(t,n){eventloop.enqueue(()=>{dom.append(this.ccontainer,[dom.element("img",[pair.create("src",t),pair.create("height",`${math.round(n*1.5)}px`)])])})}printDom(t){eventloop.enqueue(()=>{dom.append(this.ccontainer,[t])})}destroy(){eventloop.enqueue(()=>{Pe.delete(this)})}}const Pa=e=>new Hc(e),Ba=e=>common.createModuleLogger(xo,e),Na=(e,t)=>({[Symbol.iterator](){return this},next(){const n=e.next();return{value:n.done?void 0:t(n.value),done:n.done}}}),Bo=e=>({[Symbol.iterator](){return this},next:e}),$c=(e,t)=>Bo(()=>{let n;do n=e.next();while(!n.done&&!t(n.value));return n}),Ms=(e,t)=>Bo(()=>{const{done:n,value:r}=e.next();return{done:n,value:n?void 0:t(r)}}),Ra=()=>Object.create(null),Wc=Object.assign,Kc=Object.keys,Jc=(e,t)=>{for(const n in e)t(e[n],n)},La=(e,t)=>{const n=[];for(const r in e)n.push(t(e[r],r));return n},No=e=>Kc(e).length,ja=(e,t)=>{for(const n in e)if(t(e[n],n))return!0;return!1},Yc=e=>{for(const t in e)return!1;return!0},Xc=(e,t)=>{for(const n in e)if(!t(e[n],n))return!1;return!0},Qc=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),qc=(e,t)=>e===t||No(e)===No(t)&&Xc(e,(n,r)=>(n!==void 0||Qc(t,r))&&t[r]===n);class Va extends null{constructor(t,n){super(),this.doc=t,this.awareness=n}}class Ps{constructor(t,n){this.clock=t,this.len=n}}class En{constructor(){this.clients=new Map}}const Cn=(e,t,n)=>t.clients.forEach((r,s)=>{const i=e.doc.store.clients.get(s);for(let o=0;o<r.length;o++){const c=r[o];ec(e,i,c.clock,c.len,n)}}),tl=(e,t)=>{let n=0,r=e.length-1;for(;n<=r;){const s=dt((n+r)/2),i=e[s],o=i.clock;if(o<=t){if(t<o+i.len)return s;n=s+1}else r=s-1}return null},kn=(e,t)=>{const n=e.clients.get(t.client);return n!==void 0&&tl(n,t.clock)!==null},Bs=e=>{e.clients.forEach(t=>{t.sort((s,i)=>s.clock-i.clock);let n,r;for(n=1,r=1;n<t.length;n++){const s=t[r-1],i=t[n];s.clock+s.len>=i.clock?s.len=N(s.len,i.clock+i.len-s.clock):(r<n&&(t[r]=i),r++)}t.length=r})},Tn=e=>{const t=new En;for(let n=0;n<e.length;n++)e[n].clients.forEach((r,s)=>{if(!t.clients.has(s)){const i=r.slice();for(let o=n+1;o<e.length;o++)ht(i,e[o].clients.get(s)||[]);t.clients.set(s,i)}});return Bs(t),t},Hn=(e,t,n,r)=>{S(e.clients,t,()=>[]).push(new Ps(n,r))},Ns=()=>new En,Ro=e=>{const t=Ns();return e.clients.forEach((n,r)=>{const s=[];for(let i=0;i<n.length;i++){const o=n[i];if(o.deleted){const c=o.id.clock;let u=o.length;if(i+1<n.length)for(let h=n[i+1];i+1<n.length&&h.deleted;h=n[++i+1])u+=h.length;s.push(new Ps(c,u))}}s.length>0&&t.clients.set(r,s)}),t},Be=(e,t)=>{ut(e.restEncoder,t.clients.size),pt(t.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{e.resetDsCurVal(),ut(e.restEncoder,n);const s=r.length;ut(e.restEncoder,s);for(let i=0;i<s;i++){const o=r[i];e.writeDsClock(o.clock),e.writeDsLen(o.len)}})},ze=e=>{const t=new En,n=decoding.readVarUint(e.restDecoder);for(let r=0;r<n;r++){e.resetDsCurVal();const s=decoding.readVarUint(e.restDecoder),i=decoding.readVarUint(e.restDecoder);if(i>0){const o=map.setIfUndefined(t.clients,s,()=>[]);for(let c=0;c<i;c++)o.push(new Ps(e.readDsClock(),e.readDsLen()))}}return t},Lo=(e,t,n)=>{const r=new En,s=decoding.readVarUint(e.restDecoder);for(let i=0;i<s;i++){e.resetDsCurVal();const o=decoding.readVarUint(e.restDecoder),c=decoding.readVarUint(e.restDecoder),u=n.clients.get(o)||[],h=xt(n,o);for(let d=0;d<c;d++){const _=e.readDsClock(),b=_+e.readDsLen();if(_<h){h<b&&Hn(r,o,h,b-h);let v=Oe(u,_),D=u[v];for(!D.deleted&&D.id.clock<_&&(u.splice(v+1,0,jr(t,D,_-D.id.clock)),v++);v<u.length&&(D=u[v++],D.id.clock<b);)D.deleted||(b<D.id.clock+D.length&&u.splice(v,0,jr(t,D,b-D.id.clock)),D.delete(t))}else Hn(r,o,_,b-_)}}if(r.clients.size>0){const i=new Ne;return encoding.writeVarUint(i.restEncoder,0),Be(i,r),i.toUint8Array()}return null},el=(e,t)=>{if(e.clients.size!==t.clients.size)return!1;for(const[n,r]of e.clients.entries()){const s=t.clients.get(n);if(s===void 0||r.length!==s.length)return!1;for(let i=0;i<r.length;i++){const o=r[i],c=s[i];if(o.clock!==c.clock||o.len!==c.len)return!1}}return!0},jo=dr;class cn extends Rt{constructor({guid:t=hs(),collectionid:n=null,gc:r=!0,gcFilter:s=()=>!0,meta:i=null,autoLoad:o=!1,shouldLoad:c=!0}={}){super(),this.gc=r,this.gcFilter=s,this.clientID=jo(),this.guid=t,this.collectionid=n,this.share=new Map,this.store=new Qo,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=c,this.autoLoad=o,this.meta=i,this.isLoaded=!1,this.isSynced=!1,this.whenLoaded=yn(h=>{this.on("load",()=>{this.isLoaded=!0,h(this)})});const u=()=>yn(h=>{const d=_=>{(_===void 0||_===!0)&&(this.off("sync",d),h())};this.on("sync",d)});this.on("sync",h=>{h===!1&&this.isSynced&&(this.whenSynced=u()),this.isSynced=h===void 0||h===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[])}),this.whenSynced=u()}load(){const t=this._item;t!==null&&!this.shouldLoad&&vt(t.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(pt(this.subdocs).map(t=>t.guid))}transact(t,n=null){return vt(this,t,n)}get(t,n=Kt){const r=S(this.share,t,()=>{const i=new n;return i._integrate(this,null),i}),s=r.constructor;if(n!==Kt&&s!==n)if(s===Kt){const i=new n;i._map=r._map,r._map.forEach(o=>{for(;o!==null;o=o.left)o.parent=i}),i._start=r._start;for(let o=i._start;o!==null;o=o.right)o.parent=i;return i._length=r._length,this.share.set(t,i),i._integrate(this,null),i}else throw new Error(`Type with the name ${t} has already been defined with a different constructor`);return r}getArray(t=""){return this.get(t,Je)}getText(t=""){return this.get(t,xn)}getMap(t=""){return this.get(t,an)}getXmlElement(t=""){return this.get(t,dn)}getXmlFragment(t=""){return this.get(t,un)}toJSON(){const t={};return this.share.forEach((n,r)=>{t[r]=n.toJSON()}),t}destroy(){pt(this.subdocs).forEach(n=>n.destroy());const t=this._item;if(t!==null){this._item=null;const n=t.content;n.doc=new cn(qs(Vr({guid:this.guid},n.opts),{shouldLoad:!1})),n.doc._item=t,vt(t.parent.doc,r=>{const s=n.doc;t.deleted||r.subdocsAdded.add(s),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}on(t,n){super.on(t,n)}off(t,n){super.off(t,n)}}class Er{constructor(t){this.restDecoder=t}resetDsCurVal(){}readDsClock(){return decoding.readVarUint(this.restDecoder)}readDsLen(){return decoding.readVarUint(this.restDecoder)}}class Ie extends null{readLeftID(){return Z(decoding.readVarUint(this.restDecoder),decoding.readVarUint(this.restDecoder))}readRightID(){return Z(decoding.readVarUint(this.restDecoder),decoding.readVarUint(this.restDecoder))}readClient(){return decoding.readVarUint(this.restDecoder)}readInfo(){return decoding.readUint8(this.restDecoder)}readString(){return decoding.readVarString(this.restDecoder)}readParentInfo(){return decoding.readVarUint(this.restDecoder)===1}readTypeRef(){return decoding.readVarUint(this.restDecoder)}readLen(){return decoding.readVarUint(this.restDecoder)}readAny(){return decoding.readAny(this.restDecoder)}readBuf(){return buffer.copyUint8Array(decoding.readVarUint8Array(this.restDecoder))}readJSON(){return JSON.parse(decoding.readVarString(this.restDecoder))}readKey(){return decoding.readVarString(this.restDecoder)}}class nl{constructor(t){this.dsCurrVal=0,this.restDecoder=t}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=decoding.readVarUint(this.restDecoder),this.dsCurrVal}readDsLen(){const t=decoding.readVarUint(this.restDecoder)+1;return this.dsCurrVal+=t,t}}class Ee extends null{constructor(t){super(t),this.keys=[],decoding.readVarUint(t),this.keyClockDecoder=new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(t)),this.clientDecoder=new decoding.UintOptRleDecoder(decoding.readVarUint8Array(t)),this.leftClockDecoder=new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(t)),this.rightClockDecoder=new decoding.IntDiffOptRleDecoder(decoding.readVarUint8Array(t)),this.infoDecoder=new decoding.RleDecoder(decoding.readVarUint8Array(t),decoding.readUint8),this.stringDecoder=new decoding.StringDecoder(decoding.readVarUint8Array(t)),this.parentInfoDecoder=new decoding.RleDecoder(decoding.readVarUint8Array(t),decoding.readUint8),this.typeRefDecoder=new decoding.UintOptRleDecoder(decoding.readVarUint8Array(t)),this.lenDecoder=new decoding.UintOptRleDecoder(decoding.readVarUint8Array(t))}readLeftID(){return new In(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new In(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return decoding.readAny(this.restDecoder)}readBuf(){return decoding.readVarUint8Array(this.restDecoder)}readJSON(){return decoding.readAny(this.restDecoder)}readKey(){const t=this.keyClockDecoder.read();if(t<this.keys.length)return this.keys[t];{const n=this.stringDecoder.read();return this.keys.push(n),n}}}class Dn{constructor(){this.restEncoder=fn()}toUint8Array(){return ae(this.restEncoder)}resetDsCurVal(){}writeDsClock(t){ut(this.restEncoder,t)}writeDsLen(t){ut(this.restEncoder,t)}}class ln extends Dn{writeLeftID(t){ut(this.restEncoder,t.client),ut(this.restEncoder,t.clock)}writeRightID(t){ut(this.restEncoder,t.client),ut(this.restEncoder,t.clock)}writeClient(t){ut(this.restEncoder,t)}writeInfo(t){Rn(this.restEncoder,t)}writeString(t){Ze(this.restEncoder,t)}writeParentInfo(t){ut(this.restEncoder,t?1:0)}writeTypeRef(t){ut(this.restEncoder,t)}writeLen(t){ut(this.restEncoder,t)}writeAny(t){on(this.restEncoder,t)}writeBuf(t){ne(this.restEncoder,t)}writeJSON(t){Ze(this.restEncoder,JSON.stringify(t))}writeKey(t){Ze(this.restEncoder,t)}}class Cr{constructor(){this.restEncoder=fn(),this.dsCurrVal=0}toUint8Array(){return ae(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(t){const n=t-this.dsCurrVal;this.dsCurrVal=t,ut(this.restEncoder,n)}writeDsLen(t){t===0&&Te(),ut(this.restEncoder,t-1),this.dsCurrVal+=t}}class Ne extends Cr{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new jn,this.clientEncoder=new _n,this.leftClockEncoder=new jn,this.rightClockEncoder=new jn,this.infoEncoder=new ar(Rn),this.stringEncoder=new ls,this.parentInfoEncoder=new ar(Rn),this.typeRefEncoder=new _n,this.lenEncoder=new _n}toUint8Array(){const t=fn();return ut(t,0),ne(t,this.keyClockEncoder.toUint8Array()),ne(t,this.clientEncoder.toUint8Array()),ne(t,this.leftClockEncoder.toUint8Array()),ne(t,this.rightClockEncoder.toUint8Array()),ne(t,ae(this.infoEncoder)),ne(t,this.stringEncoder.toUint8Array()),ne(t,ae(this.parentInfoEncoder)),ne(t,this.typeRefEncoder.toUint8Array()),ne(t,this.lenEncoder.toUint8Array()),sn(t,ae(this.restEncoder)),ae(t)}writeLeftID(t){this.clientEncoder.write(t.client),this.leftClockEncoder.write(t.clock)}writeRightID(t){this.clientEncoder.write(t.client),this.rightClockEncoder.write(t.clock)}writeClient(t){this.clientEncoder.write(t)}writeInfo(t){this.infoEncoder.write(t)}writeString(t){this.stringEncoder.write(t)}writeParentInfo(t){this.parentInfoEncoder.write(t?1:0)}writeTypeRef(t){this.typeRefEncoder.write(t)}writeLen(t){this.lenEncoder.write(t)}writeAny(t){on(this.restEncoder,t)}writeBuf(t){ne(this.restEncoder,t)}writeJSON(t){on(this.restEncoder,t)}writeKey(t){const n=this.keyMap.get(t);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(t)):this.keyClockEncoder.write(n)}}const rl=(e,t,n,r)=>{r=N(r,t[0].id.clock);const s=Oe(t,r);ut(e.restEncoder,t.length-s),e.writeClient(n),ut(e.restEncoder,r);const i=t[s];i.write(e,r-i.id.clock);for(let o=s+1;o<t.length;o++)t[o].write(e,0)},Rs=(e,t,n)=>{const r=new Map;n.forEach((s,i)=>{xt(t,i)>s&&r.set(i,s)}),$n(t).forEach((s,i)=>{n.has(i)||r.set(i,0)}),ut(e.restEncoder,r.size),pt(r.entries()).sort((s,i)=>i[0]-s[0]).forEach(([s,i])=>{rl(e,t.clients.get(s),s,i)})},sl=(e,t)=>{const n=map.create(),r=decoding.readVarUint(e.restDecoder);for(let s=0;s<r;s++){const i=decoding.readVarUint(e.restDecoder),o=new Array(i),c=e.readClient();let u=decoding.readVarUint(e.restDecoder);n.set(c,{i:0,refs:o});for(let h=0;h<i;h++){const d=e.readInfo();switch(binary.BITS5&d){case 0:{const _=e.readLen();o[h]=new pe(Z(c,u),_),u+=_;break}case 10:{const _=decoding.readVarUint(e.restDecoder);o[h]=new de(Z(c,u),_),u+=_;break}default:{const _=(d&(binary.BIT7|binary.BIT8))===0,b=new gt(Z(c,u),null,(d&binary.BIT8)===binary.BIT8?e.readLeftID():null,null,(d&binary.BIT7)===binary.BIT7?e.readRightID():null,_?e.readParentInfo()?t.get(e.readString()):e.readLeftID():null,_&&(d&binary.BIT6)===binary.BIT6?e.readString():null,Bc(e,d));o[h]=b,u+=b.length}}}}return n},il=(e,t,n)=>{const r=[];let s=array.from(n.keys()).sort((v,D)=>v-D);if(s.length===0)return null;const i=()=>{if(s.length===0)return null;let v=n.get(s[s.length-1]);for(;v.refs.length===v.i;)if(s.pop(),s.length>0)v=n.get(s[s.length-1]);else return null;return v};let o=i();if(o===null)return null;const c=new Qo,u=new Map,h=(v,D)=>{const W=u.get(v);(W==null||W>D)&&u.set(v,D)};let d=o.refs[o.i++];const _=new Map,b=()=>{for(const v of r){const D=v.id.client,W=n.get(D);W?(W.i--,c.clients.set(D,W.refs.slice(W.i)),n.delete(D),W.i=0,W.refs=[]):c.clients.set(D,[v]),s=s.filter(At=>At!==D)}r.length=0};for(;;){if(d.constructor!==de){const D=map.setIfUndefined(_,d.id.client,()=>xt(t,d.id.client))-d.id.clock;if(D<0)r.push(d),h(d.id.client,d.id.clock-1),b();else{const W=d.getMissing(e,t);if(W!==null){r.push(d);const At=n.get(W)||{refs:[],i:0};if(At.refs.length===At.i)h(W,xt(t,W)),b();else{d=At.refs[At.i++];continue}}else(D===0||D<d.length)&&(d.integrate(e,D),_.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(o!==null&&o.i<o.refs.length)d=o.refs[o.i++];else{if(o=i(),o===null)break;d=o.refs[o.i++]}}if(c.clients.size>0){const v=new Ne;return Rs(v,c,new Map),encoding.writeVarUint(v.restEncoder,0),{missing:u,update:v.toUint8Array()}}return null},ol=(e,t)=>Rs(e,t.doc.store,t.beforeState),Vo=(e,t,n,r=new Ee(e))=>vt(t,s=>{s.local=!1;let i=!1;const o=s.doc,c=o.store,u=sl(r,o),h=il(s,c,u),d=c.pendingStructs;if(d){for(const[b,v]of d.missing)if(v<xt(c,b)){i=!0;break}if(h){for(const[b,v]of h.missing){const D=d.missing.get(b);(D==null||D>v)&&d.missing.set(b,v)}d.update=Or([d.update,h.update])}}else c.pendingStructs=h;const _=Lo(r,s,c);if(c.pendingDs){const b=new Ee(decoding.createDecoder(c.pendingDs));decoding.readVarUint(b.restDecoder);const v=Lo(b,s,c);_&&v?c.pendingDs=Or([_,v]):c.pendingDs=_||v}else c.pendingDs=_;if(i){const b=c.pendingStructs.update;c.pendingStructs=null,Ls(s.doc,b)}},n,!1),Fa=(e,t,n)=>Vo(e,t,n,new Ie(e)),Ls=(e,t,n,r=Ee)=>{const s=decoding.createDecoder(t);Vo(s,e,n,new r(s))},za=(e,t,n)=>Ls(e,t,n,Ie),cl=(e,t,n=new Map)=>{Rs(e,t.store,n),Be(e,Ro(t.store))},ll=(e,t=new Uint8Array([0]),n=new Ne)=>{const r=zo(t);cl(n,e,r);const s=[n.toUint8Array()];if(e.store.pendingDs&&s.push(e.store.pendingDs),e.store.pendingStructs&&s.push(ac(e.store.pendingStructs.update,t)),s.length>1){if(n.constructor===ln)return Tl(s.map((i,o)=>o===0?i:Al(i)));if(n.constructor===Ne)return Or(s)}return s[0]},Za=(e,t)=>ll(e,t,new ln),Fo=e=>{const t=new Map,n=decoding.readVarUint(e.restDecoder);for(let r=0;r<n;r++){const s=decoding.readVarUint(e.restDecoder),i=decoding.readVarUint(e.restDecoder);t.set(s,i)}return t},zo=e=>Fo(new Er(decoding.createDecoder(e))),js=(e,t)=>(encoding.writeVarUint(e.restEncoder,t.size),array.from(t.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{encoding.writeVarUint(e.restEncoder,n),encoding.writeVarUint(e.restEncoder,r)}),e),al=(e,t)=>js(e,$n(t.store)),ul=(e,t=new Cr)=>(e instanceof Map?js(t,e):al(t,e),t.toUint8Array()),Ga=e=>ul(e,new Dn);class dl{constructor(){this.l=[]}}const Zo=()=>new dl,Go=(e,t)=>e.l.push(t),Ho=(e,t)=>{const n=e.l,r=n.length;e.l=n.filter(s=>t!==s),r===e.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},$o=(e,t,n)=>mn(e.l,[t,n]);class In{constructor(t,n){this.client=t,this.clock=n}}const On=(e,t)=>e===t||e!==null&&t!==null&&e.client===t.client&&e.clock===t.clock,Z=(e,t)=>new In(e,t),Wo=(e,t)=>{encoding.writeVarUint(e,t.client),encoding.writeVarUint(e,t.clock)},Ko=e=>Z(decoding.readVarUint(e),decoding.readVarUint(e)),Jo=e=>{for(const[t,n]of e.doc.share.entries())if(n===e)return t;throw Te()},kr=(e,t)=>{for(;t!==null;){if(t.parent===e)return!0;t=t.parent._item}return!1},Ha=e=>{const t=[];let n=e._start;for(;n;)t.push(n),n=n.right;console.log("Children: ",t),console.log("Children content: ",t.filter(r=>!r.deleted).map(r=>r.content))};class $a{constructor(t,n=t.getMap("users")){const r=new Map;this.yusers=n,this.doc=t,this.clients=new Map,this.dss=r;const s=(i,o)=>{const c=i.get("ds"),u=i.get("ids"),h=d=>this.clients.set(d,o);c.observe(d=>{d.changes.added.forEach(_=>{_.content.getContent().forEach(b=>{b instanceof Uint8Array&&this.dss.set(o,Tn([this.dss.get(o)||Ns(),ze(new Er(decoding.createDecoder(b)))]))})})}),this.dss.set(o,Tn(c.map(d=>ze(new Er(decoding.createDecoder(d)))))),u.observe(d=>d.changes.added.forEach(_=>_.content.getContent().forEach(h))),u.forEach(h)};n.observe(i=>{i.keysChanged.forEach(o=>s(n.get(o),o))}),n.forEach(s)}setUserMapping(t,n,r,{filter:s=()=>!0}={}){const i=this.yusers;let o=i.get(r);o||(o=new an,o.set("ids",new Je),o.set("ds",new Je),i.set(r,o)),o.get("ids").push([n]),i.observe(c=>{setTimeout(()=>{const u=i.get(r);if(u!==o){o=u,this.clients.forEach((_,b)=>{r===_&&o.get("ids").push([b])});const h=new Dn,d=this.dss.get(r);d&&(Be(h,d),o.get("ds").push([h.toUint8Array()]))}},0)}),t.on("afterTransaction",c=>{setTimeout(()=>{const u=o.get("ds"),h=c.deleteSet;if(c.local&&h.clients.size>0&&s(c,h)){const d=new Dn;Be(d,h),u.push([d.toUint8Array()])}})})}getUserByClientId(t){return this.clients.get(t)||null}getUserByDeletedId(t){for(const[n,r]of this.dss.entries())if(kn(r,t))return n;return null}}class Vs{constructor(t,n,r,s=0){this.type=t,this.tname=n,this.item=r,this.assoc=s}}const Wa=e=>{const t={};return e.type&&(t.type=e.type),e.tname&&(t.tname=e.tname),e.item&&(t.item=e.item),e.assoc!=null&&(t.assoc=e.assoc),t},Ka=e=>new Vs(e.type==null?null:Z(e.type.client,e.type.clock),e.tname||null,e.item==null?null:Z(e.item.client,e.item.clock),e.assoc==null?0:e.assoc);class hl{constructor(t,n,r=0){this.type=t,this.index=n,this.assoc=r}}const fl=(e,t,n=0)=>new hl(e,t,n),Tr=(e,t,n)=>{let r=null,s=null;return e._item===null?s=Jo(e):r=Z(e._item.id.client,e._item.id.clock),new Vs(r,s,t,n)},Ja=(e,t,n=0)=>{let r=e._start;if(n<0){if(t===0)return Tr(e,null,n);t--}for(;r!==null;){if(!r.deleted&&r.countable){if(r.length>t)return Tr(e,Z(r.id.client,r.id.clock+t),n);t-=r.length}if(r.right===null&&n<0)return Tr(e,r.lastId,n);r=r.right}return Tr(e,null,n)},gl=(e,t)=>{const{type:n,tname:r,item:s,assoc:i}=t;if(s!==null)encoding.writeVarUint(e,0),Wo(e,s);else if(r!==null)encoding.writeUint8(e,1),encoding.writeVarString(e,r);else if(n!==null)encoding.writeUint8(e,2),Wo(e,n);else throw error.unexpectedCase();return encoding.writeVarInt(e,i),e},Ya=e=>{const t=encoding.createEncoder();return gl(t,e),encoding.toUint8Array(t)},pl=e=>{let t=null,n=null,r=null;switch(decoding.readVarUint(e)){case 0:r=Ko(e);break;case 1:n=decoding.readVarString(e);break;case 2:t=Ko(e)}const s=decoding.hasContent(e)?decoding.readVarInt(e):0;return new Vs(t,n,r,s)},Xa=e=>pl(decoding.createDecoder(e)),Qa=(e,t)=>{const n=t.store,r=e.item,s=e.type,i=e.tname,o=e.assoc;let c=null,u=0;if(r!==null){if(xt(n,r.client)<=r.clock)return null;const h=Xs(n,r),d=h.item;if(!(d instanceof gt))return null;if(c=d.parent,c._item===null||!c._item.deleted){u=d.deleted||!d.countable?0:h.diff+(o>=0?0:1);let _=d.left;for(;_!==null;)!_.deleted&&_.countable&&(u+=_.length),_=_.left}}else{if(i!==null)c=t.get(i);else if(s!==null){if(xt(n,s.client)<=s.clock)return null;const{item:h}=Xs(n,s);if(h instanceof gt&&h.content instanceof xe)c=h.content.type;else return null}else throw error.unexpectedCase();o>=0?u=c._length:u=0}return fl(c,u,e.assoc)},qa=(e,t)=>e===t||e!==null&&t!==null&&e.tname===t.tname&&On(e.item,t.item)&&On(e.type,t.type)&&e.assoc===t.assoc;class Yo{constructor(t,n){this.ds=t,this.sv=n}}const tu=(e,t)=>{const n=e.ds.clients,r=t.ds.clients,s=e.sv,i=t.sv;if(s.size!==i.size||n.size!==r.size)return!1;for(const[o,c]of s.entries())if(i.get(o)!==c)return!1;for(const[o,c]of n.entries()){const u=r.get(o)||[];if(c.length!==u.length)return!1;for(let h=0;h<c.length;h++){const d=c[h],_=u[h];if(d.clock!==_.clock||d.len!==_.len)return!1}}return!0},_l=(e,t=new Cr)=>(Be(t,e.ds),js(t,e.sv),t.toUint8Array()),eu=e=>_l(e,new Dn),yl=(e,t=new nl(decoding.createDecoder(e)))=>new Yo(ze(t),Fo(t)),nu=e=>yl(e,new Er(decoding.createDecoder(e))),Xo=(e,t)=>new Yo(e,t),ru=Xo(Ns(),new Map),su=e=>Xo(Ro(e.store),$n(e.store)),$e=(e,t)=>t===void 0?!e.deleted:t.sv.has(e.id.client)&&(t.sv.get(e.id.client)||0)>e.id.clock&&!kn(t.ds,e.id),Fs=(e,t)=>{const n=S(e.meta,Fs,P),r=e.doc.store;n.has(t)||(t.sv.forEach((s,i)=>{s<xt(r,i)&&re(e,Z(i,s))}),Cn(e,t.ds,s=>{}),n.add(t))},iu=(e,t,n=new cn)=>{if(e.gc)throw new Error("Garbage-collection must be disabled in `originDoc`!");const{sv:r,ds:s}=t,i=new Ne;return e.transact(o=>{let c=0;r.forEach(u=>{u>0&&c++}),encoding.writeVarUint(i.restEncoder,c);for(const[u,h]of r){if(h===0)continue;h<xt(e.store,u)&&re(o,Z(u,h));const d=e.store.clients.get(u)||[],_=Oe(d,h-1);encoding.writeVarUint(i.restEncoder,_+1),i.writeClient(u),encoding.writeVarUint(i.restEncoder,0);for(let b=0;b<=_;b++)d[b].write(i,0)}Be(i,s)}),Ls(n,i.toUint8Array(),"snapshot"),n},ml=(e,t,n=Ee)=>{const r=new n(decoding.createDecoder(t)),s=new We(r,!1);for(let o=s.curr;o!==null;o=s.next())if((e.sv.get(o.id.client)||0)<o.id.clock+o.length)return!1;const i=Tn([e.ds,ze(r)]);return el(e.ds,i)},ou=(e,t)=>ml(e,t,Ie);class Qo{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}}const $n=e=>{const t=new Map;return e.clients.forEach((n,r)=>{const s=n[n.length-1];t.set(r,s.id.clock+s.length)}),t},xt=(e,t)=>{const n=e.clients.get(t);if(n===void 0)return 0;const r=n[n.length-1];return r.id.clock+r.length},qo=(e,t)=>{let n=e.clients.get(t.id.client);if(n===void 0)n=[],e.clients.set(t.id.client,n);else{const r=n[n.length-1];if(r.id.clock+r.length!==t.id.clock)throw Te()}n.push(t)},Oe=(e,t)=>{let n=0,r=e.length-1,s=e[r],i=s.id.clock;if(i===t)return r;let o=dt(t/(i+s.length-1)*r);for(;n<=r;){if(s=e[o],i=s.id.clock,i<=t){if(t<i+s.length)return o;n=o+1}else r=o-1;o=dt((n+r)/2)}throw Te()},Dr=(e,t)=>{const n=e.clients.get(t.client);return n[Oe(n,t.clock)]},zs=(e,t,n)=>{const r=Oe(t,n),s=t[r];return s.id.clock<n&&s instanceof gt?(t.splice(r+1,0,jr(e,s,n-s.id.clock)),r+1):r},re=(e,t)=>{const n=e.doc.store.clients.get(t.client);return n[zs(e,n,t.clock)]},tc=(e,t,n)=>{const r=t.clients.get(n.client),s=Oe(r,n.clock),i=r[s];return n.clock!==i.id.clock+i.length-1&&i.constructor!==pe&&r.splice(s+1,0,jr(e,i,n.clock-i.id.clock+1)),i},wl=(e,t,n)=>{const r=e.clients.get(t.id.client);r[Oe(r,t.id.clock)]=n},ec=(e,t,n,r,s)=>{if(r===0)return;const i=n+r;let o=zs(e,t,n),c;do c=t[o++],i<c.id.clock+c.length&&zs(e,t,i),s(c);while(o<t.length&&t[o].id.clock<i)};class bl{constructor(t,n,r){this.doc=t,this.deleteSet=new En,this.beforeState=$n(t.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}}const nc=(e,t)=>t.deleteSet.clients.size===0&&!I(t.afterState,(n,r)=>t.beforeState.get(r)!==n)?!1:(Bs(t.deleteSet),ol(e,t),Be(e,t.deleteSet),!0),rc=(e,t,n)=>{const r=t._item;(r===null||r.id.clock<(e.beforeState.get(r.id.client)||0)&&!r.deleted)&&S(e.changed,t,P).add(n)},Ir=(e,t)=>{let n=e[t],r=e[t-1],s=t;for(;s>0;n=r,r=e[--s-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof gt&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}const i=t-s;return i&&e.splice(t+1-i,i),i},sc=(e,t,n)=>{for(const[r,s]of e.clients.entries()){const i=t.clients.get(r);for(let o=s.length-1;o>=0;o--){const c=s[o],u=c.clock+c.len;for(let h=Oe(i,c.clock),d=i[h];h<i.length&&d.id.clock<u;d=i[++h]){const _=i[h];if(c.clock+c.len<=_.id.clock)break;_ instanceof gt&&_.deleted&&!_.keep&&n(_)&&_.gc(t,!1)}}}},ic=(e,t)=>{e.clients.forEach((n,r)=>{const s=t.clients.get(r);for(let i=n.length-1;i>=0;i--){const o=n[i],c=Ue(s.length-1,1+Oe(s,o.clock+o.len-1));for(let u=c,h=s[u];u>0&&h.id.clock>=o.clock;h=s[u])u-=1+Ir(s,u)}})},lu=(e,t,n)=>{sc(e,t,n),ic(e,t)},oc=(e,t)=>{if(t<e.length){const n=e[t],r=n.doc,s=r.store,i=n.deleteSet,o=n._mergeStructs;try{Bs(i),n.afterState=$n(n.doc.store),r.emit("beforeObserverCalls",[n,r]);const c=[];n.changed.forEach((u,h)=>c.push(()=>{(h._item===null||!h._item.deleted)&&h._callObserver(n,u)})),c.push(()=>{n.changedParentTypes.forEach((u,h)=>{h._dEH.l.length>0&&(h._item===null||!h._item.deleted)&&(u=u.filter(d=>d.target._item===null||!d.target._item.deleted),u.forEach(d=>{d.currentTarget=h,d._path=null}),u.sort((d,_)=>d.path.length-_.path.length),$o(h._dEH,u,n))})}),c.push(()=>r.emit("afterTransaction",[n,r])),mn(c,[]),n._needFormattingCleanup&&Gl(n)}finally{r.gc&&sc(i,s,r.gcFilter),ic(i,s),n.afterState.forEach((d,_)=>{const b=n.beforeState.get(_)||0;if(b!==d){const v=s.clients.get(_),D=N(Oe(v,b),1);for(let W=v.length-1;W>=D;)W-=1+Ir(v,W)}});for(let d=o.length-1;d>=0;d--){const{client:_,clock:b}=o[d].id,v=s.clients.get(_),D=Oe(v,b);D+1<v.length&&Ir(v,D+1)>1||D>0&&Ir(v,D)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(xo(vr,vo,"[yjs] ",So,ko,"Changed the client-id because another client seems to be using it."),r.clientID=jo()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){const d=new ln;nc(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){const d=new Ne;nc(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}const{subdocsAdded:c,subdocsLoaded:u,subdocsRemoved:h}=n;(c.size>0||h.size>0||u.size>0)&&(c.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),h.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:u,added:c,removed:h},r,n]),h.forEach(d=>d.destroy())),e.length<=t+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,e])):oc(e,t+1)}}},vt=(e,t,n=null,r=!0)=>{const s=e._transactionCleanups;let i=!1,o=null;e._transaction===null&&(i=!0,e._transaction=new bl(e,n,r),s.push(e._transaction),s.length===1&&e.emit("beforeAllTransactions",[e]),e.emit("beforeTransaction",[e._transaction,e]));try{o=t(e._transaction)}finally{if(i){const c=e._transaction===s[0];e._transaction=null,c&&oc(s,0)}}return o};class vl{constructor(t,n){this.insertions=n,this.deletions=t,this.meta=new Map}}const cc=(e,t,n)=>{Cn(e,n.deletions,r=>{r instanceof gt&&t.scope.some(s=>kr(s,r))&&Qs(r,!1)})},lc=(e,t,n)=>{let r=null,s=null;const i=e.doc,o=e.scope;if(vt(i,c=>{for(;t.length>0&&r===null;){const u=i.store,h=t.pop(),d=new Set,_=[];let b=!1;Cn(c,h.insertions,v=>{if(v instanceof gt){if(v.redone!==null){let{item:D,diff:W}=Xs(u,v.id);W>0&&(D=re(c,Z(D.id.client,D.id.clock+W))),v=D}!v.deleted&&o.some(D=>kr(D,v))&&_.push(v)}}),Cn(c,h.deletions,v=>{v instanceof gt&&o.some(D=>kr(D,v))&&!kn(h.insertions,v.id)&&d.add(v)}),d.forEach(v=>{b=Pc(c,v,d,h.insertions,e.ignoreRemoteMapChanges,e)!==null||b});for(let v=_.length-1;v>=0;v--){const D=_[v];e.deleteFilter(D)&&(D.delete(c),b=!0)}r=b?h:null}c.changed.forEach((u,h)=>{u.has(null)&&h._searchMarker&&(h._searchMarker.length=0)}),s=c},e),r!=null){const c=s.changedParentTypes;e.emit("stack-item-popped",[{stackItem:r,type:n,changedParentTypes:c},e])}return r};class Sl extends Rt{constructor(t,{captureTimeout:n=500,captureTransaction:r=u=>!0,deleteFilter:s=()=>!0,trackedOrigins:i=new Set([null]),ignoreRemoteMapChanges:o=!1,doc:c=kt(t)?t[0].doc:t.doc}={}){super(),this.scope=[],this.doc=c,this.addToScope(t),this.deleteFilter=s,i.add(this),this.trackedOrigins=i,this.captureTransaction=r,this.undoStack=[],this.redoStack=[],this.undoing=!1,this.redoing=!1,this.lastChange=0,this.ignoreRemoteMapChanges=o,this.captureTimeout=n,this.afterTransactionHandler=u=>{if(!this.captureTransaction(u)||!this.scope.some(At=>u.changedParentTypes.has(At))||!this.trackedOrigins.has(u.origin)&&(!u.origin||!this.trackedOrigins.has(u.origin.constructor)))return;const h=this.undoing,d=this.redoing,_=h?this.redoStack:this.undoStack;h?this.stopCapturing():d||this.clear(!1,!0);const b=new En;u.afterState.forEach((At,Ut)=>{const Lc=u.beforeState.get(Ut)||0,jc=At-Lc;jc>0&&Hn(b,Ut,Lc,jc)});const v=bo();let D=!1;if(this.lastChange>0&&v-this.lastChange<this.captureTimeout&&_.length>0&&!h&&!d){const At=_[_.length-1];At.deletions=Tn([At.deletions,u.deleteSet]),At.insertions=Tn([At.insertions,b])}else _.push(new vl(u.deleteSet,b)),D=!0;!h&&!d&&(this.lastChange=v),Cn(u,u.deleteSet,At=>{At instanceof gt&&this.scope.some(Ut=>kr(Ut,At))&&Qs(At,!0)});const W=[{stackItem:_[_.length-1],origin:u.origin,type:h?"redo":"undo",changedParentTypes:u.changedParentTypes},this];D?this.emit("stack-item-added",W):this.emit("stack-item-updated",W)},this.doc.on("afterTransaction",this.afterTransactionHandler),this.doc.on("destroy",()=>{this.destroy()})}addToScope(t){t=kt(t)?t:[t],t.forEach(n=>{this.scope.every(r=>r!==n)&&(n.doc!==this.doc&&Gc("[yjs#509] Not same Y.Doc"),this.scope.push(n))})}addTrackedOrigin(t){this.trackedOrigins.add(t)}removeTrackedOrigin(t){this.trackedOrigins.delete(t)}clear(t=!0,n=!0){(t&&this.canUndo()||n&&this.canRedo())&&this.doc.transact(r=>{t&&(this.undoStack.forEach(s=>cc(r,this,s)),this.undoStack=[]),n&&(this.redoStack.forEach(s=>cc(r,this,s)),this.redoStack=[]),this.emit("stack-cleared",[{undoStackCleared:t,redoStackCleared:n}])})}stopCapturing(){this.lastChange=0}undo(){this.undoing=!0;let t;try{t=lc(this,this.undoStack,"undo")}finally{this.undoing=!1}return t}redo(){this.redoing=!0;let t;try{t=lc(this,this.redoStack,"redo")}finally{this.redoing=!1}return t}canUndo(){return this.undoStack.length>0}canRedo(){return this.redoStack.length>0}destroy(){this.trackedOrigins.delete(this),this.doc.off("afterTransaction",this.afterTransactionHandler),super.destroy()}}function*El(e){const t=decoding.readVarUint(e.restDecoder);for(let n=0;n<t;n++){const r=decoding.readVarUint(e.restDecoder),s=e.readClient();let i=decoding.readVarUint(e.restDecoder);for(let o=0;o<r;o++){const c=e.readInfo();if(c===10){const u=decoding.readVarUint(e.restDecoder);yield new de(Z(s,i),u),i+=u}else if(binary.BITS5&c){const u=(c&(binary.BIT7|binary.BIT8))===0,h=new gt(Z(s,i),null,(c&binary.BIT8)===binary.BIT8?e.readLeftID():null,null,(c&binary.BIT7)===binary.BIT7?e.readRightID():null,u?e.readParentInfo()?e.readString():e.readLeftID():null,u&&(c&binary.BIT6)===binary.BIT6?e.readString():null,Bc(e,c));yield h,i+=h.length}else{const u=e.readLen();yield new pe(Z(s,i),u),i+=u}}}}class We{constructor(t,n){this.gen=El(t),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===de);return this.curr}}const au=e=>Cl(e,Ie),Cl=(e,t=Ee)=>{const n=[],r=new t(decoding.createDecoder(e)),s=new We(r,!1);for(let o=s.curr;o!==null;o=s.next())n.push(o);logging.print("Structs: ",n);const i=ze(r);logging.print("DeleteSet: ",i)},uu=e=>kl(e,Ie),kl=(e,t=Ee)=>{const n=[],r=new t(decoding.createDecoder(e)),s=new We(r,!1);for(let i=s.curr;i!==null;i=s.next())n.push(i);return{structs:n,ds:ze(r)}};class Zs{constructor(t){this.currClient=0,this.startClock=0,this.written=0,this.encoder=t,this.clientStructs=[]}}const Tl=e=>Or(e,Ie,ln),Dl=(e,t=Cr,n=Ee)=>{const r=new t,s=new We(new n(decoding.createDecoder(e)),!1);let i=s.curr;if(i!==null){let o=0,c=i.id.client,u=i.id.clock!==0,h=u?0:i.id.clock+i.length;for(;i!==null;i=s.next())c!==i.id.client&&(h!==0&&(o++,encoding.writeVarUint(r.restEncoder,c),encoding.writeVarUint(r.restEncoder,h)),c=i.id.client,h=0,u=i.id.clock!==0),i.constructor===de&&(u=!0),u||(h=i.id.clock+i.length);h!==0&&(o++,encoding.writeVarUint(r.restEncoder,c),encoding.writeVarUint(r.restEncoder,h));const d=encoding.createEncoder();return encoding.writeVarUint(d,o),encoding.writeBinaryEncoder(d,r.restEncoder),r.restEncoder=d,r.toUint8Array()}else return encoding.writeVarUint(r.restEncoder,0),r.toUint8Array()},du=e=>Dl(e,Dn,Ie),Il=(e,t=Ee)=>{const n=new Map,r=new Map,s=new We(new t(decoding.createDecoder(e)),!1);let i=s.curr;if(i!==null){let o=i.id.client,c=i.id.clock;for(n.set(o,c);i!==null;i=s.next())o!==i.id.client&&(r.set(o,c),n.set(i.id.client,i.id.clock),o=i.id.client),c=i.id.clock+i.length;r.set(o,c)}return{from:n,to:r}},hu=e=>Il(e,Ie),Ol=(e,t)=>{if(e.constructor===pe){const{client:n,clock:r}=e.id;return new pe(Z(n,r+t),e.length-t)}else if(e.constructor===de){const{client:n,clock:r}=e.id;return new de(Z(n,r+t),e.length-t)}else{const n=e,{client:r,clock:s}=n.id;return new gt(Z(r,s+t),null,Z(r,s+t-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(t))}},Or=(e,t=Ee,n=Ne)=>{if(e.length===1)return e[0];const r=e.map(d=>new t(decoding.createDecoder(d)));let s=r.map(d=>new We(d,!0)),i=null;const o=new n,c=new Zs(o);for(;s=s.filter(b=>b.curr!==null),s.sort((b,v)=>{if(b.curr.id.client===v.curr.id.client){const D=b.curr.id.clock-v.curr.id.clock;return D===0?b.curr.constructor===v.curr.constructor?0:b.curr.constructor===de?1:-1:D}else return v.curr.id.client-b.curr.id.client}),s.length!==0;){const d=s[0],_=d.curr.id.client;if(i!==null){let b=d.curr,v=!1;for(;b!==null&&b.id.clock+b.length<=i.struct.id.clock+i.struct.length&&b.id.client>=i.struct.id.client;)b=d.next(),v=!0;if(b===null||b.id.client!==_||v&&b.id.clock>i.struct.id.clock+i.struct.length)continue;if(_!==i.struct.id.client)Ke(c,i.struct,i.offset),i={struct:b,offset:0},d.next();else if(i.struct.id.clock+i.struct.length<b.id.clock)if(i.struct.constructor===de)i.struct.length=b.id.clock+b.length-i.struct.id.clock;else{Ke(c,i.struct,i.offset);const D=b.id.clock-i.struct.id.clock-i.struct.length;i={struct:new de(Z(_,i.struct.id.clock+i.struct.length),D),offset:0}}else{const D=i.struct.id.clock+i.struct.length-b.id.clock;D>0&&(i.struct.constructor===de?i.struct.length-=D:b=Ol(b,D)),i.struct.mergeWith(b)||(Ke(c,i.struct,i.offset),i={struct:b,offset:0},d.next())}}else i={struct:d.curr,offset:0},d.next();for(let b=d.curr;b!==null&&b.id.client===_&&b.id.clock===i.struct.id.clock+i.struct.length&&b.constructor!==de;b=d.next())Ke(c,i.struct,i.offset),i={struct:b,offset:0}}i!==null&&(Ke(c,i.struct,i.offset),i=null),Gs(c);const u=r.map(d=>ze(d)),h=Tn(u);return Be(o,h),o.toUint8Array()},ac=(e,t,n=Ee,r=Ne)=>{const s=zo(t),i=new r,o=new Zs(i),c=new n(decoding.createDecoder(e)),u=new We(c,!1);for(;u.curr;){const d=u.curr,_=d.id.client,b=s.get(_)||0;if(u.curr.constructor===de){u.next();continue}if(d.id.clock+d.length>b)for(Ke(o,d,math.max(b-d.id.clock,0)),u.next();u.curr&&u.curr.id.client===_;)Ke(o,u.curr,0),u.next();else for(;u.curr&&u.curr.id.client===_&&u.curr.id.clock+u.curr.length<=b;)u.next()}Gs(o);const h=ze(c);return Be(i,h),i.toUint8Array()},fu=(e,t)=>ac(e,t,Ie,ln),uc=e=>{e.written>0&&(e.clientStructs.push({written:e.written,restEncoder:encoding.toUint8Array(e.encoder.restEncoder)}),e.encoder.restEncoder=encoding.createEncoder(),e.written=0)},Ke=(e,t,n)=>{e.written>0&&e.currClient!==t.id.client&&uc(e),e.written===0&&(e.currClient=t.id.client,e.encoder.writeClient(t.id.client),encoding.writeVarUint(e.encoder.restEncoder,t.id.clock+n)),t.write(e.encoder,n),e.written++},Gs=e=>{uc(e);const t=e.encoder.restEncoder;encoding.writeVarUint(t,e.clientStructs.length);for(let n=0;n<e.clientStructs.length;n++){const r=e.clientStructs[n];encoding.writeVarUint(t,r.written),encoding.writeUint8Array(t,r.restEncoder)}},Ar=(e,t,n,r)=>{const s=new n(decoding.createDecoder(e)),i=new We(s,!1),o=new r,c=new Zs(o);for(let h=i.curr;h!==null;h=i.next())Ke(c,t(h),0);Gs(c);const u=ze(s);return Be(o,u),o.toUint8Array()},dc=({formatting:e=!0,subdocs:t=!0,yxml:n=!0}={})=>{let r=0;const s=map.create(),i=map.create(),o=map.create(),c=map.create();return c.set(null,null),u=>{switch(u.constructor){case pe:case de:return u;case gt:{const h=u,d=h.content;switch(d.constructor){case Mn:break;case xe:{if(n){const _=d.type;_ instanceof dn&&(_.nodeName=map.setIfUndefined(i,_.nodeName,()=>"node-"+r)),_ instanceof Jn&&(_.hookName=map.setIfUndefined(i,_.hookName,()=>"hook-"+r))}break}case Qe:{const _=d;_.arr=_.arr.map(()=>r);break}case Un:{const _=d;_.content=new Uint8Array([r]);break}case Pn:{const _=d;t&&(_.opts={},_.doc.guid=r+"");break}case Xe:{const _=d;_.embed={};break}case Vt:{const _=d;e&&(_.key=map.setIfUndefined(o,_.key,()=>r+""),_.value=map.setIfUndefined(c,_.value,()=>({i:r})));break}case Yn:{const _=d;_.arr=_.arr.map(()=>r);break}case Ae:{const _=d;_.str=string.repeat(r%10+"",_.str.length);break}default:error.unexpectedCase()}return h.parentSub&&(h.parentSub=map.setIfUndefined(s,h.parentSub,()=>r+"")),r++,u}default:error.unexpectedCase()}}},gu=(e,t)=>Ar(e,dc(t),Ie,ln),pu=(e,t)=>Ar(e,dc(t),Ee,Ne),_u=e=>Ar(e,f.id,Ie,Ne),Al=e=>Ar(e,f.id,Ee,ln),hc="You must not compute changes after the event-handler fired.";class xr{constructor(t,n){this.target=t,this.currentTarget=t,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=xl(this.currentTarget,this.target))}deletes(t){return kn(this.transaction.deleteSet,t.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ge(hc);const t=new Map,n=this.target;this.transaction.changed.get(n).forEach(s=>{if(s!==null){const i=n._map.get(s);let o,c;if(this.adds(i)){let u=i.left;for(;u!==null&&this.adds(u);)u=u.left;if(this.deletes(i))if(u!==null&&this.deletes(u))o="delete",c=H(u.content.getContent());else return;else u!==null&&this.deletes(u)?(o="update",c=H(u.content.getContent())):(o="add",c=void 0)}else if(this.deletes(i))o="delete",c=H(i.content.getContent());else return;t.set(s,{action:o,oldValue:c})}}),this._keys=t}return this._keys}get delta(){return this.changes.delta}adds(t){return t.id.clock>=(this.transaction.beforeState.get(t.id.client)||0)}get changes(){let t=this._changes;if(t===null){if(this.transaction.doc._transactionCleanups.length===0)throw Ge(hc);const n=this.target,r=P(),s=P(),i=[];if(t={added:r,deleted:s,delta:i,keys:this.keys},this.transaction.changed.get(n).has(null)){let c=null;const u=()=>{c&&i.push(c)};for(let h=n._start;h!==null;h=h.right)h.deleted?this.deletes(h)&&!this.adds(h)&&((c===null||c.delete===void 0)&&(u(),c={delete:0}),c.delete+=h.length,s.add(h)):this.adds(h)?((c===null||c.insert===void 0)&&(u(),c={insert:[]}),c.insert=c.insert.concat(h.content.getContent()),r.add(h)):((c===null||c.retain===void 0)&&(u(),c={retain:0}),c.retain+=h.length);c!==null&&c.retain===void 0&&u()}this._changes=t}return t}}const xl=(e,t)=>{const n=[];for(;t._item!==null&&t!==e;){if(t._item.parentSub!==null)n.unshift(t._item.parentSub);else{let r=0,s=t._item.parent._start;for(;s!==t._item&&s!==null;)s.deleted||r++,s=s.right;n.unshift(r)}t=t._item.parent}return n},fc=80;let Hs=0;class Ul{constructor(t,n){t.marker=!0,this.p=t,this.index=n,this.timestamp=Hs++}}const Ml=e=>{e.timestamp=Hs++},gc=(e,t,n)=>{e.p.marker=!1,e.p=t,t.marker=!0,e.index=n,e.timestamp=Hs++},Pl=(e,t,n)=>{if(e.length>=fc){const r=e.reduce((s,i)=>s.timestamp<i.timestamp?s:i);return gc(r,t,n),r}else{const r=new Ul(t,n);return e.push(r),r}},Ur=(e,t)=>{if(e._start===null||t===0||e._searchMarker===null)return null;const n=e._searchMarker.length===0?null:e._searchMarker.reduce((i,o)=>Et(t-i.index)<Et(t-o.index)?i:o);let r=e._start,s=0;for(n!==null&&(r=n.p,s=n.index,Ml(n));r.right!==null&&s<t;){if(!r.deleted&&r.countable){if(t<s+r.length)break;s+=r.length}r=r.right}for(;r.left!==null&&s>t;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(s-=r.length);return n!==null&&Et(n.index-s)<r.parent.length/fc?(gc(n,r,s),n):Pl(e._searchMarker,r,s)},Wn=(e,t,n)=>{for(let r=e.length-1;r>=0;r--){const s=e[r];if(n>0){let i=s.p;for(i.marker=!1;i&&(i.deleted||!i.countable);)i=i.left,i&&!i.deleted&&i.countable&&(s.index-=i.length);if(i===null||i.marker===!0){e.splice(r,1);continue}s.p=i,i.marker=!0}(t<s.index||n>0&&t===s.index)&&(s.index=N(t,s.index+n))}},yu=e=>{let t=e._start;const n=[];for(;t;)n.push(t),t=t.right;return n},Mr=(e,t,n)=>{const r=e,s=t.changedParentTypes;for(;S(s,e,()=>[]).push(n),e._item!==null;)e=e._item.parent;$o(r._eH,n,t)};class Kt{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=Zo(),this._dEH=Zo(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(t,n){this.doc=t,this._item=n}_copy(){throw ve()}clone(){throw ve()}_write(t){}get _first(){let t=this._start;for(;t!==null&&t.deleted;)t=t.right;return t}_callObserver(t,n){!t.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(t){Go(this._eH,t)}observeDeep(t){Go(this._dEH,t)}unobserve(t){Ho(this._eH,t)}unobserveDeep(t){Ho(this._dEH,t)}toJSON(){}}const pc=(e,t,n)=>{t<0&&(t=e._length+t),n<0&&(n=e._length+n);let r=n-t;const s=[];let i=e._start;for(;i!==null&&r>0;){if(i.countable&&!i.deleted){const o=i.content.getContent();if(o.length<=t)t-=o.length;else{for(let c=t;c<o.length&&r>0;c++)s.push(o[c]),r--;t=0}}i=i.right}return s},_c=e=>{const t=[];let n=e._start;for(;n!==null;){if(n.countable&&!n.deleted){const r=n.content.getContent();for(let s=0;s<r.length;s++)t.push(r[s])}n=n.right}return t},mu=(e,t)=>{const n=[];let r=e._start;for(;r!==null;){if(r.countable&&$e(r,t)){const s=r.content.getContent();for(let i=0;i<s.length;i++)n.push(s[i])}r=r.right}return n},Kn=(e,t)=>{let n=0,r=e._start;for(;r!==null;){if(r.countable&&!r.deleted){const s=r.content.getContent();for(let i=0;i<s.length;i++)t(s[i],n++,e)}r=r.right}},yc=(e,t)=>{const n=[];return Kn(e,(r,s)=>{n.push(t(r,s,e))}),n},Bl=e=>{let t=e._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;t!==null&&t.deleted;)t=t.right;if(t===null)return{done:!0,value:void 0};n=t.content.getContent(),r=0,t=t.right}const s=n[r++];return n.length<=r&&(n=null),{done:!1,value:s}}}},mc=(e,t)=>{const n=Ur(e,t);let r=e._start;for(n!==null&&(r=n.p,t-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(t<r.length)return r.content.getContent()[t];t-=r.length}},Pr=(e,t,n,r)=>{let s=n;const i=e.doc,o=i.clientID,c=i.store,u=n===null?t._start:n.right;let h=[];const d=()=>{h.length>0&&(s=new gt(Z(o,xt(c,o)),s,s&&s.lastId,u,u&&u.id,t,null,new Qe(h)),s.integrate(e,0),h=[])};r.forEach(_=>{if(_===null)h.push(_);else switch(_.constructor){case Number:case Object:case Boolean:case Array:case String:h.push(_);break;default:switch(d(),_.constructor){case Uint8Array:case ArrayBuffer:s=new gt(Z(o,xt(c,o)),s,s&&s.lastId,u,u&&u.id,t,null,new Un(new Uint8Array(_))),s.integrate(e,0);break;case cn:s=new gt(Z(o,xt(c,o)),s,s&&s.lastId,u,u&&u.id,t,null,new Pn(_)),s.integrate(e,0);break;default:if(_ instanceof Kt)s=new gt(Z(o,xt(c,o)),s,s&&s.lastId,u,u&&u.id,t,null,new xe(_)),s.integrate(e,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},wc=()=>Ge("Length exceeded!"),bc=(e,t,n,r)=>{if(n>t._length)throw wc();if(n===0)return t._searchMarker&&Wn(t._searchMarker,n,r.length),Pr(e,t,null,r);const s=n,i=Ur(t,n);let o=t._start;for(i!==null&&(o=i.p,n-=i.index,n===0&&(o=o.prev,n+=o&&o.countable&&!o.deleted?o.length:0));o!==null;o=o.right)if(!o.deleted&&o.countable){if(n<=o.length){n<o.length&&re(e,Z(o.id.client,o.id.clock+n));break}n-=o.length}return t._searchMarker&&Wn(t._searchMarker,s,r.length),Pr(e,t,o,r)},Nl=(e,t,n)=>{let s=(t._searchMarker||[]).reduce((i,o)=>o.index>i.index?o:i,{index:0,p:t._start}).p;if(s)for(;s.right;)s=s.right;return Pr(e,t,s,n)},vc=(e,t,n,r)=>{if(r===0)return;const s=n,i=r,o=Ur(t,n);let c=t._start;for(o!==null&&(c=o.p,n-=o.index);c!==null&&n>0;c=c.right)!c.deleted&&c.countable&&(n<c.length&&re(e,Z(c.id.client,c.id.clock+n)),n-=c.length);for(;r>0&&c!==null;)c.deleted||(r<c.length&&re(e,Z(c.id.client,c.id.clock+r)),c.delete(e),r-=c.length),c=c.right;if(r>0)throw wc();t._searchMarker&&Wn(t._searchMarker,s,-i+r)},Br=(e,t,n)=>{const r=t._map.get(n);r!==void 0&&r.delete(e)},$s=(e,t,n,r)=>{const s=t._map.get(n)||null,i=e.doc,o=i.clientID;let c;if(r==null)c=new Qe([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:c=new Qe([r]);break;case Uint8Array:c=new Un(r);break;case cn:c=new Pn(r);break;default:if(r instanceof Kt)c=new xe(r);else throw new Error("Unexpected content type")}new gt(Z(o,xt(i.store,o)),s,s&&s.lastId,null,null,t,n,c).integrate(e,0)},Ws=(e,t)=>{const n=e._map.get(t);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Sc=e=>{const t={};return e._map.forEach((n,r)=>{n.deleted||(t[r]=n.content.getContent()[n.length-1])}),t},Ec=(e,t)=>{const n=e._map.get(t);return n!==void 0&&!n.deleted},wu=(e,t,n)=>{let r=e._map.get(t)||null;for(;r!==null&&(!n.sv.has(r.id.client)||r.id.clock>=(n.sv.get(r.id.client)||0));)r=r.left;return r!==null&&$e(r,n)?r.content.getContent()[r.length-1]:void 0},Rl=(e,t)=>{const n={};return e._map.forEach((r,s)=>{let i=r;for(;i!==null&&(!t.sv.has(i.id.client)||i.id.clock>=(t.sv.get(i.id.client)||0));)i=i.left;i!==null&&$e(i,t)&&(n[s]=i.content.getContent()[i.length-1])}),n},Nr=e=>$c(e.entries(),t=>!t[1].deleted);class Ll extends xr{constructor(t,n){super(t,n),this._transaction=n}}class Je extends Kt{constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(t){const n=new Je;return n.push(t),n}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new Je}clone(){const t=new Je;return t.insert(0,this.toArray().map(n=>n instanceof Kt?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}_callObserver(t,n){super._callObserver(t,n),Mr(this,t,new Ll(this,t))}insert(t,n){this.doc!==null?vt(this.doc,r=>{bc(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}push(t){this.doc!==null?vt(this.doc,n=>{Nl(n,this,t)}):this._prelimContent.push(...t)}unshift(t){this.insert(0,t)}delete(t,n=1){this.doc!==null?vt(this.doc,r=>{vc(r,this,t,n)}):this._prelimContent.splice(t,n)}get(t){return mc(this,t)}toArray(){return _c(this)}slice(t=0,n=this.length){return pc(this,t,n)}toJSON(){return this.map(t=>t instanceof Kt?t.toJSON():t)}map(t){return yc(this,t)}forEach(t){Kn(this,t)}[Symbol.iterator](){return Bl(this)}_write(t){t.writeTypeRef(la)}}const jl=e=>new Je;class Vl extends xr{constructor(t,n,r){super(t,n),this.keysChanged=r}}class an extends Kt{constructor(t){super(),this._prelimContent=null,t===void 0?this._prelimContent=new Map:this._prelimContent=new Map(t)}_integrate(t,n){super._integrate(t,n),this._prelimContent.forEach((r,s)=>{this.set(s,r)}),this._prelimContent=null}_copy(){return new an}clone(){const t=new an;return this.forEach((n,r)=>{t.set(r,n instanceof Kt?n.clone():n)}),t}_callObserver(t,n){Mr(this,t,new Vl(this,t,n))}toJSON(){const t={};return this._map.forEach((n,r)=>{if(!n.deleted){const s=n.content.getContent()[n.length-1];t[r]=s instanceof Kt?s.toJSON():s}}),t}get size(){return[...Nr(this._map)].length}keys(){return Ms(Nr(this._map),t=>t[0])}values(){return Ms(Nr(this._map),t=>t[1].content.getContent()[t[1].length-1])}entries(){return Ms(Nr(this._map),t=>[t[0],t[1].content.getContent()[t[1].length-1]])}forEach(t){this._map.forEach((n,r)=>{n.deleted||t(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(t){this.doc!==null?vt(this.doc,n=>{Br(n,this,t)}):this._prelimContent.delete(t)}set(t,n){return this.doc!==null?vt(this.doc,r=>{$s(r,this,t,n)}):this._prelimContent.set(t,n),n}get(t){return Ws(this,t)}has(t){return Ec(this,t)}clear(){this.doc!==null?vt(this.doc,t=>{this.forEach(function(n,r,s){Br(t,s,r)})}):this._prelimContent.clear()}_write(t){t.writeTypeRef(aa)}}const Fl=e=>new an,Ye=(e,t)=>e===t||typeof e=="object"&&typeof t=="object"&&e&&t&&qc(e,t);class Ks{constructor(t,n,r,s){this.left=t,this.right=n,this.index=r,this.currentAttributes=s}forward(){switch(this.right===null&&Te(),this.right.content.constructor){case Vt:this.right.deleted||An(this.currentAttributes,this.right.content);break;default:this.right.deleted||(this.index+=this.right.length);break}this.left=this.right,this.right=this.right.right}}const Cc=(e,t,n)=>{for(;t.right!==null&&n>0;){switch(t.right.content.constructor){case Vt:t.right.deleted||An(t.currentAttributes,t.right.content);break;default:t.right.deleted||(n<t.right.length&&re(e,Z(t.right.id.client,t.right.id.clock+n)),t.index+=t.right.length,n-=t.right.length);break}t.left=t.right,t.right=t.right.right}return t},Rr=(e,t,n,r)=>{const s=new Map,i=r?Ur(t,n):null;if(i){const o=new Ks(i.p.left,i.p,i.index,s);return Cc(e,o,n-i.index)}else{const o=new Ks(null,t._start,0,s);return Cc(e,o,n)}},kc=(e,t,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===Vt&&Ye(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();const s=e.doc,i=s.clientID;r.forEach((o,c)=>{const u=n.left,h=n.right,d=new gt(Z(i,xt(s.store,i)),u,u&&u.lastId,h,h&&h.id,t,null,new Vt(c,o));d.integrate(e,0),n.right=d,n.forward()})},An=(e,t)=>{const{key:n,value:r}=t;r===null?e.delete(n):e.set(n,r)},Tc=(e,t)=>{for(;e.right!==null;){if(!(e.right.deleted||e.right.content.constructor===Vt&&Ye(t[e.right.content.key]||null,e.right.content.value)))break;e.forward()}},Dc=(e,t,n,r)=>{const s=e.doc,i=s.clientID,o=new Map;for(const c in r){const u=r[c],h=n.currentAttributes.get(c)||null;if(!Ye(h,u)){o.set(c,h);const{left:d,right:_}=n;n.right=new gt(Z(i,xt(s.store,i)),d,d&&d.lastId,_,_&&_.id,t,null,new Vt(c,u)),n.right.integrate(e,0),n.forward()}}return o},Js=(e,t,n,r,s)=>{n.currentAttributes.forEach((b,v)=>{s[v]===void 0&&(s[v]=null)});const i=e.doc,o=i.clientID;Tc(n,s);const c=Dc(e,t,n,s),u=r.constructor===String?new Ae(r):r instanceof Kt?new xe(r):new Xe(r);let{left:h,right:d,index:_}=n;t._searchMarker&&Wn(t._searchMarker,n.index,u.getLength()),d=new gt(Z(o,xt(i.store,o)),h,h&&h.lastId,d,d&&d.id,t,null,u),d.integrate(e,0),n.right=d,n.index=_,n.forward(),kc(e,t,n,c)},Ic=(e,t,n,r,s)=>{const i=e.doc,o=i.clientID;Tc(n,s);const c=Dc(e,t,n,s);t:for(;n.right!==null&&(r>0||c.size>0&&(n.right.deleted||n.right.content.constructor===Vt));){if(!n.right.deleted)switch(n.right.content.constructor){case Vt:{const{key:u,value:h}=n.right.content,d=s[u];if(d!==void 0){if(Ye(d,h))c.delete(u);else{if(r===0)break t;c.set(u,h)}n.right.delete(e)}else n.currentAttributes.set(u,h);break}default:r<n.right.length&&re(e,Z(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let u="";for(;r>0;r--)u+=`
`;n.right=new gt(Z(o,xt(i.store,o)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,t,null,new Ae(u)),n.right.integrate(e,0),n.forward()}kc(e,t,n,c)},Oc=(e,t,n,r,s)=>{let i=t;const o=C();for(;i&&(!i.countable||i.deleted);){if(!i.deleted&&i.content.constructor===Vt){const h=i.content;o.set(h.key,h)}i=i.right}let c=0,u=!1;for(;t!==i;){if(n===t&&(u=!0),!t.deleted){const h=t.content;switch(h.constructor){case Vt:{const{key:d,value:_}=h,b=r.get(d)||null;(o.get(d)!==h||b===_)&&(t.delete(e),c++,!u&&(s.get(d)||null)===_&&b!==_&&(b===null?s.delete(d):s.set(d,b))),!u&&!t.deleted&&An(s,h);break}}}t=t.right}return c},zl=(e,t)=>{for(;t&&t.right&&(t.right.deleted||!t.right.countable);)t=t.right;const n=new Set;for(;t&&(t.deleted||!t.countable);){if(!t.deleted&&t.content.constructor===Vt){const r=t.content.key;n.has(r)?t.delete(e):n.add(r)}t=t.left}},Zl=e=>{let t=0;return vt(e.doc,n=>{let r=e._start,s=e._start,i=C();const o=B(i);for(;s;){if(s.deleted===!1)switch(s.content.constructor){case Vt:An(o,s.content);break;default:t+=Oc(n,r,s,i,o),i=B(o),r=s;break}s=s.right}}),t},Gl=e=>{const t=new Set,n=e.doc;for(const[r,s]of e.afterState.entries()){const i=e.beforeState.get(r)||0;s!==i&&ec(e,n.store.clients.get(r),i,s,o=>{!o.deleted&&o.content.constructor===Vt&&o.constructor!==pe&&t.add(o.parent)})}vt(n,r=>{Cn(e,e.deleteSet,s=>{if(s instanceof pe||!s.parent._hasFormatting||t.has(s.parent))return;const i=s.parent;s.content.constructor===Vt?t.add(i):zl(r,s)});for(const s of t)Zl(s)})},Ac=(e,t,n)=>{const r=n,s=B(t.currentAttributes),i=t.right;for(;n>0&&t.right!==null;){if(t.right.deleted===!1)switch(t.right.content.constructor){case xe:case Xe:case Ae:n<t.right.length&&re(e,Z(t.right.id.client,t.right.id.clock+n)),n-=t.right.length,t.right.delete(e);break}t.forward()}i&&Oc(e,i,t.right,s,t.currentAttributes);const o=(t.left||t.right).parent;return o._searchMarker&&Wn(o._searchMarker,t.index,-r+n),t};class Hl extends xr{constructor(t,n,r){super(t,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(s=>{s===null?this.childListChanged=!0:this.keysChanged.add(s)})}get changes(){if(this._changes===null){const t={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=t}return this._changes}get delta(){if(this._delta===null){const t=this.target.doc,n=[];vt(t,r=>{const s=new Map,i=new Map;let o=this.target._start,c=null;const u={};let h="",d=0,_=0;const b=()=>{if(c!==null){let v=null;switch(c){case"delete":_>0&&(v={delete:_}),_=0;break;case"insert":(typeof h=="object"||h.length>0)&&(v={insert:h},s.size>0&&(v.attributes={},s.forEach((D,W)=>{D!==null&&(v.attributes[W]=D)}))),h="";break;case"retain":d>0&&(v={retain:d},Yc(u)||(v.attributes=Wc({},u))),d=0;break}v&&n.push(v),c=null}};for(;o!==null;){switch(o.content.constructor){case xe:case Xe:this.adds(o)?this.deletes(o)||(b(),c="insert",h=o.content.getContent()[0],b()):this.deletes(o)?(c!=="delete"&&(b(),c="delete"),_+=1):o.deleted||(c!=="retain"&&(b(),c="retain"),d+=1);break;case Ae:this.adds(o)?this.deletes(o)||(c!=="insert"&&(b(),c="insert"),h+=o.content.str):this.deletes(o)?(c!=="delete"&&(b(),c="delete"),_+=o.length):o.deleted||(c!=="retain"&&(b(),c="retain"),d+=o.length);break;case Vt:{const{key:v,value:D}=o.content;if(this.adds(o)){if(!this.deletes(o)){const W=s.get(v)||null;Ye(W,D)?D!==null&&o.delete(r):(c==="retain"&&b(),Ye(D,i.get(v)||null)?delete u[v]:u[v]=D)}}else if(this.deletes(o)){i.set(v,D);const W=s.get(v)||null;Ye(W,D)||(c==="retain"&&b(),u[v]=W)}else if(!o.deleted){i.set(v,D);const W=u[v];W!==void 0&&(Ye(W,D)?W!==null&&o.delete(r):(c==="retain"&&b(),D===null?delete u[v]:u[v]=D))}o.deleted||(c==="insert"&&b(),An(s,o.content));break}}o=o.right}for(b();n.length>0;){const v=n[n.length-1];if(v.retain!==void 0&&v.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}}class xn extends Kt{constructor(t){super(),this._pending=t!==void 0?[()=>this.insert(0,t)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this._length}_integrate(t,n){super._integrate(t,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new xn}clone(){const t=new xn;return t.applyDelta(this.toDelta()),t}_callObserver(t,n){super._callObserver(t,n);const r=new Hl(this,t,n);Mr(this,t,r),!t.local&&this._hasFormatting&&(t._needFormattingCleanup=!0)}toString(){let t="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Ae&&(t+=n.content.str),n=n.right;return t}toJSON(){return this.toString()}applyDelta(t,{sanitize:n=!0}={}){this.doc!==null?vt(this.doc,r=>{const s=new Ks(null,this._start,0,new Map);for(let i=0;i<t.length;i++){const o=t[i];if(o.insert!==void 0){const c=!n&&typeof o.insert=="string"&&i===t.length-1&&s.right===null&&o.insert.slice(-1)===`
`?o.insert.slice(0,-1):o.insert;(typeof c!="string"||c.length>0)&&Js(r,this,s,c,o.attributes||{})}else o.retain!==void 0?Ic(r,this,s,o.retain,o.attributes||{}):o.delete!==void 0&&Ac(r,s,o.delete)}}):this._pending.push(()=>this.applyDelta(t))}toDelta(t,n,r){const s=[],i=new Map,o=this.doc;let c="",u=this._start;function h(){if(c.length>0){const _={};let b=!1;i.forEach((D,W)=>{b=!0,_[W]=D});const v={insert:c};b&&(v.attributes=_),s.push(v),c=""}}const d=()=>{for(;u!==null;){if($e(u,t)||n!==void 0&&$e(u,n))switch(u.content.constructor){case Ae:{const _=i.get("ychange");t!==void 0&&!$e(u,t)?(_===void 0||_.user!==u.id.client||_.type!=="removed")&&(h(),i.set("ychange",r?r("removed",u.id):{type:"removed"})):n!==void 0&&!$e(u,n)?(_===void 0||_.user!==u.id.client||_.type!=="added")&&(h(),i.set("ychange",r?r("added",u.id):{type:"added"})):_!==void 0&&(h(),i.delete("ychange")),c+=u.content.str;break}case xe:case Xe:{h();const _={insert:u.content.getContent()[0]};if(i.size>0){const b={};_.attributes=b,i.forEach((v,D)=>{b[D]=v})}s.push(_);break}case Vt:$e(u,t)&&(h(),An(i,u.content));break}u=u.right}h()};return t||n?vt(o,_=>{t&&Fs(_,t),n&&Fs(_,n),d()},"cleanup"):d(),s}insert(t,n,r){if(n.length<=0)return;const s=this.doc;s!==null?vt(s,i=>{const o=Rr(i,this,t,!r);r||(r={},o.currentAttributes.forEach((c,u)=>{r[u]=c})),Js(i,this,o,n,r)}):this._pending.push(()=>this.insert(t,n,r))}insertEmbed(t,n,r){const s=this.doc;s!==null?vt(s,i=>{const o=Rr(i,this,t,!r);Js(i,this,o,n,r||{})}):this._pending.push(()=>this.insertEmbed(t,n,r||{}))}delete(t,n){if(n===0)return;const r=this.doc;r!==null?vt(r,s=>{Ac(s,Rr(s,this,t,!0),n)}):this._pending.push(()=>this.delete(t,n))}format(t,n,r){if(n===0)return;const s=this.doc;s!==null?vt(s,i=>{const o=Rr(i,this,t,!1);o.right!==null&&Ic(i,this,o,n,r)}):this._pending.push(()=>this.format(t,n,r))}removeAttribute(t){this.doc!==null?vt(this.doc,n=>{Br(n,this,t)}):this._pending.push(()=>this.removeAttribute(t))}setAttribute(t,n){this.doc!==null?vt(this.doc,r=>{$s(r,this,t,n)}):this._pending.push(()=>this.setAttribute(t,n))}getAttribute(t){return Ws(this,t)}getAttributes(){return Sc(this)}_write(t){t.writeTypeRef(ua)}}const $l=e=>new xn;class Ys{constructor(t,n=()=>!0){this._filter=n,this._root=t,this._currentNode=t._start,this._firstCall=!0}[Symbol.iterator](){return this}next(){let t=this._currentNode,n=t&&t.content&&t.content.type;if(t!==null&&(!this._firstCall||t.deleted||!this._filter(n)))do if(n=t.content.type,!t.deleted&&(n.constructor===dn||n.constructor===un)&&n._start!==null)t=n._start;else for(;t!==null;)if(t.right!==null){t=t.right;break}else t.parent===this._root?t=null:t=t.parent._item;while(t!==null&&(t.deleted||!this._filter(t.content.type)));return this._firstCall=!1,t===null?{value:void 0,done:!0}:(this._currentNode=t,{value:t.content.type,done:!1})}}class un extends Kt{constructor(){super(),this._prelimContent=[]}get firstChild(){const t=this._first;return t?t.content.getContent()[0]:null}_integrate(t,n){super._integrate(t,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new un}clone(){const t=new un;return t.insert(0,this.toArray().map(n=>n instanceof Kt?n.clone():n)),t}get length(){return this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(t){return new Ys(this,t)}querySelector(t){t=t.toUpperCase();const r=new Ys(this,s=>s.nodeName&&s.nodeName.toUpperCase()===t).next();return r.done?null:r.value}querySelectorAll(t){return t=t.toUpperCase(),pt(new Ys(this,n=>n.nodeName&&n.nodeName.toUpperCase()===t))}_callObserver(t,n){Mr(this,t,new Jl(this,n,t))}toString(){return yc(this,t=>t.toString()).join("")}toJSON(){return this.toString()}toDOM(t=document,n={},r){const s=t.createDocumentFragment();return r!==void 0&&r._createAssociation(s,this),Kn(this,i=>{s.insertBefore(i.toDOM(t,n,r),null)}),s}insert(t,n){this.doc!==null?vt(this.doc,r=>{bc(r,this,t,n)}):this._prelimContent.splice(t,0,...n)}insertAfter(t,n){if(this.doc!==null)vt(this.doc,r=>{const s=t&&t instanceof Kt?t._item:t;Pr(r,this,s,n)});else{const r=this._prelimContent,s=t===null?0:r.findIndex(i=>i===t)+1;if(s===0&&t!==null)throw Ge("Reference item not found");r.splice(s,0,...n)}}delete(t,n=1){this.doc!==null?vt(this.doc,r=>{vc(r,this,t,n)}):this._prelimContent.splice(t,n)}toArray(){return _c(this)}push(t){this.insert(this.length,t)}unshift(t){this.insert(0,t)}get(t){return mc(this,t)}slice(t=0,n=this.length){return pc(this,t,n)}forEach(t){Kn(this,t)}_write(t){t.writeTypeRef(ha)}}const Wl=e=>new un;class dn extends un{constructor(t="UNDEFINED"){super(),this.nodeName=t,this._prelimAttrs=new Map}get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_integrate(t,n){super._integrate(t,n),this._prelimAttrs.forEach((r,s)=>{this.setAttribute(s,r)}),this._prelimAttrs=null}_copy(){return new dn(this.nodeName)}clone(){const t=new dn(this.nodeName),n=this.getAttributes();return Jc(n,(r,s)=>{typeof r=="string"&&t.setAttribute(s,r)}),t.insert(0,this.toArray().map(r=>r instanceof Kt?r.clone():r)),t}toString(){const t=this.getAttributes(),n=[],r=[];for(const c in t)r.push(c);r.sort();const s=r.length;for(let c=0;c<s;c++){const u=r[c];n.push(u+'="'+t[u]+'"')}const i=this.nodeName.toLocaleLowerCase(),o=n.length>0?" "+n.join(" "):"";return`<${i}${o}>${super.toString()}</${i}>`}removeAttribute(t){this.doc!==null?vt(this.doc,n=>{Br(n,this,t)}):this._prelimAttrs.delete(t)}setAttribute(t,n){this.doc!==null?vt(this.doc,r=>{$s(r,this,t,n)}):this._prelimAttrs.set(t,n)}getAttribute(t){return Ws(this,t)}hasAttribute(t){return Ec(this,t)}getAttributes(t){return t?Rl(this,t):Sc(this)}toDOM(t=document,n={},r){const s=t.createElement(this.nodeName),i=this.getAttributes();for(const o in i){const c=i[o];typeof c=="string"&&s.setAttribute(o,c)}return Kn(this,o=>{s.appendChild(o.toDOM(t,n,r))}),r!==void 0&&r._createAssociation(s,this),s}_write(t){t.writeTypeRef(da),t.writeKey(this.nodeName)}}const Kl=e=>new dn(e.readKey());class Jl extends xr{constructor(t,n,r){super(t,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(s=>{s===null?this.childListChanged=!0:this.attributesChanged.add(s)})}}class Jn extends an{constructor(t){super(),this.hookName=t}_copy(){return new Jn(this.hookName)}clone(){const t=new Jn(this.hookName);return this.forEach((n,r)=>{t.set(r,n)}),t}toDOM(t=document,n={},r){const s=n[this.hookName];let i;return s!==void 0?i=s.createDom(this):i=document.createElement(this.hookName),i.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(i,this),i}_write(t){t.writeTypeRef(fa),t.writeKey(this.hookName)}}const Yl=e=>new Jn(e.readKey());class Lr extends xn{get nextSibling(){const t=this._item?this._item.next:null;return t?t.content.type:null}get prevSibling(){const t=this._item?this._item.prev:null;return t?t.content.type:null}_copy(){return new Lr}clone(){const t=new Lr;return t.applyDelta(this.toDelta()),t}toDOM(t=document,n,r){const s=t.createTextNode(this.toString());return r!==void 0&&r._createAssociation(s,this),s}toString(){return this.toDelta().map(t=>{const n=[];for(const s in t.attributes){const i=[];for(const o in t.attributes[s])i.push({key:o,value:t.attributes[s][o]});i.sort((o,c)=>o.key<c.key?-1:1),n.push({nodeName:s,attrs:i})}n.sort((s,i)=>s.nodeName<i.nodeName?-1:1);let r="";for(let s=0;s<n.length;s++){const i=n[s];r+=`<${i.nodeName}`;for(let o=0;o<i.attrs.length;o++){const c=i.attrs[o];r+=` ${c.key}="${c.value}"`}r+=">"}r+=t.insert;for(let s=n.length-1;s>=0;s--)r+=`</${n[s].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(t){t.writeTypeRef(ga)}}const Xl=e=>new Lr;class xc{constructor(t,n){this.id=t,this.length=n}get deleted(){throw ve()}mergeWith(t){return!1}write(t,n,r){throw ve()}integrate(t,n){throw ve()}}const Ql=0;class pe extends xc{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){n>0&&(this.id.clock+=n,this.length-=n),qo(t.doc.store,this)}write(t,n){t.writeInfo(Ql),t.writeLen(this.length-n)}getMissing(t,n){return null}}class Un{constructor(t){this.content=t}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new Un(this.content)}splice(t){throw ve()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeBuf(this.content)}getRef(){return 3}}const ql=e=>new Un(e.readBuf());class Mn{constructor(t){this.len=t}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new Mn(this.len)}splice(t){const n=new Mn(this.len-t);return this.len=t,n}mergeWith(t){return this.len+=t.len,!0}integrate(t,n){Hn(t.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(t){}gc(t){}write(t,n){t.writeLen(this.len-n)}getRef(){return 1}}const ta=e=>new Mn(e.readLen()),Uc=(e,t)=>new cn(qs(Vr({guid:e},t),{shouldLoad:t.shouldLoad||t.autoLoad||!1}));class Pn{constructor(t){t._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=t;const n={};this.opts=n,t.gc||(n.gc=!1),t.autoLoad&&(n.autoLoad=!0),t.meta!==null&&(n.meta=t.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new Pn(Uc(this.doc.guid,this.opts))}splice(t){throw ve()}mergeWith(t){return!1}integrate(t,n){this.doc._item=n,t.subdocsAdded.add(this.doc),this.doc.shouldLoad&&t.subdocsLoaded.add(this.doc)}delete(t){t.subdocsAdded.has(this.doc)?t.subdocsAdded.delete(this.doc):t.subdocsRemoved.add(this.doc)}gc(t){}write(t,n){t.writeString(this.doc.guid),t.writeAny(this.opts)}getRef(){return 9}}const ea=e=>new Pn(Uc(e.readString(),e.readAny()));class Xe{constructor(t){this.embed=t}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new Xe(this.embed)}splice(t){throw ve()}mergeWith(t){return!1}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeJSON(this.embed)}getRef(){return 5}}const na=e=>new Xe(e.readJSON());class Vt{constructor(t,n){this.key=t,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new Vt(this.key,this.value)}splice(t){throw ve()}mergeWith(t){return!1}integrate(t,n){const r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(t){}gc(t){}write(t,n){t.writeKey(this.key),t.writeJSON(this.value)}getRef(){return 6}}const ra=e=>new Vt(e.readKey(),e.readJSON());class Yn{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Yn(this.arr)}splice(t){const n=new Yn(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let s=n;s<r;s++){const i=this.arr[s];t.writeString(i===void 0?"undefined":JSON.stringify(i))}}getRef(){return 2}}const sa=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++){const s=e.readString();s==="undefined"?n.push(void 0):n.push(JSON.parse(s))}return new Yn(n)};class Qe{constructor(t){this.arr=t}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new Qe(this.arr)}splice(t){const n=new Qe(this.arr.slice(t));return this.arr=this.arr.slice(0,t),n}mergeWith(t){return this.arr=this.arr.concat(t.arr),!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){const r=this.arr.length;t.writeLen(r-n);for(let s=n;s<r;s++){const i=this.arr[s];t.writeAny(i)}}getRef(){return 8}}const ia=e=>{const t=e.readLen(),n=[];for(let r=0;r<t;r++)n.push(e.readAny());return new Qe(n)};class Ae{constructor(t){this.str=t}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new Ae(this.str)}splice(t){const n=new Ae(this.str.slice(t));this.str=this.str.slice(0,t);const r=this.str.charCodeAt(t-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,t-1)+"\uFFFD",n.str="\uFFFD"+n.str.slice(1)),n}mergeWith(t){return this.str+=t.str,!0}integrate(t,n){}delete(t){}gc(t){}write(t,n){t.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}}const oa=e=>new Ae(e.readString()),ca=[jl,Fl,$l,Kl,Wl,Yl,Xl],la=0,aa=1,ua=2,da=3,ha=4,fa=5,ga=6;class xe{constructor(t){this.type=t}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new xe(this.type._copy())}splice(t){throw ve()}mergeWith(t){return!1}integrate(t,n){this.type._integrate(t.doc,n)}delete(t){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(t.beforeState.get(n.id.client)||0)&&t._mergeStructs.push(n):n.delete(t),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(t.beforeState.get(r.id.client)||0)&&t._mergeStructs.push(r):r.delete(t)}),t.changed.delete(this.type)}gc(t){let n=this.type._start;for(;n!==null;)n.gc(t,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(t,!0),r=r.left}),this.type._map=new Map}write(t,n){this.type._write(t)}getRef(){return 7}}const pa=e=>new xe(ca[e.readTypeRef()](e)),Xs=(e,t)=>{let n=t,r=0,s;do r>0&&(n=Z(n.client,n.clock+r)),s=Dr(e,n),r=n.clock-s.id.clock,n=s.redone;while(n!==null&&s instanceof gt);return{item:s,diff:r}},Qs=(e,t)=>{for(;e!==null&&e.keep!==t;)e.keep=t,e=e.parent._item},jr=(e,t,n)=>{const{client:r,clock:s}=t.id,i=new gt(Z(r,s+n),t,Z(r,s+n-1),t.right,t.rightOrigin,t.parent,t.parentSub,t.content.splice(n));return t.deleted&&i.markDeleted(),t.keep&&(i.keep=!0),t.redone!==null&&(i.redone=Z(t.redone.client,t.redone.clock+n)),t.right=i,i.right!==null&&(i.right.left=i),e._mergeStructs.push(i),i.parentSub!==null&&i.right===null&&i.parent._map.set(i.parentSub,i),t.length=n,i},Mc=(e,t)=>It(e,n=>kn(n.deletions,t)),Pc=(e,t,n,r,s,i)=>{const o=e.doc,c=o.store,u=o.clientID,h=t.redone;if(h!==null)return re(e,h);let d=t.parent._item,_=null,b;if(d!==null&&d.deleted===!0){if(d.redone===null&&(!n.has(d)||Pc(e,d,n,r,s,i)===null))return null;for(;d.redone!==null;)d=re(e,d.redone)}const v=d===null?t.parent:d.content.type;if(t.parentSub===null){for(_=t.left,b=t;_!==null;){let Ut=_;for(;Ut!==null&&Ut.parent._item!==d;)Ut=Ut.redone===null?null:re(e,Ut.redone);if(Ut!==null&&Ut.parent._item===d){_=Ut;break}_=_.left}for(;b!==null;){let Ut=b;for(;Ut!==null&&Ut.parent._item!==d;)Ut=Ut.redone===null?null:re(e,Ut.redone);if(Ut!==null&&Ut.parent._item===d){b=Ut;break}b=b.right}}else if(b=null,t.right&&!s){for(_=t;_!==null&&_.right!==null&&(_.right.redone||kn(r,_.right.id)||Mc(i.undoStack,_.right.id)||Mc(i.redoStack,_.right.id));)for(_=_.right;_.redone;)_=re(e,_.redone);if(_&&_.right!==null)return null}else _=v._map.get(t.parentSub)||null;const D=xt(c,u),W=Z(u,D),At=new gt(W,_,_&&_.lastId,b,b&&b.id,v,t.parentSub,t.content.copy());return t.redone=W,Qs(At,!0),At.integrate(e,0),At};class gt extends xc{constructor(t,n,r,s,i,o,c,u){super(t,u.getLength()),this.origin=r,this.left=n,this.right=s,this.rightOrigin=i,this.parent=o,this.parentSub=c,this.redone=null,this.content=u,this.info=this.content.isCountable()?Ot:0}set marker(t){(this.info&oe)>0!==t&&(this.info^=oe)}get marker(){return(this.info&oe)>0}get keep(){return(this.info&ie)>0}set keep(t){this.keep!==t&&(this.info^=ie)}get countable(){return(this.info&Ot)>0}get deleted(){return(this.info&Xt)>0}set deleted(t){this.deleted!==t&&(this.info^=Xt)}markDeleted(){this.info|=Xt}getMissing(t,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=xt(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=xt(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===In&&this.id.client!==this.parent.client&&this.parent.clock>=xt(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=tc(t,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=re(t,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===pe||this.right&&this.right.constructor===pe)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===gt&&(this.parent=this.left.parent,this.parentSub=this.left.parentSub),this.right&&this.right.constructor===gt&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===In){const r=Dr(n,this.parent);r.constructor===pe?this.parent=null:this.parent=r.content.type}return null}integrate(t,n){if(n>0&&(this.id.clock+=n,this.left=tc(t,t.doc.store,Z(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,s;if(r!==null)s=r.right;else if(this.parentSub!==null)for(s=this.parent._map.get(this.parentSub)||null;s!==null&&s.left!==null;)s=s.left;else s=this.parent._start;const i=new Set,o=new Set;for(;s!==null&&s!==this.right;){if(o.add(s),i.add(s),On(this.origin,s.origin)){if(s.id.client<this.id.client)r=s,i.clear();else if(On(this.rightOrigin,s.rightOrigin))break}else if(s.origin!==null&&o.has(Dr(t.doc.store,s.origin)))i.has(Dr(t.doc.store,s.origin))||(r=s,i.clear());else break;s=s.right}this.left=r}if(this.left!==null){const r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(t)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),qo(t.doc.store,this),this.content.integrate(t,this),rc(t,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(t)}else new pe(this.id,this.length).integrate(t,0)}get next(){let t=this.right;for(;t!==null&&t.deleted;)t=t.right;return t}get prev(){let t=this.left;for(;t!==null&&t.deleted;)t=t.left;return t}get lastId(){return this.length===1?this.id:Z(this.id.client,this.id.clock+this.length-1)}mergeWith(t){if(this.constructor===t.constructor&&On(t.origin,this.lastId)&&this.right===t&&On(this.rightOrigin,t.rightOrigin)&&this.id.client===t.id.client&&this.id.clock+this.length===t.id.clock&&this.deleted===t.deleted&&this.redone===null&&t.redone===null&&this.content.constructor===t.content.constructor&&this.content.mergeWith(t.content)){const n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===t&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),t.keep&&(this.keep=!0),this.right=t.right,this.right!==null&&(this.right.left=this),this.length+=t.length,!0}return!1}delete(t){if(!this.deleted){const n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Hn(t.deleteSet,this.id.client,this.id.clock,this.length),rc(t,n,this.parentSub),this.content.delete(t)}}gc(t,n){if(!this.deleted)throw Te();this.content.gc(t),n?wl(t,this,new pe(this.id,this.length)):this.content=new Mn(this.length)}write(t,n){const r=n>0?Z(this.id.client,this.id.clock+n-1):this.origin,s=this.rightOrigin,i=this.parentSub,o=this.content.getRef()&mt|(r===null?0:qt)|(s===null?0:_e)|(i===null?0:ce);if(t.writeInfo(o),r!==null&&t.writeLeftID(r),s!==null&&t.writeRightID(s),r===null&&s===null){const c=this.parent;if(c._item!==void 0){const u=c._item;if(u===null){const h=Jo(c);t.writeParentInfo(!0),t.writeString(h)}else t.writeParentInfo(!1),t.writeLeftID(u.id)}else c.constructor===String?(t.writeParentInfo(!0),t.writeString(c)):c.constructor===In?(t.writeParentInfo(!1),t.writeLeftID(c)):Te();i!==null&&t.writeString(i)}this.content.write(t,n)}}const Bc=(e,t)=>_a[t&binary.BITS5](e),_a=[()=>{Te()},ta,sa,ql,oa,na,ra,pa,ia,ea,()=>{Te()}],ya=10;class de extends null{get deleted(){return!0}delete(){}mergeWith(t){return this.constructor!==t.constructor?!1:(this.length+=t.length,!0)}integrate(t,n){error.unexpectedCase()}write(t,n){t.writeInfo(ya),encoding.writeVarUint(t.restEncoder,this.length-n)}getMissing(t,n){return null}}const Nc=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:{},Rc="__ $YJS$ __";Nc[Rc]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438"),Nc[Rc]=!0},51297:function(T,x,m){"use strict";m.d(x,{Ue:function(){return St}});var C=m(30960),B=m(50959),S=m(7231);const{useDebugValue:R}=B,{useSyncExternalStoreWithSelector:I}=S;let L=!1;const P=j=>j;function G(j,ot=P,ht){ht&&!L&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),L=!0);const pt=I(j.subscribe,j.getState,j.getServerState||j.getInitialState,ot,ht);return R(pt),pt}const K=j=>{typeof j!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const ot=typeof j=="function"?(0,C.M)(j):j,ht=(pt,Ft)=>G(ot,pt,Ft);return Object.assign(ht,ot),ht},St=j=>j?K(j):K;var H=j=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { create } from 'zustand'`."),St(j))}}]);
}());