!(function(){var cs=Object.defineProperty,us=Object.defineProperties;var ls=Object.getOwnPropertyDescriptors;var No=Object.getOwnPropertySymbols;var xi=Object.prototype.hasOwnProperty,wi=Object.prototype.propertyIsEnumerable;var ai=Math.pow,yi=(Dt,bt,Y)=>bt in Dt?cs(Dt,bt,{enumerable:!0,configurable:!0,writable:!0,value:Y}):Dt[bt]=Y,pt=(Dt,bt)=>{for(var Y in bt||(bt={}))xi.call(bt,Y)&&yi(Dt,Y,bt[Y]);if(No)for(var Y of No(bt))wi.call(bt,Y)&&yi(Dt,Y,bt[Y]);return Dt},Wt=(Dt,bt)=>us(Dt,ls(bt));var Or=(Dt,bt)=>{var Y={};for(var v in Dt)xi.call(Dt,v)&&bt.indexOf(v)<0&&(Y[v]=Dt[v]);if(Dt!=null&&No)for(var v of No(Dt))bt.indexOf(v)<0&&wi.call(Dt,v)&&(Y[v]=Dt[v]);return Y};(self.webpackChunk_ant_design_pro_flow=self.webpackChunk_ant_design_pro_flow||[]).push([[565],{22673:function(Dt,bt,Y){"use strict";Y.d(bt,{HH:function(){return Qt},s_:function(){return Fn},Ly:function(){return ot},x$:function(){return li},oI:function(){return Nn},VP:function(){return Ie},YH:function(){return tn},_K:function(){return Kr},oR:function(){return Bt},AC:function(){return Zt},Sj:function(){return Ti}});var v=Y(11527),y=Y(50959),tt=Y(76295),At=Y(53527),Nt=Y(97778),mt=Y(89416),rt=Y(41468),at=Y(13802),xt=Y(97565),zt=Y(49289),Tt=Y(5873),jt=t=>()=>t;function ye(t,{sourceEvent:e,subject:r,target:i,identifier:s,active:u,x:c,y:l,dx:g,dy:p,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:h}})}ye.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function wr(t){return!t.ctrlKey&&!t.button}function bn(){return this.parentNode}function cn(t,e){return e==null?{x:t.x,y:t.y}:e}function un(){return navigator.maxTouchPoints||"ontouchstart"in this}function He(){var t=wr,e=bn,r=cn,i=un,s={},u=(0,xt.Z)("start","drag","end"),c=0,l,g,p,h,m=0;function S(N){N.on("mousedown.drag",E).filter(i).on("touchstart.drag",R).on("touchmove.drag",D,Tt.Q7).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(N,$){if(!(h||!t.call(this,N,$))){var H=I(this,e.call(this,N,$),N,$,"mouse");H&&((0,rt.Z)(N.view).on("mousemove.drag",T,Tt.Dd).on("mouseup.drag",C,Tt.Dd),(0,zt.Z)(N.view),(0,Tt.rG)(N),p=!1,l=N.clientX,g=N.clientY,H("start",N))}}function T(N){if((0,Tt.ZP)(N),!p){var $=N.clientX-l,H=N.clientY-g;p=$*$+H*H>m}s.mouse("drag",N)}function C(N){(0,rt.Z)(N.view).on("mousemove.drag mouseup.drag",null),(0,zt.D)(N.view,p),(0,Tt.ZP)(N),s.mouse("end",N)}function R(N,$){if(t.call(this,N,$)){var H=N.changedTouches,L=e.call(this,N,$),W=H.length,Q,nt;for(Q=0;Q<W;++Q)(nt=I(this,L,N,$,H[Q].identifier,H[Q]))&&((0,Tt.rG)(N),nt("start",N,H[Q]))}}function D(N){var $=N.changedTouches,H=$.length,L,W;for(L=0;L<H;++L)(W=s[$[L].identifier])&&((0,Tt.ZP)(N),W("drag",N,$[L]))}function z(N){var $=N.changedTouches,H=$.length,L,W;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),L=0;L<H;++L)(W=s[$[L].identifier])&&((0,Tt.rG)(N),W("end",N,$[L]))}function I(N,$,H,L,W,Q){var nt=u.copy(),K=(0,at.Z)(Q||H,$),et,P,q;if((q=r.call(N,new ye("beforestart",{sourceEvent:H,target:S,identifier:W,active:c,x:K[0],y:K[1],dx:0,dy:0,dispatch:nt}),L))!=null)return et=q.x-K[0]||0,P=q.y-K[1]||0,function J(lt,wt,gt){var A=K,U;switch(lt){case"start":s[W]=J,U=c++;break;case"end":delete s[W],--c;case"drag":K=(0,at.Z)(gt||wt,$),U=c;break}nt.call(lt,N,new ye(lt,{sourceEvent:wt,subject:q,target:S,identifier:W,active:U,x:K[0]+et,y:K[1]+P,dx:K[0]-A[0],dy:K[1]-A[1],dispatch:nt}),L)}}return S.filter=function(N){return arguments.length?(t=typeof N=="function"?N:jt(!!N),S):t},S.container=function(N){return arguments.length?(e=typeof N=="function"?N:jt(N),S):e},S.subject=function(N){return arguments.length?(r=typeof N=="function"?N:jt(N),S):r},S.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:jt(!!N),S):i},S.on=function(){var N=u.on.apply(u,arguments);return N===u?S:N},S.clickDistance=function(N){return arguments.length?(m=(N=+N)*N,S):Math.sqrt(m)},S}var Ke=Y(10422);const Te=(0,y.createContext)(null),_r=Te.Provider,ne={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},br=ne.error001();function Bt(t,e){const r=(0,y.useContext)(Te);if(r===null)throw new Error(br);return(0,At.s)(r,t,e)}const Zt=()=>{const t=(0,y.useContext)(Te);if(t===null)throw new Error(br);return(0,y.useMemo)(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Zr=t=>t.userSelectionActive?"none":"all";function Fn(u){var c=u,{position:t,children:e,className:r,style:i}=c,s=Or(c,["position","children","className","style"]);const l=Bt(Zr),g=`${t}`.split("-");return(0,v.jsx)("div",Wt(pt({className:(0,tt.Z)(["react-flow__panel",r,...g]),style:Wt(pt({},i),{pointerEvents:l})},s),{children:e}))}function Lr({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:(0,v.jsx)(Fn,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,v.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Xr=m=>{var S=m,{x:t,y:e,label:r,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:u={},labelBgPadding:c=[2,4],labelBgBorderRadius:l=2,children:g,className:p}=S,h=Or(S,["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"]);const E=(0,y.useRef)(null),[T,C]=(0,y.useState)({x:0,y:0,width:0,height:0}),R=(0,tt.Z)(["react-flow__edge-textwrapper",p]);return(0,y.useEffect)(()=>{if(E.current){const D=E.current.getBBox();C({x:D.x,y:D.y,width:D.width,height:D.height})}},[r]),typeof r=="undefined"||!r?null:(0,v.jsxs)("g",Wt(pt({transform:`translate(${t-T.width/2} ${e-T.height/2})`,className:R,visibility:T.width?"visible":"hidden"},h),{children:[s&&(0,v.jsx)("rect",{width:T.width+2*c[0],x:-c[0],y:-c[1],height:T.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:l,ry:l}),(0,v.jsx)("text",{className:"react-flow__edge-text",y:T.height/2,dy:"0.3em",ref:E,style:i,children:r}),g]}))};var Yn=(0,y.memo)(Xr);const vn=t=>({width:t.offsetWidth,height:t.offsetHeight}),Ue=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),jn=(t={x:0,y:0},e)=>({x:Ue(t.x,e[0][0],e[1][0]),y:Ue(t.y,e[0][1],e[1][1])}),Kn=(t,e,r)=>t<e?Ue(Math.abs(t-e),1,50)/50:t>r?-Ue(Math.abs(t-r),1,50)/50:0,Un=(t,e)=>{const r=Kn(t.x,35,e.width-35)*20,i=Kn(t.y,35,e.height-35)*20;return[r,i]},Sn=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},ln=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Oe=({x:t,y:e,width:r,height:i})=>({x:t,y:e,x2:t+r,y2:e+i}),En=({x:t,y:e,x2:r,y2:i})=>({x:t,y:e,width:r-t,height:i-e}),fn=t=>Wt(pt({},t.positionAbsolute||{x:0,y:0}),{width:t.width||0,height:t.height||0}),Nn=(t,e)=>En(ln(Oe(t),Oe(e))),dn=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*i)},xe=t=>Lt(t.width)&&Lt(t.height)&&Lt(t.x)&&Lt(t.y),Lt=t=>!isNaN(t)&&isFinite(t),Vt=Symbol.for("internals"),hn=["Enter"," ","Escape"],Cn=(t,e)=>{},ke=t=>"nativeEvent"in t;function Mn(t){var s,u;const e=ke(t)?t.nativeEvent:t,r=((u=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:u[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const An=t=>"clientX"in t,we=(t,e)=>{var u,c,l,g;const r=An(t),i=r?t.clientX:(u=t.touches)==null?void 0:u[0].clientX,s=r?t.clientY:(c=t.touches)==null?void 0:c[0].clientY;return{x:i-((l=e==null?void 0:e.left)!=null?l:0),y:s-((g=e==null?void 0:e.top)!=null?g:0)}},Se=()=>{var t;return typeof navigator!="undefined"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},We=({id:t,path:e,labelX:r,labelY:i,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:S,interactionWidth:E=20})=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("path",{id:t,style:h,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:m,markerStart:S}),E&&(0,v.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:E,className:"react-flow__edge-interaction"}),s&&Lt(r)&&Lt(i)?(0,v.jsx)(Yn,{x:r,y:i,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p}):null]});We.displayName="BaseEdge";const Vr=(t,e)=>typeof e!="undefined"&&e?`url(#${e})`:typeof t!="undefined"?`url(#react-flow__${t})`:"none";function Ze(t,e,r){return r===void 0?r:i=>{const s=e().edges.find(u=>u.id===t);s&&r(i,pt({},s))}}function vr({sourceX:t,sourceY:e,targetX:r,targetY:i}){const s=Math.abs(r-t)/2,u=r<t?r+s:r-s,c=Math.abs(i-e)/2,l=i<e?i+c:i-c;return[u,l,s,c]}function Sr({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:l}){const g=t*.125+s*.375+c*.375+r*.125,p=e*.125+u*.375+l*.375+i*.125,h=Math.abs(g-t),m=Math.abs(p-e);return[g,p,h,m]}var Re;(function(t){t.Strict="strict",t.Loose="loose"})(Re||(Re={}));var Le;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Le||(Le={}));var gn;(function(t){t.Partial="partial",t.Full="full"})(gn||(gn={}));var De;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(De||(De={}));var Ge;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ge||(Ge={}));var ot;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ot||(ot={}));function Wn({pos:t,x1:e,y1:r,x2:i,y2:s}){return t===ot.Left||t===ot.Right?[.5*(e+i),r]:[e,.5*(r+s)]}function qe({sourceX:t,sourceY:e,sourcePosition:r=ot.Bottom,targetX:i,targetY:s,targetPosition:u=ot.Top}){const[c,l]=Wn({pos:r,x1:t,y1:e,x2:i,y2:s}),[g,p]=Wn({pos:u,x1:i,y1:s,x2:t,y2:e}),[h,m,S,E]=Sr({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:c,sourceControlY:l,targetControlX:g,targetControlY:p});return[`M${t},${e} C${c},${l} ${g},${p} ${i},${s}`,h,m,S,E]}const Xe=(0,y.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,sourcePosition:s=ot.Bottom,targetPosition:u=ot.Top,label:c,labelStyle:l,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:m,style:S,markerEnd:E,markerStart:T,interactionWidth:C})=>{const[R,D,z]=qe({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:i,targetPosition:u});return(0,v.jsx)(We,{path:R,labelX:D,labelY:z,label:c,labelStyle:l,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:m,style:S,markerEnd:E,markerStart:T,interactionWidth:C})});Xe.displayName="SimpleBezierEdge";const pn={[ot.Left]:{x:-1,y:0},[ot.Right]:{x:1,y:0},[ot.Top]:{x:0,y:-1},[ot.Bottom]:{x:0,y:1}},Qe=({source:t,sourcePosition:e=ot.Bottom,target:r})=>e===ot.Left||e===ot.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},Je=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function _e({source:t,sourcePosition:e=ot.Bottom,target:r,targetPosition:i=ot.Top,center:s,offset:u}){const c=pn[e],l=pn[i],g={x:t.x+c.x*u,y:t.y+c.y*u},p={x:r.x+l.x*u,y:r.y+l.y*u},h=Qe({source:g,sourcePosition:e,target:p}),m=h.x!==0?"x":"y",S=h[m];let E=[],T,C;const R={x:0,y:0},D={x:0,y:0},[z,I,N,$]=vr({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(c[m]*l[m]===-1){T=s.x||z,C=s.y||I;const L=[{x:T,y:g.y},{x:T,y:p.y}],W=[{x:g.x,y:C},{x:p.x,y:C}];c[m]===S?E=m==="x"?L:W:E=m==="x"?W:L}else{const L=[{x:g.x,y:p.y}],W=[{x:p.x,y:g.y}];if(m==="x"?E=c.x===S?W:L:E=c.y===S?L:W,e===i){const P=Math.abs(t[m]-r[m]);if(P<=u){const q=Math.min(u-1,u-P);c[m]===S?R[m]=(g[m]>t[m]?-1:1)*q:D[m]=(p[m]>r[m]?-1:1)*q}}if(e!==i){const P=m==="x"?"y":"x",q=c[m]===l[P],J=g[P]>p[P],lt=g[P]<p[P];(c[m]===1&&(!q&&J||q&&lt)||c[m]!==1&&(!q&&lt||q&&J))&&(E=m==="x"?L:W)}const Q={x:g.x+R.x,y:g.y+R.y},nt={x:p.x+D.x,y:p.y+D.y},K=Math.max(Math.abs(Q.x-E[0].x),Math.abs(nt.x-E[0].x)),et=Math.max(Math.abs(Q.y-E[0].y),Math.abs(nt.y-E[0].y));K>=et?(T=(Q.x+nt.x)/2,C=E[0].y):(T=E[0].x,C=(Q.y+nt.y)/2)}return[[t,{x:g.x+R.x,y:g.y+R.y},...E,{x:p.x+D.x,y:p.y+D.y},r],T,C,N,$]}function Fr(t,e,r,i){const s=Math.min(Je(t,e)/2,Je(e,r)/2,i),{x:u,y:c}=e;if(t.x===u&&u===r.x||t.y===c&&c===r.y)return`L${u} ${c}`;if(t.y===c){const p=t.x<r.x?-1:1,h=t.y<r.y?1:-1;return`L ${u+s*p},${c}Q ${u},${c} ${u},${c+s*h}`}const l=t.x<r.x?1:-1,g=t.y<r.y?-1:1;return`L ${u},${c+s*g}Q ${u},${c} ${u+s*l},${c}`}function Pn({sourceX:t,sourceY:e,sourcePosition:r=ot.Bottom,targetX:i,targetY:s,targetPosition:u=ot.Top,borderRadius:c=5,centerX:l,centerY:g,offset:p=20}){const[h,m,S,E,T]=_e({source:{x:t,y:e},sourcePosition:r,target:{x:i,y:s},targetPosition:u,center:{x:l,y:g},offset:p});return[h.reduce((R,D,z)=>{let I="";return z>0&&z<h.length-1?I=Fr(h[z-1],D,h[z+1],c):I=`${z===0?"M":"L"}${D.x} ${D.y}`,R+=I,R},""),m,S,E,T]}const Tn=(0,y.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p,style:h,sourcePosition:m=ot.Bottom,targetPosition:S=ot.Top,markerEnd:E,markerStart:T,pathOptions:C,interactionWidth:R})=>{const[D,z,I]=Pn({sourceX:t,sourceY:e,sourcePosition:m,targetX:r,targetY:i,targetPosition:S,borderRadius:C==null?void 0:C.borderRadius,offset:C==null?void 0:C.offset});return(0,v.jsx)(We,{path:D,labelX:z,labelY:I,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p,style:h,markerEnd:E,markerStart:T,interactionWidth:R})});Tn.displayName="SmoothStepEdge";const Gn=(0,y.memo)(t=>{var e;return(0,v.jsx)(Tn,Wt(pt({},t),{pathOptions:(0,y.useMemo)(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])}))});Gn.displayName="StepEdge";function Er({sourceX:t,sourceY:e,targetX:r,targetY:i}){const[s,u,c,l]=vr({sourceX:t,sourceY:e,targetX:r,targetY:i});return[`M ${t},${e}L ${r},${i}`,s,u,c,l]}const qn=(0,y.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:S,interactionWidth:E})=>{const[T,C,R]=Er({sourceX:t,sourceY:e,targetX:r,targetY:i});return(0,v.jsx)(We,{path:T,labelX:C,labelY:R,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p,style:h,markerEnd:m,markerStart:S,interactionWidth:E})});qn.displayName="StraightEdge";function kn(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Qn({pos:t,x1:e,y1:r,x2:i,y2:s,c:u}){switch(t){case ot.Left:return[e-kn(e-i,u),r];case ot.Right:return[e+kn(i-e,u),r];case ot.Top:return[e,r-kn(r-s,u)];case ot.Bottom:return[e,r+kn(s-r,u)]}}function Jn({sourceX:t,sourceY:e,sourcePosition:r=ot.Bottom,targetX:i,targetY:s,targetPosition:u=ot.Top,curvature:c=.25}){const[l,g]=Qn({pos:r,x1:t,y1:e,x2:i,y2:s,c}),[p,h]=Qn({pos:u,x1:i,y1:s,x2:t,y2:e,c}),[m,S,E,T]=Sr({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:l,sourceControlY:g,targetControlX:p,targetControlY:h});return[`M${t},${e} C${l},${g} ${p},${h} ${i},${s}`,m,S,E,T]}const Rn=(0,y.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,sourcePosition:s=ot.Bottom,targetPosition:u=ot.Top,label:c,labelStyle:l,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:m,style:S,markerEnd:E,markerStart:T,pathOptions:C,interactionWidth:R})=>{const[D,z,I]=Jn({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:i,targetPosition:u,curvature:C==null?void 0:C.curvature});return(0,v.jsx)(We,{path:D,labelX:z,labelY:I,label:c,labelStyle:l,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:m,style:S,markerEnd:E,markerStart:T,interactionWidth:R})});Rn.displayName="BezierEdge";const tr=(0,y.createContext)(null),Nr=tr.Provider;tr.Consumer;const mn=()=>(0,y.useContext)(tr),Cr=t=>"id"in t&&"source"in t&&"target"in t,yn=t=>"id"in t&&!("source"in t)&&!("target"in t),eo=(t,e,r)=>{if(!yn(t))return[];const i=r.filter(s=>s.source===t.id).map(s=>s.target);return e.filter(s=>i.includes(s.id))},er=(t,e,r)=>{if(!yn(t))return[];const i=r.filter(s=>s.target===t.id).map(s=>s.source);return e.filter(s=>i.includes(s.id))},Jt=({source:t,sourceHandle:e,target:r,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${r}${i||""}`,Dn=(t,e)=>typeof t=="undefined"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,Yr=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),nr=(t,e)=>{if(!t.source||!t.target)return Cn("006",ne.error006()),e;let r;return Cr(t)?r=pt({},t):r=Wt(pt({},t),{id:Jt(t)}),Yr(r,e)?e:e.concat(r)},rr=(t,e,r,i={shouldReplaceId:!0})=>{const g=t,{id:s}=g,u=Or(g,["id"]);if(!e.source||!e.target)return Cn("006",ne.error006()),r;if(!r.find(p=>p.id===s))return Cn("007",ne.error007(s)),r;const l=Wt(pt({},u),{id:i.shouldReplaceId?Jt(e):s,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle});return r.filter(p=>p.id!==s).concat(l)},ze=({x:t,y:e},[r,i,s],u,[c,l])=>{const g={x:(t-r)/s,y:(e-i)/s};return u?{x:c*Math.round(g.x/c),y:l*Math.round(g.y/l)}:g},Ve=({x:t,y:e},[r,i,s])=>({x:t*s+r,y:e*s+i}),Ie=(t,e=[0,0])=>{var u,c;if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=((u=t.width)!=null?u:0)*e[0],i=((c=t.height)!=null?c:0)*e[1],s={x:t.position.x-r,y:t.position.y-i};return Wt(pt({},s),{positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-i}:s})},tn=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((i,s)=>{const{x:u,y:c}=Ie(s,e).positionAbsolute;return ln(i,Oe({x:u,y:c,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return En(r)},se=(t,e,[r,i,s]=[0,0,1],u=!1,c=!1,l=[0,0])=>{const g={x:(e.x-r)/s,y:(e.y-i)/s,width:e.width/s,height:e.height/s},p=[];return t.forEach(h=>{const{width:m,height:S,selectable:E=!0,hidden:T=!1}=h;if(c&&!E||T)return!1;const{positionAbsolute:C}=Ie(h,l),R={x:C.x,y:C.y,width:m||0,height:S||0},D=dn(g,R),z=typeof m=="undefined"||typeof S=="undefined"||m===null||S===null,I=u&&D>0,N=(m||0)*(S||0);(z||I||D>=N||h.dragging)&&p.push(h)}),p},ae=(t,e)=>{const r=t.map(i=>i.id);return e.filter(i=>r.includes(i.source)||r.includes(i.target))},or=(t,e,r,i,s,u=.1)=>{const c=e/(t.width*(1+u)),l=r/(t.height*(1+u)),g=Math.min(c,l),p=Ue(g,i,s),h=t.x+t.width/2,m=t.y+t.height/2,S=e/2-h*p,E=r/2-m*p;return[S,E,p]},be=(t,e=0)=>t.transition().duration(e);function f(t,e,r,i){return(e[r]||[]).reduce((s,u)=>{var c,l,g,p;return`${t.id}-${u.id}-${r}`!==i&&s.push({id:u.id||null,type:r,nodeId:t.id,x:((l=(c=t.positionAbsolute)==null?void 0:c.x)!=null?l:0)+u.x+u.width/2,y:((p=(g=t.positionAbsolute)==null?void 0:g.y)!=null?p:0)+u.y+u.height/2}),s},[])}function _(t,e,r,i,s,u){const{x:c,y:l}=we(t),p=e.elementsFromPoint(c,l).find(T=>T.classList.contains("react-flow__handle"));if(p){const T=p.getAttribute("data-nodeid");if(T){const C=it(void 0,p),R=p.getAttribute("data-handleid"),D=u({nodeId:T,id:R,type:C});if(D)return{handle:{id:R,type:C,nodeId:T,x:r.x,y:r.y},validHandleResult:D}}}let h=[],m=1/0;if(s.forEach(T=>{const C=Math.sqrt(ai(T.x-r.x,2)+ai(T.y-r.y,2));if(C<=i){const R=u(T);C<=m&&(C<m?h=[{handle:T,validHandleResult:R}]:C===m&&h.push({handle:T,validHandleResult:R}),m=C)}}),!h.length)return{handle:null,validHandleResult:j()};if(h.length===1)return h[0];const S=h.some(({validHandleResult:T})=>T.isValid),E=h.some(({handle:T})=>T.type==="target");return h.find(({handle:T,validHandleResult:C})=>E?T.type==="target":S?C.isValid:!0)||h[0]}const F={source:null,target:null,sourceHandle:null,targetHandle:null},j=()=>({handleDomNode:null,isValid:!1,connection:F,endHandle:null});function B(t,e,r,i,s,u,c){const l=s==="target",g=c.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),p=Wt(pt({},j()),{handleDomNode:g});if(g){const h=it(void 0,g),m=g.getAttribute("data-nodeid"),S=g.getAttribute("data-handleid"),E=g.classList.contains("connectable"),T=g.classList.contains("connectableend"),C={source:l?m:r,sourceHandle:l?S:i,target:l?r:m,targetHandle:l?i:S};p.connection=C,E&&T&&(e===Re.Strict?l&&h==="source"||!l&&h==="target":m!==r||S!==i)&&(p.endHandle={nodeId:m,handleId:S,type:h},p.isValid=u(C))}return p}function G({nodes:t,nodeId:e,handleId:r,handleType:i}){return t.reduce((s,u)=>{if(u[Vt]){const{handleBounds:c}=u[Vt];let l=[],g=[];c&&(l=f(u,c,"source",`${e}-${r}-${i}`),g=f(u,c,"target",`${e}-${r}-${i}`)),s.push(...l,...g)}return s},[])}function it(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function st(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function yt(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function Ct({event:t,handleId:e,nodeId:r,onConnect:i,isTarget:s,getState:u,setState:c,isValidConnection:l,edgeUpdaterType:g,onEdgeUpdateEnd:p}){const h=Sn(t.target),{connectionMode:m,domNode:S,autoPanOnConnect:E,connectionRadius:T,onConnectStart:C,panBy:R,getNodes:D,cancelConnection:z}=u();let I=0,N;const{x:$,y:H}=we(t),L=h==null?void 0:h.elementFromPoint($,H),W=it(g,L),Q=S==null?void 0:S.getBoundingClientRect();if(!Q||!W)return;let nt,K=we(t,Q),et=!1,P=null,q=!1,J=null;const lt=G({nodes:D(),nodeId:r,handleId:e,handleType:W}),wt=()=>{if(!E)return;const[U,ct]=Un(K,Q);R({x:U,y:ct}),I=requestAnimationFrame(wt)};c({connectionPosition:K,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:W,connectionStartHandle:{nodeId:r,handleId:e,type:W},connectionEndHandle:null}),C==null||C(t,{nodeId:r,handleId:e,handleType:W});function gt(U){const{transform:ct}=u();K=we(U,Q);const{handle:_t,validHandleResult:vt}=_(U,h,ze(K,ct,!1,[1,1]),T,lt,$t=>B($t,m,r,e,s?"target":"source",l,h));if(N=_t,et||(wt(),et=!0),J=vt.handleDomNode,P=vt.connection,q=vt.isValid,c({connectionPosition:N&&q?Ve({x:N.x,y:N.y},ct):K,connectionStatus:yt(!!N,q),connectionEndHandle:vt.endHandle}),!N&&!q&&!J)return st(nt);P.source!==P.target&&J&&(st(nt),nt=J,J.classList.add("connecting","react-flow__handle-connecting"),J.classList.toggle("valid",q),J.classList.toggle("react-flow__handle-valid",q))}function A(U){var ct,_t;(N||J)&&P&&q&&(i==null||i(P)),(_t=(ct=u()).onConnectEnd)==null||_t.call(ct,U),g&&(p==null||p(U)),st(nt),z(),cancelAnimationFrame(I),et=!1,q=!1,P=null,J=null,h.removeEventListener("mousemove",gt),h.removeEventListener("mouseup",A),h.removeEventListener("touchmove",gt),h.removeEventListener("touchend",A)}h.addEventListener("mousemove",gt),h.addEventListener("mouseup",A),h.addEventListener("touchmove",gt),h.addEventListener("touchend",A)}const Ht=()=>!0,le=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Ee=(t,e,r)=>i=>{const{connectionStartHandle:s,connectionEndHandle:u,connectionClickStartHandle:c}=i;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r||(u==null?void 0:u.nodeId)===t&&(u==null?void 0:u.handleId)===e&&(u==null?void 0:u.type)===r,clickConnecting:(c==null?void 0:c.nodeId)===t&&(c==null?void 0:c.handleId)===e&&(c==null?void 0:c.type)===r}},fe=(0,y.forwardRef)((T,E)=>{var C=T,{type:t="source",position:e=ot.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:u=!0,id:c,onConnect:l,children:g,className:p,onMouseDown:h,onTouchStart:m}=C,S=Or(C,["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"]);var K,et;const R=c||null,D=t==="target",z=Zt(),I=mn(),{connectOnClick:N,noPanClassName:$}=Bt(le,Nt.X),{connecting:H,clickConnecting:L}=Bt(Ee(I,R,t),Nt.X);I||(et=(K=z.getState()).onError)==null||et.call(K,"010",ne.error010());const W=P=>{const{defaultEdgeOptions:q,onConnect:J,hasDefaultEdges:lt}=z.getState(),wt=pt(pt({},q),P);if(lt){const{edges:gt,setEdges:A}=z.getState();A(nr(wt,gt))}J==null||J(wt),l==null||l(wt)},Q=P=>{if(!I)return;const q=An(P);s&&(q&&P.button===0||!q)&&Ct({event:P,handleId:R,nodeId:I,onConnect:W,isTarget:D,getState:z.getState,setState:z.setState,isValidConnection:r||z.getState().isValidConnection||Ht}),q?h==null||h(P):m==null||m(P)},nt=P=>{const{onClickConnectStart:q,onClickConnectEnd:J,connectionClickStartHandle:lt,connectionMode:wt,isValidConnection:gt}=z.getState();if(!I||!lt&&!s)return;if(!lt){q==null||q(P,{nodeId:I,handleId:R,handleType:t}),z.setState({connectionClickStartHandle:{nodeId:I,type:t,handleId:R}});return}const A=Sn(P.target),U=r||gt||Ht,{connection:ct,isValid:_t}=B({nodeId:I,id:R,type:t},wt,lt.nodeId,lt.handleId||null,lt.type,U,A);_t&&W(ct),J==null||J(P),z.setState({connectionClickStartHandle:null})};return(0,v.jsx)("div",Wt(pt({"data-handleid":R,"data-nodeid":I,"data-handlepos":e,"data-id":`${I}-${R}-${t}`,className:(0,tt.Z)(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",$,p,{source:!D,target:D,connectable:i,connectablestart:s,connectableend:u,connecting:L,connectionindicator:i&&(s&&!H||u&&H)}]),onMouseDown:Q,onTouchStart:Q,onClick:N?nt:void 0,ref:E},S),{children:g}))});fe.displayName="Handle";var Qt=(0,y.memo)(fe);const xn=({data:t,isConnectable:e,targetPosition:r=ot.Top,sourcePosition:i=ot.Bottom})=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Qt,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,(0,v.jsx)(Qt,{type:"source",position:i,isConnectable:e})]});xn.displayName="DefaultNode";var zn=(0,y.memo)(xn);const Mr=({data:t,isConnectable:e,sourcePosition:r=ot.Bottom})=>(0,v.jsxs)(v.Fragment,{children:[t==null?void 0:t.label,(0,v.jsx)(Qt,{type:"source",position:r,isConnectable:e})]});Mr.displayName="InputNode";var en=(0,y.memo)(Mr);const nn=({data:t,isConnectable:e,targetPosition:r=ot.Top})=>(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(Qt,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label]});nn.displayName="OutputNode";var ir=(0,y.memo)(nn);const In=()=>null;In.displayName="GroupNode";const Co=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected)}),Ar=t=>t.id;function Mo(t,e){return(0,Nt.X)(t.selectedNodes.map(Ar),e.selectedNodes.map(Ar))&&(0,Nt.X)(t.selectedEdges.map(Ar),e.selectedEdges.map(Ar))}const no=(0,y.memo)(({onSelectionChange:t})=>{const e=Zt(),{selectedNodes:r,selectedEdges:i}=Bt(Co,Mo);return(0,y.useEffect)(()=>{var u,c;const s={nodes:r,edges:i};t==null||t(s),(c=(u=e.getState()).onSelectionChange)==null||c.call(u,s)},[r,i,t]),null});no.displayName="SelectionListener";const Ao=t=>!!t.onSelectionChange;function Po({onSelectionChange:t}){const e=Bt(Ao);return t||e?(0,v.jsx)(no,{onSelectionChange:t}):null}const To=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function $n(t,e){(0,y.useEffect)(()=>{typeof t!="undefined"&&e(t)},[t])}function kt(t,e,r){(0,y.useEffect)(()=>{typeof e!="undefined"&&r({[t]:e})},[e])}const ko=({nodes:t,edges:e,defaultNodes:r,defaultEdges:i,onConnect:s,onConnectStart:u,onConnectEnd:c,onClickConnectStart:l,onClickConnectEnd:g,nodesDraggable:p,nodesConnectable:h,nodesFocusable:m,edgesFocusable:S,edgesUpdatable:E,elevateNodesOnSelect:T,minZoom:C,maxZoom:R,nodeExtent:D,onNodesChange:z,onEdgesChange:I,elementsSelectable:N,connectionMode:$,snapGrid:H,snapToGrid:L,translateExtent:W,connectOnClick:Q,defaultEdgeOptions:nt,fitView:K,fitViewOptions:et,onNodesDelete:P,onEdgesDelete:q,onNodeDrag:J,onNodeDragStart:lt,onNodeDragStop:wt,onSelectionDrag:gt,onSelectionDragStart:A,onSelectionDragStop:U,noPanClassName:ct,nodeOrigin:_t,rfId:vt,autoPanOnConnect:$t,autoPanOnNodeDrag:Xt,onError:Gt,connectionRadius:oe,isValidConnection:ee})=>{const{setNodes:ie,setEdges:he,setDefaultNodesAndEdges:ue,setMinZoom:qt,setMaxZoom:Ae,setTranslateExtent:Ut,setNodeExtent:Yt,reset:me}=Bt(To,Nt.X),Et=Zt();return(0,y.useEffect)(()=>{const Ln=i==null?void 0:i.map(fr=>pt(pt({},fr),nt));return ue(r,Ln),()=>{me()}},[]),kt("defaultEdgeOptions",nt,Et.setState),kt("connectionMode",$,Et.setState),kt("onConnect",s,Et.setState),kt("onConnectStart",u,Et.setState),kt("onConnectEnd",c,Et.setState),kt("onClickConnectStart",l,Et.setState),kt("onClickConnectEnd",g,Et.setState),kt("nodesDraggable",p,Et.setState),kt("nodesConnectable",h,Et.setState),kt("nodesFocusable",m,Et.setState),kt("edgesFocusable",S,Et.setState),kt("edgesUpdatable",E,Et.setState),kt("elementsSelectable",N,Et.setState),kt("elevateNodesOnSelect",T,Et.setState),kt("snapToGrid",L,Et.setState),kt("snapGrid",H,Et.setState),kt("onNodesChange",z,Et.setState),kt("onEdgesChange",I,Et.setState),kt("connectOnClick",Q,Et.setState),kt("fitViewOnInit",K,Et.setState),kt("fitViewOnInitOptions",et,Et.setState),kt("onNodesDelete",P,Et.setState),kt("onEdgesDelete",q,Et.setState),kt("onNodeDrag",J,Et.setState),kt("onNodeDragStart",lt,Et.setState),kt("onNodeDragStop",wt,Et.setState),kt("onSelectionDrag",gt,Et.setState),kt("onSelectionDragStart",A,Et.setState),kt("onSelectionDragStop",U,Et.setState),kt("noPanClassName",ct,Et.setState),kt("nodeOrigin",_t,Et.setState),kt("rfId",vt,Et.setState),kt("autoPanOnConnect",$t,Et.setState),kt("autoPanOnNodeDrag",Xt,Et.setState),kt("onError",Gt,Et.setState),kt("connectionRadius",oe,Et.setState),kt("isValidConnection",ee,Et.setState),$n(t,ie),$n(e,he),$n(C,qt),$n(R,Ae),$n(W,Ut),$n(D,Yt),null},ro={display:"none"},Ro={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oo="react-flow__node-desc",io="react-flow__edge-desc",Do="react-flow__aria-live",zo=t=>t.ariaLiveMessage;function Io({rfId:t}){const e=Bt(zo);return(0,v.jsx)("div",{id:`${Do}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Ro,children:e})}function $o({rfId:t,disableKeyboardA11y:e}){return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("div",{id:`${oo}-${t}`,style:ro,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,v.jsx)("div",{id:`${io}-${t}`,style:ro,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&(0,v.jsx)(Io,{rfId:t})]})}const Bo=typeof document!="undefined"?document:null;var sr=(t=null,e={target:Bo})=>{const[r,i]=(0,y.useState)(!1),s=(0,y.useRef)(!1),u=(0,y.useRef)(new Set([])),[c,l]=(0,y.useMemo)(()=>{if(t!==null){const p=(Array.isArray(t)?t:[t]).filter(m=>typeof m=="string").map(m=>m.split("+")),h=p.reduce((m,S)=>m.concat(...S),[]);return[p,h]}return[[],[]]},[t]);return(0,y.useEffect)(()=>{var g,p;if(t!==null){const h=E=>{if(s.current=E.ctrlKey||E.metaKey||E.shiftKey,!s.current&&Mn(E))return!1;const T=ao(E.code,l);u.current.add(E[T]),so(c,u.current,!1)&&(E.preventDefault(),i(!0))},m=E=>{if(!s.current&&Mn(E))return!1;const T=ao(E.code,l);so(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(E[T]),E.key==="Meta"&&u.current.clear(),s.current=!1},S=()=>{u.current.clear(),i(!1)};return(g=e==null?void 0:e.target)==null||g.addEventListener("keydown",h),(p=e==null?void 0:e.target)==null||p.addEventListener("keyup",m),window.addEventListener("blur",S),()=>{var E,T;(E=e==null?void 0:e.target)==null||E.removeEventListener("keydown",h),(T=e==null?void 0:e.target)==null||T.removeEventListener("keyup",m),window.removeEventListener("blur",S)}}},[t,i]),r};function so(t,e,r){return t.filter(i=>r||i.length===e.size).some(i=>i.every(s=>e.has(s)))}function ao(t,e){return e.includes(t)?"code":"key"}function co(t,e,r,i){var c,l,g,p,h,m,S,E;if(!t.parentNode)return r;const s=e.get(t.parentNode),u=Ie(s,i);return co(s,e,{x:((c=r.x)!=null?c:0)+u.x,y:((l=r.y)!=null?l:0)+u.y,z:((p=(g=s[Vt])==null?void 0:g.z)!=null?p:0)>((h=r.z)!=null?h:0)?(S=(m=s[Vt])==null?void 0:m.z)!=null?S:0:(E=r.z)!=null?E:0},i)}function uo(t,e,r){t.forEach(i=>{var s,u;if(i.parentNode&&!t.has(i.parentNode))throw new Error(`Parent node ${i.parentNode} not found`);if(i.parentNode||r!=null&&r[i.id]){const{x:c,y:l,z:g}=co(i,t,Wt(pt({},i.position),{z:(u=(s=i[Vt])==null?void 0:s.z)!=null?u:0}),e);i.positionAbsolute={x:c,y:l},i[Vt].z=g,r!=null&&r[i.id]&&(i[Vt].isParent=!0)}})}function jr(t,e,r,i){const s=new Map,u={},c=i?1e3:0;return t.forEach(l=>{var m;const g=(Lt(l.zIndex)?l.zIndex:0)+(l.selected?c:0),p=e.get(l.id),h=Wt(pt({width:p==null?void 0:p.width,height:p==null?void 0:p.height},l),{positionAbsolute:{x:l.position.x,y:l.position.y}});l.parentNode&&(h.parentNode=l.parentNode,u[l.parentNode]=!0),Object.defineProperty(h,Vt,{enumerable:!1,value:{handleBounds:(m=p==null?void 0:p[Vt])==null?void 0:m.handleBounds,z:g}}),s.set(l.id,h)}),uo(s,r,u),s}function lo(t,e={}){var T,C,R;const{getNodes:r,width:i,height:s,minZoom:u,maxZoom:c,d3Zoom:l,d3Selection:g,fitViewOnInitDone:p,fitViewOnInit:h,nodeOrigin:m}=t(),S=e.initial&&!p&&h;if(l&&g&&(S||!e.initial)){const D=r().filter(I=>{var $;const N=e.includeHiddenNodes?I.width&&I.height:!I.hidden;return($=e.nodes)!=null&&$.length?N&&e.nodes.some(H=>H.id===I.id):N}),z=D.every(I=>I.width&&I.height);if(D.length>0&&z){const I=tn(D,m),[N,$,H]=or(I,i,s,(T=e.minZoom)!=null?T:u,(C=e.maxZoom)!=null?C:c,(R=e.padding)!=null?R:.1),L=mt.CR.translate(N,$).scale(H);return typeof e.duration=="number"&&e.duration>0?l.transform(be(g,e.duration),L):l.transform(g,L),!0}}return!1}function Ho(t,e){return t.forEach(r=>{const i=e.get(r.id);i&&e.set(i.id,Wt(pt({},i),{[Vt]:i[Vt],selected:r.selected}))}),new Map(e)}function Oo(t,e){return e.map(r=>{const i=t.find(s=>s.id===r.id);return i&&(r.selected=i.selected),r})}function Pr({changedNodes:t,changedEdges:e,get:r,set:i}){const{nodeInternals:s,edges:u,onNodesChange:c,onEdgesChange:l,hasDefaultNodes:g,hasDefaultEdges:p}=r();t!=null&&t.length&&(g&&i({nodeInternals:Ho(t,s)}),c==null||c(t)),e!=null&&e.length&&(p&&i({edges:Oo(e,u)}),l==null||l(e))}const Bn=()=>{},Zo={zoomIn:Bn,zoomOut:Bn,zoomTo:Bn,getZoom:()=>1,setViewport:Bn,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Bn,fitBounds:Bn,project:t=>t,viewportInitialized:!1},Lo=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Xo=()=>{const t=Zt(),{d3Zoom:e,d3Selection:r}=Bt(Lo,Nt.X);return(0,y.useMemo)(()=>r&&e?{zoomIn:s=>e.scaleBy(be(r,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(be(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,u)=>e.scaleTo(be(r,u==null?void 0:u.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,u)=>{var h,m,S;const[c,l,g]=t.getState().transform,p=mt.CR.translate((h=s.x)!=null?h:c,(m=s.y)!=null?m:l).scale((S=s.zoom)!=null?S:g);e.transform(be(r,u==null?void 0:u.duration),p)},getViewport:()=>{const[s,u,c]=t.getState().transform;return{x:s,y:u,zoom:c}},fitView:s=>lo(t.getState,s),setCenter:(s,u,c)=>{const{width:l,height:g,maxZoom:p}=t.getState(),h=typeof(c==null?void 0:c.zoom)!="undefined"?c.zoom:p,m=l/2-s*h,S=g/2-u*h,E=mt.CR.translate(m,S).scale(h);e.transform(be(r,c==null?void 0:c.duration),E)},fitBounds:(s,u)=>{var T;const{width:c,height:l,minZoom:g,maxZoom:p}=t.getState(),[h,m,S]=or(s,c,l,g,p,(T=u==null?void 0:u.padding)!=null?T:.1),E=mt.CR.translate(h,m).scale(S);e.transform(be(r,u==null?void 0:u.duration),E)},project:s=>{const{transform:u,snapToGrid:c,snapGrid:l}=t.getState();return ze(s,u,c,l)},viewportInitialized:!0}:Zo,[e,r])};function Kr(){const t=Xo(),e=Zt(),r=(0,y.useCallback)(()=>e.getState().getNodes().map(C=>pt({},C)),[]),i=(0,y.useCallback)(C=>e.getState().nodeInternals.get(C),[]),s=(0,y.useCallback)(()=>{const{edges:C=[]}=e.getState();return C.map(R=>pt({},R))},[]),u=(0,y.useCallback)(C=>{const{edges:R=[]}=e.getState();return R.find(D=>D.id===C)},[]),c=(0,y.useCallback)(C=>{const{getNodes:R,setNodes:D,hasDefaultNodes:z,onNodesChange:I}=e.getState(),N=R(),$=typeof C=="function"?C(N):C;if(z)D($);else if(I){const H=$.length===0?N.map(L=>({type:"remove",id:L.id})):$.map(L=>({item:L,type:"reset"}));I(H)}},[]),l=(0,y.useCallback)(C=>{const{edges:R=[],setEdges:D,hasDefaultEdges:z,onEdgesChange:I}=e.getState(),N=typeof C=="function"?C(R):C;if(z)D(N);else if(I){const $=N.length===0?R.map(H=>({type:"remove",id:H.id})):N.map(H=>({item:H,type:"reset"}));I($)}},[]),g=(0,y.useCallback)(C=>{const R=Array.isArray(C)?C:[C],{getNodes:D,setNodes:z,hasDefaultNodes:I,onNodesChange:N}=e.getState();if(I){const H=[...D(),...R];z(H)}else if(N){const $=R.map(H=>({item:H,type:"add"}));N($)}},[]),p=(0,y.useCallback)(C=>{const R=Array.isArray(C)?C:[C],{edges:D=[],setEdges:z,hasDefaultEdges:I,onEdgesChange:N}=e.getState();if(I)z([...D,...R]);else if(N){const $=R.map(H=>({item:H,type:"add"}));N($)}},[]),h=(0,y.useCallback)(()=>{const{getNodes:C,edges:R=[],transform:D}=e.getState(),[z,I,N]=D;return{nodes:C().map($=>pt({},$)),edges:R.map($=>pt({},$)),viewport:{x:z,y:I,zoom:N}}},[]),m=(0,y.useCallback)(({nodes:C,edges:R})=>{const{nodeInternals:D,getNodes:z,edges:I,hasDefaultNodes:N,hasDefaultEdges:$,onNodesDelete:H,onEdgesDelete:L,onNodesChange:W,onEdgesChange:Q}=e.getState(),nt=(C||[]).map(J=>J.id),K=(R||[]).map(J=>J.id),et=z().reduce((J,lt)=>{const wt=!nt.includes(lt.id)&&lt.parentNode&&J.find(A=>A.id===lt.parentNode);return(typeof lt.deletable=="boolean"?lt.deletable:!0)&&(nt.includes(lt.id)||wt)&&J.push(lt),J},[]),P=I.filter(J=>typeof J.deletable=="boolean"?J.deletable:!0),q=P.filter(J=>K.includes(J.id));if(et||q){const J=ae(et,P),lt=[...q,...J],wt=lt.reduce((gt,A)=>(gt.includes(A.id)||gt.push(A.id),gt),[]);if(($||N)&&($&&e.setState({edges:I.filter(gt=>!wt.includes(gt.id))}),N&&(et.forEach(gt=>{D.delete(gt.id)}),e.setState({nodeInternals:new Map(D)}))),wt.length>0&&(L==null||L(lt),Q&&Q(wt.map(gt=>({id:gt,type:"remove"})))),et.length>0&&(H==null||H(et),W)){const gt=et.map(A=>({id:A.id,type:"remove"}));W(gt)}}},[]),S=(0,y.useCallback)(C=>{const R=xe(C),D=R?null:e.getState().nodeInternals.get(C.id);return[R?C:fn(D),D,R]},[]),E=(0,y.useCallback)((C,R=!0,D)=>{const[z,I,N]=S(C);return z?(D||e.getState().getNodes()).filter($=>{if(!N&&($.id===I.id||!$.positionAbsolute))return!1;const H=fn($),L=dn(H,z);return R&&L>0||L>=C.width*C.height}):[]},[]),T=(0,y.useCallback)((C,R,D=!0)=>{const[z]=S(C);if(!z)return!1;const I=dn(z,R);return D&&I>0||I>=C.width*C.height},[]);return(0,y.useMemo)(()=>Wt(pt({},t),{getNodes:r,getNode:i,getEdges:s,getEdge:u,setNodes:c,setEdges:l,addNodes:g,addEdges:p,toObject:h,deleteElements:m,getIntersectingNodes:E,isNodeIntersecting:T}),[t,r,i,s,u,c,l,g,p,h,m,E,T])}var ar=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=Zt(),{deleteElements:i}=Kr(),s=sr(t),u=sr(e);(0,y.useEffect)(()=>{if(s){const{edges:c,getNodes:l}=r.getState(),g=l().filter(h=>h.selected),p=c.filter(h=>h.selected);i({nodes:g,edges:p}),r.setState({nodesSelectionActive:!1})}},[s]),(0,y.useEffect)(()=>{r.setState({multiSelectionActive:u})},[u])};function Vo(t){const e=Zt();(0,y.useEffect)(()=>{let r;const i=()=>{var u,c;if(!t.current)return;const s=vn(t.current);(s.height===0||s.width===0)&&((c=(u=e.getState()).onError)==null||c.call(u,"004",ne.error004())),e.setState({width:s.width||500,height:s.height||500})};return i(),window.addEventListener("resize",i),t.current&&(r=new ResizeObserver(()=>i()),r.observe(t.current)),()=>{window.removeEventListener("resize",i),r&&t.current&&r.unobserve(t.current)}},[])}const Tr={position:"absolute",width:"100%",height:"100%",top:0,left:0},Fo=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,kr=t=>({x:t.x,y:t.y,zoom:t.k}),Hn=(t,e)=>t.target.closest(`.${e}`),fo=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),ho=t=>{const e=t.ctrlKey&&Se()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Yo=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),jo=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:i,zoomOnScroll:s=!0,zoomOnPinch:u=!0,panOnScroll:c=!1,panOnScrollSpeed:l=.5,panOnScrollMode:g=Le.Free,zoomOnDoubleClick:p=!0,elementsSelectable:h,panOnDrag:m=!0,defaultViewport:S,translateExtent:E,minZoom:T,maxZoom:C,zoomActivationKeyCode:R,preventScrolling:D=!0,children:z,noWheelClassName:I,noPanClassName:N})=>{const $=(0,y.useRef)(),H=Zt(),L=(0,y.useRef)(!1),W=(0,y.useRef)(!1),Q=(0,y.useRef)(null),nt=(0,y.useRef)({x:0,y:0,zoom:0}),{d3Zoom:K,d3Selection:et,d3ZoomHandler:P,userSelectionActive:q}=Bt(Yo,Nt.X),J=sr(R),lt=(0,y.useRef)(0),wt=(0,y.useRef)(!1),gt=(0,y.useRef)();return Vo(Q),(0,y.useEffect)(()=>{if(Q.current){const A=Q.current.getBoundingClientRect(),U=(0,mt.sP)().scaleExtent([T,C]).translateExtent(E),ct=(0,rt.Z)(Q.current).call(U),_t=mt.CR.translate(S.x,S.y).scale(Ue(S.zoom,T,C)),vt=[[0,0],[A.width,A.height]],$t=U.constrain()(_t,vt,E);U.transform(ct,$t),U.wheelDelta(ho),H.setState({d3Zoom:U,d3Selection:ct,d3ZoomHandler:ct.on("wheel.zoom"),transform:[$t.x,$t.y,$t.k],domNode:Q.current.closest(".react-flow")})}},[]),(0,y.useEffect)(()=>{et&&K&&(c&&!J&&!q?et.on("wheel.zoom",A=>{if(Hn(A,I))return!1;A.preventDefault(),A.stopImmediatePropagation();const U=et.property("__zoom").k||1,ct=Se();if(A.ctrlKey&&u&&ct){const ie=(0,at.Z)(A),he=ho(A),ue=U*Math.pow(2,he);K.scaleTo(et,ue,ie,A);return}const _t=A.deltaMode===1?20:1;let vt=g===Le.Vertical?0:A.deltaX*_t,$t=g===Le.Horizontal?0:A.deltaY*_t;!ct&&A.shiftKey&&g!==Le.Vertical&&(vt=A.deltaY*_t,$t=0),K.translateBy(et,-(vt/U)*l,-($t/U)*l,{internal:!0});const Xt=kr(et.property("__zoom")),{onViewportChangeStart:Gt,onViewportChange:oe,onViewportChangeEnd:ee}=H.getState();clearTimeout(gt.current),wt.current||(wt.current=!0,e==null||e(A,Xt),Gt==null||Gt(Xt)),wt.current&&(t==null||t(A,Xt),oe==null||oe(Xt),gt.current=setTimeout(()=>{r==null||r(A,Xt),ee==null||ee(Xt),wt.current=!1},150))},{passive:!1}):typeof P!="undefined"&&et.on("wheel.zoom",function(A,U){if(!D||Hn(A,I))return null;A.preventDefault(),P.call(this,A,U)},{passive:!1}))},[q,c,g,et,K,P,J,u,D,I,e,t,r]),(0,y.useEffect)(()=>{K&&K.on("start",A=>{var _t,vt;if(!A.sourceEvent||A.sourceEvent.internal)return null;lt.current=(_t=A.sourceEvent)==null?void 0:_t.button;const{onViewportChangeStart:U}=H.getState(),ct=kr(A.transform);L.current=!0,nt.current=ct,((vt=A.sourceEvent)==null?void 0:vt.type)==="mousedown"&&H.setState({paneDragging:!0}),U==null||U(ct),e==null||e(A.sourceEvent,ct)})},[K,e]),(0,y.useEffect)(()=>{K&&(q&&!L.current?K.on("zoom",null):q||K.on("zoom",A=>{var ct,_t;const{onViewportChange:U}=H.getState();if(H.setState({transform:[A.transform.x,A.transform.y,A.transform.k]}),W.current=!!(i&&fo(m,(ct=lt.current)!=null?ct:0)),(t||U)&&!((_t=A.sourceEvent)!=null&&_t.internal)){const vt=kr(A.transform);U==null||U(vt),t==null||t(A.sourceEvent,vt)}}))},[q,K,t,m,i]),(0,y.useEffect)(()=>{K&&K.on("end",A=>{var ct;if(!A.sourceEvent||A.sourceEvent.internal)return null;const{onViewportChangeEnd:U}=H.getState();if(L.current=!1,H.setState({paneDragging:!1}),i&&fo(m,(ct=lt.current)!=null?ct:0)&&!W.current&&i(A.sourceEvent),W.current=!1,(r||U)&&Fo(nt.current,A.transform)){const _t=kr(A.transform);nt.current=_t,clearTimeout($.current),$.current=setTimeout(()=>{U==null||U(_t),r==null||r(A.sourceEvent,_t)},c?150:0)}})},[K,c,m,r,i]),(0,y.useEffect)(()=>{K&&K.filter(A=>{const U=J||s,ct=u&&A.ctrlKey;if(A.button===1&&A.type==="mousedown"&&(Hn(A,"react-flow__node")||Hn(A,"react-flow__edge")))return!0;if(!m&&!U&&!c&&!p&&!u||q||!p&&A.type==="dblclick"||Hn(A,I)&&A.type==="wheel"||Hn(A,N)&&A.type!=="wheel"||!u&&A.ctrlKey&&A.type==="wheel"||!U&&!c&&!ct&&A.type==="wheel"||!m&&(A.type==="mousedown"||A.type==="touchstart")||Array.isArray(m)&&!m.includes(A.button)&&(A.type==="mousedown"||A.type==="touchstart"))return!1;const _t=Array.isArray(m)&&m.includes(A.button)||!A.button||A.button<=1;return(!A.ctrlKey||A.type==="wheel")&&_t})},[q,K,s,u,c,p,m,h,J]),(0,v.jsx)("div",{className:"react-flow__renderer",ref:Q,style:Tr,children:z})},Ko=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Uo(){const{userSelectionActive:t,userSelectionRect:e}=Bt(Ko,Nt.X);return t&&e?(0,v.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function go(t,e){var i,s;const r=t.find(u=>u.id===e.parentNode);if(r){const u=e.position.x+e.width-r.width,c=e.position.y+e.height-r.height;if(u>0||c>0||e.position.x<0||e.position.y<0){if(r.style=pt({},r.style)||{},r.style.width=(i=r.style.width)!=null?i:r.width,r.style.height=(s=r.style.height)!=null?s:r.height,u>0&&(r.style.width+=u),c>0&&(r.style.height+=c),e.position.x<0){const l=Math.abs(e.position.x);r.position.x=r.position.x-l,r.style.width+=l,e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);r.position.y=r.position.y-l,r.style.height+=l,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function po(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const r=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,s)=>{const u=t.filter(l=>l.id===s.id);if(u.length===0)return i.push(s),i;const c=pt({},s);for(const l of u)if(l)switch(l.type){case"select":{c.selected=l.selected;break}case"position":{typeof l.position!="undefined"&&(c.position=l.position),typeof l.positionAbsolute!="undefined"&&(c.positionAbsolute=l.positionAbsolute),typeof l.dragging!="undefined"&&(c.dragging=l.dragging),c.expandParent&&go(i,c);break}case"dimensions":{typeof l.dimensions!="undefined"&&(c.width=l.dimensions.width,c.height=l.dimensions.height),typeof l.updateStyle!="undefined"&&(c.style=pt(pt({},c.style||{}),l.dimensions)),typeof l.resizing=="boolean"&&(c.resizing=l.resizing),c.expandParent&&go(i,c);break}case"remove":return i}return i.push(c),i},r)}function mo(t,e){return po(t,e)}function Wo(t,e){return po(t,e)}const rn=(t,e)=>({id:t,type:"select",selected:e});function On(t,e){return t.reduce((r,i)=>{const s=e.includes(i.id);return!i.selected&&s?(i.selected=!0,r.push(rn(i.id,!0))):i.selected&&!s&&(i.selected=!1,r.push(rn(i.id,!1))),r},[])}const Ur=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},Fe=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),yo=(0,y.memo)(({isSelecting:t,selectionMode:e=gn.Full,panOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:g,onPaneMouseMove:p,onPaneMouseLeave:h,children:m})=>{const S=(0,y.useRef)(null),E=Zt(),T=(0,y.useRef)(0),C=(0,y.useRef)(0),R=(0,y.useRef)(),{userSelectionActive:D,elementsSelectable:z,dragging:I}=Bt(Fe,Nt.X),N=()=>{E.setState({userSelectionActive:!1,userSelectionRect:null}),T.current=0,C.current=0},$=P=>{u==null||u(P),E.getState().resetSelectedElements(),E.setState({nodesSelectionActive:!1})},H=P=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){P.preventDefault();return}c==null||c(P)},L=l?P=>l(P):void 0,W=P=>{const{resetSelectedElements:q,domNode:J}=E.getState();if(R.current=J==null?void 0:J.getBoundingClientRect(),!z||!t||P.button!==0||P.target!==S.current||!R.current)return;const{x:lt,y:wt}=we(P,R.current);q(),E.setState({userSelectionRect:{width:0,height:0,startX:lt,startY:wt,x:lt,y:wt}}),i==null||i(P)},Q=P=>{var he,ue;const{userSelectionRect:q,nodeInternals:J,edges:lt,transform:wt,onNodesChange:gt,onEdgesChange:A,nodeOrigin:U,getNodes:ct}=E.getState();if(!t||!R.current||!q)return;E.setState({userSelectionActive:!0,nodesSelectionActive:!1});const _t=we(P,R.current),vt=(he=q.startX)!=null?he:0,$t=(ue=q.startY)!=null?ue:0,Xt=Wt(pt({},q),{x:_t.x<vt?_t.x:vt,y:_t.y<$t?_t.y:$t,width:Math.abs(_t.x-vt),height:Math.abs(_t.y-$t)}),Gt=ct(),oe=se(J,Xt,wt,e===gn.Partial,!0,U),ee=ae(oe,lt).map(qt=>qt.id),ie=oe.map(qt=>qt.id);if(T.current!==ie.length){T.current=ie.length;const qt=On(Gt,ie);qt.length&&(gt==null||gt(qt))}if(C.current!==ee.length){C.current=ee.length;const qt=On(lt,ee);qt.length&&(A==null||A(qt))}E.setState({userSelectionRect:Xt})},nt=P=>{if(P.button!==0)return;const{userSelectionRect:q}=E.getState();!D&&q&&P.target===S.current&&($==null||$(P)),E.setState({nodesSelectionActive:T.current>0}),N(),s==null||s(P)},K=P=>{D&&(E.setState({nodesSelectionActive:T.current>0}),s==null||s(P)),N()},et=z&&(t||D);return(0,v.jsxs)("div",{className:(0,tt.Z)(["react-flow__pane",{dragging:I,selection:t}]),onClick:et?void 0:Ur($,S),onContextMenu:Ur(H,S),onWheel:Ur(L,S),onMouseEnter:et?void 0:g,onMouseDown:et?W:void 0,onMouseMove:et?Q:p,onMouseUp:et?nt:void 0,onMouseLeave:et?K:h,ref:S,style:Tr,children:[m,(0,v.jsx)(Uo,{})]})});yo.displayName="Pane";function Wr(t,e){if(!t.parentNode)return!1;const r=e.get(t.parentNode);return r?r.selected?!0:Wr(r,e):!1}function $e(t,e,r){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===r.current)return!1;i=i.parentElement}while(i);return!1}function ci(t,e,r,i){return Array.from(t.values()).filter(s=>(s.selected||s.id===i)&&(!s.parentNode||!Wr(s,t))&&(s.draggable||e&&typeof s.draggable=="undefined")).map(s=>{var u,c,l,g;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-((c=(u=s.positionAbsolute)==null?void 0:u.x)!=null?c:0),y:r.y-((g=(l=s.positionAbsolute)==null?void 0:l.y)!=null?g:0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode,width:s.width,height:s.height}})}function ui(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function xo(t,e,r,i,s=[0,0],u){const c=ui(t,t.extent||i);let l=c;if(t.extent==="parent")if(t.parentNode&&t.width&&t.height){const h=r.get(t.parentNode),{x:m,y:S}=Ie(h,s).positionAbsolute;l=h&&Lt(m)&&Lt(S)&&Lt(h.width)&&Lt(h.height)?[[m+t.width*s[0],S+t.height*s[1]],[m+h.width-t.width+t.width*s[0],S+h.height-t.height+t.height*s[1]]]:l}else u==null||u("005",ne.error005()),l=c;else if(t.extent&&t.parentNode){const h=r.get(t.parentNode),{x:m,y:S}=Ie(h,s).positionAbsolute;l=[[t.extent[0][0]+m,t.extent[0][1]+S],[t.extent[1][0]+m,t.extent[1][1]+S]]}let g={x:0,y:0};if(t.parentNode){const h=r.get(t.parentNode);g=Ie(h,s).positionAbsolute}const p=l&&l!=="parent"?jn(e,l):e;return{position:{x:p.x-g.x,y:p.y-g.y},positionAbsolute:p}}function Gr({nodeId:t,dragItems:e,nodeInternals:r}){const i=e.map(s=>{const u=r.get(s.id);return Wt(pt({},u),{position:s.position,positionAbsolute:s.positionAbsolute})});return[t?i.find(s=>s.id===t):i[0],i]}const wo=(t,e,r,i)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const u=Array.from(s),c=e.getBoundingClientRect(),l={x:c.width*i[0],y:c.height*i[1]};return u.map(g=>{const p=g.getBoundingClientRect();return pt({id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(p.left-c.left-l.x)/r,y:(p.top-c.top-l.y)/r},vn(g))})};function cr(t,e,r){return r===void 0?r:i=>{const s=e().nodeInternals.get(t);s&&r(i,pt({},s))}}function Zn({id:t,store:e,unselect:r=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:u,multiSelectionActive:c,nodeInternals:l,onError:g}=e.getState(),p=l.get(t);if(!p){g==null||g("012",ne.error012(t));return}e.setState({nodesSelectionActive:!1}),p.selected?(r||p.selected&&c)&&(u({nodes:[p]}),requestAnimationFrame(()=>{var h;return(h=i==null?void 0:i.current)==null?void 0:h.blur()})):s([t])}function Go(){const t=Zt();return(0,y.useCallback)(({sourceEvent:r})=>{const{transform:i,snapGrid:s,snapToGrid:u}=t.getState(),c=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,g={x:(c-i[0])/i[2],y:(l-i[1])/i[2]};return pt({xSnapped:u?s[0]*Math.round(g.x/s[0]):g.x,ySnapped:u?s[1]*Math.round(g.y/s[1]):g.y},g)},[])}function Ne(t){return(e,r,i)=>t==null?void 0:t(e,i)}function ur({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:i,nodeId:s,isSelectable:u,selectNodesOnDrag:c}){const l=Zt(),[g,p]=(0,y.useState)(!1),h=(0,y.useRef)([]),m=(0,y.useRef)({x:null,y:null}),S=(0,y.useRef)(0),E=(0,y.useRef)(null),T=(0,y.useRef)({x:0,y:0}),C=(0,y.useRef)(null),R=(0,y.useRef)(!1),D=Go();return(0,y.useEffect)(()=>{if(t!=null&&t.current){const z=(0,rt.Z)(t.current),I=({x:$,y:H})=>{const{nodeInternals:L,onNodeDrag:W,onSelectionDrag:Q,updateNodePositions:nt,nodeExtent:K,snapGrid:et,snapToGrid:P,nodeOrigin:q,onError:J}=l.getState();m.current={x:$,y:H};let lt=!1,wt={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&K){const A=tn(h.current,q);wt=Oe(A)}if(h.current=h.current.map(A=>{var vt,$t;const U={x:$-A.distance.x,y:H-A.distance.y};P&&(U.x=et[0]*Math.round(U.x/et[0]),U.y=et[1]*Math.round(U.y/et[1]));const ct=[[K[0][0],K[0][1]],[K[1][0],K[1][1]]];h.current.length>1&&K&&!A.extent&&(ct[0][0]=A.positionAbsolute.x-wt.x+K[0][0],ct[1][0]=A.positionAbsolute.x+((vt=A.width)!=null?vt:0)-wt.x2+K[1][0],ct[0][1]=A.positionAbsolute.y-wt.y+K[0][1],ct[1][1]=A.positionAbsolute.y+(($t=A.height)!=null?$t:0)-wt.y2+K[1][1]);const _t=xo(A,U,L,ct,q,J);return lt=lt||A.position.x!==_t.position.x||A.position.y!==_t.position.y,A.position=_t.position,A.positionAbsolute=_t.positionAbsolute,A}),!lt)return;nt(h.current,!0,!0),p(!0);const gt=s?W:Ne(Q);if(gt&&C.current){const[A,U]=Gr({nodeId:s,dragItems:h.current,nodeInternals:L});gt(C.current,A,U)}},N=()=>{var L,W;if(!E.current)return;const[$,H]=Un(T.current,E.current);if($!==0||H!==0){const{transform:Q,panBy:nt}=l.getState();m.current.x=((L=m.current.x)!=null?L:0)-$/Q[2],m.current.y=((W=m.current.y)!=null?W:0)-H/Q[2],nt({x:$,y:H})&&I(m.current)}S.current=requestAnimationFrame(N)};if(e)z.on(".drag",null);else{const $=He().on("start",H=>{var lt;const{nodeInternals:L,multiSelectionActive:W,domNode:Q,nodesDraggable:nt,unselectNodesAndEdges:K,onNodeDragStart:et,onSelectionDragStart:P}=l.getState(),q=s?et:Ne(P);!c&&!W&&s&&((lt=L.get(s))!=null&&lt.selected||K()),s&&u&&c&&Zn({id:s,store:l,nodeRef:t});const J=D(H);if(m.current=J,h.current=ci(L,nt,J,s),q&&h.current){const[wt,gt]=Gr({nodeId:s,dragItems:h.current,nodeInternals:L});q(H.sourceEvent,wt,gt)}E.current=(Q==null?void 0:Q.getBoundingClientRect())||null,T.current=we(H.sourceEvent,E.current)}).on("drag",H=>{const L=D(H),{autoPanOnNodeDrag:W}=l.getState();!R.current&&W&&(R.current=!0,N()),(m.current.x!==L.xSnapped||m.current.y!==L.ySnapped)&&h.current&&(C.current=H.sourceEvent,T.current=we(H.sourceEvent,E.current),I(L))}).on("end",H=>{if(p(!1),R.current=!1,cancelAnimationFrame(S.current),h.current){const{updateNodePositions:L,nodeInternals:W,onNodeDragStop:Q,onSelectionDragStop:nt}=l.getState(),K=s?Q:Ne(nt);if(L(h.current,!1,!1),K){const[et,P]=Gr({nodeId:s,dragItems:h.current,nodeInternals:W});K(H.sourceEvent,et,P)}}}).filter(H=>{const L=H.target;return!H.button&&(!r||!$e(L,`.${r}`,t))&&(!i||$e(L,i,t))});return z.call($),()=>{z.on(".drag",null)}}}},[t,e,r,i,u,l,s,c,D]),g}function _o(){const t=Zt();return(0,y.useCallback)(r=>{const{nodeInternals:i,nodeExtent:s,updateNodePositions:u,getNodes:c,snapToGrid:l,snapGrid:g,onError:p,nodesDraggable:h}=t.getState(),m=c().filter(z=>z.selected&&(z.draggable||h&&typeof z.draggable=="undefined")),S=l?g[0]:5,E=l?g[1]:5,T=r.isShiftPressed?4:1,C=r.x*S*T,R=r.y*E*T,D=m.map(z=>{if(z.positionAbsolute){const I={x:z.positionAbsolute.x+C,y:z.positionAbsolute.y+R};l&&(I.x=g[0]*Math.round(I.x/g[0]),I.y=g[1]*Math.round(I.y/g[1]));const{positionAbsolute:N,position:$}=xo(z,I,i,s,void 0,p);z.position=$,z.positionAbsolute=N}return z});u(D,!0,!1)},[])}const on={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ye=t=>{const e=({id:r,type:i,data:s,xPos:u,yPos:c,xPosOrigin:l,yPosOrigin:g,selected:p,onClick:h,onMouseEnter:m,onMouseMove:S,onMouseLeave:E,onContextMenu:T,onDoubleClick:C,style:R,className:D,isDraggable:z,isSelectable:I,isConnectable:N,isFocusable:$,selectNodesOnDrag:H,sourcePosition:L,targetPosition:W,hidden:Q,resizeObserver:nt,dragHandle:K,zIndex:et,isParent:P,noDragClassName:q,noPanClassName:J,initialized:lt,disableKeyboardA11y:wt,ariaLabel:gt,rfId:A})=>{const U=Zt(),ct=(0,y.useRef)(null),_t=(0,y.useRef)(L),vt=(0,y.useRef)(W),$t=(0,y.useRef)(i),Xt=I||z||h||m||S||E,Gt=_o(),oe=cr(r,U.getState,m),ee=cr(r,U.getState,S),ie=cr(r,U.getState,E),he=cr(r,U.getState,T),ue=cr(r,U.getState,C),qt=Yt=>{if(I&&(!H||!z)&&Zn({id:r,store:U,nodeRef:ct}),h){const me=U.getState().nodeInternals.get(r);me&&h(Yt,pt({},me))}},Ae=Yt=>{if(!Mn(Yt))if(hn.includes(Yt.key)&&I){const me=Yt.key==="Escape";Zn({id:r,store:U,unselect:me,nodeRef:ct})}else!wt&&z&&p&&Object.prototype.hasOwnProperty.call(on,Yt.key)&&(U.setState({ariaLiveMessage:`Moved selected node ${Yt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~c}`}),Gt({x:on[Yt.key].x,y:on[Yt.key].y,isShiftPressed:Yt.shiftKey}))};(0,y.useEffect)(()=>{if(ct.current&&!Q){const Yt=ct.current;return nt==null||nt.observe(Yt),()=>nt==null?void 0:nt.unobserve(Yt)}},[Q]),(0,y.useEffect)(()=>{const Yt=$t.current!==i,me=_t.current!==L,Et=vt.current!==W;ct.current&&(Yt||me||Et)&&(Yt&&($t.current=i),me&&(_t.current=L),Et&&(vt.current=W),U.getState().updateNodeDimensions([{id:r,nodeElement:ct.current,forceUpdate:!0}]))},[r,i,L,W]);const Ut=ur({nodeRef:ct,disabled:Q||!z,noDragClassName:q,handleSelector:K,nodeId:r,isSelectable:I,selectNodesOnDrag:H});return Q?null:(0,v.jsx)("div",{className:(0,tt.Z)(["react-flow__node",`react-flow__node-${i}`,{[J]:z},D,{selected:p,selectable:I,parent:P,dragging:Ut}]),ref:ct,style:pt({zIndex:et,transform:`translate(${l}px,${g}px)`,pointerEvents:Xt?"all":"none",visibility:lt?"visible":"hidden"},R),"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:oe,onMouseMove:ee,onMouseLeave:ie,onContextMenu:he,onClick:qt,onDoubleClick:ue,onKeyDown:$?Ae:void 0,tabIndex:$?0:void 0,role:$?"button":void 0,"aria-describedby":wt?void 0:`${oo}-${A}`,"aria-label":gt,children:(0,v.jsx)(Nr,{value:r,children:(0,v.jsx)(t,{id:r,data:s,type:i,xPos:u,yPos:c,selected:p,isConnectable:N,sourcePosition:L,targetPosition:W,dragging:Ut,dragHandle:K,zIndex:et})})})};return e.displayName="NodeWrapper",(0,y.memo)(e)};const qo=t=>{const e=t.getNodes().filter(r=>r.selected);return Wt(pt({},tn(e,t.nodeOrigin)),{transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive})};function Qo({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const i=Zt(),{width:s,height:u,x:c,y:l,transformString:g,userSelectionActive:p}=Bt(qo,Nt.X),h=_o(),m=(0,y.useRef)(null);if((0,y.useEffect)(()=>{var T;r||(T=m.current)==null||T.focus({preventScroll:!0})},[r]),ur({nodeRef:m}),p||!s||!u)return null;const S=t?T=>{const C=i.getState().getNodes().filter(R=>R.selected);t(T,C)}:void 0,E=T=>{Object.prototype.hasOwnProperty.call(on,T.key)&&h({x:on[T.key].x,y:on[T.key].y,isShiftPressed:T.shiftKey})};return(0,v.jsx)("div",{className:(0,tt.Z)(["react-flow__nodesselection","react-flow__container",e]),style:{transform:g},children:(0,v.jsx)("div",{ref:m,className:"react-flow__nodesselection-rect",onContextMenu:S,tabIndex:r?void 0:-1,onKeyDown:r?void 0:E,style:{width:s,height:u,top:l,left:c}})})}var bo=(0,y.memo)(Qo);const Jo=t=>t.nodesSelectionActive,vo=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:c,deleteKeyCode:l,onMove:g,onMoveStart:p,onMoveEnd:h,selectionKeyCode:m,selectionOnDrag:S,selectionMode:E,onSelectionStart:T,onSelectionEnd:C,multiSelectionKeyCode:R,panActivationKeyCode:D,zoomActivationKeyCode:z,elementsSelectable:I,zoomOnScroll:N,zoomOnPinch:$,panOnScroll:H,panOnScrollSpeed:L,panOnScrollMode:W,zoomOnDoubleClick:Q,panOnDrag:nt,defaultViewport:K,translateExtent:et,minZoom:P,maxZoom:q,preventScrolling:J,onSelectionContextMenu:lt,noWheelClassName:wt,noPanClassName:gt,disableKeyboardA11y:A})=>{const U=Bt(Jo),ct=sr(m),vt=sr(D)||nt,$t=ct||S&&vt!==!0;return ar({deleteKeyCode:l,multiSelectionKeyCode:R}),(0,v.jsx)(jo,{onMove:g,onMoveStart:p,onMoveEnd:h,onPaneContextMenu:u,elementsSelectable:I,zoomOnScroll:N,zoomOnPinch:$,panOnScroll:H,panOnScrollSpeed:L,panOnScrollMode:W,zoomOnDoubleClick:Q,panOnDrag:!ct&&vt,defaultViewport:K,translateExtent:et,minZoom:P,maxZoom:q,zoomActivationKeyCode:z,preventScrolling:J,noWheelClassName:wt,noPanClassName:gt,children:(0,v.jsxs)(yo,{onSelectionStart:T,onSelectionEnd:C,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:vt,isSelecting:!!$t,selectionMode:E,children:[t,U&&(0,v.jsx)(bo,{onSelectionContextMenu:lt,noPanClassName:gt,disableKeyboardA11y:A})]})})};vo.displayName="FlowRenderer";var ti=(0,y.memo)(vo);function ei(t){return Bt((0,y.useCallback)(r=>t?se(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function n(t){const e={input:Ye(t.input||en),default:Ye(t.default||zn),output:Ye(t.output||ir),group:Ye(t.group||In)},r={},i=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,u)=>(s[u]=Ye(t[u]||zn),s),r);return pt(pt({},e),i)}const o=({x:t,y:e,width:r,height:i,origin:s})=>!r||!i?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-r*s[0],y:e-i*s[1]},a=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),d=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:i,elementsSelectable:s,updateNodeDimensions:u,onError:c}=Bt(a,Nt.X),l=ei(t.onlyRenderVisibleElements),g=(0,y.useRef)(),p=(0,y.useMemo)(()=>{if(typeof ResizeObserver=="undefined")return null;const h=new ResizeObserver(m=>{const S=m.map(E=>({id:E.target.getAttribute("data-id"),nodeElement:E.target,forceUpdate:!0}));u(S)});return g.current=h,h},[]);return(0,y.useEffect)(()=>()=>{var h;(h=g==null?void 0:g.current)==null||h.disconnect()},[]),(0,v.jsx)("div",{className:"react-flow__nodes",style:Tr,children:l.map(h=>{var $,H,L,W,Q,nt,K;let m=h.type||"default";t.nodeTypes[m]||(c==null||c("003",ne.error003(m)),m="default");const S=t.nodeTypes[m]||t.nodeTypes.default,E=!!(h.draggable||e&&typeof h.draggable=="undefined"),T=!!(h.selectable||s&&typeof h.selectable=="undefined"),C=!!(h.connectable||r&&typeof h.connectable=="undefined"),R=!!(h.focusable||i&&typeof h.focusable=="undefined"),D=t.nodeExtent?jn(h.positionAbsolute,t.nodeExtent):h.positionAbsolute,z=($=D==null?void 0:D.x)!=null?$:0,I=(H=D==null?void 0:D.y)!=null?H:0,N=o({x:z,y:I,width:(L=h.width)!=null?L:0,height:(W=h.height)!=null?W:0,origin:t.nodeOrigin});return(0,v.jsx)(S,{id:h.id,className:h.className,style:h.style,type:m,data:h.data,sourcePosition:h.sourcePosition||ot.Bottom,targetPosition:h.targetPosition||ot.Top,hidden:h.hidden,xPos:z,yPos:I,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!h.selected,isDraggable:E,isSelectable:T,isConnectable:C,isFocusable:R,resizeObserver:p,dragHandle:h.dragHandle,zIndex:(nt=(Q=h[Vt])==null?void 0:Q.z)!=null?nt:0,isParent:!!((K=h[Vt])!=null&&K.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!h.width&&!!h.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:h.ariaLabel},h.id)})})};d.displayName="NodeRenderer";var w=(0,y.memo)(d);const b=(t,e,r)=>r===ot.Left?t-e:r===ot.Right?t+e:t,x=(t,e,r)=>r===ot.Top?t-e:r===ot.Bottom?t+e:t,k="react-flow__edgeupdater",O=({position:t,centerX:e,centerY:r,radius:i=10,onMouseDown:s,onMouseEnter:u,onMouseOut:c,type:l})=>(0,v.jsx)("circle",{onMouseDown:s,onMouseEnter:u,onMouseOut:c,className:(0,tt.Z)([k,`${k}-${l}`]),cx:b(e,i,t),cy:x(r,i,t),r:i,stroke:"transparent",fill:"transparent"}),X=()=>!0;var Z=t=>{const e=({id:r,className:i,type:s,data:u,onClick:c,onEdgeDoubleClick:l,selected:g,animated:p,label:h,labelStyle:m,labelShowBg:S,labelBgStyle:E,labelBgPadding:T,labelBgBorderRadius:C,style:R,source:D,target:z,sourceX:I,sourceY:N,targetX:$,targetY:H,sourcePosition:L,targetPosition:W,elementsSelectable:Q,hidden:nt,sourceHandleId:K,targetHandleId:et,onContextMenu:P,onMouseEnter:q,onMouseMove:J,onMouseLeave:lt,edgeUpdaterRadius:wt,onEdgeUpdate:gt,onEdgeUpdateStart:A,onEdgeUpdateEnd:U,markerEnd:ct,markerStart:_t,rfId:vt,ariaLabel:$t,isFocusable:Xt,isUpdatable:Gt,pathOptions:oe,interactionWidth:ee})=>{const ie=(0,y.useRef)(null),[he,ue]=(0,y.useState)(!1),[qt,Ae]=(0,y.useState)(!1),Ut=Zt(),Yt=(0,y.useMemo)(()=>`url(#${Dn(_t,vt)})`,[_t,vt]),me=(0,y.useMemo)(()=>`url(#${Dn(ct,vt)})`,[ct,vt]);if(nt)return null;const Et=ge=>{const{edges:Pe,addSelectedEdges:gr}=Ut.getState();if(Q&&(Ut.setState({nodesSelectionActive:!1}),gr([r])),c){const pr=Pe.find(mr=>mr.id===r);c(ge,pr)}},Ln=Ze(r,Ut.getState,l),fr=Ze(r,Ut.getState,P),qr=Ze(r,Ut.getState,q),Qr=Ze(r,Ut.getState,J),$r=Ze(r,Ut.getState,lt),dr=(ge,Pe)=>{if(ge.button!==0)return;const{edges:gr,isValidConnection:pr}=Ut.getState(),mr=Pe?z:D,Eo=(Pe?et:K)||null,yr=Pe?"target":"source",ri=pr||X,oi=Pe,to=gr.find(xr=>xr.id===r);Ae(!0),A==null||A(ge,to,yr);const ii=xr=>{Ae(!1),U==null||U(xr,to,yr)};Ct({event:ge,handleId:Eo,nodeId:mr,onConnect:xr=>gt==null?void 0:gt(to,xr),isTarget:oi,getState:Ut.getState,setState:Ut.setState,isValidConnection:ri,edgeUpdaterType:yr,onEdgeUpdateEnd:ii})},Xn=ge=>dr(ge,!0),Br=ge=>dr(ge,!1),Vn=()=>ue(!0),hr=()=>ue(!1),Jr=!Q&&!c,Hr=ge=>{var Pe;if(hn.includes(ge.key)&&Q){const{unselectNodesAndEdges:gr,addSelectedEdges:pr,edges:mr}=Ut.getState();ge.key==="Escape"?((Pe=ie.current)==null||Pe.blur(),gr({edges:[mr.find(yr=>yr.id===r)]})):pr([r])}};return(0,v.jsxs)("g",{className:(0,tt.Z)(["react-flow__edge",`react-flow__edge-${s}`,i,{selected:g,animated:p,inactive:Jr,updating:he}]),onClick:Et,onDoubleClick:Ln,onContextMenu:fr,onMouseEnter:qr,onMouseMove:Qr,onMouseLeave:$r,onKeyDown:Xt?Hr:void 0,tabIndex:Xt?0:void 0,role:Xt?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":$t===null?void 0:$t||`Edge from ${D} to ${z}`,"aria-describedby":Xt?`${io}-${vt}`:void 0,ref:ie,children:[!qt&&(0,v.jsx)(t,{id:r,source:D,target:z,selected:g,animated:p,label:h,labelStyle:m,labelShowBg:S,labelBgStyle:E,labelBgPadding:T,labelBgBorderRadius:C,data:u,style:R,sourceX:I,sourceY:N,targetX:$,targetY:H,sourcePosition:L,targetPosition:W,sourceHandleId:K,targetHandleId:et,markerStart:Yt,markerEnd:me,pathOptions:oe,interactionWidth:ee}),Gt&&(0,v.jsxs)(v.Fragment,{children:[(Gt==="source"||Gt===!0)&&(0,v.jsx)(O,{position:L,centerX:I,centerY:N,radius:wt,onMouseDown:Xn,onMouseEnter:Vn,onMouseOut:hr,type:"source"}),(Gt==="target"||Gt===!0)&&(0,v.jsx)(O,{position:W,centerX:$,centerY:H,radius:wt,onMouseDown:Br,onMouseEnter:Vn,onMouseOut:hr,type:"target"})]})]})};return e.displayName="EdgeWrapper",(0,y.memo)(e)};function dt(t){const e={default:Z(t.default||Rn),straight:Z(t.bezier||qn),step:Z(t.step||Gn),smoothstep:Z(t.step||Tn),simplebezier:Z(t.simplebezier||Xe)},r={},i=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,u)=>(s[u]=Z(t[u]||Rn),s),r);return pt(pt({},e),i)}function ft(t,e,r=null){const i=((r==null?void 0:r.x)||0)+e.x,s=((r==null?void 0:r.y)||0)+e.y,u=(r==null?void 0:r.width)||e.width,c=(r==null?void 0:r.height)||e.height;switch(t){case ot.Top:return{x:i+u/2,y:s};case ot.Right:return{x:i+u,y:s+c/2};case ot.Bottom:return{x:i+u/2,y:s+c};case ot.Left:return{x:i,y:s+c/2}}}function St(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const ce=(t,e,r,i,s,u)=>{const c=ft(r,t,e),l=ft(u,i,s);return{sourceX:c.x,sourceY:c.y,targetX:l.x,targetY:l.y}};function Kt({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:i,targetWidth:s,targetHeight:u,width:c,height:l,transform:g}){const p={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+s),y2:Math.max(t.y+i,e.y+u)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const h=Oe({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:c/g[2],height:l/g[2]}),m=Math.max(0,Math.min(h.x2,p.x2)-Math.max(h.x,p.x)),S=Math.max(0,Math.min(h.y2,p.y2)-Math.max(h.y,p.y));return Math.ceil(m*S)>0}function de(t){var i,s,u,c,l;const e=((i=t==null?void 0:t[Vt])==null?void 0:i.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)!="undefined"&&typeof((u=t==null?void 0:t.positionAbsolute)==null?void 0:u.y)!="undefined";return[{x:((c=t==null?void 0:t.positionAbsolute)==null?void 0:c.x)||0,y:((l=t==null?void 0:t.positionAbsolute)==null?void 0:l.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const Mt=[{level:0,isMaxLevel:!0,edges:[]}];function sn(t,e,r=!1){let i=-1;const s=t.reduce((c,l)=>{var h,m;const g=Lt(l.zIndex);let p=g?l.zIndex:0;if(r){const S=e.get(l.target),E=e.get(l.source),T=l.selected||(S==null?void 0:S.selected)||(E==null?void 0:E.selected),C=Math.max(((h=E==null?void 0:E[Vt])==null?void 0:h.z)||0,((m=S==null?void 0:S[Vt])==null?void 0:m.z)||0,1e3);p=(g?l.zIndex:0)+(T?C:0)}return c[p]?c[p].push(l):c[p]=[l],i=p>i?p:i,c},{}),u=Object.entries(s).map(([c,l])=>{const g=+c;return{edges:l,level:g,isMaxLevel:g===i}});return u.length===0?Mt:u}function je(t,e,r){const i=Bt((0,y.useCallback)(s=>t?s.edges.filter(u=>{const c=e.get(u.source),l=e.get(u.target);return(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&Kt({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:l.width,targetHeight:l.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return sn(i,e,r)}const wn=({color:t="none",strokeWidth:e=1})=>(0,v.jsx)("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:e,fill:"none",points:"-5,-4 0,0 -5,4"}),an=({color:t="none",strokeWidth:e=1})=>(0,v.jsx)("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:e,fill:t,points:"-5,-4 0,0 -5,4 -5,-4"}),ve={[Ge.Arrow]:wn,[Ge.ArrowClosed]:an};function Rr(t){const e=Zt();return(0,y.useMemo)(()=>{var s,u;return Object.prototype.hasOwnProperty.call(ve,t)?ve[t]:((u=(s=e.getState()).onError)==null||u.call(s,"009",ne.error009(t)),null)},[t])}const _n=({id:t,type:e,color:r,width:i=12.5,height:s=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:l="auto-start-reverse"})=>{const g=Rr(e);return g?(0,v.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:l,refX:"0",refY:"0",children:(0,v.jsx)(g,{color:r,strokeWidth:c})}):null},Dr=({defaultColor:t,rfId:e})=>r=>{const i=[];return r.edges.reduce((s,u)=>([u.markerStart,u.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const l=Dn(c,e);i.includes(l)||(s.push(pt({id:l,color:c.color||t},c)),i.push(l))}}),s),[]).sort((s,u)=>s.id.localeCompare(u.id))},lr=({defaultColor:t,rfId:e})=>{const r=Bt((0,y.useCallback)(Dr({defaultColor:t,rfId:e}),[t,e]),(i,s)=>!(i.length!==s.length||i.some((u,c)=>u.id!==s[c].id)));return(0,v.jsx)("defs",{children:r.map(i=>(0,v.jsx)(_n,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})};lr.displayName="MarkerDefinitions";var zr=(0,y.memo)(lr);const ni=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),So=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:i,edgeTypes:s,noPanClassName:u,onEdgeUpdate:c,onEdgeContextMenu:l,onEdgeMouseEnter:g,onEdgeMouseMove:p,onEdgeMouseLeave:h,onEdgeClick:m,edgeUpdaterRadius:S,onEdgeDoubleClick:E,onEdgeUpdateStart:T,onEdgeUpdateEnd:C,children:R})=>{const{edgesFocusable:D,edgesUpdatable:z,elementsSelectable:I,width:N,height:$,connectionMode:H,nodeInternals:L,onError:W}=Bt(ni,Nt.X),Q=je(e,L,r);return N?(0,v.jsxs)(v.Fragment,{children:[Q.map(({level:nt,edges:K,isMaxLevel:et})=>(0,v.jsxs)("svg",{style:{zIndex:nt},width:N,height:$,className:"react-flow__edges react-flow__container",children:[et&&(0,v.jsx)(zr,{defaultColor:t,rfId:i}),(0,v.jsx)("g",{children:K.map(P=>{var Ae,Ut;const[q,J,lt]=de(L.get(P.source)),[wt,gt,A]=de(L.get(P.target));if(!lt||!A)return null;let U=P.type||"default";s[U]||(W==null||W("011",ne.error011(U)),U="default");const ct=s[U]||s.default,_t=H===Re.Strict?gt.target:((Ae=gt.target)!=null?Ae:[]).concat((Ut=gt.source)!=null?Ut:[]),vt=St(J.source,P.sourceHandle),$t=St(_t,P.targetHandle),Xt=(vt==null?void 0:vt.position)||ot.Bottom,Gt=($t==null?void 0:$t.position)||ot.Top,oe=!!(P.focusable||D&&typeof P.focusable=="undefined"),ee=typeof c!="undefined"&&(P.updatable||z&&typeof P.updatable=="undefined");if(!vt||!$t)return W==null||W("008",ne.error008(vt,P)),null;const{sourceX:ie,sourceY:he,targetX:ue,targetY:qt}=ce(q,vt,Xt,wt,$t,Gt);return(0,v.jsx)(ct,{id:P.id,className:(0,tt.Z)([P.className,u]),type:U,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:ie,sourceY:he,targetX:ue,targetY:qt,sourcePosition:Xt,targetPosition:Gt,elementsSelectable:I,onEdgeUpdate:c,onContextMenu:l,onMouseEnter:g,onMouseMove:p,onMouseLeave:h,onClick:m,edgeUpdaterRadius:S,onEdgeDoubleClick:E,onEdgeUpdateStart:T,onEdgeUpdateEnd:C,rfId:i,ariaLabel:P.ariaLabel,isFocusable:oe,isUpdatable:ee,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth},P.id)})})]},nt)),R]}):null};So.displayName="EdgeRenderer";var M=(0,y.memo)(So);const ut=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function V({children:t}){const e=Bt(ut);return(0,v.jsx)("div",{className:"react-flow__viewport react-flow__container",style:{transform:e},children:t})}function ht(t){const e=Kr(),r=(0,y.useRef)(!1);(0,y.useEffect)(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const Pt={[ot.Left]:ot.Right,[ot.Right]:ot.Left,[ot.Top]:ot.Bottom,[ot.Bottom]:ot.Top},Rt=({nodeId:t,handleType:e,style:r,type:i=De.Bezier,CustomComponent:s,connectionStatus:u})=>{var H,L,W,Q,nt,K,et;const{fromNode:c,handleId:l,toX:g,toY:p,connectionMode:h}=Bt((0,y.useCallback)(P=>({fromNode:P.nodeInternals.get(t),handleId:P.connectionHandleId,toX:(P.connectionPosition.x-P.transform[0])/P.transform[2],toY:(P.connectionPosition.y-P.transform[1])/P.transform[2],connectionMode:P.connectionMode}),[t]),Nt.X),m=(H=c==null?void 0:c[Vt])==null?void 0:H.handleBounds;let S=m==null?void 0:m[e];if(h===Re.Loose&&(S=S||(m==null?void 0:m[e==="source"?"target":"source"])),!c||!S)return null;const E=l?S.find(P=>P.id===l):S[0],T=E?E.x+E.width/2:((L=c.width)!=null?L:0)/2,C=E?E.y+E.height/2:(W=c.height)!=null?W:0,R=((nt=(Q=c.positionAbsolute)==null?void 0:Q.x)!=null?nt:0)+T,D=((et=(K=c.positionAbsolute)==null?void 0:K.y)!=null?et:0)+C,z=E==null?void 0:E.position,I=z?Pt[z]:null;if(!z||!I)return null;if(s)return(0,v.jsx)(s,{connectionLineType:i,connectionLineStyle:r,fromNode:c,fromHandle:E,fromX:R,fromY:D,toX:g,toY:p,fromPosition:z,toPosition:I,connectionStatus:u});let N="";const $={sourceX:R,sourceY:D,sourcePosition:z,targetX:g,targetY:p,targetPosition:I};return i===De.Bezier?[N]=Jn($):i===De.Step?[N]=Pn(Wt(pt({},$),{borderRadius:0})):i===De.SmoothStep?[N]=Pn($):i===De.SimpleBezier?[N]=qe($):N=`M${R},${D} ${g},${p}`,(0,v.jsx)("path",{d:N,fill:"none",className:"react-flow__connection-path",style:r})};Rt.displayName="ConnectionLine";const It=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Ot({containerStyle:t,style:e,type:r,component:i}){const{nodeId:s,handleType:u,nodesConnectable:c,width:l,height:g,connectionStatus:p}=Bt(It,Nt.X);return!(s&&u&&l&&c)?null:(0,v.jsx)("svg",{style:t,width:l,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container",children:(0,v.jsx)("g",{className:(0,tt.Z)(["react-flow__connection",p]),children:(0,v.jsx)(Rt,{nodeId:s,handleType:u,style:e,type:r,CustomComponent:i,connectionStatus:p})})})}function Ft(t,e){const r=(0,y.useRef)(null),i=Zt();return(0,y.useMemo)(()=>e(t),[t])}const Ce=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:i,onMoveEnd:s,onInit:u,onNodeClick:c,onEdgeClick:l,onNodeDoubleClick:g,onEdgeDoubleClick:p,onNodeMouseEnter:h,onNodeMouseMove:m,onNodeMouseLeave:S,onNodeContextMenu:E,onSelectionContextMenu:T,onSelectionStart:C,onSelectionEnd:R,connectionLineType:D,connectionLineStyle:z,connectionLineComponent:I,connectionLineContainerStyle:N,selectionKeyCode:$,selectionOnDrag:H,selectionMode:L,multiSelectionKeyCode:W,panActivationKeyCode:Q,zoomActivationKeyCode:nt,deleteKeyCode:K,onlyRenderVisibleElements:et,elementsSelectable:P,selectNodesOnDrag:q,defaultViewport:J,translateExtent:lt,minZoom:wt,maxZoom:gt,preventScrolling:A,defaultMarkerColor:U,zoomOnScroll:ct,zoomOnPinch:_t,panOnScroll:vt,panOnScrollSpeed:$t,panOnScrollMode:Xt,zoomOnDoubleClick:Gt,panOnDrag:oe,onPaneClick:ee,onPaneMouseEnter:ie,onPaneMouseMove:he,onPaneMouseLeave:ue,onPaneScroll:qt,onPaneContextMenu:Ae,onEdgeUpdate:Ut,onEdgeContextMenu:Yt,onEdgeMouseEnter:me,onEdgeMouseMove:Et,onEdgeMouseLeave:Ln,edgeUpdaterRadius:fr,onEdgeUpdateStart:qr,onEdgeUpdateEnd:Qr,noDragClassName:$r,noWheelClassName:dr,noPanClassName:Xn,elevateEdgesOnSelect:Br,disableKeyboardA11y:Vn,nodeOrigin:hr,nodeExtent:Jr,rfId:Hr})=>{const ge=Ft(t,n),Pe=Ft(e,dt);return ht(u),(0,v.jsx)(ti,{onPaneClick:ee,onPaneMouseEnter:ie,onPaneMouseMove:he,onPaneMouseLeave:ue,onPaneContextMenu:Ae,onPaneScroll:qt,deleteKeyCode:K,selectionKeyCode:$,selectionOnDrag:H,selectionMode:L,onSelectionStart:C,onSelectionEnd:R,multiSelectionKeyCode:W,panActivationKeyCode:Q,zoomActivationKeyCode:nt,elementsSelectable:P,onMove:r,onMoveStart:i,onMoveEnd:s,zoomOnScroll:ct,zoomOnPinch:_t,zoomOnDoubleClick:Gt,panOnScroll:vt,panOnScrollSpeed:$t,panOnScrollMode:Xt,panOnDrag:oe,defaultViewport:J,translateExtent:lt,minZoom:wt,maxZoom:gt,onSelectionContextMenu:T,preventScrolling:A,noDragClassName:$r,noWheelClassName:dr,noPanClassName:Xn,disableKeyboardA11y:Vn,children:(0,v.jsxs)(V,{children:[(0,v.jsx)(M,{edgeTypes:Pe,onEdgeClick:l,onEdgeDoubleClick:p,onEdgeUpdate:Ut,onlyRenderVisibleElements:et,onEdgeContextMenu:Yt,onEdgeMouseEnter:me,onEdgeMouseMove:Et,onEdgeMouseLeave:Ln,onEdgeUpdateStart:qr,onEdgeUpdateEnd:Qr,edgeUpdaterRadius:fr,defaultMarkerColor:U,noPanClassName:Xn,elevateEdgesOnSelect:!!Br,disableKeyboardA11y:Vn,rfId:Hr,children:(0,v.jsx)(Ot,{style:z,type:D,component:I,containerStyle:N})}),(0,v.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,v.jsx)(w,{nodeTypes:ge,onNodeClick:c,onNodeDoubleClick:g,onNodeMouseEnter:h,onNodeMouseMove:m,onNodeMouseLeave:S,onNodeContextMenu:E,selectNodesOnDrag:q,onlyRenderVisibleElements:et,noPanClassName:Xn,noDragClassName:$r,disableKeyboardA11y:Vn,nodeOrigin:hr,nodeExtent:Jr,rfId:Hr})]})})};Ce.displayName="GraphView";var te=(0,y.memo)(Ce);const pe=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],re={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:pe,nodeExtent:pe,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Re.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Cn,isValidConnection:void 0},Me=()=>(0,At.F)((t,e)=>Wt(pt({},re),{setNodes:r=>{const{nodeInternals:i,nodeOrigin:s,elevateNodesOnSelect:u}=e();t({nodeInternals:jr(r,i,s,u)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:i={}}=e();t({edges:r.map(s=>pt(pt({},i),s))})},setDefaultNodesAndEdges:(r,i)=>{const s=typeof r!="undefined",u=typeof i!="undefined",c=s?jr(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:u?i:[],hasDefaultNodes:s,hasDefaultEdges:u})},updateNodeDimensions:r=>{const{onNodesChange:i,nodeInternals:s,fitViewOnInit:u,fitViewOnInitDone:c,fitViewOnInitOptions:l,domNode:g,nodeOrigin:p}=e(),h=g==null?void 0:g.querySelector(".react-flow__viewport");if(!h)return;const m=window.getComputedStyle(h),{m22:S}=new window.DOMMatrixReadOnly(m.transform),E=r.reduce((C,R)=>{const D=s.get(R.id);if(D){const z=vn(R.nodeElement);!!(z.width&&z.height&&(D.width!==z.width||D.height!==z.height||R.forceUpdate))&&(s.set(D.id,pt(Wt(pt({},D),{[Vt]:Wt(pt({},D[Vt]),{handleBounds:{source:wo(".source",R.nodeElement,S,p),target:wo(".target",R.nodeElement,S,p)}})}),z)),C.push({id:D.id,type:"dimensions",dimensions:z}))}return C},[]);uo(s,p);const T=c||u&&!c&&lo(e,pt({initial:!0},l));t({nodeInternals:new Map(s),fitViewOnInitDone:T}),(E==null?void 0:E.length)>0&&(i==null||i(E))},updateNodePositions:(r,i=!0,s=!1)=>{const{triggerNodeChanges:u}=e(),c=r.map(l=>{const g={id:l.id,type:"position",dragging:s};return i&&(g.positionAbsolute=l.positionAbsolute,g.position=l.position),g});u(c)},triggerNodeChanges:r=>{const{onNodesChange:i,nodeInternals:s,hasDefaultNodes:u,nodeOrigin:c,getNodes:l,elevateNodesOnSelect:g}=e();if(r!=null&&r.length){if(u){const p=mo(r,l()),h=jr(p,s,c,g);t({nodeInternals:h})}i==null||i(r)}},addSelectedNodes:r=>{const{multiSelectionActive:i,edges:s,getNodes:u}=e();let c,l=null;i?c=r.map(g=>rn(g,!0)):(c=On(u(),r),l=On(s,[])),Pr({changedNodes:c,changedEdges:l,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:i,edges:s,getNodes:u}=e();let c,l=null;i?c=r.map(g=>rn(g,!0)):(c=On(s,r),l=On(u(),[])),Pr({changedNodes:l,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:i}={})=>{const{edges:s,getNodes:u}=e(),c=r||u(),l=i||s,g=c.map(h=>(h.selected=!1,rn(h.id,!1))),p=l.map(h=>rn(h.id,!1));Pr({changedNodes:g,changedEdges:p,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:i,maxZoom:s}=e();i==null||i.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:i,minZoom:s}=e();i==null||i.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:r=>{var i;(i=e().d3Zoom)==null||i.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:i}=e(),u=i().filter(l=>l.selected).map(l=>rn(l.id,!1)),c=r.filter(l=>l.selected).map(l=>rn(l.id,!1));Pr({changedNodes:u,changedEdges:c,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:i}=e();i.forEach(s=>{s.positionAbsolute=jn(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(i)})},panBy:r=>{const{transform:i,width:s,height:u,d3Zoom:c,d3Selection:l,translateExtent:g}=e();if(!c||!l||!r.x&&!r.y)return!1;const p=mt.CR.translate(i[0]+r.x,i[1]+r.y).scale(i[2]),h=[[0,0],[s,u]],m=c==null?void 0:c.constrain()(p,h,g);return c.transform(l,m),i[0]!==m.x||i[1]!==m.y||i[2]!==m.k},cancelConnection:()=>t({connectionNodeId:re.connectionNodeId,connectionHandleId:re.connectionHandleId,connectionHandleType:re.connectionHandleType,connectionStatus:re.connectionStatus,connectionStartHandle:re.connectionStartHandle,connectionEndHandle:re.connectionEndHandle}),reset:()=>t(pt({},re))}),Object.is),Be=({children:t})=>{const e=(0,y.useRef)(null);return e.current||(e.current=Me()),(0,v.jsx)(_r,{value:e.current,children:t})};Be.displayName="ReactFlowProvider";const Ir=({children:t})=>(0,y.useContext)(Te)?(0,v.jsx)(v.Fragment,{children:t}):(0,v.jsx)(Be,{children:t});Ir.displayName="ReactFlowWrapper";const _i={input:en,default:zn,output:ir,group:In},bi={default:Rn,straight:qn,step:Gn,smoothstep:Tn,simplebezier:Xe},vi=[0,0],Si=[15,15],Ei={x:0,y:0,zoom:1},Ni={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},li=(0,y.forwardRef)((_s,as)=>{var mi=_s,{nodes:t,edges:e,defaultNodes:r,defaultEdges:i,className:s,nodeTypes:u=_i,edgeTypes:c=bi,onNodeClick:l,onEdgeClick:g,onInit:p,onMove:h,onMoveStart:m,onMoveEnd:S,onConnect:E,onConnectStart:T,onConnectEnd:C,onClickConnectStart:R,onClickConnectEnd:D,onNodeMouseEnter:z,onNodeMouseMove:I,onNodeMouseLeave:N,onNodeContextMenu:$,onNodeDoubleClick:H,onNodeDragStart:L,onNodeDrag:W,onNodeDragStop:Q,onNodesDelete:nt,onEdgesDelete:K,onSelectionChange:et,onSelectionDragStart:P,onSelectionDrag:q,onSelectionDragStop:J,onSelectionContextMenu:lt,onSelectionStart:wt,onSelectionEnd:gt,connectionMode:A=Re.Strict,connectionLineType:U=De.Bezier,connectionLineStyle:ct,connectionLineComponent:_t,connectionLineContainerStyle:vt,deleteKeyCode:$t="Backspace",selectionKeyCode:Xt="Shift",selectionOnDrag:Gt=!1,selectionMode:oe=gn.Full,panActivationKeyCode:ee="Space",multiSelectionKeyCode:ie=Se()?"Meta":"Control",zoomActivationKeyCode:he=Se()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:qt=Si,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:Ut=!0,nodesDraggable:Yt,nodesConnectable:me,nodesFocusable:Et,nodeOrigin:Ln=vi,edgesFocusable:fr,edgesUpdatable:qr,elementsSelectable:Qr,defaultViewport:$r=Ei,minZoom:dr=.5,maxZoom:Xn=2,translateExtent:Br=pe,preventScrolling:Vn=!0,nodeExtent:hr,defaultMarkerColor:Jr="#b1b1b7",zoomOnScroll:Hr=!0,zoomOnPinch:ge=!0,panOnScroll:Pe=!1,panOnScrollSpeed:gr=.5,panOnScrollMode:pr=Le.Free,zoomOnDoubleClick:mr=!0,panOnDrag:Eo=!0,onPaneClick:yr,onPaneMouseEnter:ri,onPaneMouseMove:oi,onPaneMouseLeave:to,onPaneScroll:ii,onPaneContextMenu:di,children:xr,onEdgeUpdate:Di,onEdgeContextMenu:zi,onEdgeDoubleClick:Ii,onEdgeMouseEnter:$i,onEdgeMouseMove:Bi,onEdgeMouseLeave:Hi,onEdgeUpdateStart:Oi,onEdgeUpdateEnd:Zi,edgeUpdaterRadius:Li=10,onNodesChange:Xi,onEdgesChange:Vi,noDragClassName:Fi="nodrag",noWheelClassName:Yi="nowheel",noPanClassName:hi="nopan",fitView:ji=!1,fitViewOptions:Ki,connectOnClick:Ui=!0,attributionPosition:Wi,proOptions:Gi,defaultEdgeOptions:qi,elevateNodesOnSelect:Qi=!0,elevateEdgesOnSelect:Ji=!1,disableKeyboardA11y:gi=!1,autoPanOnConnect:ts=!0,autoPanOnNodeDrag:es=!0,connectionRadius:ns=20,isValidConnection:rs,onError:os,style:is,id:pi}=mi,ss=Or(mi,["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesUpdatable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","connectionRadius","isValidConnection","onError","style","id"]);const si=pi||"1";return(0,v.jsx)("div",Wt(pt({},ss),{style:pt(pt({},is),Ni),ref:as,className:(0,tt.Z)(["react-flow",s]),"data-testid":"rf__wrapper",id:pi,children:(0,v.jsxs)(Ir,{children:[(0,v.jsx)(te,{onInit:p,onMove:h,onMoveStart:m,onMoveEnd:S,onNodeClick:l,onEdgeClick:g,onNodeMouseEnter:z,onNodeMouseMove:I,onNodeMouseLeave:N,onNodeContextMenu:$,onNodeDoubleClick:H,nodeTypes:u,edgeTypes:c,connectionLineType:U,connectionLineStyle:ct,connectionLineComponent:_t,connectionLineContainerStyle:vt,selectionKeyCode:Xt,selectionOnDrag:Gt,selectionMode:oe,deleteKeyCode:$t,multiSelectionKeyCode:ie,panActivationKeyCode:ee,zoomActivationKeyCode:he,onlyRenderVisibleElements:Ae,selectNodesOnDrag:Ut,defaultViewport:$r,translateExtent:Br,minZoom:dr,maxZoom:Xn,preventScrolling:Vn,zoomOnScroll:Hr,zoomOnPinch:ge,zoomOnDoubleClick:mr,panOnScroll:Pe,panOnScrollSpeed:gr,panOnScrollMode:pr,panOnDrag:Eo,onPaneClick:yr,onPaneMouseEnter:ri,onPaneMouseMove:oi,onPaneMouseLeave:to,onPaneScroll:ii,onPaneContextMenu:di,onSelectionContextMenu:lt,onSelectionStart:wt,onSelectionEnd:gt,onEdgeUpdate:Di,onEdgeContextMenu:zi,onEdgeDoubleClick:Ii,onEdgeMouseEnter:$i,onEdgeMouseMove:Bi,onEdgeMouseLeave:Hi,onEdgeUpdateStart:Oi,onEdgeUpdateEnd:Zi,edgeUpdaterRadius:Li,defaultMarkerColor:Jr,noDragClassName:Fi,noWheelClassName:Yi,noPanClassName:hi,elevateEdgesOnSelect:Ji,rfId:si,disableKeyboardA11y:gi,nodeOrigin:Ln,nodeExtent:hr}),(0,v.jsx)(ko,{nodes:t,edges:e,defaultNodes:r,defaultEdges:i,onConnect:E,onConnectStart:T,onConnectEnd:C,onClickConnectStart:R,onClickConnectEnd:D,nodesDraggable:Yt,nodesConnectable:me,nodesFocusable:Et,edgesFocusable:fr,edgesUpdatable:qr,elementsSelectable:Qr,elevateNodesOnSelect:Qi,minZoom:dr,maxZoom:Xn,nodeExtent:hr,onNodesChange:Xi,onEdgesChange:Vi,snapToGrid:ue,snapGrid:qt,connectionMode:A,translateExtent:Br,connectOnClick:Ui,defaultEdgeOptions:qi,fitView:ji,fitViewOptions:Ki,onNodesDelete:nt,onEdgesDelete:K,onNodeDragStart:L,onNodeDrag:W,onNodeDragStop:Q,onSelectionDrag:q,onSelectionDragStart:P,onSelectionDragStop:J,noPanClassName:hi,nodeOrigin:Ln,rfId:si,autoPanOnConnect:ts,autoPanOnNodeDrag:es,onError:os,connectionRadius:ns,isValidConnection:rs}),(0,v.jsx)(Po,{onSelectionChange:et}),xr,(0,v.jsx)(Lr,{proOptions:Gi,position:Wi}),(0,v.jsx)($o,{rfId:si,disableKeyboardA11y:gi})]})}))});li.displayName="ReactFlow";const Ci=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function fs({children:t}){const e=Bt(Ci);return e?createPortal(t,e):null}function ds(){const t=Zt();return useCallback(e=>{const{domNode:r,updateNodeDimensions:i}=t.getState(),u=(Array.isArray(e)?e:[e]).reduce((c,l)=>{const g=r==null?void 0:r.querySelector(`.react-flow__node[data-id="${l}"]`);return g&&c.push({id:l,nodeElement:g,forceUpdate:!0}),c},[]);requestAnimationFrame(()=>i(u))},[])}const Mi=t=>t.getNodes();function hs(){return Bt(Mi,shallow)}const Ai=t=>t.edges;function gs(){return Bt(Ai,shallow)}const Pi=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2]});function Ti(){return Bt(Pi,Nt.X)}function fi(t){return e=>{const[r,i]=(0,y.useState)(e),s=(0,y.useCallback)(u=>i(c=>t(u,c)),[]);return[r,i,s]}}const ps=fi(mo),ms=fi(Wo);function ys({onStart:t,onChange:e,onEnd:r}){const i=Zt();useEffect(()=>{i.setState({onViewportChangeStart:t})},[t]),useEffect(()=>{i.setState({onViewportChange:e})},[e]),useEffect(()=>{i.setState({onViewportChangeEnd:r})},[r])}function xs({onChange:t}){const e=Zt();useEffect(()=>{e.setState({onSelectionChange:t})},[t])}const ki=t=>e=>e.nodeInternals.size===0?!1:e.getNodes().filter(r=>t.includeHiddenNodes?!0:!r.hidden).every(r=>{var i;return((i=r[Vt])==null?void 0:i.handleBounds)!==void 0}),Ri={includeHiddenNodes:!1};function ws(t=Ri){return Bt(ki(t))}},92935:function(Dt){function bt(Y,v){return v||(v=Y.slice(0)),Object.freeze(Object.defineProperties(Y,{raw:{value:Object.freeze(v)}}))}Dt.exports=bt,Dt.exports.__esModule=!0,Dt.exports.default=Dt.exports},97565:function(Dt,bt){"use strict";var Y={value:function(){}};function v(){for(var mt=0,rt=arguments.length,at={},xt;mt<rt;++mt){if(!(xt=arguments[mt]+"")||xt in at||/[\s.]/.test(xt))throw new Error("illegal type: "+xt);at[xt]=[]}return new y(at)}function y(mt){this._=mt}function tt(mt,rt){return mt.trim().split(/^|\s+/).map(function(at){var xt="",zt=at.indexOf(".");if(zt>=0&&(xt=at.slice(zt+1),at=at.slice(0,zt)),at&&!rt.hasOwnProperty(at))throw new Error("unknown type: "+at);return{type:at,name:xt}})}y.prototype=v.prototype={constructor:y,on:function(rt,at){var xt=this._,zt=tt(rt+"",xt),Tt,jt=-1,ye=zt.length;if(arguments.length<2){for(;++jt<ye;)if((Tt=(rt=zt[jt]).type)&&(Tt=At(xt[Tt],rt.name)))return Tt;return}if(at!=null&&typeof at!="function")throw new Error("invalid callback: "+at);for(;++jt<ye;)if(Tt=(rt=zt[jt]).type)xt[Tt]=Nt(xt[Tt],rt.name,at);else if(at==null)for(Tt in xt)xt[Tt]=Nt(xt[Tt],rt.name,null);return this},copy:function(){var rt={},at=this._;for(var xt in at)rt[xt]=at[xt].slice();return new y(rt)},call:function(rt,at){if((Tt=arguments.length-2)>0)for(var xt=new Array(Tt),zt=0,Tt,jt;zt<Tt;++zt)xt[zt]=arguments[zt+2];if(!this._.hasOwnProperty(rt))throw new Error("unknown type: "+rt);for(jt=this._[rt],zt=0,Tt=jt.length;zt<Tt;++zt)jt[zt].value.apply(at,xt)},apply:function(rt,at,xt){if(!this._.hasOwnProperty(rt))throw new Error("unknown type: "+rt);for(var zt=this._[rt],Tt=0,jt=zt.length;Tt<jt;++Tt)zt[Tt].value.apply(at,xt)}};function At(mt,rt){for(var at=0,xt=mt.length,zt;at<xt;++at)if((zt=mt[at]).name===rt)return zt.value}function Nt(mt,rt,at){for(var xt=0,zt=mt.length;xt<zt;++xt)if(mt[xt].name===rt){mt[xt]=Y,mt=mt.slice(0,xt).concat(mt.slice(xt+1));break}return at!=null&&mt.push({name:rt,value:at}),mt}bt.Z=v},76295:function(Dt,bt,Y){"use strict";Y.d(bt,{Z:function(){return v}});function v(y){if(typeof y=="string"||typeof y=="number")return""+y;let tt="";if(Array.isArray(y))for(let At=0,Nt;At<y.length;At++)(Nt=v(y[At]))!==""&&(tt+=(tt&&" ")+Nt);else for(let At in y)y[At]&&(tt+=(tt&&" ")+At);return tt}},49289:function(Dt,bt,Y){"use strict";Y.d(bt,{D:function(){return At},Z:function(){return tt}});var v=Y(41468),y=Y(5873);function tt(Nt){var mt=Nt.document.documentElement,rt=(0,v.Z)(Nt).on("dragstart.drag",y.ZP,y.Dd);"onselectstart"in mt?rt.on("selectstart.drag",y.ZP,y.Dd):(mt.__noselect=mt.style.MozUserSelect,mt.style.MozUserSelect="none")}function At(Nt,mt){var rt=Nt.document.documentElement,at=(0,v.Z)(Nt).on("dragstart.drag",null);mt&&(at.on("click.drag",y.ZP,y.Dd),setTimeout(function(){at.on("click.drag",null)},0)),"onselectstart"in rt?at.on("selectstart.drag",null):(rt.style.MozUserSelect=rt.__noselect,delete rt.__noselect)}},5873:function(Dt,bt,Y){"use strict";Y.d(bt,{Dd:function(){return y},Q7:function(){return v},ZP:function(){return At},rG:function(){return tt}});const v={passive:!1},y={capture:!0,passive:!1};function tt(Nt){Nt.stopImmediatePropagation()}function At(Nt){Nt.preventDefault(),Nt.stopImmediatePropagation()}},73409:function(Dt,bt,Y){"use strict";Y.d(bt,{P:function(){return y},Z:function(){return v}});function v(tt){return function(){return this.matches(tt)}}function y(tt){return function(At){return At.matches(tt)}}},60021:function(Dt,bt,Y){"use strict";Y.d(bt,{Z:function(){return y}});var v=Y(17110);function y(tt){var At=tt+="",Nt=At.indexOf(":");return Nt>=0&&(At=tt.slice(0,Nt))!=="xmlns"&&(tt=tt.slice(Nt+1)),v.Z.hasOwnProperty(At)?{space:v.Z[At],local:tt}:tt}},17110:function(Dt,bt,Y){"use strict";Y.d(bt,{P:function(){return v}});var v="http://www.w3.org/1999/xhtml";bt.Z={svg:"http://www.w3.org/2000/svg",xhtml:v,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},13802:function(Dt,bt,Y){"use strict";Y.d(bt,{Z:function(){return y}});function v(tt){let At;for(;At=tt.sourceEvent;)tt=At;return tt}function y(tt,At){if(tt=v(tt),At===void 0&&(At=tt.currentTarget),At){var Nt=At.ownerSVGElement||At;if(Nt.createSVGPoint){var mt=Nt.createSVGPoint();return mt.x=tt.clientX,mt.y=tt.clientY,mt=mt.matrixTransform(At.getScreenCTM().inverse()),[mt.x,mt.y]}if(At.getBoundingClientRect){var rt=At.getBoundingClientRect();return[tt.clientX-rt.left-At.clientLeft,tt.clientY-rt.top-At.clientTop]}}return[tt.pageX,tt.pageY]}},41468:function(Dt,bt,Y){"use strict";Y.d(bt,{Z:function(){return y}});var v=Y(1776);function y(tt){return typeof tt=="string"?new v.Y1([[document.querySelector(tt)]],[document.documentElement]):new v.Y1([[tt]],v.Jz)}},1776:function(Dt,bt,Y){"use strict";Y.d(bt,{Y1:function(){return se},ZP:function(){return be},Jz:function(){return tn}});var v=Y(66456);function y(f){typeof f!="function"&&(f=(0,v.Z)(f));for(var _=this._groups,F=_.length,j=new Array(F),B=0;B<F;++B)for(var G=_[B],it=G.length,st=j[B]=new Array(it),yt,Ct,Ht=0;Ht<it;++Ht)(yt=G[Ht])&&(Ct=f.call(yt,yt.__data__,Ht,G))&&("__data__"in yt&&(Ct.__data__=yt.__data__),st[Ht]=Ct);return new se(j,this._parents)}function tt(f){return f==null?[]:Array.isArray(f)?f:Array.from(f)}var At=Y(16851);function Nt(f){return function(){return tt(f.apply(this,arguments))}}function mt(f){typeof f=="function"?f=Nt(f):f=(0,At.Z)(f);for(var _=this._groups,F=_.length,j=[],B=[],G=0;G<F;++G)for(var it=_[G],st=it.length,yt,Ct=0;Ct<st;++Ct)(yt=it[Ct])&&(j.push(f.call(yt,yt.__data__,Ct,it)),B.push(yt));return new se(j,B)}var rt=Y(73409),at=Array.prototype.find;function xt(f){return function(){return at.call(this.children,f)}}function zt(){return this.firstElementChild}function Tt(f){return this.select(f==null?zt:xt(typeof f=="function"?f:(0,rt.P)(f)))}var jt=Array.prototype.filter;function ye(){return Array.from(this.children)}function wr(f){return function(){return jt.call(this.children,f)}}function bn(f){return this.selectAll(f==null?ye:wr(typeof f=="function"?f:(0,rt.P)(f)))}function cn(f){typeof f!="function"&&(f=(0,rt.Z)(f));for(var _=this._groups,F=_.length,j=new Array(F),B=0;B<F;++B)for(var G=_[B],it=G.length,st=j[B]=[],yt,Ct=0;Ct<it;++Ct)(yt=G[Ct])&&f.call(yt,yt.__data__,Ct,G)&&st.push(yt);return new se(j,this._parents)}function un(f){return new Array(f.length)}function He(){return new se(this._enter||this._groups.map(un),this._parents)}function Ke(f,_){this.ownerDocument=f.ownerDocument,this.namespaceURI=f.namespaceURI,this._next=null,this._parent=f,this.__data__=_}Ke.prototype={constructor:Ke,appendChild:function(f){return this._parent.insertBefore(f,this._next)},insertBefore:function(f,_){return this._parent.insertBefore(f,_)},querySelector:function(f){return this._parent.querySelector(f)},querySelectorAll:function(f){return this._parent.querySelectorAll(f)}};function Te(f){return function(){return f}}function _r(f,_,F,j,B,G){for(var it=0,st,yt=_.length,Ct=G.length;it<Ct;++it)(st=_[it])?(st.__data__=G[it],j[it]=st):F[it]=new Ke(f,G[it]);for(;it<yt;++it)(st=_[it])&&(B[it]=st)}function ne(f,_,F,j,B,G,it){var st,yt,Ct=new Map,Ht=_.length,le=G.length,Ee=new Array(Ht),fe;for(st=0;st<Ht;++st)(yt=_[st])&&(Ee[st]=fe=it.call(yt,yt.__data__,st,_)+"",Ct.has(fe)?B[st]=yt:Ct.set(fe,yt));for(st=0;st<le;++st)fe=it.call(f,G[st],st,G)+"",(yt=Ct.get(fe))?(j[st]=yt,yt.__data__=G[st],Ct.delete(fe)):F[st]=new Ke(f,G[st]);for(st=0;st<Ht;++st)(yt=_[st])&&Ct.get(Ee[st])===yt&&(B[st]=yt)}function br(f){return f.__data__}function Bt(f,_){if(!arguments.length)return Array.from(this,br);var F=_?ne:_r,j=this._parents,B=this._groups;typeof f!="function"&&(f=Te(f));for(var G=B.length,it=new Array(G),st=new Array(G),yt=new Array(G),Ct=0;Ct<G;++Ct){var Ht=j[Ct],le=B[Ct],Ee=le.length,fe=Zt(f.call(Ht,Ht&&Ht.__data__,Ct,j)),Qt=fe.length,xn=st[Ct]=new Array(Qt),zn=it[Ct]=new Array(Qt),Mr=yt[Ct]=new Array(Ee);F(Ht,le,xn,zn,Mr,fe,_);for(var en=0,nn=0,ir,In;en<Qt;++en)if(ir=xn[en]){for(en>=nn&&(nn=en+1);!(In=zn[nn])&&++nn<Qt;);ir._next=In||null}}return it=new se(it,j),it._enter=st,it._exit=yt,it}function Zt(f){return typeof f=="object"&&"length"in f?f:Array.from(f)}function Zr(){return new se(this._exit||this._groups.map(un),this._parents)}function Fn(f,_,F){var j=this.enter(),B=this,G=this.exit();return typeof f=="function"?(j=f(j),j&&(j=j.selection())):j=j.append(f+""),_!=null&&(B=_(B),B&&(B=B.selection())),F==null?G.remove():F(G),j&&B?j.merge(B).order():B}function Lr(f){for(var _=f.selection?f.selection():f,F=this._groups,j=_._groups,B=F.length,G=j.length,it=Math.min(B,G),st=new Array(B),yt=0;yt<it;++yt)for(var Ct=F[yt],Ht=j[yt],le=Ct.length,Ee=st[yt]=new Array(le),fe,Qt=0;Qt<le;++Qt)(fe=Ct[Qt]||Ht[Qt])&&(Ee[Qt]=fe);for(;yt<B;++yt)st[yt]=F[yt];return new se(st,this._parents)}function Xr(){for(var f=this._groups,_=-1,F=f.length;++_<F;)for(var j=f[_],B=j.length-1,G=j[B],it;--B>=0;)(it=j[B])&&(G&&it.compareDocumentPosition(G)^4&&G.parentNode.insertBefore(it,G),G=it);return this}function Yn(f){f||(f=vn);function _(le,Ee){return le&&Ee?f(le.__data__,Ee.__data__):!le-!Ee}for(var F=this._groups,j=F.length,B=new Array(j),G=0;G<j;++G){for(var it=F[G],st=it.length,yt=B[G]=new Array(st),Ct,Ht=0;Ht<st;++Ht)(Ct=it[Ht])&&(yt[Ht]=Ct);yt.sort(_)}return new se(B,this._parents).order()}function vn(f,_){return f<_?-1:f>_?1:f>=_?0:NaN}function Ue(){var f=arguments[0];return arguments[0]=this,f.apply(null,arguments),this}function jn(){return Array.from(this)}function Kn(){for(var f=this._groups,_=0,F=f.length;_<F;++_)for(var j=f[_],B=0,G=j.length;B<G;++B){var it=j[B];if(it)return it}return null}function Un(){let f=0;for(const _ of this)++f;return f}function Sn(){return!this.node()}function ln(f){for(var _=this._groups,F=0,j=_.length;F<j;++F)for(var B=_[F],G=0,it=B.length,st;G<it;++G)(st=B[G])&&f.call(st,st.__data__,G,B);return this}var Oe=Y(60021);function En(f){return function(){this.removeAttribute(f)}}function fn(f){return function(){this.removeAttributeNS(f.space,f.local)}}function Nn(f,_){return function(){this.setAttribute(f,_)}}function dn(f,_){return function(){this.setAttributeNS(f.space,f.local,_)}}function xe(f,_){return function(){var F=_.apply(this,arguments);F==null?this.removeAttribute(f):this.setAttribute(f,F)}}function Lt(f,_){return function(){var F=_.apply(this,arguments);F==null?this.removeAttributeNS(f.space,f.local):this.setAttributeNS(f.space,f.local,F)}}function Vt(f,_){var F=(0,Oe.Z)(f);if(arguments.length<2){var j=this.node();return F.local?j.getAttributeNS(F.space,F.local):j.getAttribute(F)}return this.each((_==null?F.local?fn:En:typeof _=="function"?F.local?Lt:xe:F.local?dn:Nn)(F,_))}var hn=Y(77932);function Cn(f){return function(){delete this[f]}}function ke(f,_){return function(){this[f]=_}}function Mn(f,_){return function(){var F=_.apply(this,arguments);F==null?delete this[f]:this[f]=F}}function An(f,_){return arguments.length>1?this.each((_==null?Cn:typeof _=="function"?Mn:ke)(f,_)):this.node()[f]}function we(f){return f.trim().split(/^|\s+/)}function Se(f){return f.classList||new We(f)}function We(f){this._node=f,this._names=we(f.getAttribute("class")||"")}We.prototype={add:function(f){var _=this._names.indexOf(f);_<0&&(this._names.push(f),this._node.setAttribute("class",this._names.join(" ")))},remove:function(f){var _=this._names.indexOf(f);_>=0&&(this._names.splice(_,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(f){return this._names.indexOf(f)>=0}};function Vr(f,_){for(var F=Se(f),j=-1,B=_.length;++j<B;)F.add(_[j])}function Ze(f,_){for(var F=Se(f),j=-1,B=_.length;++j<B;)F.remove(_[j])}function vr(f){return function(){Vr(this,f)}}function Sr(f){return function(){Ze(this,f)}}function Re(f,_){return function(){(_.apply(this,arguments)?Vr:Ze)(this,f)}}function Le(f,_){var F=we(f+"");if(arguments.length<2){for(var j=Se(this.node()),B=-1,G=F.length;++B<G;)if(!j.contains(F[B]))return!1;return!0}return this.each((typeof _=="function"?Re:_?vr:Sr)(F,_))}function gn(){this.textContent=""}function De(f){return function(){this.textContent=f}}function Ge(f){return function(){var _=f.apply(this,arguments);this.textContent=_==null?"":_}}function ot(f){return arguments.length?this.each(f==null?gn:(typeof f=="function"?Ge:De)(f)):this.node().textContent}function Wn(){this.innerHTML=""}function qe(f){return function(){this.innerHTML=f}}function Xe(f){return function(){var _=f.apply(this,arguments);this.innerHTML=_==null?"":_}}function pn(f){return arguments.length?this.each(f==null?Wn:(typeof f=="function"?Xe:qe)(f)):this.node().innerHTML}function Qe(){this.nextSibling&&this.parentNode.appendChild(this)}function Je(){return this.each(Qe)}function _e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fr(){return this.each(_e)}var Pn=Y(17110);function Tn(f){return function(){var _=this.ownerDocument,F=this.namespaceURI;return F===Pn.P&&_.documentElement.namespaceURI===Pn.P?_.createElement(f):_.createElementNS(F,f)}}function Gn(f){return function(){return this.ownerDocument.createElementNS(f.space,f.local)}}function Er(f){var _=(0,Oe.Z)(f);return(_.local?Gn:Tn)(_)}function qn(f){var _=typeof f=="function"?f:Er(f);return this.select(function(){return this.appendChild(_.apply(this,arguments))})}function kn(){return null}function Qn(f,_){var F=typeof f=="function"?f:Er(f),j=_==null?kn:typeof _=="function"?_:(0,v.Z)(_);return this.select(function(){return this.insertBefore(F.apply(this,arguments),j.apply(this,arguments)||null)})}function Jn(){var f=this.parentNode;f&&f.removeChild(this)}function Rn(){return this.each(Jn)}function tr(){var f=this.cloneNode(!1),_=this.parentNode;return _?_.insertBefore(f,this.nextSibling):f}function Nr(){var f=this.cloneNode(!0),_=this.parentNode;return _?_.insertBefore(f,this.nextSibling):f}function mn(f){return this.select(f?Nr:tr)}function Cr(f){return arguments.length?this.property("__data__",f):this.node().__data__}function yn(f){return function(_){f.call(this,_,this.__data__)}}function eo(f){return f.trim().split(/^|\s+/).map(function(_){var F="",j=_.indexOf(".");return j>=0&&(F=_.slice(j+1),_=_.slice(0,j)),{type:_,name:F}})}function er(f){return function(){var _=this.__on;if(_){for(var F=0,j=-1,B=_.length,G;F<B;++F)G=_[F],(!f.type||G.type===f.type)&&G.name===f.name?this.removeEventListener(G.type,G.listener,G.options):_[++j]=G;++j?_.length=j:delete this.__on}}}function Jt(f,_,F){return function(){var j=this.__on,B,G=yn(_);if(j){for(var it=0,st=j.length;it<st;++it)if((B=j[it]).type===f.type&&B.name===f.name){this.removeEventListener(B.type,B.listener,B.options),this.addEventListener(B.type,B.listener=G,B.options=F),B.value=_;return}}this.addEventListener(f.type,G,F),B={type:f.type,name:f.name,value:_,listener:G,options:F},j?j.push(B):this.__on=[B]}}function Dn(f,_,F){var j=eo(f+""),B,G=j.length,it;if(arguments.length<2){var st=this.node().__on;if(st){for(var yt=0,Ct=st.length,Ht;yt<Ct;++yt)for(B=0,Ht=st[yt];B<G;++B)if((it=j[B]).type===Ht.type&&it.name===Ht.name)return Ht.value}return}for(st=_?Jt:er,B=0;B<G;++B)this.each(st(j[B],_,F));return this}var Yr=Y(4010);function nr(f,_,F){var j=(0,Yr.Z)(f),B=j.CustomEvent;typeof B=="function"?B=new B(_,F):(B=j.document.createEvent("Event"),F?(B.initEvent(_,F.bubbles,F.cancelable),B.detail=F.detail):B.initEvent(_,!1,!1)),f.dispatchEvent(B)}function rr(f,_){return function(){return nr(this,f,_)}}function ze(f,_){return function(){return nr(this,f,_.apply(this,arguments))}}function Ve(f,_){return this.each((typeof _=="function"?ze:rr)(f,_))}function*Ie(){for(var f=this._groups,_=0,F=f.length;_<F;++_)for(var j=f[_],B=0,G=j.length,it;B<G;++B)(it=j[B])&&(yield it)}var tn=[null];function se(f,_){this._groups=f,this._parents=_}function ae(){return new se([[document.documentElement]],tn)}function or(){return this}se.prototype=ae.prototype={constructor:se,select:y,selectAll:mt,selectChild:Tt,selectChildren:bn,filter:cn,data:Bt,enter:He,exit:Zr,join:Fn,merge:Lr,selection:or,order:Xr,sort:Yn,call:Ue,nodes:jn,node:Kn,size:Un,empty:Sn,each:ln,attr:Vt,style:hn.Z,property:An,classed:Le,text:ot,html:pn,raise:Je,lower:Fr,append:qn,insert:Qn,remove:Rn,clone:mn,datum:Cr,on:Dn,dispatch:Ve,[Symbol.iterator]:Ie};var be=ae},77932:function(Dt,bt,Y){"use strict";Y.d(bt,{S:function(){return mt},Z:function(){return Nt}});var v=Y(4010);function y(rt){return function(){this.style.removeProperty(rt)}}function tt(rt,at,xt){return function(){this.style.setProperty(rt,at,xt)}}function At(rt,at,xt){return function(){var zt=at.apply(this,arguments);zt==null?this.style.removeProperty(rt):this.style.setProperty(rt,zt,xt)}}function Nt(rt,at,xt){return arguments.length>1?this.each((at==null?y:typeof at=="function"?At:tt)(rt,at,xt==null?"":xt)):mt(this.node(),rt)}function mt(rt,at){return rt.style.getPropertyValue(at)||(0,v.Z)(rt).getComputedStyle(rt,null).getPropertyValue(at)}},66456:function(Dt,bt,Y){"use strict";Y.d(bt,{Z:function(){return y}});function v(){}function y(tt){return tt==null?v:function(){return this.querySelector(tt)}}},16851:function(Dt,bt,Y){"use strict";Y.d(bt,{Z:function(){return y}});function v(){return[]}function y(tt){return tt==null?v:function(){return this.querySelectorAll(tt)}}},4010:function(Dt,bt,Y){"use strict";Y.d(bt,{Z:function(){return v}});function v(y){return y.ownerDocument&&y.ownerDocument.defaultView||y.document&&y||y.defaultView}},89416:function(Dt,bt,Y){"use strict";Y.d(bt,{sP:function(){return ei},CR:function(){return ur}});var v=Y(97565),y=Y(49289),tt=1e-12;function At(n){return((n=Math.exp(n))+1/n)/2}function Nt(n){return((n=Math.exp(n))-1/n)/2}function mt(n){return((n=Math.exp(2*n))-1)/(n+1)}var rt=function n(o,a,d){function w(b,x){var k=b[0],O=b[1],X=b[2],Z=x[0],dt=x[1],ft=x[2],St=Z-k,ce=dt-O,Kt=St*St+ce*ce,de,Mt;if(Kt<tt)Mt=Math.log(ft/X)/o,de=function(_n){return[k+_n*St,O+_n*ce,X*Math.exp(o*_n*Mt)]};else{var sn=Math.sqrt(Kt),je=(ft*ft-X*X+d*Kt)/(2*X*a*sn),wn=(ft*ft-X*X-d*Kt)/(2*ft*a*sn),an=Math.log(Math.sqrt(je*je+1)-je),ve=Math.log(Math.sqrt(wn*wn+1)-wn);Mt=(ve-an)/o,de=function(_n){var Dr=_n*Mt,lr=At(an),zr=X/(a*sn)*(lr*mt(o*Dr+an)-Nt(an));return[k+zr*St,O+zr*ce,X*lr/At(o*Dr+an)]}}return de.duration=Mt*1e3*o/Math.SQRT2,de}return w.rho=function(b){var x=Math.max(.001,+b),k=x*x,O=k*k;return n(x,k,O)},w}(Math.SQRT2,2,4),at=Y(41468),xt=Y(13802),zt=Y(1776),Tt=0,jt=0,ye=0,wr=1e3,bn,cn,un=0,He=0,Ke=0,Te=typeof performance=="object"&&performance.now?performance:Date,_r=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function ne(){return He||(_r(br),He=Te.now()+Ke)}function br(){He=0}function Bt(){this._call=this._time=this._next=null}Bt.prototype=Zt.prototype={constructor:Bt,restart:function(n,o,a){if(typeof n!="function")throw new TypeError("callback is not a function");a=(a==null?ne():+a)+(o==null?0:+o),!this._next&&cn!==this&&(cn?cn._next=this:bn=this,cn=this),this._call=n,this._time=a,Yn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yn())}};function Zt(n,o,a){var d=new Bt;return d.restart(n,o,a),d}function Zr(){ne(),++Tt;for(var n=bn,o;n;)(o=He-n._time)>=0&&n._call.call(void 0,o),n=n._next;--Tt}function Fn(){He=(un=Te.now())+Ke,Tt=jt=0;try{Zr()}finally{Tt=0,Xr(),He=0}}function Lr(){var n=Te.now(),o=n-un;o>wr&&(Ke-=o,un=n)}function Xr(){for(var n,o=bn,a,d=1/0;o;)o._call?(d>o._time&&(d=o._time),n=o,o=o._next):(a=o._next,o._next=null,o=n?n._next=a:bn=a);cn=n,Yn(d)}function Yn(n){if(!Tt){jt&&(jt=clearTimeout(jt));var o=n-He;o>24?(n<1/0&&(jt=setTimeout(Fn,n-Te.now()-Ke)),ye&&(ye=clearInterval(ye))):(ye||(un=Te.now(),ye=setInterval(Lr,wr)),Tt=1,_r(Fn))}}function vn(n,o,a){var d=new Bt;return o=o==null?0:+o,d.restart(w=>{d.stop(),n(w+o)},o,a),d}var Ue=(0,v.Z)("start","end","cancel","interrupt"),jn=[],Kn=0,Un=1,Sn=2,ln=3,Oe=4,En=5,fn=6;function Nn(n,o,a,d,w,b){var x=n.__transition;if(!x)n.__transition={};else if(a in x)return;Vt(n,a,{name:o,index:d,group:w,on:Ue,tween:jn,time:b.time,delay:b.delay,duration:b.duration,ease:b.ease,timer:null,state:Kn})}function dn(n,o){var a=Lt(n,o);if(a.state>Kn)throw new Error("too late; already scheduled");return a}function xe(n,o){var a=Lt(n,o);if(a.state>ln)throw new Error("too late; already running");return a}function Lt(n,o){var a=n.__transition;if(!a||!(a=a[o]))throw new Error("transition not found");return a}function Vt(n,o,a){var d=n.__transition,w;d[o]=a,a.timer=Zt(b,0,a.time);function b(X){a.state=Un,a.timer.restart(x,a.delay,a.time),a.delay<=X&&x(X-a.delay)}function x(X){var Z,dt,ft,St;if(a.state!==Un)return O();for(Z in d)if(St=d[Z],St.name===a.name){if(St.state===ln)return vn(x);St.state===Oe?(St.state=fn,St.timer.stop(),St.on.call("interrupt",n,n.__data__,St.index,St.group),delete d[Z]):+Z<o&&(St.state=fn,St.timer.stop(),St.on.call("cancel",n,n.__data__,St.index,St.group),delete d[Z])}if(vn(function(){a.state===ln&&(a.state=Oe,a.timer.restart(k,a.delay,a.time),k(X))}),a.state=Sn,a.on.call("start",n,n.__data__,a.index,a.group),a.state===Sn){for(a.state=ln,w=new Array(ft=a.tween.length),Z=0,dt=-1;Z<ft;++Z)(St=a.tween[Z].value.call(n,n.__data__,a.index,a.group))&&(w[++dt]=St);w.length=dt+1}}function k(X){for(var Z=X<a.duration?a.ease.call(null,X/a.duration):(a.timer.restart(O),a.state=En,1),dt=-1,ft=w.length;++dt<ft;)w[dt].call(n,Z);a.state===En&&(a.on.call("end",n,n.__data__,a.index,a.group),O())}function O(){a.state=fn,a.timer.stop(),delete d[o];for(var X in d)return;delete n.__transition}}function hn(n,o){var a=n.__transition,d,w,b=!0,x;if(a){o=o==null?null:o+"";for(x in a){if((d=a[x]).name!==o){b=!1;continue}w=d.state>Sn&&d.state<En,d.state=fn,d.timer.stop(),d.on.call(w?"interrupt":"cancel",n,n.__data__,d.index,d.group),delete a[x]}b&&delete n.__transition}}function Cn(n){return this.each(function(){hn(this,n)})}function ke(n,o){return n=+n,o=+o,function(a){return n*(1-a)+o*a}}var Mn=180/Math.PI,An={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function we(n,o,a,d,w,b){var x,k,O;return(x=Math.sqrt(n*n+o*o))&&(n/=x,o/=x),(O=n*a+o*d)&&(a-=n*O,d-=o*O),(k=Math.sqrt(a*a+d*d))&&(a/=k,d/=k,O/=k),n*d<o*a&&(n=-n,o=-o,O=-O,x=-x),{translateX:w,translateY:b,rotate:Math.atan2(o,n)*Mn,skewX:Math.atan(O)*Mn,scaleX:x,scaleY:k}}var Se;function We(n){var o=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return o.isIdentity?An:we(o.a,o.b,o.c,o.d,o.e,o.f)}function Vr(n){return n==null||(Se||(Se=document.createElementNS("http://www.w3.org/2000/svg","g")),Se.setAttribute("transform",n),!(n=Se.transform.baseVal.consolidate()))?An:(n=n.matrix,we(n.a,n.b,n.c,n.d,n.e,n.f))}function Ze(n,o,a,d){function w(X){return X.length?X.pop()+" ":""}function b(X,Z,dt,ft,St,ce){if(X!==dt||Z!==ft){var Kt=St.push("translate(",null,o,null,a);ce.push({i:Kt-4,x:ke(X,dt)},{i:Kt-2,x:ke(Z,ft)})}else(dt||ft)&&St.push("translate("+dt+o+ft+a)}function x(X,Z,dt,ft){X!==Z?(X-Z>180?Z+=360:Z-X>180&&(X+=360),ft.push({i:dt.push(w(dt)+"rotate(",null,d)-2,x:ke(X,Z)})):Z&&dt.push(w(dt)+"rotate("+Z+d)}function k(X,Z,dt,ft){X!==Z?ft.push({i:dt.push(w(dt)+"skewX(",null,d)-2,x:ke(X,Z)}):Z&&dt.push(w(dt)+"skewX("+Z+d)}function O(X,Z,dt,ft,St,ce){if(X!==dt||Z!==ft){var Kt=St.push(w(St)+"scale(",null,",",null,")");ce.push({i:Kt-4,x:ke(X,dt)},{i:Kt-2,x:ke(Z,ft)})}else(dt!==1||ft!==1)&&St.push(w(St)+"scale("+dt+","+ft+")")}return function(X,Z){var dt=[],ft=[];return X=n(X),Z=n(Z),b(X.translateX,X.translateY,Z.translateX,Z.translateY,dt,ft),x(X.rotate,Z.rotate,dt,ft),k(X.skewX,Z.skewX,dt,ft),O(X.scaleX,X.scaleY,Z.scaleX,Z.scaleY,dt,ft),X=Z=null,function(St){for(var ce=-1,Kt=ft.length,de;++ce<Kt;)dt[(de=ft[ce]).i]=de.x(St);return dt.join("")}}}var vr=Ze(We,"px, ","px)","deg)"),Sr=Ze(Vr,", ",")",")"),Re=Y(60021);function Le(n,o){var a,d;return function(){var w=xe(this,n),b=w.tween;if(b!==a){d=a=b;for(var x=0,k=d.length;x<k;++x)if(d[x].name===o){d=d.slice(),d.splice(x,1);break}}w.tween=d}}function gn(n,o,a){var d,w;if(typeof a!="function")throw new Error;return function(){var b=xe(this,n),x=b.tween;if(x!==d){w=(d=x).slice();for(var k={name:o,value:a},O=0,X=w.length;O<X;++O)if(w[O].name===o){w[O]=k;break}O===X&&w.push(k)}b.tween=w}}function De(n,o){var a=this._id;if(n+="",arguments.length<2){for(var d=Lt(this.node(),a).tween,w=0,b=d.length,x;w<b;++w)if((x=d[w]).name===n)return x.value;return null}return this.each((o==null?Le:gn)(a,n,o))}function Ge(n,o,a){var d=n._id;return n.each(function(){var w=xe(this,d);(w.value||(w.value={}))[o]=a.apply(this,arguments)}),function(w){return Lt(w,d).value[o]}}function ot(n,o,a){n.prototype=o.prototype=a,a.constructor=n}function Wn(n,o){var a=Object.create(n.prototype);for(var d in o)a[d]=o[d];return a}function qe(){}var Xe=.7,pn=1/Xe,Qe="\\s*([+-]?\\d+)\\s*",Je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fr=/^#([0-9a-f]{3,8})$/,Pn=new RegExp("^rgb\\(".concat(Qe,",").concat(Qe,",").concat(Qe,"\\)$")),Tn=new RegExp("^rgb\\(".concat(_e,",").concat(_e,",").concat(_e,"\\)$")),Gn=new RegExp("^rgba\\(".concat(Qe,",").concat(Qe,",").concat(Qe,",").concat(Je,"\\)$")),Er=new RegExp("^rgba\\(".concat(_e,",").concat(_e,",").concat(_e,",").concat(Je,"\\)$")),qn=new RegExp("^hsl\\(".concat(Je,",").concat(_e,",").concat(_e,"\\)$")),kn=new RegExp("^hsla\\(".concat(Je,",").concat(_e,",").concat(_e,",").concat(Je,"\\)$")),Qn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ot(qe,mn,{copy:function(o){return Object.assign(new this.constructor,this,o)},displayable:function(){return this.rgb().displayable()},hex:Jn,formatHex:Jn,formatHex8:Rn,formatHsl:tr,formatRgb:Nr,toString:Nr});function Jn(){return this.rgb().formatHex()}function Rn(){return this.rgb().formatHex8()}function tr(){return tn(this).formatHsl()}function Nr(){return this.rgb().formatRgb()}function mn(n){var o,a;return n=(n+"").trim().toLowerCase(),(o=Fr.exec(n))?(a=o[1].length,o=parseInt(o[1],16),a===6?Cr(o):a===3?new Jt(o>>8&15|o>>4&240,o>>4&15|o&240,(o&15)<<4|o&15,1):a===8?yn(o>>24&255,o>>16&255,o>>8&255,(o&255)/255):a===4?yn(o>>12&15|o>>8&240,o>>8&15|o>>4&240,o>>4&15|o&240,((o&15)<<4|o&15)/255):null):(o=Pn.exec(n))?new Jt(o[1],o[2],o[3],1):(o=Tn.exec(n))?new Jt(o[1]*255/100,o[2]*255/100,o[3]*255/100,1):(o=Gn.exec(n))?yn(o[1],o[2],o[3],o[4]):(o=Er.exec(n))?yn(o[1]*255/100,o[2]*255/100,o[3]*255/100,o[4]):(o=qn.exec(n))?Ie(o[1],o[2]/100,o[3]/100,1):(o=kn.exec(n))?Ie(o[1],o[2]/100,o[3]/100,o[4]):Qn.hasOwnProperty(n)?Cr(Qn[n]):n==="transparent"?new Jt(NaN,NaN,NaN,0):null}function Cr(n){return new Jt(n>>16&255,n>>8&255,n&255,1)}function yn(n,o,a,d){return d<=0&&(n=o=a=NaN),new Jt(n,o,a,d)}function eo(n){return n instanceof qe||(n=mn(n)),n?(n=n.rgb(),new Jt(n.r,n.g,n.b,n.opacity)):new Jt}function er(n,o,a,d){return arguments.length===1?eo(n):new Jt(n,o,a,d==null?1:d)}function Jt(n,o,a,d){this.r=+n,this.g=+o,this.b=+a,this.opacity=+d}ot(Jt,er,Wn(qe,{brighter:function(o){return o=o==null?pn:Math.pow(pn,o),new Jt(this.r*o,this.g*o,this.b*o,this.opacity)},darker:function(o){return o=o==null?Xe:Math.pow(Xe,o),new Jt(this.r*o,this.g*o,this.b*o,this.opacity)},rgb:function(){return this},clamp:function(){return new Jt(ze(this.r),ze(this.g),ze(this.b),rr(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dn,formatHex:Dn,formatHex8:Yr,formatRgb:nr,toString:nr}));function Dn(){return"#".concat(Ve(this.r)).concat(Ve(this.g)).concat(Ve(this.b))}function Yr(){return"#".concat(Ve(this.r)).concat(Ve(this.g)).concat(Ve(this.b)).concat(Ve((isNaN(this.opacity)?1:this.opacity)*255))}function nr(){var n=rr(this.opacity);return"".concat(n===1?"rgb(":"rgba(").concat(ze(this.r),", ").concat(ze(this.g),", ").concat(ze(this.b)).concat(n===1?")":", ".concat(n,")"))}function rr(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ze(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Ve(n){return n=ze(n),(n<16?"0":"")+n.toString(16)}function Ie(n,o,a,d){return d<=0?n=o=a=NaN:a<=0||a>=1?n=o=NaN:o<=0&&(n=NaN),new ae(n,o,a,d)}function tn(n){if(n instanceof ae)return new ae(n.h,n.s,n.l,n.opacity);if(n instanceof qe||(n=mn(n)),!n)return new ae;if(n instanceof ae)return n;n=n.rgb();var o=n.r/255,a=n.g/255,d=n.b/255,w=Math.min(o,a,d),b=Math.max(o,a,d),x=NaN,k=b-w,O=(b+w)/2;return k?(o===b?x=(a-d)/k+(a<d)*6:a===b?x=(d-o)/k+2:x=(o-a)/k+4,k/=O<.5?b+w:2-b-w,x*=60):k=O>0&&O<1?0:x,new ae(x,k,O,n.opacity)}function se(n,o,a,d){return arguments.length===1?tn(n):new ae(n,o,a,d==null?1:d)}function ae(n,o,a,d){this.h=+n,this.s=+o,this.l=+a,this.opacity=+d}ot(ae,se,Wn(qe,{brighter:function(o){return o=o==null?pn:Math.pow(pn,o),new ae(this.h,this.s,this.l*o,this.opacity)},darker:function(o){return o=o==null?Xe:Math.pow(Xe,o),new ae(this.h,this.s,this.l*o,this.opacity)},rgb:function(){var o=this.h%360+(this.h<0)*360,a=isNaN(o)||isNaN(this.s)?0:this.s,d=this.l,w=d+(d<.5?d:1-d)*a,b=2*d-w;return new Jt(f(o>=240?o-240:o+120,b,w),f(o,b,w),f(o<120?o+240:o-120,b,w),this.opacity)},clamp:function(){return new ae(or(this.h),be(this.s),be(this.l),rr(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var o=rr(this.opacity);return"".concat(o===1?"hsl(":"hsla(").concat(or(this.h),", ").concat(be(this.s)*100,"%, ").concat(be(this.l)*100,"%").concat(o===1?")":", ".concat(o,")"))}}));function or(n){return n=(n||0)%360,n<0?n+360:n}function be(n){return Math.max(0,Math.min(1,n||0))}function f(n,o,a){return(n<60?o+(a-o)*n/60:n<180?a:n<240?o+(a-o)*(240-n)/60:o)*255}function _(n,o,a,d,w){var b=n*n,x=b*n;return((1-3*n+3*b-x)*o+(4-6*b+3*x)*a+(1+3*n+3*b-3*x)*d+x*w)/6}function F(n){var o=n.length-1;return function(a){var d=a<=0?a=0:a>=1?(a=1,o-1):Math.floor(a*o),w=n[d],b=n[d+1],x=d>0?n[d-1]:2*w-b,k=d<o-1?n[d+2]:2*b-w;return _((a-d/o)*o,x,w,b,k)}}function j(n){var o=n.length;return function(a){var d=Math.floor(((a%=1)<0?++a:a)*o),w=n[(d+o-1)%o],b=n[d%o],x=n[(d+1)%o],k=n[(d+2)%o];return _((a-d/o)*o,w,b,x,k)}}var B=function(n){return function(){return n}};function G(n,o){return function(a){return n+a*o}}function it(n,o,a){return n=Math.pow(n,a),o=Math.pow(o,a)-n,a=1/a,function(d){return Math.pow(n+d*o,a)}}function st(n,o){var a=o-n;return a?G(n,a>180||a<-180?a-360*Math.round(a/360):a):constant(isNaN(n)?o:n)}function yt(n){return(n=+n)==1?Ct:function(o,a){return a-o?it(o,a,n):B(isNaN(o)?a:o)}}function Ct(n,o){var a=o-n;return a?G(n,a):B(isNaN(n)?o:n)}var Ht=function n(o){var a=yt(o);function d(w,b){var x=a((w=er(w)).r,(b=er(b)).r),k=a(w.g,b.g),O=a(w.b,b.b),X=Ct(w.opacity,b.opacity);return function(Z){return w.r=x(Z),w.g=k(Z),w.b=O(Z),w.opacity=X(Z),w+""}}return d.gamma=n,d}(1);function le(n){return function(o){var a=o.length,d=new Array(a),w=new Array(a),b=new Array(a),x,k;for(x=0;x<a;++x)k=er(o[x]),d[x]=k.r||0,w[x]=k.g||0,b[x]=k.b||0;return d=n(d),w=n(w),b=n(b),k.opacity=1,function(O){return k.r=d(O),k.g=w(O),k.b=b(O),k+""}}}var Ee=le(F),fe=le(j),Qt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xn=new RegExp(Qt.source,"g");function zn(n){return function(){return n}}function Mr(n){return function(o){return n(o)+""}}function en(n,o){var a=Qt.lastIndex=xn.lastIndex=0,d,w,b,x=-1,k=[],O=[];for(n=n+"",o=o+"";(d=Qt.exec(n))&&(w=xn.exec(o));)(b=w.index)>a&&(b=o.slice(a,b),k[x]?k[x]+=b:k[++x]=b),(d=d[0])===(w=w[0])?k[x]?k[x]+=w:k[++x]=w:(k[++x]=null,O.push({i:x,x:ke(d,w)})),a=xn.lastIndex;return a<o.length&&(b=o.slice(a),k[x]?k[x]+=b:k[++x]=b),k.length<2?O[0]?Mr(O[0].x):zn(o):(o=O.length,function(X){for(var Z=0,dt;Z<o;++Z)k[(dt=O[Z]).i]=dt.x(X);return k.join("")})}function nn(n,o){var a;return(typeof o=="number"?ke:o instanceof mn?Ht:(a=mn(o))?(o=a,Ht):en)(n,o)}function ir(n){return function(){this.removeAttribute(n)}}function In(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Co(n,o,a){var d,w=a+"",b;return function(){var x=this.getAttribute(n);return x===w?null:x===d?b:b=o(d=x,a)}}function Ar(n,o,a){var d,w=a+"",b;return function(){var x=this.getAttributeNS(n.space,n.local);return x===w?null:x===d?b:b=o(d=x,a)}}function Mo(n,o,a){var d,w,b;return function(){var x,k=a(this),O;return k==null?void this.removeAttribute(n):(x=this.getAttribute(n),O=k+"",x===O?null:x===d&&O===w?b:(w=O,b=o(d=x,k)))}}function no(n,o,a){var d,w,b;return function(){var x,k=a(this),O;return k==null?void this.removeAttributeNS(n.space,n.local):(x=this.getAttributeNS(n.space,n.local),O=k+"",x===O?null:x===d&&O===w?b:(w=O,b=o(d=x,k)))}}function Ao(n,o){var a=(0,Re.Z)(n),d=a==="transform"?Sr:nn;return this.attrTween(n,typeof o=="function"?(a.local?no:Mo)(a,d,Ge(this,"attr."+n,o)):o==null?(a.local?In:ir)(a):(a.local?Ar:Co)(a,d,o))}function Po(n,o){return function(a){this.setAttribute(n,o.call(this,a))}}function To(n,o){return function(a){this.setAttributeNS(n.space,n.local,o.call(this,a))}}function $n(n,o){var a,d;function w(){var b=o.apply(this,arguments);return b!==d&&(a=(d=b)&&To(n,b)),a}return w._value=o,w}function kt(n,o){var a,d;function w(){var b=o.apply(this,arguments);return b!==d&&(a=(d=b)&&Po(n,b)),a}return w._value=o,w}function ko(n,o){var a="attr."+n;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(o==null)return this.tween(a,null);if(typeof o!="function")throw new Error;var d=(0,Re.Z)(n);return this.tween(a,(d.local?$n:kt)(d,o))}function ro(n,o){return function(){dn(this,n).delay=+o.apply(this,arguments)}}function Ro(n,o){return o=+o,function(){dn(this,n).delay=o}}function oo(n){var o=this._id;return arguments.length?this.each((typeof n=="function"?ro:Ro)(o,n)):Lt(this.node(),o).delay}function io(n,o){return function(){xe(this,n).duration=+o.apply(this,arguments)}}function Do(n,o){return o=+o,function(){xe(this,n).duration=o}}function zo(n){var o=this._id;return arguments.length?this.each((typeof n=="function"?io:Do)(o,n)):Lt(this.node(),o).duration}function Io(n,o){if(typeof o!="function")throw new Error;return function(){xe(this,n).ease=o}}function $o(n){var o=this._id;return arguments.length?this.each(Io(o,n)):Lt(this.node(),o).ease}function Bo(n,o){return function(){var a=o.apply(this,arguments);if(typeof a!="function")throw new Error;xe(this,n).ease=a}}function sr(n){if(typeof n!="function")throw new Error;return this.each(Bo(this._id,n))}var so=Y(73409);function ao(n){typeof n!="function"&&(n=(0,so.Z)(n));for(var o=this._groups,a=o.length,d=new Array(a),w=0;w<a;++w)for(var b=o[w],x=b.length,k=d[w]=[],O,X=0;X<x;++X)(O=b[X])&&n.call(O,O.__data__,X,b)&&k.push(O);return new Fe(d,this._parents,this._name,this._id)}function co(n){if(n._id!==this._id)throw new Error;for(var o=this._groups,a=n._groups,d=o.length,w=a.length,b=Math.min(d,w),x=new Array(d),k=0;k<b;++k)for(var O=o[k],X=a[k],Z=O.length,dt=x[k]=new Array(Z),ft,St=0;St<Z;++St)(ft=O[St]||X[St])&&(dt[St]=ft);for(;k<d;++k)x[k]=o[k];return new Fe(x,this._parents,this._name,this._id)}function uo(n){return(n+"").trim().split(/^|\s+/).every(function(o){var a=o.indexOf(".");return a>=0&&(o=o.slice(0,a)),!o||o==="start"})}function jr(n,o,a){var d,w,b=uo(o)?dn:xe;return function(){var x=b(this,n),k=x.on;k!==d&&(w=(d=k).copy()).on(o,a),x.on=w}}function lo(n,o){var a=this._id;return arguments.length<2?Lt(this.node(),a).on.on(n):this.each(jr(a,n,o))}function Ho(n){return function(){var o=this.parentNode;for(var a in this.__transition)if(+a!==n)return;o&&o.removeChild(this)}}function Oo(){return this.on("end.remove",Ho(this._id))}var Pr=Y(66456);function Bn(n){var o=this._name,a=this._id;typeof n!="function"&&(n=(0,Pr.Z)(n));for(var d=this._groups,w=d.length,b=new Array(w),x=0;x<w;++x)for(var k=d[x],O=k.length,X=b[x]=new Array(O),Z,dt,ft=0;ft<O;++ft)(Z=k[ft])&&(dt=n.call(Z,Z.__data__,ft,k))&&("__data__"in Z&&(dt.__data__=Z.__data__),X[ft]=dt,Nn(X[ft],o,a,ft,X,Lt(Z,a)));return new Fe(b,this._parents,o,a)}var Zo=Y(16851);function Lo(n){var o=this._name,a=this._id;typeof n!="function"&&(n=(0,Zo.Z)(n));for(var d=this._groups,w=d.length,b=[],x=[],k=0;k<w;++k)for(var O=d[k],X=O.length,Z,dt=0;dt<X;++dt)if(Z=O[dt]){for(var ft=n.call(Z,Z.__data__,dt,O),St,ce=Lt(Z,a),Kt=0,de=ft.length;Kt<de;++Kt)(St=ft[Kt])&&Nn(St,o,a,Kt,ft,ce);b.push(ft),x.push(Z)}return new Fe(b,x,o,a)}var Xo=zt.ZP.prototype.constructor;function Kr(){return new Xo(this._groups,this._parents)}var ar=Y(77932);function Vo(n,o){var a,d,w;return function(){var b=(0,ar.S)(this,n),x=(this.style.removeProperty(n),(0,ar.S)(this,n));return b===x?null:b===a&&x===d?w:w=o(a=b,d=x)}}function Tr(n){return function(){this.style.removeProperty(n)}}function Fo(n,o,a){var d,w=a+"",b;return function(){var x=(0,ar.S)(this,n);return x===w?null:x===d?b:b=o(d=x,a)}}function kr(n,o,a){var d,w,b;return function(){var x=(0,ar.S)(this,n),k=a(this),O=k+"";return k==null&&(O=k=(this.style.removeProperty(n),(0,ar.S)(this,n))),x===O?null:x===d&&O===w?b:(w=O,b=o(d=x,k))}}function Hn(n,o){var a,d,w,b="style."+o,x="end."+b,k;return function(){var O=xe(this,n),X=O.on,Z=O.value[b]==null?k||(k=Tr(o)):void 0;(X!==a||w!==Z)&&(d=(a=X).copy()).on(x,w=Z),O.on=d}}function fo(n,o,a){var d=(n+="")=="transform"?vr:nn;return o==null?this.styleTween(n,Vo(n,d)).on("end.style."+n,Tr(n)):typeof o=="function"?this.styleTween(n,kr(n,d,Ge(this,"style."+n,o))).each(Hn(this._id,n)):this.styleTween(n,Fo(n,d,o),a).on("end.style."+n,null)}function ho(n,o,a){return function(d){this.style.setProperty(n,o.call(this,d),a)}}function Yo(n,o,a){var d,w;function b(){var x=o.apply(this,arguments);return x!==w&&(d=(w=x)&&ho(n,x,a)),d}return b._value=o,b}function jo(n,o,a){var d="style."+(n+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(o==null)return this.tween(d,null);if(typeof o!="function")throw new Error;return this.tween(d,Yo(n,o,a==null?"":a))}function Ko(n){return function(){this.textContent=n}}function Uo(n){return function(){var o=n(this);this.textContent=o==null?"":o}}function go(n){return this.tween("text",typeof n=="function"?Uo(Ge(this,"text",n)):Ko(n==null?"":n+""))}function po(n){return function(o){this.textContent=n.call(this,o)}}function mo(n){var o,a;function d(){var w=n.apply(this,arguments);return w!==a&&(o=(a=w)&&po(w)),o}return d._value=n,d}function Wo(n){var o="text";if(arguments.length<1)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,mo(n))}function rn(){for(var n=this._name,o=this._id,a=Wr(),d=this._groups,w=d.length,b=0;b<w;++b)for(var x=d[b],k=x.length,O,X=0;X<k;++X)if(O=x[X]){var Z=Lt(O,o);Nn(O,n,a,X,x,{time:Z.time+Z.delay+Z.duration,delay:0,duration:Z.duration,ease:Z.ease})}return new Fe(d,this._parents,n,a)}function On(){var n,o,a=this,d=a._id,w=a.size();return new Promise(function(b,x){var k={value:x},O={value:function(){--w===0&&b()}};a.each(function(){var X=xe(this,d),Z=X.on;Z!==n&&(o=(n=Z).copy(),o._.cancel.push(k),o._.interrupt.push(k),o._.end.push(O)),X.on=o}),w===0&&b()})}var Ur=0;function Fe(n,o,a,d){this._groups=n,this._parents=o,this._name=a,this._id=d}function yo(n){return(0,zt.ZP)().transition(n)}function Wr(){return++Ur}var $e=zt.ZP.prototype;Fe.prototype=yo.prototype={constructor:Fe,select:Bn,selectAll:Lo,selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:ao,merge:co,selection:Kr,transition:rn,call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:lo,attr:Ao,attrTween:ko,style:fo,styleTween:jo,text:go,textTween:Wo,remove:Oo,tween:De,delay:oo,duration:zo,ease:$o,easeVarying:sr,end:On,[Symbol.iterator]:$e[Symbol.iterator]};function ci(n){return n*n*n}function ui(n){return--n*n*n+1}function xo(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Gr={time:null,delay:0,duration:250,ease:xo};function wo(n,o){for(var a;!(a=n.__transition)||!(a=a[o]);)if(!(n=n.parentNode))throw new Error(`transition ${o} not found`);return a}function cr(n){var o,a;n instanceof Fe?(o=n._id,n=n._name):(o=Wr(),(a=Gr).time=ne(),n=n==null?null:n+"");for(var d=this._groups,w=d.length,b=0;b<w;++b)for(var x=d[b],k=x.length,O,X=0;X<k;++X)(O=x[X])&&Nn(O,n,o,X,x,a||wo(O,o));return new Fe(d,this._parents,n,o)}zt.ZP.prototype.interrupt=Cn,zt.ZP.prototype.transition=cr;var Zn=n=>()=>n;function Go(n,{sourceEvent:o,target:a,transform:d,dispatch:w}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:w}})}function Ne(n,o,a){this.k=n,this.x=o,this.y=a}Ne.prototype={constructor:Ne,scale:function(n){return n===1?this:new Ne(this.k*n,this.x,this.y)},translate:function(n,o){return n===0&o===0?this:new Ne(this.k,this.x+this.k*n,this.y+this.k*o)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ur=new Ne(1,0,0);_o.prototype=Ne.prototype;function _o(n){for(;!n.__zoom;)if(!(n=n.parentNode))return ur;return n.__zoom}function on(n){n.stopImmediatePropagation()}function Ye(n){n.preventDefault(),n.stopImmediatePropagation()}function qo(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function Qo(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function bo(){return this.__zoom||ur}function Jo(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function vo(){return navigator.maxTouchPoints||"ontouchstart"in this}function ti(n,o,a){var d=n.invertX(o[0][0])-a[0][0],w=n.invertX(o[1][0])-a[1][0],b=n.invertY(o[0][1])-a[0][1],x=n.invertY(o[1][1])-a[1][1];return n.translate(w>d?(d+w)/2:Math.min(0,d)||Math.max(0,w),x>b?(b+x)/2:Math.min(0,b)||Math.max(0,x))}function ei(){var n=qo,o=Qo,a=ti,d=Jo,w=vo,b=[0,1/0],x=[[-1/0,-1/0],[1/0,1/0]],k=250,O=rt,X=(0,v.Z)("start","zoom","end"),Z,dt,ft,St=500,ce=150,Kt=0,de=10;function Mt(M){M.property("__zoom",bo).on("wheel.zoom",_n,{passive:!1}).on("mousedown.zoom",Dr).on("dblclick.zoom",lr).filter(w).on("touchstart.zoom",zr).on("touchmove.zoom",ni).on("touchend.zoom touchcancel.zoom",So).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Mt.transform=function(M,ut,V,ht){var Pt=M.selection?M.selection():M;Pt.property("__zoom",bo),M!==Pt?an(M,ut,V,ht):Pt.interrupt().each(function(){ve(this,arguments).event(ht).start().zoom(null,typeof ut=="function"?ut.apply(this,arguments):ut).end()})},Mt.scaleBy=function(M,ut,V,ht){Mt.scaleTo(M,function(){var Pt=this.__zoom.k,Rt=typeof ut=="function"?ut.apply(this,arguments):ut;return Pt*Rt},V,ht)},Mt.scaleTo=function(M,ut,V,ht){Mt.transform(M,function(){var Pt=o.apply(this,arguments),Rt=this.__zoom,It=V==null?wn(Pt):typeof V=="function"?V.apply(this,arguments):V,Ot=Rt.invert(It),Ft=typeof ut=="function"?ut.apply(this,arguments):ut;return a(je(sn(Rt,Ft),It,Ot),Pt,x)},V,ht)},Mt.translateBy=function(M,ut,V,ht){Mt.transform(M,function(){return a(this.__zoom.translate(typeof ut=="function"?ut.apply(this,arguments):ut,typeof V=="function"?V.apply(this,arguments):V),o.apply(this,arguments),x)},null,ht)},Mt.translateTo=function(M,ut,V,ht,Pt){Mt.transform(M,function(){var Rt=o.apply(this,arguments),It=this.__zoom,Ot=ht==null?wn(Rt):typeof ht=="function"?ht.apply(this,arguments):ht;return a(ur.translate(Ot[0],Ot[1]).scale(It.k).translate(typeof ut=="function"?-ut.apply(this,arguments):-ut,typeof V=="function"?-V.apply(this,arguments):-V),Rt,x)},ht,Pt)};function sn(M,ut){return ut=Math.max(b[0],Math.min(b[1],ut)),ut===M.k?M:new Ne(ut,M.x,M.y)}function je(M,ut,V){var ht=ut[0]-V[0]*M.k,Pt=ut[1]-V[1]*M.k;return ht===M.x&&Pt===M.y?M:new Ne(M.k,ht,Pt)}function wn(M){return[(+M[0][0]+ +M[1][0])/2,(+M[0][1]+ +M[1][1])/2]}function an(M,ut,V,ht){M.on("start.zoom",function(){ve(this,arguments).event(ht).start()}).on("interrupt.zoom end.zoom",function(){ve(this,arguments).event(ht).end()}).tween("zoom",function(){var Pt=this,Rt=arguments,It=ve(Pt,Rt).event(ht),Ot=o.apply(Pt,Rt),Ft=V==null?wn(Ot):typeof V=="function"?V.apply(Pt,Rt):V,Ce=Math.max(Ot[1][0]-Ot[0][0],Ot[1][1]-Ot[0][1]),te=Pt.__zoom,pe=typeof ut=="function"?ut.apply(Pt,Rt):ut,re=O(te.invert(Ft).concat(Ce/te.k),pe.invert(Ft).concat(Ce/pe.k));return function(Me){if(Me===1)Me=pe;else{var Be=re(Me),Ir=Ce/Be[2];Me=new Ne(Ir,Ft[0]-Be[0]*Ir,Ft[1]-Be[1]*Ir)}It.zoom(null,Me)}})}function ve(M,ut,V){return!V&&M.__zooming||new Rr(M,ut)}function Rr(M,ut){this.that=M,this.args=ut,this.active=0,this.sourceEvent=null,this.extent=o.apply(M,ut),this.taps=0}Rr.prototype={event:function(M){return M&&(this.sourceEvent=M),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(M,ut){return this.mouse&&M!=="mouse"&&(this.mouse[1]=ut.invert(this.mouse[0])),this.touch0&&M!=="touch"&&(this.touch0[1]=ut.invert(this.touch0[0])),this.touch1&&M!=="touch"&&(this.touch1[1]=ut.invert(this.touch1[0])),this.that.__zoom=ut,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(M){var ut=(0,at.Z)(this.that).datum();X.call(M,this.that,new Go(M,{sourceEvent:this.sourceEvent,target:Mt,type:M,transform:this.that.__zoom,dispatch:X}),ut)}};function _n(M,...ut){if(!n.apply(this,arguments))return;var V=ve(this,ut).event(M),ht=this.__zoom,Pt=Math.max(b[0],Math.min(b[1],ht.k*Math.pow(2,d.apply(this,arguments)))),Rt=(0,xt.Z)(M);if(V.wheel)(V.mouse[0][0]!==Rt[0]||V.mouse[0][1]!==Rt[1])&&(V.mouse[1]=ht.invert(V.mouse[0]=Rt)),clearTimeout(V.wheel);else{if(ht.k===Pt)return;V.mouse=[Rt,ht.invert(Rt)],hn(this),V.start()}Ye(M),V.wheel=setTimeout(It,ce),V.zoom("mouse",a(je(sn(ht,Pt),V.mouse[0],V.mouse[1]),V.extent,x));function It(){V.wheel=null,V.end()}}function Dr(M,...ut){if(ft||!n.apply(this,arguments))return;var V=M.currentTarget,ht=ve(this,ut,!0).event(M),Pt=(0,at.Z)(M.view).on("mousemove.zoom",Ft,!0).on("mouseup.zoom",Ce,!0),Rt=(0,xt.Z)(M,V),It=M.clientX,Ot=M.clientY;(0,y.Z)(M.view),on(M),ht.mouse=[Rt,this.__zoom.invert(Rt)],hn(this),ht.start();function Ft(te){if(Ye(te),!ht.moved){var pe=te.clientX-It,re=te.clientY-Ot;ht.moved=pe*pe+re*re>Kt}ht.event(te).zoom("mouse",a(je(ht.that.__zoom,ht.mouse[0]=(0,xt.Z)(te,V),ht.mouse[1]),ht.extent,x))}function Ce(te){Pt.on("mousemove.zoom mouseup.zoom",null),(0,y.D)(te.view,ht.moved),Ye(te),ht.event(te).end()}}function lr(M,...ut){if(n.apply(this,arguments)){var V=this.__zoom,ht=(0,xt.Z)(M.changedTouches?M.changedTouches[0]:M,this),Pt=V.invert(ht),Rt=V.k*(M.shiftKey?.5:2),It=a(je(sn(V,Rt),ht,Pt),o.apply(this,ut),x);Ye(M),k>0?(0,at.Z)(this).transition().duration(k).call(an,It,ht,M):(0,at.Z)(this).call(Mt.transform,It,ht,M)}}function zr(M,...ut){if(n.apply(this,arguments)){var V=M.touches,ht=V.length,Pt=ve(this,ut,M.changedTouches.length===ht).event(M),Rt,It,Ot,Ft;for(on(M),It=0;It<ht;++It)Ot=V[It],Ft=(0,xt.Z)(Ot,this),Ft=[Ft,this.__zoom.invert(Ft),Ot.identifier],Pt.touch0?!Pt.touch1&&Pt.touch0[2]!==Ft[2]&&(Pt.touch1=Ft,Pt.taps=0):(Pt.touch0=Ft,Rt=!0,Pt.taps=1+!!Z);Z&&(Z=clearTimeout(Z)),Rt&&(Pt.taps<2&&(dt=Ft[0],Z=setTimeout(function(){Z=null},St)),hn(this),Pt.start())}}function ni(M,...ut){if(this.__zooming){var V=ve(this,ut).event(M),ht=M.changedTouches,Pt=ht.length,Rt,It,Ot,Ft;for(Ye(M),Rt=0;Rt<Pt;++Rt)It=ht[Rt],Ot=(0,xt.Z)(It,this),V.touch0&&V.touch0[2]===It.identifier?V.touch0[0]=Ot:V.touch1&&V.touch1[2]===It.identifier&&(V.touch1[0]=Ot);if(It=V.that.__zoom,V.touch1){var Ce=V.touch0[0],te=V.touch0[1],pe=V.touch1[0],re=V.touch1[1],Me=(Me=pe[0]-Ce[0])*Me+(Me=pe[1]-Ce[1])*Me,Be=(Be=re[0]-te[0])*Be+(Be=re[1]-te[1])*Be;It=sn(It,Math.sqrt(Me/Be)),Ot=[(Ce[0]+pe[0])/2,(Ce[1]+pe[1])/2],Ft=[(te[0]+re[0])/2,(te[1]+re[1])/2]}else if(V.touch0)Ot=V.touch0[0],Ft=V.touch0[1];else return;V.zoom("touch",a(je(It,Ot,Ft),V.extent,x))}}function So(M,...ut){if(this.__zooming){var V=ve(this,ut).event(M),ht=M.changedTouches,Pt=ht.length,Rt,It;for(on(M),ft&&clearTimeout(ft),ft=setTimeout(function(){ft=null},St),Rt=0;Rt<Pt;++Rt)It=ht[Rt],V.touch0&&V.touch0[2]===It.identifier?delete V.touch0:V.touch1&&V.touch1[2]===It.identifier&&delete V.touch1;if(V.touch1&&!V.touch0&&(V.touch0=V.touch1,delete V.touch1),V.touch0)V.touch0[1]=this.__zoom.invert(V.touch0[0]);else if(V.end(),V.taps===2&&(It=(0,xt.Z)(It,this),Math.hypot(dt[0]-It[0],dt[1]-It[1])<de)){var Ot=(0,at.Z)(this).on("dblclick.zoom");Ot&&Ot.apply(this,arguments)}}}return Mt.wheelDelta=function(M){return arguments.length?(d=typeof M=="function"?M:Zn(+M),Mt):d},Mt.filter=function(M){return arguments.length?(n=typeof M=="function"?M:Zn(!!M),Mt):n},Mt.touchable=function(M){return arguments.length?(w=typeof M=="function"?M:Zn(!!M),Mt):w},Mt.extent=function(M){return arguments.length?(o=typeof M=="function"?M:Zn([[+M[0][0],+M[0][1]],[+M[1][0],+M[1][1]]]),Mt):o},Mt.scaleExtent=function(M){return arguments.length?(b[0]=+M[0],b[1]=+M[1],Mt):[b[0],b[1]]},Mt.translateExtent=function(M){return arguments.length?(x[0][0]=+M[0][0],x[1][0]=+M[1][0],x[0][1]=+M[0][1],x[1][1]=+M[1][1],Mt):[[x[0][0],x[0][1]],[x[1][0],x[1][1]]]},Mt.constrain=function(M){return arguments.length?(a=M,Mt):a},Mt.duration=function(M){return arguments.length?(k=+M,Mt):k},Mt.interpolate=function(M){return arguments.length?(O=M,Mt):O},Mt.on=function(){var M=X.on.apply(X,arguments);return M===X?Mt:M},Mt.clickDistance=function(M){return arguments.length?(Kt=(M=+M)*M,Mt):Math.sqrt(Kt)},Mt.tapDistance=function(M){return arguments.length?(de=+M,Mt):de},Mt}}}]);
}());