!(function(){var gs=Object.defineProperty,ps=Object.defineProperties;var ms=Object.getOwnPropertyDescriptors;var Ao=Object.getOwnPropertySymbols;var _i=Object.prototype.hasOwnProperty,bi=Object.prototype.propertyIsEnumerable;var ui=Math.pow,wi=(dt,gt,B)=>gt in dt?gs(dt,gt,{enumerable:!0,configurable:!0,writable:!0,value:B}):dt[gt]=B,wt=(dt,gt)=>{for(var B in gt||(gt={}))_i.call(gt,B)&&wi(dt,B,gt[B]);if(Ao)for(var B of Ao(gt))bi.call(gt,B)&&wi(dt,B,gt[B]);return dt},qt=(dt,gt)=>ps(dt,ms(gt));var Zr=(dt,gt)=>{var B={};for(var l in dt)_i.call(dt,l)&&gt.indexOf(l)<0&&(B[l]=dt[l]);if(dt!=null&&Ao)for(var l of Ao(dt))gt.indexOf(l)<0&&bi.call(dt,l)&&(B[l]=dt[l]);return B};(self.webpackChunk_ant_design_pro_flow=self.webpackChunk_ant_design_pro_flow||[]).push([[2050],{38498:function(dt,gt,B){var l=B(78770);function it(J){if(Array.isArray(J))return l(J)}dt.exports=it,dt.exports.__esModule=!0,dt.exports.default=dt.exports},20698:function(dt){function gt(B){if(typeof Symbol!="undefined"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}dt.exports=gt,dt.exports.__esModule=!0,dt.exports.default=dt.exports},91162:function(dt){function gt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}dt.exports=gt,dt.exports.__esModule=!0,dt.exports.default=dt.exports},53649:function(dt){function gt(B,l){return l||(l=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(l)}}))}dt.exports=gt,dt.exports.__esModule=!0,dt.exports.default=dt.exports},15558:function(dt,gt,B){var l=B(38498),it=B(20698),J=B(31479),tt=B(91162);function Tt(st){return l(st)||it(st)||J(st)||tt()}dt.exports=Tt,dt.exports.__esModule=!0,dt.exports.default=dt.exports},73759:function(dt,gt,B){"use strict";B.d(gt,{u5:function(){return ge},XQ:function(){return Pi},HH:function(){return De},s_:function(){return xr},Ly:function(){return ut},x$:function(){return di},tV:function(){return cr},oW:function(){return qe},Su:function(){return je},yn:function(){return vo},Fb:function(){return Jr},OQ:function(){return Bn},oI:function(){return Pn},VP:function(){return se},RX:function(){return en},OW:function(){return Dn},Hm:function(){return Sr},ll:function(){return Di},B:function(){return Hi},CV:function(){return zi},_K:function(){return Qr},oR:function(){return Zt},AC:function(){return Lt},Sj:function(){return Ii}});var l=B(50959),it=B(28680),J=B(50224),tt=B(61512),Tt=B(93683),st=B(41468),at=B(13802),yt=B(73430),St=B(49289),Mt=B(5873),Bt=t=>()=>t;function Ut(t,{sourceEvent:e,subject:r,target:i,identifier:s,active:u,x:a,y:f,dx:h,dy:m,dispatch:p}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:a,enumerable:!0,configurable:!0},y:{value:f,enumerable:!0,configurable:!0},dx:{value:h,enumerable:!0,configurable:!0},dy:{value:m,enumerable:!0,configurable:!0},_:{value:p}})}Ut.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function Pe(t){return!t.ctrlKey&&!t.button}function mr(){return this.parentNode}function En(t,e){return e==null?{x:t.x,y:t.y}:e}function dn(){return navigator.maxTouchPoints||"ontouchstart"in this}function hn(){var t=Pe,e=mr,r=En,i=dn,s={},u=(0,yt.Z)("start","drag","end"),a=0,f,h,m,p,y=0;function S(E){E.on("mousedown.drag",b).filter(i).on("touchstart.drag",R).on("touchmove.drag",M,Mt.Q7).on("touchend.drag touchcancel.drag",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(E,H){if(!(p||!t.call(this,E,H))){var U=I(this,e.call(this,E,H),E,H,"mouse");U&&((0,st.Z)(E.view).on("mousemove.drag",P,Mt.Dd).on("mouseup.drag",N,Mt.Dd),(0,St.Z)(E.view),(0,Mt.rG)(E),m=!1,f=E.clientX,h=E.clientY,U("start",E))}}function P(E){if((0,Mt.ZP)(E),!m){var H=E.clientX-f,U=E.clientY-h;m=H*H+U*U>y}s.mouse("drag",E)}function N(E){(0,st.Z)(E.view).on("mousemove.drag mouseup.drag",null),(0,St.D)(E.view,m),(0,Mt.ZP)(E),s.mouse("end",E)}function R(E,H){if(t.call(this,E,H)){var U=E.changedTouches,G=e.call(this,E,H),Y=U.length,V,et;for(V=0;V<Y;++V)(et=I(this,G,E,H,U[V].identifier,U[V]))&&((0,Mt.rG)(E),et("start",E,U[V]))}}function M(E){var H=E.changedTouches,U=H.length,G,Y;for(G=0;G<U;++G)(Y=s[H[G].identifier])&&((0,Mt.ZP)(E),Y("drag",E,H[G]))}function A(E){var H=E.changedTouches,U=H.length,G,Y;for(p&&clearTimeout(p),p=setTimeout(function(){p=null},500),G=0;G<U;++G)(Y=s[H[G].identifier])&&((0,Mt.rG)(E),Y("end",E,H[G]))}function I(E,H,U,G,Y,V){var et=u.copy(),W=(0,at.Z)(V||U,H),nt,$,D;if((D=r.call(E,new Ut("beforestart",{sourceEvent:U,target:S,identifier:Y,active:a,x:W[0],y:W[1],dx:0,dy:0,dispatch:et}),G))!=null)return nt=D.x-W[0]||0,$=D.y-W[1]||0,function q(rt,vt,mt){var T=W,ot;switch(rt){case"start":s[Y]=q,ot=a++;break;case"end":delete s[Y],--a;case"drag":W=(0,at.Z)(mt||vt,H),ot=a;break}et.call(rt,E,new Ut(rt,{sourceEvent:vt,subject:D,target:S,identifier:Y,active:ot,x:W[0]+nt,y:W[1]+$,dx:W[0]-T[0],dy:W[1]-T[1],dispatch:et}),G)}}return S.filter=function(E){return arguments.length?(t=typeof E=="function"?E:Bt(!!E),S):t},S.container=function(E){return arguments.length?(e=typeof E=="function"?E:Bt(E),S):e},S.subject=function(E){return arguments.length?(r=typeof E=="function"?E:Bt(E),S):r},S.touchable=function(E){return arguments.length?(i=typeof E=="function"?E:Bt(!!E),S):i},S.on=function(){var E=u.on.apply(u,arguments);return E===u?S:E},S.clickDistance=function(E){return arguments.length?(y=(E=+E)*E,S):Math.sqrt(y)},S}var Be=B(10422);const ye=(0,l.createContext)(null),gn=ye.Provider,ie={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Nn=ie.error001();function Zt(t,e){const r=(0,l.useContext)(ye);if(r===null)throw new Error(Nn);return(0,J.s)(r,t,e)}const Lt=()=>{const t=(0,l.useContext)(ye);if(t===null)throw new Error(Nn);return(0,l.useMemo)(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},yr=t=>t.userSelectionActive?"none":"all";function xr(u){var a=u,{position:t,children:e,className:r,style:i}=a,s=Zr(a,["position","children","className","style"]);const f=Zt(yr),h=`${t}`.split("-");return l.createElement("div",wt({className:(0,it.Z)(["react-flow__panel",r,...h]),style:qt(wt({},i),{pointerEvents:f})},s),e)}function wr({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:l.createElement(xr,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},l.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const Lr=y=>{var S=y,{x:t,y:e,label:r,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:u={},labelBgPadding:a=[2,4],labelBgBorderRadius:f=2,children:h,className:m}=S,p=Zr(S,["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"]);const b=(0,l.useRef)(null),[P,N]=(0,l.useState)({x:0,y:0,width:0,height:0}),R=(0,it.Z)(["react-flow__edge-textwrapper",m]);return(0,l.useEffect)(()=>{if(b.current){const M=b.current.getBBox();N({x:M.x,y:M.y,width:M.width,height:M.height})}},[r]),typeof r=="undefined"||!r?null:l.createElement("g",wt({transform:`translate(${t-P.width/2} ${e-P.height/2})`,className:R,visibility:P.width?"visible":"hidden"},p),s&&l.createElement("rect",{width:P.width+2*a[0],x:-a[0],y:-a[1],height:P.height+2*a[1],className:"react-flow__edge-textbg",style:u,rx:f,ry:f}),l.createElement("text",{className:"react-flow__edge-text",y:P.height/2,dy:"0.3em",ref:b,style:i},r),h)};var Xr=(0,l.memo)(Lr);const pn=t=>({width:t.offsetWidth,height:t.offsetHeight}),He=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),Vn=(t={x:0,y:0},e)=>({x:He(t.x,e[0][0],e[1][0]),y:He(t.y,e[0][1],e[1][1])}),_r=(t,e,r)=>t<e?He(Math.abs(t-e),1,50)/50:t>r?-He(Math.abs(t-r),1,50)/50:0,Fn=(t,e)=>{const r=_r(t.x,35,e.width-35)*20,i=_r(t.y,35,e.height-35)*20;return[r,i]},Yn=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},Cn=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Te=({x:t,y:e,width:r,height:i})=>({x:t,y:e,x2:t+r,y2:e+i}),Mn=({x:t,y:e,x2:r,y2:i})=>({x:t,y:e,width:r-t,height:i-e}),An=t=>qt(wt({},t.positionAbsolute||{x:0,y:0}),{width:t.width||0,height:t.height||0}),Pn=(t,e)=>Mn(Cn(Te(t),Te(e))),Ue=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*i)},Kn=t=>Ft(t.width)&&Ft(t.height)&&Ft(t.x)&&Ft(t.y),Ft=t=>!isNaN(t)&&isFinite(t),$t=Symbol.for("internals"),br=["Enter"," ","Escape"],Oe=(t,e)=>{},Vr=t=>"nativeEvent"in t;function xe(t){var s,u;const e=Vr(t)?t.nativeEvent:t,r=((u=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:u[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Wn=t=>"clientX"in t,we=(t,e)=>{var u,a,f,h;const r=Wn(t),i=r?t.clientX:(u=t.touches)==null?void 0:u[0].clientX,s=r?t.clientY:(a=t.touches)==null?void 0:a[0].clientY;return{x:i-((f=e==null?void 0:e.left)!=null?f:0),y:s-((h=e==null?void 0:e.top)!=null?h:0)}},Ge=()=>{var t;return typeof navigator!="undefined"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},ge=({id:t,path:e,labelX:r,labelY:i,label:s,labelStyle:u,labelShowBg:a,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:S,interactionWidth:b=20})=>l.createElement(l.Fragment,null,l.createElement("path",{id:t,style:p,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:S}),b&&l.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:b,className:"react-flow__edge-interaction"}),s&&Ft(r)&&Ft(i)?l.createElement(Xr,{x:r,y:i,label:s,labelStyle:u,labelShowBg:a,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:m}):null);ge.displayName="BaseEdge";const Fr=(t,e)=>typeof e!="undefined"&&e?`url(#${e})`:typeof t!="undefined"?`url(#react-flow__${t})`:"none";function Qe(t,e,r){return r===void 0?r:i=>{const s=e().edges.find(u=>u.id===t);s&&r(i,wt({},s))}}function Tn({sourceX:t,sourceY:e,targetX:r,targetY:i}){const s=Math.abs(r-t)/2,u=r<t?r+s:r-s,a=Math.abs(i-e)/2,f=i<e?i+a:i-a;return[u,f,s,a]}function vr({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:a,targetControlY:f}){const h=t*.125+s*.375+a*.375+r*.125,m=e*.125+u*.375+f*.375+i*.125,p=Math.abs(h-t),y=Math.abs(m-e);return[h,m,p,y]}var Ze;(function(t){t.Strict="strict",t.Loose="loose"})(Ze||(Ze={}));var ke;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(ke||(ke={}));var qe;(function(t){t.Partial="partial",t.Full="full"})(qe||(qe={}));var Re;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Re||(Re={}));var kn;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(kn||(kn={}));var ut;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(ut||(ut={}));function Rn({pos:t,x1:e,y1:r,x2:i,y2:s}){return t===ut.Left||t===ut.Right?[.5*(e+i),r]:[e,.5*(r+s)]}function Un({sourceX:t,sourceY:e,sourcePosition:r=ut.Bottom,targetX:i,targetY:s,targetPosition:u=ut.Top}){const[a,f]=Rn({pos:r,x1:t,y1:e,x2:i,y2:s}),[h,m]=Rn({pos:u,x1:i,y1:s,x2:t,y2:e}),[p,y,S,b]=vr({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:a,sourceControlY:f,targetControlX:h,targetControlY:m});return[`M${t},${e} C${a},${f} ${h},${m} ${i},${s}`,p,y,S,b]}const Le=(0,l.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,sourcePosition:s=ut.Bottom,targetPosition:u=ut.Top,label:a,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:p,labelBgBorderRadius:y,style:S,markerEnd:b,markerStart:P,interactionWidth:N})=>{const[R,M,A]=Un({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:i,targetPosition:u});return l.createElement(ge,{path:R,labelX:M,labelY:A,label:a,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:p,labelBgBorderRadius:y,style:S,markerEnd:b,markerStart:P,interactionWidth:N})});Le.displayName="SimpleBezierEdge";const Je={[ut.Left]:{x:-1,y:0},[ut.Right]:{x:1,y:0},[ut.Top]:{x:0,y:-1},[ut.Bottom]:{x:0,y:1}},In=({source:t,sourcePosition:e=ut.Bottom,target:r})=>e===ut.Left||e===ut.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},Xe=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function mn({source:t,sourcePosition:e=ut.Bottom,target:r,targetPosition:i=ut.Top,center:s,offset:u}){var G,Y;const a=Je[e],f=Je[i],h={x:t.x+a.x*u,y:t.y+a.y*u},m={x:r.x+f.x*u,y:r.y+f.y*u},p=In({source:h,sourcePosition:e,target:m}),y=p.x!==0?"x":"y",S=p[y];let b=[],P,N;const R={x:0,y:0},M={x:0,y:0},[A,I,E,H]=Tn({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(a[y]*f[y]===-1){P=(G=s.x)!=null?G:A,N=(Y=s.y)!=null?Y:I;const V=[{x:P,y:h.y},{x:P,y:m.y}],et=[{x:h.x,y:N},{x:m.x,y:N}];a[y]===S?b=y==="x"?V:et:b=y==="x"?et:V}else{const V=[{x:h.x,y:m.y}],et=[{x:m.x,y:h.y}];if(y==="x"?b=a.x===S?et:V:b=a.y===S?V:et,e===i){const q=Math.abs(t[y]-r[y]);if(q<=u){const rt=Math.min(u-1,u-q);a[y]===S?R[y]=(h[y]>t[y]?-1:1)*rt:M[y]=(m[y]>r[y]?-1:1)*rt}}if(e!==i){const q=y==="x"?"y":"x",rt=a[y]===f[q],vt=h[q]>m[q],mt=h[q]<m[q];(a[y]===1&&(!rt&&vt||rt&&mt)||a[y]!==1&&(!rt&&mt||rt&&vt))&&(b=y==="x"?V:et)}const W={x:h.x+R.x,y:h.y+R.y},nt={x:m.x+M.x,y:m.y+M.y},$=Math.max(Math.abs(W.x-b[0].x),Math.abs(nt.x-b[0].x)),D=Math.max(Math.abs(W.y-b[0].y),Math.abs(nt.y-b[0].y));$>=D?(P=(W.x+nt.x)/2,N=b[0].y):(P=b[0].x,N=(W.y+nt.y)/2)}return[[t,{x:h.x+R.x,y:h.y+R.y},...b,{x:m.x+M.x,y:m.y+M.y},r],P,N,E,H]}function _e(t,e,r,i){const s=Math.min(Xe(t,e)/2,Xe(e,r)/2,i),{x:u,y:a}=e;if(t.x===u&&u===r.x||t.y===a&&a===r.y)return`L${u} ${a}`;if(t.y===a){const m=t.x<r.x?-1:1,p=t.y<r.y?1:-1;return`L ${u+s*m},${a}Q ${u},${a} ${u},${a+s*p}`}const f=t.x<r.x?1:-1,h=t.y<r.y?-1:1;return`L ${u},${a+s*h}Q ${u},${a} ${u+s*f},${a}`}function Dn({sourceX:t,sourceY:e,sourcePosition:r=ut.Bottom,targetX:i,targetY:s,targetPosition:u=ut.Top,borderRadius:a=5,centerX:f,centerY:h,offset:m=20}){const[p,y,S,b,P]=mn({source:{x:t,y:e},sourcePosition:r,target:{x:i,y:s},targetPosition:u,center:{x:f,y:h},offset:m});return[p.reduce((R,M,A)=>{let I="";return A>0&&A<p.length-1?I=_e(p[A-1],M,p[A+1],a):I=`${A===0?"M":"L"}${M.x} ${M.y}`,R+=I,R},""),y,S,b,P]}const je=(0,l.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,label:s,labelStyle:u,labelShowBg:a,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:m,style:p,sourcePosition:y=ut.Bottom,targetPosition:S=ut.Top,markerEnd:b,markerStart:P,pathOptions:N,interactionWidth:R})=>{const[M,A,I]=Dn({sourceX:t,sourceY:e,sourcePosition:y,targetX:r,targetY:i,targetPosition:S,borderRadius:N==null?void 0:N.borderRadius,offset:N==null?void 0:N.offset});return l.createElement(ge,{path:M,labelX:A,labelY:I,label:s,labelStyle:u,labelShowBg:a,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:m,style:p,markerEnd:b,markerStart:P,interactionWidth:R})});je.displayName="SmoothStepEdge";const Gn=(0,l.memo)(t=>{var e;return l.createElement(je,qt(wt({},t),{pathOptions:(0,l.useMemo)(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])}))});Gn.displayName="StepEdge";function Sr({sourceX:t,sourceY:e,targetX:r,targetY:i}){const[s,u,a,f]=Tn({sourceX:t,sourceY:e,targetX:r,targetY:i});return[`M ${t},${e}L ${r},${i}`,s,u,a,f]}const zn=(0,l.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,label:s,labelStyle:u,labelShowBg:a,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:S,interactionWidth:b})=>{const[P,N,R]=Sr({sourceX:t,sourceY:e,targetX:r,targetY:i});return l.createElement(ge,{path:P,labelX:N,labelY:R,label:s,labelStyle:u,labelShowBg:a,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:m,style:p,markerEnd:y,markerStart:S,interactionWidth:b})});zn.displayName="StraightEdge";function $n(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Er({pos:t,x1:e,y1:r,x2:i,y2:s,c:u}){switch(t){case ut.Left:return[e-$n(e-i,u),r];case ut.Right:return[e+$n(i-e,u),r];case ut.Top:return[e,r-$n(r-s,u)];case ut.Bottom:return[e,r+$n(s-r,u)]}}function Bn({sourceX:t,sourceY:e,sourcePosition:r=ut.Bottom,targetX:i,targetY:s,targetPosition:u=ut.Top,curvature:a=.25}){const[f,h]=Er({pos:r,x1:t,y1:e,x2:i,y2:s,c:a}),[m,p]=Er({pos:u,x1:i,y1:s,x2:t,y2:e,c:a}),[y,S,b,P]=vr({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:f,sourceControlY:h,targetControlX:m,targetControlY:p});return[`M${t},${e} C${f},${h} ${m},${p} ${i},${s}`,y,S,b,P]}const yn=(0,l.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,sourcePosition:s=ut.Bottom,targetPosition:u=ut.Top,label:a,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:p,labelBgBorderRadius:y,style:S,markerEnd:b,markerStart:P,pathOptions:N,interactionWidth:R})=>{const[M,A,I]=Bn({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:i,targetPosition:u,curvature:N==null?void 0:N.curvature});return l.createElement(ge,{path:M,labelX:A,labelY:I,label:a,labelStyle:f,labelShowBg:h,labelBgStyle:m,labelBgPadding:p,labelBgBorderRadius:y,style:S,markerEnd:b,markerStart:P,interactionWidth:R})});yn.displayName="BezierEdge";const Qn=(0,l.createContext)(null),Yr=Qn.Provider;Qn.Consumer;const Nr=()=>(0,l.useContext)(Qn),xn=t=>"id"in t&&"source"in t&&"target"in t,qn=t=>"id"in t&&!("source"in t)&&!("target"in t),Jn=(t,e,r)=>{if(!qn(t))return[];const i=r.filter(s=>s.source===t.id).map(s=>s.target);return e.filter(s=>i.includes(s.id))},so=(t,e,r)=>{if(!qn(t))return[];const i=r.filter(s=>s.target===t.id).map(s=>s.source);return e.filter(s=>i.includes(s.id))},wn=({source:t,sourceHandle:e,target:r,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${r}${i||""}`,Jt=(t,e)=>typeof t=="undefined"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,Cr=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),Kr=(t,e)=>{if(!t.source||!t.target)return Oe("006",ie.error006()),e;let r;return xn(t)?r=wt({},t):r=qt(wt({},t),{id:wn(t)}),Cr(r,e)?e:e.concat(r)},Mr=(t,e,r,i={shouldReplaceId:!0})=>{const h=t,{id:s}=h,u=Zr(h,["id"]);if(!e.source||!e.target)return Oe("006",ie.error006()),r;if(!r.find(m=>m.id===s))return Oe("007",ie.error007(s)),r;const f=qt(wt({},u),{id:i.shouldReplaceId?wn(e):s,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle});return r.filter(m=>m.id!==s).concat(f)},tn=({x:t,y:e},[r,i,s],u,[a,f])=>{const h={x:(t-r)/s,y:(e-i)/s};return u?{x:a*Math.round(h.x/a),y:f*Math.round(h.y/f)}:h},Ie=({x:t,y:e},[r,i,s])=>({x:t*s+r,y:e*s+i}),se=(t,e=[0,0])=>{var u,a;if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=((u=t.width)!=null?u:0)*e[0],i=((a=t.height)!=null?a:0)*e[1],s={x:t.position.x-r,y:t.position.y-i};return qt(wt({},s),{positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-i}:s})},en=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((i,s)=>{const{x:u,y:a}=se(s,e).positionAbsolute;return Cn(i,Te({x:u,y:a,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Mn(r)},Ar=(t,e=[0,0])=>(console.warn("[DEPRECATED] `getRectOfNodes` is deprecated. Instead use `getNodesBounds` https://reactflow.dev/api-reference/utils/get-nodes-bounds."),en(t,e)),ae=(t,e,[r,i,s]=[0,0,1],u=!1,a=!1,f=[0,0])=>{const h={x:(e.x-r)/s,y:(e.y-i)/s,width:e.width/s,height:e.height/s},m=[];return t.forEach(p=>{const{width:y,height:S,selectable:b=!0,hidden:P=!1}=p;if(a&&!b||P)return!1;const{positionAbsolute:N}=se(p,f),R={x:N.x,y:N.y,width:y||0,height:S||0},M=Ue(h,R),A=typeof y=="undefined"||typeof S=="undefined"||y===null||S===null,I=u&&M>0,E=(y||0)*(S||0);(A||I||M>=E||p.dragging)&&m.push(p)}),m},ce=(t,e)=>{const r=t.map(i=>i.id);return e.filter(i=>r.includes(i.source)||r.includes(i.target))},Wr=(t,e,r,i,s,u=.1)=>{const{x:a,y:f,zoom:h}=nn(t,e,r,i,s,u);return console.warn("[DEPRECATED] `getTransformForBounds` is deprecated. Instead use `getViewportForBounds`. Beware that the return value is type Viewport (`{ x: number, y: number, zoom: number }`) instead of Transform (`[number, number, number]`). https://reactflow.dev/api-reference/utils/get-viewport-for-bounds"),[a,f,h]},nn=(t,e,r,i,s,u=.1)=>{const a=e/(t.width*(1+u)),f=r/(t.height*(1+u)),h=Math.min(a,f),m=He(h,i,s),p=t.x+t.width/2,y=t.y+t.height/2,S=e/2-p*m,b=r/2-y*m;return{x:S,y:b,zoom:m}},d=(t,e=0)=>t.transition().duration(e);function _(t,e,r,i){return(e[r]||[]).reduce((s,u)=>{var a,f,h,m;return`${t.id}-${u.id}-${r}`!==i&&s.push({id:u.id||null,type:r,nodeId:t.id,x:((f=(a=t.positionAbsolute)==null?void 0:a.x)!=null?f:0)+u.x+u.width/2,y:((m=(h=t.positionAbsolute)==null?void 0:h.y)!=null?m:0)+u.y+u.height/2}),s},[])}function F(t,e,r,i,s,u){const{x:a,y:f}=we(t),m=e.elementsFromPoint(a,f).find(P=>P.classList.contains("react-flow__handle"));if(m){const P=m.getAttribute("data-nodeid");if(P){const N=lt(void 0,m),R=m.getAttribute("data-handleid"),M=u({nodeId:P,id:R,type:N});if(M){const A=s.find(I=>I.nodeId===P&&I.type===N&&I.id===R);return{handle:{id:R,type:N,nodeId:P,x:(A==null?void 0:A.x)||r.x,y:(A==null?void 0:A.y)||r.y},validHandleResult:M}}}}let p=[],y=1/0;if(s.forEach(P=>{const N=Math.sqrt(ui(P.x-r.x,2)+ui(P.y-r.y,2));if(N<=i){const R=u(P);N<=y&&(N<y?p=[{handle:P,validHandleResult:R}]:N===y&&p.push({handle:P,validHandleResult:R}),y=N)}}),!p.length)return{handle:null,validHandleResult:z()};if(p.length===1)return p[0];const S=p.some(({validHandleResult:P})=>P.isValid),b=p.some(({handle:P})=>P.type==="target");return p.find(({handle:P,validHandleResult:N})=>b?P.type==="target":S?N.isValid:!0)||p[0]}const K={source:null,target:null,sourceHandle:null,targetHandle:null},z=()=>({handleDomNode:null,isValid:!1,connection:K,endHandle:null});function j(t,e,r,i,s,u,a){const f=s==="target",h=a.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),m=qt(wt({},z()),{handleDomNode:h});if(h){const p=lt(void 0,h),y=h.getAttribute("data-nodeid"),S=h.getAttribute("data-handleid"),b=h.classList.contains("connectable"),P=h.classList.contains("connectableend"),N={source:f?y:r,sourceHandle:f?S:i,target:f?r:y,targetHandle:f?i:S};m.connection=N,b&&P&&(e===Ze.Strict?f&&p==="source"||!f&&p==="target":y!==r||S!==i)&&(m.endHandle={nodeId:y,handleId:S,type:p},m.isValid=u(N))}return m}function ht({nodes:t,nodeId:e,handleId:r,handleType:i}){return t.reduce((s,u)=>{if(u[$t]){const{handleBounds:a}=u[$t];let f=[],h=[];a&&(f=_(u,a,"source",`${e}-${r}-${i}`),h=_(u,a,"target",`${e}-${r}-${i}`)),s.push(...f,...h)}return s},[])}function lt(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function _t(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function Pt(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function Ot({event:t,handleId:e,nodeId:r,onConnect:i,isTarget:s,getState:u,setState:a,isValidConnection:f,edgeUpdaterType:h,onEdgeUpdateEnd:m}){const p=Yn(t.target),{connectionMode:y,domNode:S,autoPanOnConnect:b,connectionRadius:P,onConnectStart:N,panBy:R,getNodes:M,cancelConnection:A}=u();let I=0,E;const{x:H,y:U}=we(t),G=p==null?void 0:p.elementFromPoint(H,U),Y=lt(h,G),V=S==null?void 0:S.getBoundingClientRect();if(!V||!Y)return;let et,W=we(t,V),nt=!1,$=null,D=!1,q=null;const rt=ht({nodes:M(),nodeId:r,handleId:e,handleType:Y}),vt=()=>{if(!b)return;const[ot,Q]=Fn(W,V);R({x:ot,y:Q}),I=requestAnimationFrame(vt)};a({connectionPosition:W,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:Y,connectionStartHandle:{nodeId:r,handleId:e,type:Y},connectionEndHandle:null}),N==null||N(t,{nodeId:r,handleId:e,handleType:Y});function mt(ot){const{transform:Q}=u();W=we(ot,V);const{handle:ct,validHandleResult:Nt}=F(ot,p,tn(W,Q,!1,[1,1]),P,rt,It=>j(It,y,r,e,s?"target":"source",f,p));if(E=ct,nt||(vt(),nt=!0),q=Nt.handleDomNode,$=Nt.connection,D=Nt.isValid,a({connectionPosition:E&&D?Ie({x:E.x,y:E.y},Q):W,connectionStatus:Pt(!!E,D),connectionEndHandle:Nt.endHandle}),!E&&!D&&!q)return _t(et);$.source!==$.target&&q&&(_t(et),et=q,q.classList.add("connecting","react-flow__handle-connecting"),q.classList.toggle("valid",D),q.classList.toggle("react-flow__handle-valid",D))}function T(ot){var Q,ct;(E||q)&&$&&D&&(i==null||i($)),(ct=(Q=u()).onConnectEnd)==null||ct.call(Q,ot),h&&(m==null||m(ot)),_t(et),A(),cancelAnimationFrame(I),nt=!1,D=!1,$=null,q=null,p.removeEventListener("mousemove",mt),p.removeEventListener("mouseup",T),p.removeEventListener("touchmove",mt),p.removeEventListener("touchend",T)}p.addEventListener("mousemove",mt),p.addEventListener("mouseup",T),p.addEventListener("touchmove",mt),p.addEventListener("touchend",T)}const ue=()=>!0,be=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),pe=(t,e,r)=>i=>{const{connectionStartHandle:s,connectionEndHandle:u,connectionClickStartHandle:a}=i;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r||(u==null?void 0:u.nodeId)===t&&(u==null?void 0:u.handleId)===e&&(u==null?void 0:u.type)===r,clickConnecting:(a==null?void 0:a.nodeId)===t&&(a==null?void 0:a.handleId)===e&&(a==null?void 0:a.type)===r}},le=(0,l.forwardRef)((P,b)=>{var N=P,{type:t="source",position:e=ut.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:u=!0,id:a,onConnect:f,children:h,className:m,onMouseDown:p,onTouchStart:y}=N,S=Zr(N,["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"]);var W,nt;const R=a||null,M=t==="target",A=Lt(),I=Nr(),{connectOnClick:E,noPanClassName:H}=Zt(be,tt.X),{connecting:U,clickConnecting:G}=Zt(pe(I,R,t),tt.X);I||(nt=(W=A.getState()).onError)==null||nt.call(W,"010",ie.error010());const Y=$=>{const{defaultEdgeOptions:D,onConnect:q,hasDefaultEdges:rt}=A.getState(),vt=wt(wt({},D),$);if(rt){const{edges:mt,setEdges:T}=A.getState();T(Kr(vt,mt))}q==null||q(vt),f==null||f(vt)},V=$=>{if(!I)return;const D=Wn($);s&&(D&&$.button===0||!D)&&Ot({event:$,handleId:R,nodeId:I,onConnect:Y,isTarget:M,getState:A.getState,setState:A.setState,isValidConnection:r||A.getState().isValidConnection||ue}),D?p==null||p($):y==null||y($)},et=$=>{const{onClickConnectStart:D,onClickConnectEnd:q,connectionClickStartHandle:rt,connectionMode:vt,isValidConnection:mt}=A.getState();if(!I||!rt&&!s)return;if(!rt){D==null||D($,{nodeId:I,handleId:R,handleType:t}),A.setState({connectionClickStartHandle:{nodeId:I,type:t,handleId:R}});return}const T=Yn($.target),ot=r||mt||ue,{connection:Q,isValid:ct}=j({nodeId:I,id:R,type:t},vt,rt.nodeId,rt.handleId||null,rt.type,ot,T);ct&&Y(Q),q==null||q($),A.setState({connectionClickStartHandle:null})};return l.createElement("div",wt({"data-handleid":R,"data-nodeid":I,"data-handlepos":e,"data-id":`${I}-${R}-${t}`,className:(0,it.Z)(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",H,m,{source:!M,target:M,connectable:i,connectablestart:s,connectableend:u,connecting:G,connectionindicator:i&&(s&&!U||u&&U)}]),onMouseDown:V,onTouchStart:V,onClick:E?et:void 0,ref:b},S),h)});le.displayName="Handle";var De=(0,l.memo)(le);const jn=({data:t,isConnectable:e,targetPosition:r=ut.Top,sourcePosition:i=ut.Bottom})=>l.createElement(l.Fragment,null,l.createElement(De,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,l.createElement(De,{type:"source",position:i,isConnectable:e}));jn.displayName="DefaultNode";var tr=(0,l.memo)(jn);const rn=({data:t,isConnectable:e,sourcePosition:r=ut.Bottom})=>l.createElement(l.Fragment,null,t==null?void 0:t.label,l.createElement(De,{type:"source",position:r,isConnectable:e}));rn.displayName="InputNode";var on=(0,l.memo)(rn);const er=({data:t,isConnectable:e,targetPosition:r=ut.Top})=>l.createElement(l.Fragment,null,l.createElement(De,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label);er.displayName="OutputNode";var nr=(0,l.memo)(er);const Ur=()=>null;Ur.displayName="GroupNode";const Po=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected)}),Pr=t=>t.id;function To(t,e){return(0,tt.X)(t.selectedNodes.map(Pr),e.selectedNodes.map(Pr))&&(0,tt.X)(t.selectedEdges.map(Pr),e.selectedEdges.map(Pr))}const ao=(0,l.memo)(({onSelectionChange:t})=>{const e=Lt(),{selectedNodes:r,selectedEdges:i}=Zt(Po,To);return(0,l.useEffect)(()=>{const s={nodes:r,edges:i};t==null||t(s),e.getState().onSelectionChange.forEach(u=>u(s))},[r,i,t]),null});ao.displayName="SelectionListener";const ko=t=>!!t.onSelectionChange;function Ro({onSelectionChange:t}){const e=Zt(ko);return t||e?l.createElement(ao,{onSelectionChange:t}):null}const Io=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function Hn(t,e){(0,l.useEffect)(()=>{typeof t!="undefined"&&e(t)},[t])}function Rt(t,e,r){(0,l.useEffect)(()=>{typeof e!="undefined"&&r({[t]:e})},[e])}const Do=({nodes:t,edges:e,defaultNodes:r,defaultEdges:i,onConnect:s,onConnectStart:u,onConnectEnd:a,onClickConnectStart:f,onClickConnectEnd:h,nodesDraggable:m,nodesConnectable:p,nodesFocusable:y,edgesFocusable:S,edgesUpdatable:b,elevateNodesOnSelect:P,minZoom:N,maxZoom:R,nodeExtent:M,onNodesChange:A,onEdgesChange:I,elementsSelectable:E,connectionMode:H,snapGrid:U,snapToGrid:G,translateExtent:Y,connectOnClick:V,defaultEdgeOptions:et,fitView:W,fitViewOptions:nt,onNodesDelete:$,onEdgesDelete:D,onNodeDrag:q,onNodeDragStart:rt,onNodeDragStop:vt,onSelectionDrag:mt,onSelectionDragStart:T,onSelectionDragStop:ot,noPanClassName:Q,nodeOrigin:ct,rfId:Nt,autoPanOnConnect:It,autoPanOnNodeDrag:Ht,onError:Vt,connectionRadius:ee,isValidConnection:ne,nodeDragThreshold:fe})=>{const{setNodes:oe,setEdges:de,setDefaultNodesAndEdges:Gt,setMinZoom:Ke,setMaxZoom:Me,setTranslateExtent:Qt,setNodeExtent:ln,reset:Yt}=Zt(Io,tt.X),Et=Lt();return(0,l.useEffect)(()=>{const Ae=i==null?void 0:i.map(ur=>wt(wt({},ur),et));return Gt(r,Ae),()=>{Yt()}},[]),Rt("defaultEdgeOptions",et,Et.setState),Rt("connectionMode",H,Et.setState),Rt("onConnect",s,Et.setState),Rt("onConnectStart",u,Et.setState),Rt("onConnectEnd",a,Et.setState),Rt("onClickConnectStart",f,Et.setState),Rt("onClickConnectEnd",h,Et.setState),Rt("nodesDraggable",m,Et.setState),Rt("nodesConnectable",p,Et.setState),Rt("nodesFocusable",y,Et.setState),Rt("edgesFocusable",S,Et.setState),Rt("edgesUpdatable",b,Et.setState),Rt("elementsSelectable",E,Et.setState),Rt("elevateNodesOnSelect",P,Et.setState),Rt("snapToGrid",G,Et.setState),Rt("snapGrid",U,Et.setState),Rt("onNodesChange",A,Et.setState),Rt("onEdgesChange",I,Et.setState),Rt("connectOnClick",V,Et.setState),Rt("fitViewOnInit",W,Et.setState),Rt("fitViewOnInitOptions",nt,Et.setState),Rt("onNodesDelete",$,Et.setState),Rt("onEdgesDelete",D,Et.setState),Rt("onNodeDrag",q,Et.setState),Rt("onNodeDragStart",rt,Et.setState),Rt("onNodeDragStop",vt,Et.setState),Rt("onSelectionDrag",mt,Et.setState),Rt("onSelectionDragStart",T,Et.setState),Rt("onSelectionDragStop",ot,Et.setState),Rt("noPanClassName",Q,Et.setState),Rt("nodeOrigin",ct,Et.setState),Rt("rfId",Nt,Et.setState),Rt("autoPanOnConnect",It,Et.setState),Rt("autoPanOnNodeDrag",Ht,Et.setState),Rt("onError",Vt,Et.setState),Rt("connectionRadius",ee,Et.setState),Rt("isValidConnection",ne,Et.setState),Rt("nodeDragThreshold",fe,Et.setState),Hn(t,oe),Hn(e,de),Hn(N,Ke),Hn(R,Me),Hn(Y,Qt),Hn(M,ln),null},co={display:"none"},zo={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},uo="react-flow__node-desc",lo="react-flow__edge-desc",$o="react-flow__aria-live",Bo=t=>t.ariaLiveMessage;function Ho({rfId:t}){const e=Zt(Bo);return l.createElement("div",{id:`${$o}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:zo},e)}function Oo({rfId:t,disableKeyboardA11y:e}){return l.createElement(l.Fragment,null,l.createElement("div",{id:`${uo}-${t}`,style:co},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),l.createElement("div",{id:`${lo}-${t}`,style:co},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&l.createElement(Ho,{rfId:t}))}var rr=(t=null,e={actInsideInputWithModifier:!0})=>{const[r,i]=(0,l.useState)(!1),s=(0,l.useRef)(!1),u=(0,l.useRef)(new Set([])),[a,f]=(0,l.useMemo)(()=>{if(t!==null){const m=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.split("+")),p=m.reduce((y,S)=>y.concat(...S),[]);return[m,p]}return[[],[]]},[t]);return(0,l.useEffect)(()=>{const h=typeof document!="undefined"?document:null,m=(e==null?void 0:e.target)||h;if(t!==null){const p=b=>{if(s.current=b.ctrlKey||b.metaKey||b.shiftKey,(!s.current||s.current&&!e.actInsideInputWithModifier)&&xe(b))return!1;const N=ho(b.code,f);u.current.add(b[N]),fo(a,u.current,!1)&&(b.preventDefault(),i(!0))},y=b=>{if((!s.current||s.current&&!e.actInsideInputWithModifier)&&xe(b))return!1;const N=ho(b.code,f);fo(a,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(b[N]),b.key==="Meta"&&u.current.clear(),s.current=!1},S=()=>{u.current.clear(),i(!1)};return m==null||m.addEventListener("keydown",p),m==null||m.addEventListener("keyup",y),window.addEventListener("blur",S),()=>{m==null||m.removeEventListener("keydown",p),m==null||m.removeEventListener("keyup",y),window.removeEventListener("blur",S)}}},[t,i]),r};function fo(t,e,r){return t.filter(i=>r||i.length===e.size).some(i=>i.every(s=>e.has(s)))}function ho(t,e){return e.includes(t)?"code":"key"}function go(t,e,r,i){var f,h,m,p,y,S,b,P;const s=t.parentNode||t.parentId;if(!s)return r;const u=e.get(s),a=se(u,i);return go(u,e,{x:((f=r.x)!=null?f:0)+a.x,y:((h=r.y)!=null?h:0)+a.y,z:((p=(m=u[$t])==null?void 0:m.z)!=null?p:0)>((y=r.z)!=null?y:0)?(b=(S=u[$t])==null?void 0:S.z)!=null?b:0:(P=r.z)!=null?P:0},i)}function po(t,e,r){t.forEach(i=>{var u,a;const s=i.parentNode||i.parentId;if(s&&!t.has(s))throw new Error(`Parent node ${s} not found`);if(s||r!=null&&r[i.id]){const{x:f,y:h,z:m}=go(i,t,qt(wt({},i.position),{z:(a=(u=i[$t])==null?void 0:u.z)!=null?a:0}),e);i.positionAbsolute={x:f,y:h},i[$t].z=m,r!=null&&r[i.id]&&(i[$t].isParent=!0)}})}function Gr(t,e,r,i){const s=new Map,u={},a=i?1e3:0;return t.forEach(f=>{var b;const h=(Ft(f.zIndex)?f.zIndex:0)+(f.selected?a:0),m=e.get(f.id),p=qt(wt({},f),{positionAbsolute:{x:f.position.x,y:f.position.y}}),y=f.parentNode||f.parentId;y&&(u[y]=!0);const S=(m==null?void 0:m.type)&&(m==null?void 0:m.type)!==f.type;Object.defineProperty(p,$t,{enumerable:!1,value:{handleBounds:S||(b=m==null?void 0:m[$t])==null?void 0:b.handleBounds,z:h}}),s.set(f.id,p)}),po(s,r,u),s}function mo(t,e={}){var P,N,R;const{getNodes:r,width:i,height:s,minZoom:u,maxZoom:a,d3Zoom:f,d3Selection:h,fitViewOnInitDone:m,fitViewOnInit:p,nodeOrigin:y}=t(),S=e.initial&&!m&&p;if(f&&h&&(S||!e.initial)){const M=r().filter(I=>{var H;const E=e.includeHiddenNodes?I.width&&I.height:!I.hidden;return(H=e.nodes)!=null&&H.length?E&&e.nodes.some(U=>U.id===I.id):E}),A=M.every(I=>I.width&&I.height);if(M.length>0&&A){const I=en(M,y),{x:E,y:H,zoom:U}=nn(I,i,s,(P=e.minZoom)!=null?P:u,(N=e.maxZoom)!=null?N:a,(R=e.padding)!=null?R:.1),G=Tt.CR.translate(E,H).scale(U);return typeof e.duration=="number"&&e.duration>0?f.transform(d(h,e.duration),G):f.transform(h,G),!0}}return!1}function Zo(t,e){return t.forEach(r=>{const i=e.get(r.id);i&&e.set(i.id,qt(wt({},i),{[$t]:i[$t],selected:r.selected}))}),new Map(e)}function Lo(t,e){return e.map(r=>{const i=t.find(s=>s.id===r.id);return i&&(r.selected=i.selected),r})}function Tr({changedNodes:t,changedEdges:e,get:r,set:i}){const{nodeInternals:s,edges:u,onNodesChange:a,onEdgesChange:f,hasDefaultNodes:h,hasDefaultEdges:m}=r();t!=null&&t.length&&(h&&i({nodeInternals:Zo(t,s)}),a==null||a(t)),e!=null&&e.length&&(m&&i({edges:Lo(e,u)}),f==null||f(e))}const On=()=>{},Xo={zoomIn:On,zoomOut:On,zoomTo:On,getZoom:()=>1,setViewport:On,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:On,fitBounds:On,project:t=>t,screenToFlowPosition:t=>t,flowToScreenPosition:t=>t,viewportInitialized:!1},Vo=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Fo=()=>{const t=Lt(),{d3Zoom:e,d3Selection:r}=Zt(Vo,tt.X);return(0,l.useMemo)(()=>r&&e?{zoomIn:s=>e.scaleBy(d(r,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(d(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,u)=>e.scaleTo(d(r,u==null?void 0:u.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,u)=>{var p,y,S;const[a,f,h]=t.getState().transform,m=Tt.CR.translate((p=s.x)!=null?p:a,(y=s.y)!=null?y:f).scale((S=s.zoom)!=null?S:h);e.transform(d(r,u==null?void 0:u.duration),m)},getViewport:()=>{const[s,u,a]=t.getState().transform;return{x:s,y:u,zoom:a}},fitView:s=>mo(t.getState,s),setCenter:(s,u,a)=>{const{width:f,height:h,maxZoom:m}=t.getState(),p=typeof(a==null?void 0:a.zoom)!="undefined"?a.zoom:m,y=f/2-s*p,S=h/2-u*p,b=Tt.CR.translate(y,S).scale(p);e.transform(d(r,a==null?void 0:a.duration),b)},fitBounds:(s,u)=>{var P;const{width:a,height:f,minZoom:h,maxZoom:m}=t.getState(),{x:p,y,zoom:S}=nn(s,a,f,h,m,(P=u==null?void 0:u.padding)!=null?P:.1),b=Tt.CR.translate(p,y).scale(S);e.transform(d(r,u==null?void 0:u.duration),b)},project:s=>{const{transform:u,snapToGrid:a,snapGrid:f}=t.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),tn(s,u,a,f)},screenToFlowPosition:s=>{const{transform:u,snapToGrid:a,snapGrid:f,domNode:h}=t.getState();if(!h)return s;const{x:m,y:p}=h.getBoundingClientRect(),y={x:s.x-m,y:s.y-p};return tn(y,u,a,f)},flowToScreenPosition:s=>{const{transform:u,domNode:a}=t.getState();if(!a)return s;const{x:f,y:h}=a.getBoundingClientRect(),m=Ie(s,u);return{x:m.x+f,y:m.y+h}},viewportInitialized:!0}:Xo,[e,r])};function Qr(){const t=Fo(),e=Lt(),r=(0,l.useCallback)(()=>e.getState().getNodes().map(N=>wt({},N)),[]),i=(0,l.useCallback)(N=>e.getState().nodeInternals.get(N),[]),s=(0,l.useCallback)(()=>{const{edges:N=[]}=e.getState();return N.map(R=>wt({},R))},[]),u=(0,l.useCallback)(N=>{const{edges:R=[]}=e.getState();return R.find(M=>M.id===N)},[]),a=(0,l.useCallback)(N=>{const{getNodes:R,setNodes:M,hasDefaultNodes:A,onNodesChange:I}=e.getState(),E=R(),H=typeof N=="function"?N(E):N;if(A)M(H);else if(I){const U=H.length===0?E.map(G=>({type:"remove",id:G.id})):H.map(G=>({item:G,type:"reset"}));I(U)}},[]),f=(0,l.useCallback)(N=>{const{edges:R=[],setEdges:M,hasDefaultEdges:A,onEdgesChange:I}=e.getState(),E=typeof N=="function"?N(R):N;if(A)M(E);else if(I){const H=E.length===0?R.map(U=>({type:"remove",id:U.id})):E.map(U=>({item:U,type:"reset"}));I(H)}},[]),h=(0,l.useCallback)(N=>{const R=Array.isArray(N)?N:[N],{getNodes:M,setNodes:A,hasDefaultNodes:I,onNodesChange:E}=e.getState();if(I){const U=[...M(),...R];A(U)}else if(E){const H=R.map(U=>({item:U,type:"add"}));E(H)}},[]),m=(0,l.useCallback)(N=>{const R=Array.isArray(N)?N:[N],{edges:M=[],setEdges:A,hasDefaultEdges:I,onEdgesChange:E}=e.getState();if(I)A([...M,...R]);else if(E){const H=R.map(U=>({item:U,type:"add"}));E(H)}},[]),p=(0,l.useCallback)(()=>{const{getNodes:N,edges:R=[],transform:M}=e.getState(),[A,I,E]=M;return{nodes:N().map(H=>wt({},H)),edges:R.map(H=>wt({},H)),viewport:{x:A,y:I,zoom:E}}},[]),y=(0,l.useCallback)(({nodes:N,edges:R})=>{const{nodeInternals:M,getNodes:A,edges:I,hasDefaultNodes:E,hasDefaultEdges:H,onNodesDelete:U,onEdgesDelete:G,onNodesChange:Y,onEdgesChange:V}=e.getState(),et=(N||[]).map(q=>q.id),W=(R||[]).map(q=>q.id),nt=A().reduce((q,rt)=>{const vt=rt.parentNode||rt.parentId,mt=!et.includes(rt.id)&&vt&&q.find(ot=>ot.id===vt);return(typeof rt.deletable=="boolean"?rt.deletable:!0)&&(et.includes(rt.id)||mt)&&q.push(rt),q},[]),$=I.filter(q=>typeof q.deletable=="boolean"?q.deletable:!0),D=$.filter(q=>W.includes(q.id));if(nt||D){const q=ce(nt,$),rt=[...D,...q],vt=rt.reduce((mt,T)=>(mt.includes(T.id)||mt.push(T.id),mt),[]);if((H||E)&&(H&&e.setState({edges:I.filter(mt=>!vt.includes(mt.id))}),E&&(nt.forEach(mt=>{M.delete(mt.id)}),e.setState({nodeInternals:new Map(M)}))),vt.length>0&&(G==null||G(rt),V&&V(vt.map(mt=>({id:mt,type:"remove"})))),nt.length>0&&(U==null||U(nt),Y)){const mt=nt.map(T=>({id:T.id,type:"remove"}));Y(mt)}}},[]),S=(0,l.useCallback)(N=>{const R=Kn(N),M=R?null:e.getState().nodeInternals.get(N.id);return!R&&!M?[null,null,R]:[R?N:An(M),M,R]},[]),b=(0,l.useCallback)((N,R=!0,M)=>{const[A,I,E]=S(N);return A?(M||e.getState().getNodes()).filter(H=>{if(!E&&(H.id===I.id||!H.positionAbsolute))return!1;const U=An(H),G=Ue(U,A);return R&&G>0||G>=A.width*A.height}):[]},[]),P=(0,l.useCallback)((N,R,M=!0)=>{const[A]=S(N);if(!A)return!1;const I=Ue(A,R);return M&&I>0||I>=A.width*A.height},[]);return(0,l.useMemo)(()=>qt(wt({},t),{getNodes:r,getNode:i,getEdges:s,getEdge:u,setNodes:a,setEdges:f,addNodes:h,addEdges:m,toObject:p,deleteElements:y,getIntersectingNodes:b,isNodeIntersecting:P}),[t,r,i,s,u,a,f,h,m,p,y,b,P])}const or={actInsideInputWithModifier:!1};var Yo=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=Lt(),{deleteElements:i}=Qr(),s=rr(t,or),u=rr(e);(0,l.useEffect)(()=>{if(s){const{edges:a,getNodes:f}=r.getState(),h=f().filter(p=>p.selected),m=a.filter(p=>p.selected);i({nodes:h,edges:m}),r.setState({nodesSelectionActive:!1})}},[s]),(0,l.useEffect)(()=>{r.setState({multiSelectionActive:u})},[u])};function yo(t){const e=Lt();(0,l.useEffect)(()=>{let r;const i=()=>{var u,a;if(!t.current)return;const s=pn(t.current);(s.height===0||s.width===0)&&((a=(u=e.getState()).onError)==null||a.call(u,"004",ie.error004())),e.setState({width:s.width||500,height:s.height||500})};return i(),window.addEventListener("resize",i),t.current&&(r=new ResizeObserver(()=>i()),r.observe(t.current)),()=>{window.removeEventListener("resize",i),r&&t.current&&r.unobserve(t.current)}},[])}const qr={position:"absolute",width:"100%",height:"100%",top:0,left:0},Ko=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,kr=t=>({x:t.x,y:t.y,zoom:t.k}),Zn=(t,e)=>t.target.closest(`.${e}`),xo=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),wo=t=>{const e=t.ctrlKey&&Ge()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Wo=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Uo=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:i,zoomOnScroll:s=!0,zoomOnPinch:u=!0,panOnScroll:a=!1,panOnScrollSpeed:f=.5,panOnScrollMode:h=ke.Free,zoomOnDoubleClick:m=!0,elementsSelectable:p,panOnDrag:y=!0,defaultViewport:S,translateExtent:b,minZoom:P,maxZoom:N,zoomActivationKeyCode:R,preventScrolling:M=!0,children:A,noWheelClassName:I,noPanClassName:E})=>{const H=(0,l.useRef)(),U=Lt(),G=(0,l.useRef)(!1),Y=(0,l.useRef)(!1),V=(0,l.useRef)(null),et=(0,l.useRef)({x:0,y:0,zoom:0}),{d3Zoom:W,d3Selection:nt,d3ZoomHandler:$,userSelectionActive:D}=Zt(Wo,tt.X),q=rr(R),rt=(0,l.useRef)(0),vt=(0,l.useRef)(!1),mt=(0,l.useRef)();return yo(V),(0,l.useEffect)(()=>{if(V.current){const T=V.current.getBoundingClientRect(),ot=(0,Tt.sP)().scaleExtent([P,N]).translateExtent(b),Q=(0,st.Z)(V.current).call(ot),ct=Tt.CR.translate(S.x,S.y).scale(He(S.zoom,P,N)),Nt=[[0,0],[T.width,T.height]],It=ot.constrain()(ct,Nt,b);ot.transform(Q,It),ot.wheelDelta(wo),U.setState({d3Zoom:ot,d3Selection:Q,d3ZoomHandler:Q.on("wheel.zoom"),transform:[It.x,It.y,It.k],domNode:V.current.closest(".react-flow")})}},[]),(0,l.useEffect)(()=>{nt&&W&&(a&&!q&&!D?nt.on("wheel.zoom",T=>{if(Zn(T,I))return!1;T.preventDefault(),T.stopImmediatePropagation();const ot=nt.property("__zoom").k||1,Q=Ge();if(T.ctrlKey&&u&&Q){const fe=(0,at.Z)(T),oe=wo(T),de=ot*Math.pow(2,oe);W.scaleTo(nt,de,fe,T);return}const ct=T.deltaMode===1?20:1;let Nt=h===ke.Vertical?0:T.deltaX*ct,It=h===ke.Horizontal?0:T.deltaY*ct;!Q&&T.shiftKey&&h!==ke.Vertical&&(Nt=T.deltaY*ct,It=0),W.translateBy(nt,-(Nt/ot)*f,-(It/ot)*f,{internal:!0});const Ht=kr(nt.property("__zoom")),{onViewportChangeStart:Vt,onViewportChange:ee,onViewportChangeEnd:ne}=U.getState();clearTimeout(mt.current),vt.current||(vt.current=!0,e==null||e(T,Ht),Vt==null||Vt(Ht)),vt.current&&(t==null||t(T,Ht),ee==null||ee(Ht),mt.current=setTimeout(()=>{r==null||r(T,Ht),ne==null||ne(Ht),vt.current=!1},150))},{passive:!1}):typeof $!="undefined"&&nt.on("wheel.zoom",function(T,ot){if(!M||Zn(T,I))return null;T.preventDefault(),$.call(this,T,ot)},{passive:!1}))},[D,a,h,nt,W,$,q,u,M,I,e,t,r]),(0,l.useEffect)(()=>{W&&W.on("start",T=>{var ct,Nt;if(!T.sourceEvent||T.sourceEvent.internal)return null;rt.current=(ct=T.sourceEvent)==null?void 0:ct.button;const{onViewportChangeStart:ot}=U.getState(),Q=kr(T.transform);G.current=!0,et.current=Q,((Nt=T.sourceEvent)==null?void 0:Nt.type)==="mousedown"&&U.setState({paneDragging:!0}),ot==null||ot(Q),e==null||e(T.sourceEvent,Q)})},[W,e]),(0,l.useEffect)(()=>{W&&(D&&!G.current?W.on("zoom",null):D||W.on("zoom",T=>{var Q,ct;const{onViewportChange:ot}=U.getState();if(U.setState({transform:[T.transform.x,T.transform.y,T.transform.k]}),Y.current=!!(i&&xo(y,(Q=rt.current)!=null?Q:0)),(t||ot)&&!((ct=T.sourceEvent)!=null&&ct.internal)){const Nt=kr(T.transform);ot==null||ot(Nt),t==null||t(T.sourceEvent,Nt)}}))},[D,W,t,y,i]),(0,l.useEffect)(()=>{W&&W.on("end",T=>{var Q;if(!T.sourceEvent||T.sourceEvent.internal)return null;const{onViewportChangeEnd:ot}=U.getState();if(G.current=!1,U.setState({paneDragging:!1}),i&&xo(y,(Q=rt.current)!=null?Q:0)&&!Y.current&&i(T.sourceEvent),Y.current=!1,(r||ot)&&Ko(et.current,T.transform)){const ct=kr(T.transform);et.current=ct,clearTimeout(H.current),H.current=setTimeout(()=>{ot==null||ot(ct),r==null||r(T.sourceEvent,ct)},a?150:0)}})},[W,a,y,r,i]),(0,l.useEffect)(()=>{W&&W.filter(T=>{const ot=q||s,Q=u&&T.ctrlKey;if((y===!0||Array.isArray(y)&&y.includes(1))&&T.button===1&&T.type==="mousedown"&&(Zn(T,"react-flow__node")||Zn(T,"react-flow__edge")))return!0;if(!y&&!ot&&!a&&!m&&!u||D||!m&&T.type==="dblclick"||Zn(T,I)&&T.type==="wheel"||Zn(T,E)&&(T.type!=="wheel"||a&&T.type==="wheel"&&!q)||!u&&T.ctrlKey&&T.type==="wheel"||!ot&&!a&&!Q&&T.type==="wheel"||!y&&(T.type==="mousedown"||T.type==="touchstart")||Array.isArray(y)&&!y.includes(T.button)&&(T.type==="mousedown"||T.type==="touchstart"))return!1;const ct=Array.isArray(y)&&y.includes(T.button)||!T.button||T.button<=1;return(!T.ctrlKey||T.type==="wheel")&&ct})},[D,W,s,u,a,m,y,p,q]),l.createElement("div",{className:"react-flow__renderer",ref:V,style:qr},A)},Go=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Qo(){const{userSelectionActive:t,userSelectionRect:e}=Zt(Go,tt.X);return t&&e?l.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function _o(t,e){var s,u;const r=e.parentNode||e.parentId,i=t.find(a=>a.id===r);if(i){const a=e.position.x+e.width-i.width,f=e.position.y+e.height-i.height;if(a>0||f>0||e.position.x<0||e.position.y<0){if(i.style=wt({},i.style)||{},i.style.width=(s=i.style.width)!=null?s:i.width,i.style.height=(u=i.style.height)!=null?u:i.height,a>0&&(i.style.width+=a),f>0&&(i.style.height+=f),e.position.x<0){const h=Math.abs(e.position.x);i.position.x=i.position.x-h,i.style.width+=h,e.position.x=0}if(e.position.y<0){const h=Math.abs(e.position.y);i.position.y=i.position.y-h,i.style.height+=h,e.position.y=0}i.width=i.style.width,i.height=i.style.height}}}function bo(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const r=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,s)=>{const u=t.filter(f=>f.id===s.id);if(u.length===0)return i.push(s),i;const a=wt({},s);for(const f of u)if(f)switch(f.type){case"select":{a.selected=f.selected;break}case"position":{typeof f.position!="undefined"&&(a.position=f.position),typeof f.positionAbsolute!="undefined"&&(a.positionAbsolute=f.positionAbsolute),typeof f.dragging!="undefined"&&(a.dragging=f.dragging),a.expandParent&&_o(i,a);break}case"dimensions":{typeof f.dimensions!="undefined"&&(a.width=f.dimensions.width,a.height=f.dimensions.height),typeof f.updateStyle!="undefined"&&(a.style=wt(wt({},a.style||{}),f.dimensions)),typeof f.resizing=="boolean"&&(a.resizing=f.resizing),a.expandParent&&_o(i,a);break}case"remove":return i}return i.push(a),i},r)}function Jr(t,e){return bo(t,e)}function vo(t,e){return bo(t,e)}const sn=(t,e)=>({id:t,type:"select",selected:e});function Ln(t,e){return t.reduce((r,i)=>{const s=e.includes(i.id);return!i.selected&&s?(i.selected=!0,r.push(sn(i.id,!0))):i.selected&&!s&&(i.selected=!1,r.push(sn(i.id,!1))),r},[])}const ve=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},qo=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),jr=(0,l.memo)(({isSelecting:t,selectionMode:e=qe.Full,panOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:u,onPaneContextMenu:a,onPaneScroll:f,onPaneMouseEnter:h,onPaneMouseMove:m,onPaneMouseLeave:p,children:y})=>{const S=(0,l.useRef)(null),b=Lt(),P=(0,l.useRef)(0),N=(0,l.useRef)(0),R=(0,l.useRef)(),{userSelectionActive:M,elementsSelectable:A,dragging:I}=Zt(qo,tt.X),E=()=>{b.setState({userSelectionActive:!1,userSelectionRect:null}),P.current=0,N.current=0},H=$=>{u==null||u($),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},U=$=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){$.preventDefault();return}a==null||a($)},G=f?$=>f($):void 0,Y=$=>{const{resetSelectedElements:D,domNode:q}=b.getState();if(R.current=q==null?void 0:q.getBoundingClientRect(),!A||!t||$.button!==0||$.target!==S.current||!R.current)return;const{x:rt,y:vt}=we($,R.current);D(),b.setState({userSelectionRect:{width:0,height:0,startX:rt,startY:vt,x:rt,y:vt}}),i==null||i($)},V=$=>{var oe,de;const{userSelectionRect:D,nodeInternals:q,edges:rt,transform:vt,onNodesChange:mt,onEdgesChange:T,nodeOrigin:ot,getNodes:Q}=b.getState();if(!t||!R.current||!D)return;b.setState({userSelectionActive:!0,nodesSelectionActive:!1});const ct=we($,R.current),Nt=(oe=D.startX)!=null?oe:0,It=(de=D.startY)!=null?de:0,Ht=qt(wt({},D),{x:ct.x<Nt?ct.x:Nt,y:ct.y<It?ct.y:It,width:Math.abs(ct.x-Nt),height:Math.abs(ct.y-It)}),Vt=Q(),ee=ae(q,Ht,vt,e===qe.Partial,!0,ot),ne=ce(ee,rt).map(Gt=>Gt.id),fe=ee.map(Gt=>Gt.id);if(P.current!==fe.length){P.current=fe.length;const Gt=Ln(Vt,fe);Gt.length&&(mt==null||mt(Gt))}if(N.current!==ne.length){N.current=ne.length;const Gt=Ln(rt,ne);Gt.length&&(T==null||T(Gt))}b.setState({userSelectionRect:Ht})},et=$=>{if($.button!==0)return;const{userSelectionRect:D}=b.getState();!M&&D&&$.target===S.current&&(H==null||H($)),b.setState({nodesSelectionActive:P.current>0}),E(),s==null||s($)},W=$=>{M&&(b.setState({nodesSelectionActive:P.current>0}),s==null||s($)),E()},nt=A&&(t||M);return l.createElement("div",{className:(0,it.Z)(["react-flow__pane",{dragging:I,selection:t}]),onClick:nt?void 0:ve(H,S),onContextMenu:ve(U,S),onWheel:ve(G,S),onMouseEnter:nt?void 0:h,onMouseDown:nt?Y:void 0,onMouseMove:nt?V:m,onMouseUp:nt?et:void 0,onMouseLeave:nt?W:p,ref:S,style:qr},y,l.createElement(Qo,null))});jr.displayName="Pane";function ze(t,e){const r=t.parentNode||t.parentId;if(!r)return!1;const i=e.get(r);return i?i.selected?!0:ze(i,e):!1}function Jo(t,e,r){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===r.current)return!1;i=i.parentElement}while(i);return!1}function li(t,e,r,i){return Array.from(t.values()).filter(s=>(s.selected||s.id===i)&&(!s.parentNode||s.parentId||!ze(s,t))&&(s.draggable||e&&typeof s.draggable=="undefined")).map(s=>{var u,a,f,h;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-((a=(u=s.positionAbsolute)==null?void 0:u.x)!=null?a:0),y:r.y-((h=(f=s.positionAbsolute)==null?void 0:f.y)!=null?h:0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode||s.parentId,parentId:s.parentNode||s.parentId,width:s.width,height:s.height,expandParent:s.expandParent}})}function jo(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function So(t,e,r,i,s=[0,0],u){const a=jo(t,t.extent||i);let f=a;const h=t.parentNode||t.parentId;if(t.extent==="parent"&&!t.expandParent)if(h&&t.width&&t.height){const y=r.get(h),{x:S,y:b}=se(y,s).positionAbsolute;f=y&&Ft(S)&&Ft(b)&&Ft(y.width)&&Ft(y.height)?[[S+t.width*s[0],b+t.height*s[1]],[S+y.width-t.width+t.width*s[0],b+y.height-t.height+t.height*s[1]]]:f}else u==null||u("005",ie.error005()),f=a;else if(t.extent&&h&&t.extent!=="parent"){const y=r.get(h),{x:S,y:b}=se(y,s).positionAbsolute;f=[[t.extent[0][0]+S,t.extent[0][1]+b],[t.extent[1][0]+S,t.extent[1][1]+b]]}let m={x:0,y:0};if(h){const y=r.get(h);m=se(y,s).positionAbsolute}const p=f&&f!=="parent"?Vn(e,f):e;return{position:{x:p.x-m.x,y:p.y-m.y},positionAbsolute:p}}function to({nodeId:t,dragItems:e,nodeInternals:r}){const i=e.map(s=>{const u=r.get(s.id);return qt(wt({},u),{position:s.position,positionAbsolute:s.positionAbsolute})});return[t?i.find(s=>s.id===t):i[0],i]}const Eo=(t,e,r,i)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const u=Array.from(s),a=e.getBoundingClientRect(),f={x:a.width*i[0],y:a.height*i[1]};return u.map(h=>{const m=h.getBoundingClientRect();return wt({id:h.getAttribute("data-handleid"),position:h.getAttribute("data-handlepos"),x:(m.left-a.left-f.x)/r,y:(m.top-a.top-f.y)/r},pn(h))})};function an(t,e,r){return r===void 0?r:i=>{const s=e().nodeInternals.get(t);s&&r(i,wt({},s))}}function eo({id:t,store:e,unselect:r=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:u,multiSelectionActive:a,nodeInternals:f,onError:h}=e.getState(),m=f.get(t);if(!m){h==null||h("012",ie.error012(t));return}e.setState({nodesSelectionActive:!1}),m.selected?(r||m.selected&&a)&&(u({nodes:[m],edges:[]}),requestAnimationFrame(()=>{var p;return(p=i==null?void 0:i.current)==null?void 0:p.blur()})):s([t])}function Ve(){const t=Lt();return(0,l.useCallback)(({sourceEvent:r})=>{const{transform:i,snapGrid:s,snapToGrid:u}=t.getState(),a=r.touches?r.touches[0].clientX:r.clientX,f=r.touches?r.touches[0].clientY:r.clientY,h={x:(a-i[0])/i[2],y:(f-i[1])/i[2]};return wt({xSnapped:u?s[0]*Math.round(h.x/s[0]):h.x,ySnapped:u?s[1]*Math.round(h.y/s[1]):h.y},h)},[])}function Xn(t){return(e,r,i)=>t==null?void 0:t(e,i)}function No({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:i,nodeId:s,isSelectable:u,selectNodesOnDrag:a}){const f=Lt(),[h,m]=(0,l.useState)(!1),p=(0,l.useRef)([]),y=(0,l.useRef)({x:null,y:null}),S=(0,l.useRef)(0),b=(0,l.useRef)(null),P=(0,l.useRef)({x:0,y:0}),N=(0,l.useRef)(null),R=(0,l.useRef)(!1),M=(0,l.useRef)(!1),A=Ve();return(0,l.useEffect)(()=>{if(t!=null&&t.current){const I=(0,st.Z)(t.current),E=({x:G,y:Y})=>{const{nodeInternals:V,onNodeDrag:et,onSelectionDrag:W,updateNodePositions:nt,nodeExtent:$,snapGrid:D,snapToGrid:q,nodeOrigin:rt,onError:vt}=f.getState();y.current={x:G,y:Y};let mt=!1,T={x:0,y:0,x2:0,y2:0};if(p.current.length>1&&$){const Q=en(p.current,rt);T=Te(Q)}if(p.current=p.current.map(Q=>{var Ht,Vt;const ct={x:G-Q.distance.x,y:Y-Q.distance.y};q&&(ct.x=D[0]*Math.round(ct.x/D[0]),ct.y=D[1]*Math.round(ct.y/D[1]));const Nt=[[$[0][0],$[0][1]],[$[1][0],$[1][1]]];p.current.length>1&&$&&!Q.extent&&(Nt[0][0]=Q.positionAbsolute.x-T.x+$[0][0],Nt[1][0]=Q.positionAbsolute.x+((Ht=Q.width)!=null?Ht:0)-T.x2+$[1][0],Nt[0][1]=Q.positionAbsolute.y-T.y+$[0][1],Nt[1][1]=Q.positionAbsolute.y+((Vt=Q.height)!=null?Vt:0)-T.y2+$[1][1]);const It=So(Q,ct,V,Nt,rt,vt);return mt=mt||Q.position.x!==It.position.x||Q.position.y!==It.position.y,Q.position=It.position,Q.positionAbsolute=It.positionAbsolute,Q}),!mt)return;nt(p.current,!0,!0),m(!0);const ot=s?et:Xn(W);if(ot&&N.current){const[Q,ct]=to({nodeId:s,dragItems:p.current,nodeInternals:V});ot(N.current,Q,ct)}},H=()=>{var V,et;if(!b.current)return;const[G,Y]=Fn(P.current,b.current);if(G!==0||Y!==0){const{transform:W,panBy:nt}=f.getState();y.current.x=((V=y.current.x)!=null?V:0)-G/W[2],y.current.y=((et=y.current.y)!=null?et:0)-Y/W[2],nt({x:G,y:Y})&&E(y.current)}S.current=requestAnimationFrame(H)},U=G=>{var rt;const{nodeInternals:Y,multiSelectionActive:V,nodesDraggable:et,unselectNodesAndEdges:W,onNodeDragStart:nt,onSelectionDragStart:$}=f.getState();M.current=!0;const D=s?nt:Xn($);(!a||!u)&&!V&&s&&((rt=Y.get(s))!=null&&rt.selected||W()),s&&u&&a&&eo({id:s,store:f,nodeRef:t});const q=A(G);if(y.current=q,p.current=li(Y,et,q,s),D&&p.current){const[vt,mt]=to({nodeId:s,dragItems:p.current,nodeInternals:Y});D(G.sourceEvent,vt,mt)}};if(e)I.on(".drag",null);else{const G=hn().on("start",Y=>{const{domNode:V,nodeDragThreshold:et}=f.getState();et===0&&U(Y);const W=A(Y);y.current=W,b.current=(V==null?void 0:V.getBoundingClientRect())||null,P.current=we(Y.sourceEvent,b.current)}).on("drag",Y=>{var nt,$,D,q;const V=A(Y),{autoPanOnNodeDrag:et,nodeDragThreshold:W}=f.getState();if(!R.current&&M.current&&et&&(R.current=!0,H()),!M.current){const rt=V.xSnapped-(($=(nt=y==null?void 0:y.current)==null?void 0:nt.x)!=null?$:0),vt=V.ySnapped-((q=(D=y==null?void 0:y.current)==null?void 0:D.y)!=null?q:0);Math.sqrt(rt*rt+vt*vt)>W&&U(Y)}(y.current.x!==V.xSnapped||y.current.y!==V.ySnapped)&&p.current&&M.current&&(N.current=Y.sourceEvent,P.current=we(Y.sourceEvent,b.current),E(V))}).on("end",Y=>{if(M.current&&(m(!1),R.current=!1,M.current=!1,cancelAnimationFrame(S.current),p.current)){const{updateNodePositions:V,nodeInternals:et,onNodeDragStop:W,onSelectionDragStop:nt}=f.getState(),$=s?W:Xn(nt);if(V(p.current,!1,!1),$){const[D,q]=to({nodeId:s,dragItems:p.current,nodeInternals:et});$(Y.sourceEvent,D,q)}}}).filter(Y=>{const V=Y.target;return!Y.button&&(!r||!Jo(V,`.${r}`,t))&&(!i||Jo(V,i,t))});return I.call(G),()=>{I.on(".drag",null)}}}},[t,e,r,i,u,f,s,a,A]),h}function Rr(){const t=Lt();return(0,l.useCallback)(r=>{const{nodeInternals:i,nodeExtent:s,updateNodePositions:u,getNodes:a,snapToGrid:f,snapGrid:h,onError:m,nodesDraggable:p}=t.getState(),y=a().filter(A=>A.selected&&(A.draggable||p&&typeof A.draggable=="undefined")),S=f?h[0]:5,b=f?h[1]:5,P=r.isShiftPressed?4:1,N=r.x*S*P,R=r.y*b*P,M=y.map(A=>{if(A.positionAbsolute){const I={x:A.positionAbsolute.x+N,y:A.positionAbsolute.y+R};f&&(I.x=h[0]*Math.round(I.x/h[0]),I.y=h[1]*Math.round(I.y/h[1]));const{positionAbsolute:E,position:H}=So(A,I,i,s,void 0,m);A.position=H,A.positionAbsolute=E}return A});u(M,!0,!1)},[])}const $e={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var ir=t=>{const e=({id:r,type:i,data:s,xPos:u,yPos:a,xPosOrigin:f,yPosOrigin:h,selected:m,onClick:p,onMouseEnter:y,onMouseMove:S,onMouseLeave:b,onContextMenu:P,onDoubleClick:N,style:R,className:M,isDraggable:A,isSelectable:I,isConnectable:E,isFocusable:H,selectNodesOnDrag:U,sourcePosition:G,targetPosition:Y,hidden:V,resizeObserver:et,dragHandle:W,zIndex:nt,isParent:$,noDragClassName:D,noPanClassName:q,initialized:rt,disableKeyboardA11y:vt,ariaLabel:mt,rfId:T,hasHandleBounds:ot})=>{const Q=Lt(),ct=(0,l.useRef)(null),Nt=(0,l.useRef)(null),It=(0,l.useRef)(G),Ht=(0,l.useRef)(Y),Vt=(0,l.useRef)(i),ee=I||A||p||y||S||b,ne=Rr(),fe=an(r,Q.getState,y),oe=an(r,Q.getState,S),de=an(r,Q.getState,b),Gt=an(r,Q.getState,P),Ke=an(r,Q.getState,N),Me=Yt=>{const{nodeDragThreshold:Et}=Q.getState();if(I&&(!U||!A||Et>0)&&eo({id:r,store:Q,nodeRef:ct}),p){const Ae=Q.getState().nodeInternals.get(r);Ae&&p(Yt,wt({},Ae))}},Qt=Yt=>{if(!xe(Yt)&&!vt)if(br.includes(Yt.key)&&I){const Et=Yt.key==="Escape";eo({id:r,store:Q,unselect:Et,nodeRef:ct})}else A&&m&&Object.prototype.hasOwnProperty.call($e,Yt.key)&&(Q.setState({ariaLiveMessage:`Moved selected node ${Yt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~a}`}),ne({x:$e[Yt.key].x,y:$e[Yt.key].y,isShiftPressed:Yt.shiftKey}))};(0,l.useEffect)(()=>()=>{Nt.current&&(et==null||et.unobserve(Nt.current))},[]),(0,l.useEffect)(()=>{if(ct.current&&!V){const Yt=ct.current;(!rt||!ot)&&(Nt.current&&(et==null||et.unobserve(Nt.current)),et==null||et.observe(Yt),Nt.current=Yt)}},[V,rt,ot]),(0,l.useEffect)(()=>{const Yt=Vt.current!==i,Et=It.current!==G,Ae=Ht.current!==Y;ct.current&&(Yt||Et||Ae)&&(Yt&&(Vt.current=i),Et&&(It.current=G),Ae&&(Ht.current=Y),Q.getState().updateNodeDimensions([{id:r,nodeElement:ct.current,forceUpdate:!0}]))},[r,i,G,Y]);const ln=No({nodeRef:ct,disabled:V||!A,noDragClassName:D,handleSelector:W,nodeId:r,isSelectable:I,selectNodesOnDrag:U});return V?null:l.createElement("div",{className:(0,it.Z)(["react-flow__node",`react-flow__node-${i}`,{[q]:A},M,{selected:m,selectable:I,parent:$,dragging:ln}]),ref:ct,style:wt({zIndex:nt,transform:`translate(${f}px,${h}px)`,pointerEvents:ee?"all":"none",visibility:rt?"visible":"hidden"},R),"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:fe,onMouseMove:oe,onMouseLeave:de,onContextMenu:Gt,onClick:Me,onDoubleClick:Ke,onKeyDown:H?Qt:void 0,tabIndex:H?0:void 0,role:H?"button":void 0,"aria-describedby":vt?void 0:`${uo}-${T}`,"aria-label":mt},l.createElement(Yr,{value:r},l.createElement(t,{id:r,data:s,type:i,xPos:u,yPos:a,selected:m,isConnectable:E,sourcePosition:G,targetPosition:Y,dragging:ln,dragHandle:W,zIndex:nt})))};return e.displayName="NodeWrapper",(0,l.memo)(e)};const ti=t=>{const e=t.getNodes().filter(r=>r.selected);return qt(wt({},en(e,t.nodeOrigin)),{transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive})};function Co({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const i=Lt(),{width:s,height:u,x:a,y:f,transformString:h,userSelectionActive:m}=Zt(ti,tt.X),p=Rr(),y=(0,l.useRef)(null);if((0,l.useEffect)(()=>{var P;r||(P=y.current)==null||P.focus({preventScroll:!0})},[r]),No({nodeRef:y}),m||!s||!u)return null;const S=t?P=>{const N=i.getState().getNodes().filter(R=>R.selected);t(P,N)}:void 0,b=P=>{Object.prototype.hasOwnProperty.call($e,P.key)&&p({x:$e[P.key].x,y:$e[P.key].y,isShiftPressed:P.shiftKey})};return l.createElement("div",{className:(0,it.Z)(["react-flow__nodesselection","react-flow__container",e]),style:{transform:h}},l.createElement("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:S,tabIndex:r?void 0:-1,onKeyDown:r?void 0:b,style:{width:s,height:u,top:f,left:a}}))}var ei=(0,l.memo)(Co);const ni=t=>t.nodesSelectionActive,Mo=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:a,deleteKeyCode:f,onMove:h,onMoveStart:m,onMoveEnd:p,selectionKeyCode:y,selectionOnDrag:S,selectionMode:b,onSelectionStart:P,onSelectionEnd:N,multiSelectionKeyCode:R,panActivationKeyCode:M,zoomActivationKeyCode:A,elementsSelectable:I,zoomOnScroll:E,zoomOnPinch:H,panOnScroll:U,panOnScrollSpeed:G,panOnScrollMode:Y,zoomOnDoubleClick:V,panOnDrag:et,defaultViewport:W,translateExtent:nt,minZoom:$,maxZoom:D,preventScrolling:q,onSelectionContextMenu:rt,noWheelClassName:vt,noPanClassName:mt,disableKeyboardA11y:T})=>{const ot=Zt(ni),Q=rr(y),ct=rr(M),Nt=ct||et,It=ct||U,Ht=Q||S&&Nt!==!0;return Yo({deleteKeyCode:f,multiSelectionKeyCode:R}),l.createElement(Uo,{onMove:h,onMoveStart:m,onMoveEnd:p,onPaneContextMenu:u,elementsSelectable:I,zoomOnScroll:E,zoomOnPinch:H,panOnScroll:It,panOnScrollSpeed:G,panOnScrollMode:Y,zoomOnDoubleClick:V,panOnDrag:!Q&&Nt,defaultViewport:W,translateExtent:nt,minZoom:$,maxZoom:D,zoomActivationKeyCode:A,preventScrolling:q,noWheelClassName:vt,noPanClassName:mt},l.createElement(jr,{onSelectionStart:P,onSelectionEnd:N,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:a,panOnDrag:Nt,isSelecting:!!Ht,selectionMode:b},t,ot&&l.createElement(ei,{onSelectionContextMenu:rt,noPanClassName:mt,disableKeyboardA11y:T})))};Mo.displayName="FlowRenderer";var ri=(0,l.memo)(Mo);function n(t){return Zt((0,l.useCallback)(r=>t?ae(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function o(t){const e={input:ir(t.input||on),default:ir(t.default||tr),output:ir(t.output||nr),group:ir(t.group||Ur)},r={},i=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,u)=>(s[u]=ir(t[u]||tr),s),r);return wt(wt({},e),i)}const c=({x:t,y:e,width:r,height:i,origin:s})=>!r||!i?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-r*s[0],y:e-i*s[1]},g=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),w=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:i,elementsSelectable:s,updateNodeDimensions:u,onError:a}=Zt(g,tt.X),f=n(t.onlyRenderVisibleElements),h=(0,l.useRef)(),m=(0,l.useMemo)(()=>{if(typeof ResizeObserver=="undefined")return null;const p=new ResizeObserver(y=>{const S=y.map(b=>({id:b.target.getAttribute("data-id"),nodeElement:b.target,forceUpdate:!0}));u(S)});return h.current=p,p},[]);return(0,l.useEffect)(()=>()=>{var p;(p=h==null?void 0:h.current)==null||p.disconnect()},[]),l.createElement("div",{className:"react-flow__nodes",style:qr},f.map(p=>{var H,U,G,Y,V,et,W,nt;let y=p.type||"default";t.nodeTypes[y]||(a==null||a("003",ie.error003(y)),y="default");const S=t.nodeTypes[y]||t.nodeTypes.default,b=!!(p.draggable||e&&typeof p.draggable=="undefined"),P=!!(p.selectable||s&&typeof p.selectable=="undefined"),N=!!(p.connectable||r&&typeof p.connectable=="undefined"),R=!!(p.focusable||i&&typeof p.focusable=="undefined"),M=t.nodeExtent?Vn(p.positionAbsolute,t.nodeExtent):p.positionAbsolute,A=(H=M==null?void 0:M.x)!=null?H:0,I=(U=M==null?void 0:M.y)!=null?U:0,E=c({x:A,y:I,width:(G=p.width)!=null?G:0,height:(Y=p.height)!=null?Y:0,origin:t.nodeOrigin});return l.createElement(S,{key:p.id,id:p.id,className:p.className,style:p.style,type:y,data:p.data,sourcePosition:p.sourcePosition||ut.Bottom,targetPosition:p.targetPosition||ut.Top,hidden:p.hidden,xPos:A,yPos:I,xPosOrigin:E.x,yPosOrigin:E.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!p.selected,isDraggable:b,isSelectable:P,isConnectable:N,isFocusable:R,resizeObserver:m,dragHandle:p.dragHandle,zIndex:(et=(V=p[$t])==null?void 0:V.z)!=null?et:0,isParent:!!((W=p[$t])!=null&&W.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!p.width&&!!p.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:p.ariaLabel,hasHandleBounds:!!((nt=p[$t])!=null&&nt.handleBounds)})}))};w.displayName="NodeRenderer";var v=(0,l.memo)(w);const x=(t,e,r)=>r===ut.Left?t-e:r===ut.Right?t+e:t,k=(t,e,r)=>r===ut.Top?t-e:r===ut.Bottom?t+e:t,O="react-flow__edgeupdater",Z=({position:t,centerX:e,centerY:r,radius:i=10,onMouseDown:s,onMouseEnter:u,onMouseOut:a,type:f})=>l.createElement("circle",{onMouseDown:s,onMouseEnter:u,onMouseOut:a,className:(0,it.Z)([O,`${O}-${f}`]),cx:x(e,i,t),cy:k(r,i,t),r:i,stroke:"transparent",fill:"transparent"}),X=()=>!0;var ft=t=>{const e=({id:r,className:i,type:s,data:u,onClick:a,onEdgeDoubleClick:f,selected:h,animated:m,label:p,labelStyle:y,labelShowBg:S,labelBgStyle:b,labelBgPadding:P,labelBgBorderRadius:N,style:R,source:M,target:A,sourceX:I,sourceY:E,targetX:H,targetY:U,sourcePosition:G,targetPosition:Y,elementsSelectable:V,hidden:et,sourceHandleId:W,targetHandleId:nt,onContextMenu:$,onMouseEnter:D,onMouseMove:q,onMouseLeave:rt,edgeUpdaterRadius:vt,onEdgeUpdate:mt,onEdgeUpdateStart:T,onEdgeUpdateEnd:ot,markerEnd:Q,markerStart:ct,rfId:Nt,ariaLabel:It,isFocusable:Ht,isUpdatable:Vt,pathOptions:ee,interactionWidth:ne,disableKeyboardA11y:fe})=>{const oe=(0,l.useRef)(null),[de,Gt]=(0,l.useState)(!1),[Ke,Me]=(0,l.useState)(!1),Qt=Lt(),ln=(0,l.useMemo)(()=>`url('#${Jt(ct,Nt)}')`,[ct,Nt]),Yt=(0,l.useMemo)(()=>`url('#${Jt(Q,Nt)}')`,[Q,Nt]);if(et)return null;const Et=he=>{var fn;const{edges:We,addSelectedEdges:dr,unselectNodesAndEdges:hr,multiSelectionActive:gr}=Qt.getState(),Sn=We.find(oo=>oo.id===r);Sn&&(V&&(Qt.setState({nodesSelectionActive:!1}),Sn.selected&&gr?(hr({nodes:[],edges:[Sn]}),(fn=oe.current)==null||fn.blur()):dr([r])),a&&a(he,Sn))},Ae=Qe(r,Qt.getState,f),ur=Qe(r,Qt.getState,$),no=Qe(r,Qt.getState,D),zr=Qe(r,Qt.getState,q),$r=Qe(r,Qt.getState,rt),vn=(he,We)=>{if(he.button!==0)return;const{edges:dr,isValidConnection:hr}=Qt.getState(),gr=We?A:M,Sn=(We?nt:W)||null,fn=We?"target":"source",oo=hr||X,si=We,io=dr.find(pr=>pr.id===r);Me(!0),T==null||T(he,io,fn);const ai=pr=>{Me(!1),ot==null||ot(pr,io,fn)};Ot({event:he,handleId:Sn,nodeId:gr,onConnect:pr=>mt==null?void 0:mt(io,pr),isTarget:si,getState:Qt.getState,setState:Qt.setState,isValidConnection:oo,edgeUpdaterType:fn,onEdgeUpdateEnd:ai})},Br=he=>vn(he,!0),lr=he=>vn(he,!1),fr=()=>Gt(!0),Hr=()=>Gt(!1),Or=!V&&!a,ro=he=>{var We;if(!fe&&br.includes(he.key)&&V){const{unselectNodesAndEdges:dr,addSelectedEdges:hr,edges:gr}=Qt.getState();he.key==="Escape"?((We=oe.current)==null||We.blur(),dr({edges:[gr.find(fn=>fn.id===r)]})):hr([r])}};return l.createElement("g",{className:(0,it.Z)(["react-flow__edge",`react-flow__edge-${s}`,i,{selected:h,animated:m,inactive:Or,updating:de}]),onClick:Et,onDoubleClick:Ae,onContextMenu:ur,onMouseEnter:no,onMouseMove:zr,onMouseLeave:$r,onKeyDown:Ht?ro:void 0,tabIndex:Ht?0:void 0,role:Ht?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":It===null?void 0:It||`Edge from ${M} to ${A}`,"aria-describedby":Ht?`${lo}-${Nt}`:void 0,ref:oe},!Ke&&l.createElement(t,{id:r,source:M,target:A,selected:h,animated:m,label:p,labelStyle:y,labelShowBg:S,labelBgStyle:b,labelBgPadding:P,labelBgBorderRadius:N,data:u,style:R,sourceX:I,sourceY:E,targetX:H,targetY:U,sourcePosition:G,targetPosition:Y,sourceHandleId:W,targetHandleId:nt,markerStart:ln,markerEnd:Yt,pathOptions:ee,interactionWidth:ne}),Vt&&l.createElement(l.Fragment,null,(Vt==="source"||Vt===!0)&&l.createElement(Z,{position:G,centerX:I,centerY:E,radius:vt,onMouseDown:Br,onMouseEnter:fr,onMouseOut:Hr,type:"source"}),(Vt==="target"||Vt===!0)&&l.createElement(Z,{position:Y,centerX:H,centerY:U,radius:vt,onMouseDown:lr,onMouseEnter:fr,onMouseOut:Hr,type:"target"})))};return e.displayName="EdgeWrapper",(0,l.memo)(e)};function xt(t){const e={default:ft(t.default||yn),straight:ft(t.bezier||zn),step:ft(t.step||Gn),smoothstep:ft(t.step||je),simplebezier:ft(t.simplebezier||Le)},r={},i=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,u)=>(s[u]=ft(t[u]||yn),s),r);return wt(wt({},e),i)}function Ct(t,e,r=null){const i=((r==null?void 0:r.x)||0)+e.x,s=((r==null?void 0:r.y)||0)+e.y,u=(r==null?void 0:r.width)||e.width,a=(r==null?void 0:r.height)||e.height;switch(t){case ut.Top:return{x:i+u/2,y:s};case ut.Right:return{x:i+u,y:s+a/2};case ut.Bottom:return{x:i+u/2,y:s+a};case ut.Left:return{x:i,y:s+a/2}}}function re(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const Kt=(t,e,r,i,s,u)=>{const a=Ct(r,t,e),f=Ct(u,i,s);return{sourceX:a.x,sourceY:a.y,targetX:f.x,targetY:f.y}};function me({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:i,targetWidth:s,targetHeight:u,width:a,height:f,transform:h}){const m={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+s),y2:Math.max(t.y+i,e.y+u)};m.x===m.x2&&(m.x2+=1),m.y===m.y2&&(m.y2+=1);const p=Te({x:(0-h[0])/h[2],y:(0-h[1])/h[2],width:a/h[2],height:f/h[2]}),y=Math.max(0,Math.min(p.x2,m.x2)-Math.max(p.x,m.x)),S=Math.max(0,Math.min(p.y2,m.y2)-Math.max(p.y,m.y));return Math.ceil(y*S)>0}function At(t){var i,s,u,a,f;const e=((i=t==null?void 0:t[$t])==null?void 0:i.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)!="undefined"&&typeof((u=t==null?void 0:t.positionAbsolute)==null?void 0:u.y)!="undefined";return[{x:((a=t==null?void 0:t.positionAbsolute)==null?void 0:a.x)||0,y:((f=t==null?void 0:t.positionAbsolute)==null?void 0:f.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const cn=[{level:0,isMaxLevel:!0,edges:[]}];function Fe(t,e,r=!1){let i=-1;const s=t.reduce((a,f)=>{var p,y;const h=Ft(f.zIndex);let m=h?f.zIndex:0;if(r){const S=e.get(f.target),b=e.get(f.source),P=f.selected||(S==null?void 0:S.selected)||(b==null?void 0:b.selected),N=Math.max(((p=b==null?void 0:b[$t])==null?void 0:p.z)||0,((y=S==null?void 0:S[$t])==null?void 0:y.z)||0,1e3);m=(h?f.zIndex:0)+(P?N:0)}return a[m]?a[m].push(f):a[m]=[f],i=m>i?m:i,a},{}),u=Object.entries(s).map(([a,f])=>{const h=+a;return{edges:f,level:h,isMaxLevel:h===i}});return u.length===0?cn:u}function _n(t,e,r){const i=Zt((0,l.useCallback)(s=>t?s.edges.filter(u=>{const a=e.get(u.source),f=e.get(u.target);return(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&(f==null?void 0:f.width)&&(f==null?void 0:f.height)&&me({sourcePos:a.positionAbsolute||{x:0,y:0},targetPos:f.positionAbsolute||{x:0,y:0},sourceWidth:a.width,sourceHeight:a.height,targetWidth:f.width,targetHeight:f.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return Fe(i,e,r)}const un=({color:t="none",strokeWidth:e=1})=>l.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Se=({color:t="none",strokeWidth:e=1})=>l.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),sr={[kn.Arrow]:un,[kn.ArrowClosed]:Se};function bn(t){const e=Lt();return(0,l.useMemo)(()=>{var s,u;return Object.prototype.hasOwnProperty.call(sr,t)?sr[t]:((u=(s=e.getState()).onError)==null||u.call(s,"009",ie.error009(t)),null)},[t])}const Ir=({id:t,type:e,color:r,width:i=12.5,height:s=12.5,markerUnits:u="strokeWidth",strokeWidth:a,orient:f="auto-start-reverse"})=>{const h=bn(e);return h?l.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:f,refX:"0",refY:"0"},l.createElement(h,{color:r,strokeWidth:a})):null},Dr=({defaultColor:t,rfId:e})=>r=>{const i=[];return r.edges.reduce((s,u)=>([u.markerStart,u.markerEnd].forEach(a=>{if(a&&typeof a=="object"){const f=Jt(a,e);i.includes(f)||(s.push(wt({id:f,color:a.color||t},a)),i.push(f))}}),s),[]).sort((s,u)=>s.id.localeCompare(u.id))},ar=({defaultColor:t,rfId:e})=>{const r=Zt((0,l.useCallback)(Dr({defaultColor:t,rfId:e}),[t,e]),(i,s)=>!(i.length!==s.length||i.some((u,a)=>u.id!==s[a].id)));return l.createElement("defs",null,r.map(i=>l.createElement(Ir,{id:i.id,key:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient})))};ar.displayName="MarkerDefinitions";var oi=(0,l.memo)(ar);const ii=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),C=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:i,edgeTypes:s,noPanClassName:u,onEdgeUpdate:a,onEdgeContextMenu:f,onEdgeMouseEnter:h,onEdgeMouseMove:m,onEdgeMouseLeave:p,onEdgeClick:y,edgeUpdaterRadius:S,onEdgeDoubleClick:b,onEdgeUpdateStart:P,onEdgeUpdateEnd:N,children:R,disableKeyboardA11y:M})=>{const{edgesFocusable:A,edgesUpdatable:I,elementsSelectable:E,width:H,height:U,connectionMode:G,nodeInternals:Y,onError:V}=Zt(ii,tt.X),et=_n(e,Y,r);return H?l.createElement(l.Fragment,null,et.map(({level:W,edges:nt,isMaxLevel:$})=>l.createElement("svg",{key:W,style:{zIndex:W},width:H,height:U,className:"react-flow__edges react-flow__container"},$&&l.createElement(oi,{defaultColor:t,rfId:i}),l.createElement("g",null,nt.map(D=>{var Me,Qt;const[q,rt,vt]=At(Y.get(D.source)),[mt,T,ot]=At(Y.get(D.target));if(!vt||!ot)return null;let Q=D.type||"default";s[Q]||(V==null||V("011",ie.error011(Q)),Q="default");const ct=s[Q]||s.default,Nt=G===Ze.Strict?T.target:((Me=T.target)!=null?Me:[]).concat((Qt=T.source)!=null?Qt:[]),It=re(rt.source,D.sourceHandle),Ht=re(Nt,D.targetHandle),Vt=(It==null?void 0:It.position)||ut.Bottom,ee=(Ht==null?void 0:Ht.position)||ut.Top,ne=!!(D.focusable||A&&typeof D.focusable=="undefined"),fe=typeof a!="undefined"&&(D.updatable||I&&typeof D.updatable=="undefined");if(!It||!Ht)return V==null||V("008",ie.error008(It,D)),null;const{sourceX:oe,sourceY:de,targetX:Gt,targetY:Ke}=Kt(q,It,Vt,mt,Ht,ee);return l.createElement(ct,{key:D.id,id:D.id,className:(0,it.Z)([D.className,u]),type:Q,data:D.data,selected:!!D.selected,animated:!!D.animated,hidden:!!D.hidden,label:D.label,labelStyle:D.labelStyle,labelShowBg:D.labelShowBg,labelBgStyle:D.labelBgStyle,labelBgPadding:D.labelBgPadding,labelBgBorderRadius:D.labelBgBorderRadius,style:D.style,source:D.source,target:D.target,sourceHandleId:D.sourceHandle,targetHandleId:D.targetHandle,markerEnd:D.markerEnd,markerStart:D.markerStart,sourceX:oe,sourceY:de,targetX:Gt,targetY:Ke,sourcePosition:Vt,targetPosition:ee,elementsSelectable:E,onEdgeUpdate:a,onContextMenu:f,onMouseEnter:h,onMouseMove:m,onMouseLeave:p,onClick:y,edgeUpdaterRadius:S,onEdgeDoubleClick:b,onEdgeUpdateStart:P,onEdgeUpdateEnd:N,rfId:i,ariaLabel:D.ariaLabel,isFocusable:ne,isUpdatable:fe,pathOptions:"pathOptions"in D?D.pathOptions:void 0,interactionWidth:D.interactionWidth,disableKeyboardA11y:M})})))),R):null};C.displayName="EdgeRenderer";var pt=(0,l.memo)(C);const L=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function bt({children:t}){const e=Zt(L);return l.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function kt(t){const e=Qr(),r=(0,l.useRef)(!1);(0,l.useEffect)(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const Dt={[ut.Left]:ut.Right,[ut.Right]:ut.Left,[ut.Top]:ut.Bottom,[ut.Bottom]:ut.Top},zt=({nodeId:t,handleType:e,style:r,type:i=Re.Bezier,CustomComponent:s,connectionStatus:u})=>{var U,G,Y,V,et,W,nt;const{fromNode:a,handleId:f,toX:h,toY:m,connectionMode:p}=Zt((0,l.useCallback)($=>({fromNode:$.nodeInternals.get(t),handleId:$.connectionHandleId,toX:($.connectionPosition.x-$.transform[0])/$.transform[2],toY:($.connectionPosition.y-$.transform[1])/$.transform[2],connectionMode:$.connectionMode}),[t]),tt.X),y=(U=a==null?void 0:a[$t])==null?void 0:U.handleBounds;let S=y==null?void 0:y[e];if(p===Ze.Loose&&(S=S||(y==null?void 0:y[e==="source"?"target":"source"])),!a||!S)return null;const b=f?S.find($=>$.id===f):S[0],P=b?b.x+b.width/2:((G=a.width)!=null?G:0)/2,N=b?b.y+b.height/2:(Y=a.height)!=null?Y:0,R=((et=(V=a.positionAbsolute)==null?void 0:V.x)!=null?et:0)+P,M=((nt=(W=a.positionAbsolute)==null?void 0:W.y)!=null?nt:0)+N,A=b==null?void 0:b.position,I=A?Dt[A]:null;if(!A||!I)return null;if(s)return l.createElement(s,{connectionLineType:i,connectionLineStyle:r,fromNode:a,fromHandle:b,fromX:R,fromY:M,toX:h,toY:m,fromPosition:A,toPosition:I,connectionStatus:u});let E="";const H={sourceX:R,sourceY:M,sourcePosition:A,targetX:h,targetY:m,targetPosition:I};return i===Re.Bezier?[E]=Bn(H):i===Re.Step?[E]=Dn(qt(wt({},H),{borderRadius:0})):i===Re.SmoothStep?[E]=Dn(H):i===Re.SimpleBezier?[E]=Un(H):E=`M${R},${M} ${h},${m}`,l.createElement("path",{d:E,fill:"none",className:"react-flow__connection-path",style:r})};zt.displayName="ConnectionLine";const Xt=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Wt({containerStyle:t,style:e,type:r,component:i}){const{nodeId:s,handleType:u,nodesConnectable:a,width:f,height:h,connectionStatus:m}=Zt(Xt,tt.X);return!(s&&u&&f&&a)?null:l.createElement("svg",{style:t,width:f,height:h,className:"react-flow__edges react-flow__connectionline react-flow__container"},l.createElement("g",{className:(0,it.Z)(["react-flow__connection",m])},l.createElement(zt,{nodeId:s,handleType:u,style:e,type:r,CustomComponent:i,connectionStatus:m})))}function Ee(t,e){const r=(0,l.useRef)(null),i=Lt();return(0,l.useMemo)(()=>e(t),[t])}const jt=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:i,onMoveEnd:s,onInit:u,onNodeClick:a,onEdgeClick:f,onNodeDoubleClick:h,onEdgeDoubleClick:m,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:S,onNodeContextMenu:b,onSelectionContextMenu:P,onSelectionStart:N,onSelectionEnd:R,connectionLineType:M,connectionLineStyle:A,connectionLineComponent:I,connectionLineContainerStyle:E,selectionKeyCode:H,selectionOnDrag:U,selectionMode:G,multiSelectionKeyCode:Y,panActivationKeyCode:V,zoomActivationKeyCode:et,deleteKeyCode:W,onlyRenderVisibleElements:nt,elementsSelectable:$,selectNodesOnDrag:D,defaultViewport:q,translateExtent:rt,minZoom:vt,maxZoom:mt,preventScrolling:T,defaultMarkerColor:ot,zoomOnScroll:Q,zoomOnPinch:ct,panOnScroll:Nt,panOnScrollSpeed:It,panOnScrollMode:Ht,zoomOnDoubleClick:Vt,panOnDrag:ee,onPaneClick:ne,onPaneMouseEnter:fe,onPaneMouseMove:oe,onPaneMouseLeave:de,onPaneScroll:Gt,onPaneContextMenu:Ke,onEdgeUpdate:Me,onEdgeContextMenu:Qt,onEdgeMouseEnter:ln,onEdgeMouseMove:Yt,onEdgeMouseLeave:Et,edgeUpdaterRadius:Ae,onEdgeUpdateStart:ur,onEdgeUpdateEnd:no,noDragClassName:zr,noWheelClassName:$r,noPanClassName:vn,elevateEdgesOnSelect:Br,disableKeyboardA11y:lr,nodeOrigin:fr,nodeExtent:Hr,rfId:Or})=>{const ro=Ee(t,o),he=Ee(e,xt);return kt(u),l.createElement(ri,{onPaneClick:ne,onPaneMouseEnter:fe,onPaneMouseMove:oe,onPaneMouseLeave:de,onPaneContextMenu:Ke,onPaneScroll:Gt,deleteKeyCode:W,selectionKeyCode:H,selectionOnDrag:U,selectionMode:G,onSelectionStart:N,onSelectionEnd:R,multiSelectionKeyCode:Y,panActivationKeyCode:V,zoomActivationKeyCode:et,elementsSelectable:$,onMove:r,onMoveStart:i,onMoveEnd:s,zoomOnScroll:Q,zoomOnPinch:ct,zoomOnDoubleClick:Vt,panOnScroll:Nt,panOnScrollSpeed:It,panOnScrollMode:Ht,panOnDrag:ee,defaultViewport:q,translateExtent:rt,minZoom:vt,maxZoom:mt,onSelectionContextMenu:P,preventScrolling:T,noDragClassName:zr,noWheelClassName:$r,noPanClassName:vn,disableKeyboardA11y:lr},l.createElement(bt,null,l.createElement(pt,{edgeTypes:he,onEdgeClick:f,onEdgeDoubleClick:m,onEdgeUpdate:Me,onlyRenderVisibleElements:nt,onEdgeContextMenu:Qt,onEdgeMouseEnter:ln,onEdgeMouseMove:Yt,onEdgeMouseLeave:Et,onEdgeUpdateStart:ur,onEdgeUpdateEnd:no,edgeUpdaterRadius:Ae,defaultMarkerColor:ot,noPanClassName:vn,elevateEdgesOnSelect:!!Br,disableKeyboardA11y:lr,rfId:Or},l.createElement(Wt,{style:A,type:M,component:I,containerStyle:E})),l.createElement("div",{className:"react-flow__edgelabel-renderer"}),l.createElement(v,{nodeTypes:ro,onNodeClick:a,onNodeDoubleClick:h,onNodeMouseEnter:p,onNodeMouseMove:y,onNodeMouseLeave:S,onNodeContextMenu:b,selectNodesOnDrag:D,onlyRenderVisibleElements:nt,noPanClassName:vn,noDragClassName:zr,disableKeyboardA11y:lr,nodeOrigin:fr,nodeExtent:Hr,rfId:Or})))};jt.displayName="GraphView";var Ne=(0,l.memo)(jt);const Ce=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],te={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Ce,nodeExtent:Ce,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Ze.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Oe,isValidConnection:void 0},Ye=()=>(0,J.F)((t,e)=>qt(wt({},te),{setNodes:r=>{const{nodeInternals:i,nodeOrigin:s,elevateNodesOnSelect:u}=e();t({nodeInternals:Gr(r,i,s,u)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:i={}}=e();t({edges:r.map(s=>wt(wt({},i),s))})},setDefaultNodesAndEdges:(r,i)=>{const s=typeof r!="undefined",u=typeof i!="undefined",a=s?Gr(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:a,edges:u?i:[],hasDefaultNodes:s,hasDefaultEdges:u})},updateNodeDimensions:r=>{const{onNodesChange:i,nodeInternals:s,fitViewOnInit:u,fitViewOnInitDone:a,fitViewOnInitOptions:f,domNode:h,nodeOrigin:m}=e(),p=h==null?void 0:h.querySelector(".react-flow__viewport");if(!p)return;const y=window.getComputedStyle(p),{m22:S}=new window.DOMMatrixReadOnly(y.transform),b=r.reduce((N,R)=>{const M=s.get(R.id);if(M!=null&&M.hidden)s.set(M.id,qt(wt({},M),{[$t]:qt(wt({},M[$t]),{handleBounds:void 0})}));else if(M){const A=pn(R.nodeElement);!!(A.width&&A.height&&(M.width!==A.width||M.height!==A.height||R.forceUpdate))&&(s.set(M.id,wt(qt(wt({},M),{[$t]:qt(wt({},M[$t]),{handleBounds:{source:Eo(".source",R.nodeElement,S,m),target:Eo(".target",R.nodeElement,S,m)}})}),A)),N.push({id:M.id,type:"dimensions",dimensions:A}))}return N},[]);po(s,m);const P=a||u&&!a&&mo(e,wt({initial:!0},f));t({nodeInternals:new Map(s),fitViewOnInitDone:P}),(b==null?void 0:b.length)>0&&(i==null||i(b))},updateNodePositions:(r,i=!0,s=!1)=>{const{triggerNodeChanges:u}=e(),a=r.map(f=>{const h={id:f.id,type:"position",dragging:s};return i&&(h.positionAbsolute=f.positionAbsolute,h.position=f.position),h});u(a)},triggerNodeChanges:r=>{const{onNodesChange:i,nodeInternals:s,hasDefaultNodes:u,nodeOrigin:a,getNodes:f,elevateNodesOnSelect:h}=e();if(r!=null&&r.length){if(u){const m=Jr(r,f()),p=Gr(m,s,a,h);t({nodeInternals:p})}i==null||i(r)}},addSelectedNodes:r=>{const{multiSelectionActive:i,edges:s,getNodes:u}=e();let a,f=null;i?a=r.map(h=>sn(h,!0)):(a=Ln(u(),r),f=Ln(s,[])),Tr({changedNodes:a,changedEdges:f,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:i,edges:s,getNodes:u}=e();let a,f=null;i?a=r.map(h=>sn(h,!0)):(a=Ln(s,r),f=Ln(u(),[])),Tr({changedNodes:f,changedEdges:a,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:i}={})=>{const{edges:s,getNodes:u}=e(),a=r||u(),f=i||s,h=a.map(p=>(p.selected=!1,sn(p.id,!1))),m=f.map(p=>sn(p.id,!1));Tr({changedNodes:h,changedEdges:m,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:i,maxZoom:s}=e();i==null||i.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:i,minZoom:s}=e();i==null||i.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:r=>{var i;(i=e().d3Zoom)==null||i.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:i}=e(),u=i().filter(f=>f.selected).map(f=>sn(f.id,!1)),a=r.filter(f=>f.selected).map(f=>sn(f.id,!1));Tr({changedNodes:u,changedEdges:a,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:i}=e();i.forEach(s=>{s.positionAbsolute=Vn(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(i)})},panBy:r=>{const{transform:i,width:s,height:u,d3Zoom:a,d3Selection:f,translateExtent:h}=e();if(!a||!f||!r.x&&!r.y)return!1;const m=Tt.CR.translate(i[0]+r.x,i[1]+r.y).scale(i[2]),p=[[0,0],[s,u]],y=a==null?void 0:a.constrain()(m,p,h);return a.transform(f,y),i[0]!==y.x||i[1]!==y.y||i[2]!==y.k},cancelConnection:()=>t({connectionNodeId:te.connectionNodeId,connectionHandleId:te.connectionHandleId,connectionHandleType:te.connectionHandleType,connectionStatus:te.connectionStatus,connectionStartHandle:te.connectionStartHandle,connectionEndHandle:te.connectionEndHandle}),reset:()=>t(wt({},te))}),Object.is),cr=({children:t})=>{const e=(0,l.useRef)(null);return e.current||(e.current=Ye()),l.createElement(gn,{value:e.current},t)};cr.displayName="ReactFlowProvider";const fi=({children:t})=>(0,l.useContext)(ye)?l.createElement(l.Fragment,null,t):l.createElement(cr,null,t);fi.displayName="ReactFlowWrapper";const vi={input:on,default:tr,output:nr,group:Ur},Si={default:yn,straight:zn,step:Gn,smoothstep:je,simplebezier:Le},Ei=[0,0],Ni=[15,15],Ci={x:0,y:0,zoom:1},Mi={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},di=(0,l.forwardRef)((vs,hs)=>{var xi=vs,{nodes:t,edges:e,defaultNodes:r,defaultEdges:i,className:s,nodeTypes:u=vi,edgeTypes:a=Si,onNodeClick:f,onEdgeClick:h,onInit:m,onMove:p,onMoveStart:y,onMoveEnd:S,onConnect:b,onConnectStart:P,onConnectEnd:N,onClickConnectStart:R,onClickConnectEnd:M,onNodeMouseEnter:A,onNodeMouseMove:I,onNodeMouseLeave:E,onNodeContextMenu:H,onNodeDoubleClick:U,onNodeDragStart:G,onNodeDrag:Y,onNodeDragStop:V,onNodesDelete:et,onEdgesDelete:W,onSelectionChange:nt,onSelectionDragStart:$,onSelectionDrag:D,onSelectionDragStop:q,onSelectionContextMenu:rt,onSelectionStart:vt,onSelectionEnd:mt,connectionMode:T=Ze.Strict,connectionLineType:ot=Re.Bezier,connectionLineStyle:Q,connectionLineComponent:ct,connectionLineContainerStyle:Nt,deleteKeyCode:It="Backspace",selectionKeyCode:Ht="Shift",selectionOnDrag:Vt=!1,selectionMode:ee=qe.Full,panActivationKeyCode:ne="Space",multiSelectionKeyCode:fe=Ge()?"Meta":"Control",zoomActivationKeyCode:oe=Ge()?"Meta":"Control",snapToGrid:de=!1,snapGrid:Gt=Ni,onlyRenderVisibleElements:Ke=!1,selectNodesOnDrag:Me=!0,nodesDraggable:Qt,nodesConnectable:ln,nodesFocusable:Yt,nodeOrigin:Et=Ei,edgesFocusable:Ae,edgesUpdatable:ur,elementsSelectable:no,defaultViewport:zr=Ci,minZoom:$r=.5,maxZoom:vn=2,translateExtent:Br=Ce,preventScrolling:lr=!0,nodeExtent:fr,defaultMarkerColor:Hr="#b1b1b7",zoomOnScroll:Or=!0,zoomOnPinch:ro=!0,panOnScroll:he=!1,panOnScrollSpeed:We=.5,panOnScrollMode:dr=ke.Free,zoomOnDoubleClick:hr=!0,panOnDrag:gr=!0,onPaneClick:Sn,onPaneMouseEnter:fn,onPaneMouseMove:oo,onPaneMouseLeave:si,onPaneScroll:io,onPaneContextMenu:ai,children:gi,onEdgeUpdate:pr,onEdgeContextMenu:Oi,onEdgeDoubleClick:Zi,onEdgeMouseEnter:Li,onEdgeMouseMove:Xi,onEdgeMouseLeave:Vi,onEdgeUpdateStart:Fi,onEdgeUpdateEnd:Yi,edgeUpdaterRadius:Ki=10,onNodesChange:Wi,onEdgesChange:Ui,noDragClassName:Gi="nodrag",noWheelClassName:Qi="nowheel",noPanClassName:pi="nopan",fitView:qi=!1,fitViewOptions:Ji,connectOnClick:ji=!0,attributionPosition:ts,proOptions:es,defaultEdgeOptions:ns,elevateNodesOnSelect:rs=!0,elevateEdgesOnSelect:os=!1,disableKeyboardA11y:mi=!1,autoPanOnConnect:is=!0,autoPanOnNodeDrag:ss=!0,connectionRadius:as=20,isValidConnection:cs,onError:us,style:ls,id:yi,nodeDragThreshold:fs}=xi,ds=Zr(xi,["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesUpdatable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","connectionRadius","isValidConnection","onError","style","id","nodeDragThreshold"]);const ci=yi||"1";return l.createElement("div",qt(wt({},ds),{style:wt(wt({},ls),Mi),ref:hs,className:(0,it.Z)(["react-flow",s]),"data-testid":"rf__wrapper",id:yi}),l.createElement(fi,null,l.createElement(Ne,{onInit:m,onMove:p,onMoveStart:y,onMoveEnd:S,onNodeClick:f,onEdgeClick:h,onNodeMouseEnter:A,onNodeMouseMove:I,onNodeMouseLeave:E,onNodeContextMenu:H,onNodeDoubleClick:U,nodeTypes:u,edgeTypes:a,connectionLineType:ot,connectionLineStyle:Q,connectionLineComponent:ct,connectionLineContainerStyle:Nt,selectionKeyCode:Ht,selectionOnDrag:Vt,selectionMode:ee,deleteKeyCode:It,multiSelectionKeyCode:fe,panActivationKeyCode:ne,zoomActivationKeyCode:oe,onlyRenderVisibleElements:Ke,selectNodesOnDrag:Me,defaultViewport:zr,translateExtent:Br,minZoom:$r,maxZoom:vn,preventScrolling:lr,zoomOnScroll:Or,zoomOnPinch:ro,zoomOnDoubleClick:hr,panOnScroll:he,panOnScrollSpeed:We,panOnScrollMode:dr,panOnDrag:gr,onPaneClick:Sn,onPaneMouseEnter:fn,onPaneMouseMove:oo,onPaneMouseLeave:si,onPaneScroll:io,onPaneContextMenu:ai,onSelectionContextMenu:rt,onSelectionStart:vt,onSelectionEnd:mt,onEdgeUpdate:pr,onEdgeContextMenu:Oi,onEdgeDoubleClick:Zi,onEdgeMouseEnter:Li,onEdgeMouseMove:Xi,onEdgeMouseLeave:Vi,onEdgeUpdateStart:Fi,onEdgeUpdateEnd:Yi,edgeUpdaterRadius:Ki,defaultMarkerColor:Hr,noDragClassName:Gi,noWheelClassName:Qi,noPanClassName:pi,elevateEdgesOnSelect:os,rfId:ci,disableKeyboardA11y:mi,nodeOrigin:Et,nodeExtent:fr}),l.createElement(Do,{nodes:t,edges:e,defaultNodes:r,defaultEdges:i,onConnect:b,onConnectStart:P,onConnectEnd:N,onClickConnectStart:R,onClickConnectEnd:M,nodesDraggable:Qt,nodesConnectable:ln,nodesFocusable:Yt,edgesFocusable:Ae,edgesUpdatable:ur,elementsSelectable:no,elevateNodesOnSelect:rs,minZoom:$r,maxZoom:vn,nodeExtent:fr,onNodesChange:Wi,onEdgesChange:Ui,snapToGrid:de,snapGrid:Gt,connectionMode:T,translateExtent:Br,connectOnClick:ji,defaultEdgeOptions:ns,fitView:qi,fitViewOptions:Ji,onNodesDelete:et,onEdgesDelete:W,onNodeDragStart:G,onNodeDrag:Y,onNodeDragStop:V,onSelectionDrag:D,onSelectionDragStart:$,onSelectionDragStop:q,noPanClassName:pi,nodeOrigin:Et,rfId:ci,autoPanOnConnect:is,autoPanOnNodeDrag:ss,onError:us,connectionRadius:as,isValidConnection:cs,nodeDragThreshold:fs}),l.createElement(Ro,{onSelectionChange:nt}),gi,l.createElement(wr,{proOptions:es,position:ts}),l.createElement(Oo,{rfId:ci,disableKeyboardA11y:mi})))});di.displayName="ReactFlow";const Ai=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function Pi({children:t}){const e=Zt(Ai);return e?(0,Be.createPortal)(t,e):null}function ys(){const t=Lt();return useCallback(e=>{const{domNode:r,updateNodeDimensions:i}=t.getState(),u=(Array.isArray(e)?e:[e]).reduce((a,f)=>{const h=r==null?void 0:r.querySelector(`.react-flow__node[data-id="${f}"]`);return h&&a.push({id:f,nodeElement:h,forceUpdate:!0}),a},[]);requestAnimationFrame(()=>i(u))},[])}const Ti=t=>t.getNodes();function xs(){return Zt(Ti,shallow)}const ki=t=>t.edges;function ws(){return Zt(ki,shallow)}const Ri=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2]});function Ii(){return Zt(Ri,tt.X)}function hi(t){return e=>{const[r,i]=(0,l.useState)(e),s=(0,l.useCallback)(u=>i(a=>t(u,a)),[]);return[r,i,s]}}const _s=hi(Jr),Di=hi(vo);function zi({onStart:t,onChange:e,onEnd:r}){const i=Lt();(0,l.useEffect)(()=>{i.setState({onViewportChangeStart:t})},[t]),(0,l.useEffect)(()=>{i.setState({onViewportChange:e})},[e]),(0,l.useEffect)(()=>{i.setState({onViewportChangeEnd:r})},[r])}function bs({onChange:t}){const e=Lt();useEffect(()=>{const r=[...e.getState().onSelectionChange,t];return e.setState({onSelectionChange:r}),()=>{const i=e.getState().onSelectionChange.filter(s=>s!==t);e.setState({onSelectionChange:i})}},[t])}const $i=t=>e=>e.nodeInternals.size===0?!1:e.getNodes().filter(r=>t.includeHiddenNodes?!0:!r.hidden).every(r=>{var i;return((i=r[$t])==null?void 0:i.handleBounds)!==void 0}),Bi={includeHiddenNodes:!1};function Hi(t=Bi){return Zt($i(t))}},73430:function(dt,gt){"use strict";var B={value:function(){}};function l(){for(var st=0,at=arguments.length,yt={},St;st<at;++st){if(!(St=arguments[st]+"")||St in yt||/[\s.]/.test(St))throw new Error("illegal type: "+St);yt[St]=[]}return new it(yt)}function it(st){this._=st}function J(st,at){return st.trim().split(/^|\s+/).map(function(yt){var St="",Mt=yt.indexOf(".");if(Mt>=0&&(St=yt.slice(Mt+1),yt=yt.slice(0,Mt)),yt&&!at.hasOwnProperty(yt))throw new Error("unknown type: "+yt);return{type:yt,name:St}})}it.prototype=l.prototype={constructor:it,on:function(at,yt){var St=this._,Mt=J(at+"",St),Bt,Ut=-1,Pe=Mt.length;if(arguments.length<2){for(;++Ut<Pe;)if((Bt=(at=Mt[Ut]).type)&&(Bt=tt(St[Bt],at.name)))return Bt;return}if(yt!=null&&typeof yt!="function")throw new Error("invalid callback: "+yt);for(;++Ut<Pe;)if(Bt=(at=Mt[Ut]).type)St[Bt]=Tt(St[Bt],at.name,yt);else if(yt==null)for(Bt in St)St[Bt]=Tt(St[Bt],at.name,null);return this},copy:function(){var at={},yt=this._;for(var St in yt)at[St]=yt[St].slice();return new it(at)},call:function(at,yt){if((Bt=arguments.length-2)>0)for(var St=new Array(Bt),Mt=0,Bt,Ut;Mt<Bt;++Mt)St[Mt]=arguments[Mt+2];if(!this._.hasOwnProperty(at))throw new Error("unknown type: "+at);for(Ut=this._[at],Mt=0,Bt=Ut.length;Mt<Bt;++Mt)Ut[Mt].value.apply(yt,St)},apply:function(at,yt,St){if(!this._.hasOwnProperty(at))throw new Error("unknown type: "+at);for(var Mt=this._[at],Bt=0,Ut=Mt.length;Bt<Ut;++Bt)Mt[Bt].value.apply(yt,St)}};function tt(st,at){for(var yt=0,St=st.length,Mt;yt<St;++yt)if((Mt=st[yt]).name===at)return Mt.value}function Tt(st,at,yt){for(var St=0,Mt=st.length;St<Mt;++St)if(st[St].name===at){st[St]=B,st=st.slice(0,St).concat(st.slice(St+1));break}return yt!=null&&st.push({name:at,value:yt}),st}gt.Z=l},28680:function(dt,gt,B){"use strict";B.d(gt,{Z:function(){return l}});function l(it){if(typeof it=="string"||typeof it=="number")return""+it;let J="";if(Array.isArray(it))for(let tt=0,Tt;tt<it.length;tt++)(Tt=l(it[tt]))!==""&&(J+=(J&&" ")+Tt);else for(let tt in it)it[tt]&&(J+=(J&&" ")+tt);return J}},49289:function(dt,gt,B){"use strict";B.d(gt,{D:function(){return tt},Z:function(){return J}});var l=B(41468),it=B(5873);function J(Tt){var st=Tt.document.documentElement,at=(0,l.Z)(Tt).on("dragstart.drag",it.ZP,it.Dd);"onselectstart"in st?at.on("selectstart.drag",it.ZP,it.Dd):(st.__noselect=st.style.MozUserSelect,st.style.MozUserSelect="none")}function tt(Tt,st){var at=Tt.document.documentElement,yt=(0,l.Z)(Tt).on("dragstart.drag",null);st&&(yt.on("click.drag",it.ZP,it.Dd),setTimeout(function(){yt.on("click.drag",null)},0)),"onselectstart"in at?yt.on("selectstart.drag",null):(at.style.MozUserSelect=at.__noselect,delete at.__noselect)}},5873:function(dt,gt,B){"use strict";B.d(gt,{Dd:function(){return it},Q7:function(){return l},ZP:function(){return tt},rG:function(){return J}});const l={passive:!1},it={capture:!0,passive:!1};function J(Tt){Tt.stopImmediatePropagation()}function tt(Tt){Tt.preventDefault(),Tt.stopImmediatePropagation()}},73409:function(dt,gt,B){"use strict";B.d(gt,{P:function(){return it},Z:function(){return l}});function l(J){return function(){return this.matches(J)}}function it(J){return function(tt){return tt.matches(J)}}},60021:function(dt,gt,B){"use strict";B.d(gt,{Z:function(){return it}});var l=B(17110);function it(J){var tt=J+="",Tt=tt.indexOf(":");return Tt>=0&&(tt=J.slice(0,Tt))!=="xmlns"&&(J=J.slice(Tt+1)),l.Z.hasOwnProperty(tt)?{space:l.Z[tt],local:J}:J}},17110:function(dt,gt,B){"use strict";B.d(gt,{P:function(){return l}});var l="http://www.w3.org/1999/xhtml";gt.Z={svg:"http://www.w3.org/2000/svg",xhtml:l,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},13802:function(dt,gt,B){"use strict";B.d(gt,{Z:function(){return it}});function l(J){let tt;for(;tt=J.sourceEvent;)J=tt;return J}function it(J,tt){if(J=l(J),tt===void 0&&(tt=J.currentTarget),tt){var Tt=tt.ownerSVGElement||tt;if(Tt.createSVGPoint){var st=Tt.createSVGPoint();return st.x=J.clientX,st.y=J.clientY,st=st.matrixTransform(tt.getScreenCTM().inverse()),[st.x,st.y]}if(tt.getBoundingClientRect){var at=tt.getBoundingClientRect();return[J.clientX-at.left-tt.clientLeft,J.clientY-at.top-tt.clientTop]}}return[J.pageX,J.pageY]}},41468:function(dt,gt,B){"use strict";B.d(gt,{Z:function(){return it}});var l=B(1776);function it(J){return typeof J=="string"?new l.Y1([[document.querySelector(J)]],[document.documentElement]):new l.Y1([[J]],l.Jz)}},1776:function(dt,gt,B){"use strict";B.d(gt,{Y1:function(){return ae},ZP:function(){return nn},Jz:function(){return Ar}});var l=B(66456);function it(d){typeof d!="function"&&(d=(0,l.Z)(d));for(var _=this._groups,F=_.length,K=new Array(F),z=0;z<F;++z)for(var j=_[z],ht=j.length,lt=K[z]=new Array(ht),_t,Pt,Ot=0;Ot<ht;++Ot)(_t=j[Ot])&&(Pt=d.call(_t,_t.__data__,Ot,j))&&("__data__"in _t&&(Pt.__data__=_t.__data__),lt[Ot]=Pt);return new ae(K,this._parents)}function J(d){return d==null?[]:Array.isArray(d)?d:Array.from(d)}var tt=B(16851);function Tt(d){return function(){return J(d.apply(this,arguments))}}function st(d){typeof d=="function"?d=Tt(d):d=(0,tt.Z)(d);for(var _=this._groups,F=_.length,K=[],z=[],j=0;j<F;++j)for(var ht=_[j],lt=ht.length,_t,Pt=0;Pt<lt;++Pt)(_t=ht[Pt])&&(K.push(d.call(_t,_t.__data__,Pt,ht)),z.push(_t));return new ae(K,z)}var at=B(73409),yt=Array.prototype.find;function St(d){return function(){return yt.call(this.children,d)}}function Mt(){return this.firstElementChild}function Bt(d){return this.select(d==null?Mt:St(typeof d=="function"?d:(0,at.P)(d)))}var Ut=Array.prototype.filter;function Pe(){return Array.from(this.children)}function mr(d){return function(){return Ut.call(this.children,d)}}function En(d){return this.selectAll(d==null?Pe:mr(typeof d=="function"?d:(0,at.P)(d)))}function dn(d){typeof d!="function"&&(d=(0,at.Z)(d));for(var _=this._groups,F=_.length,K=new Array(F),z=0;z<F;++z)for(var j=_[z],ht=j.length,lt=K[z]=[],_t,Pt=0;Pt<ht;++Pt)(_t=j[Pt])&&d.call(_t,_t.__data__,Pt,j)&&lt.push(_t);return new ae(K,this._parents)}function hn(d){return new Array(d.length)}function Be(){return new ae(this._enter||this._groups.map(hn),this._parents)}function ye(d,_){this.ownerDocument=d.ownerDocument,this.namespaceURI=d.namespaceURI,this._next=null,this._parent=d,this.__data__=_}ye.prototype={constructor:ye,appendChild:function(d){return this._parent.insertBefore(d,this._next)},insertBefore:function(d,_){return this._parent.insertBefore(d,_)},querySelector:function(d){return this._parent.querySelector(d)},querySelectorAll:function(d){return this._parent.querySelectorAll(d)}};function gn(d){return function(){return d}}function ie(d,_,F,K,z,j){for(var ht=0,lt,_t=_.length,Pt=j.length;ht<Pt;++ht)(lt=_[ht])?(lt.__data__=j[ht],K[ht]=lt):F[ht]=new ye(d,j[ht]);for(;ht<_t;++ht)(lt=_[ht])&&(z[ht]=lt)}function Nn(d,_,F,K,z,j,ht){var lt,_t,Pt=new Map,Ot=_.length,ue=j.length,be=new Array(Ot),pe;for(lt=0;lt<Ot;++lt)(_t=_[lt])&&(be[lt]=pe=ht.call(_t,_t.__data__,lt,_)+"",Pt.has(pe)?z[lt]=_t:Pt.set(pe,_t));for(lt=0;lt<ue;++lt)pe=ht.call(d,j[lt],lt,j)+"",(_t=Pt.get(pe))?(K[lt]=_t,_t.__data__=j[lt],Pt.delete(pe)):F[lt]=new ye(d,j[lt]);for(lt=0;lt<Ot;++lt)(_t=_[lt])&&Pt.get(be[lt])===_t&&(z[lt]=_t)}function Zt(d){return d.__data__}function Lt(d,_){if(!arguments.length)return Array.from(this,Zt);var F=_?Nn:ie,K=this._parents,z=this._groups;typeof d!="function"&&(d=gn(d));for(var j=z.length,ht=new Array(j),lt=new Array(j),_t=new Array(j),Pt=0;Pt<j;++Pt){var Ot=K[Pt],ue=z[Pt],be=ue.length,pe=yr(d.call(Ot,Ot&&Ot.__data__,Pt,K)),le=pe.length,De=lt[Pt]=new Array(le),jn=ht[Pt]=new Array(le),tr=_t[Pt]=new Array(be);F(Ot,ue,De,jn,tr,pe,_);for(var rn=0,on=0,er,nr;rn<le;++rn)if(er=De[rn]){for(rn>=on&&(on=rn+1);!(nr=jn[on])&&++on<le;);er._next=nr||null}}return ht=new ae(ht,K),ht._enter=lt,ht._exit=_t,ht}function yr(d){return typeof d=="object"&&"length"in d?d:Array.from(d)}function xr(){return new ae(this._exit||this._groups.map(hn),this._parents)}function wr(d,_,F){var K=this.enter(),z=this,j=this.exit();return typeof d=="function"?(K=d(K),K&&(K=K.selection())):K=K.append(d+""),_!=null&&(z=_(z),z&&(z=z.selection())),F==null?j.remove():F(j),K&&z?K.merge(z).order():z}function Lr(d){for(var _=d.selection?d.selection():d,F=this._groups,K=_._groups,z=F.length,j=K.length,ht=Math.min(z,j),lt=new Array(z),_t=0;_t<ht;++_t)for(var Pt=F[_t],Ot=K[_t],ue=Pt.length,be=lt[_t]=new Array(ue),pe,le=0;le<ue;++le)(pe=Pt[le]||Ot[le])&&(be[le]=pe);for(;_t<z;++_t)lt[_t]=F[_t];return new ae(lt,this._parents)}function Xr(){for(var d=this._groups,_=-1,F=d.length;++_<F;)for(var K=d[_],z=K.length-1,j=K[z],ht;--z>=0;)(ht=K[z])&&(j&&ht.compareDocumentPosition(j)^4&&j.parentNode.insertBefore(ht,j),j=ht);return this}function pn(d){d||(d=He);function _(ue,be){return ue&&be?d(ue.__data__,be.__data__):!ue-!be}for(var F=this._groups,K=F.length,z=new Array(K),j=0;j<K;++j){for(var ht=F[j],lt=ht.length,_t=z[j]=new Array(lt),Pt,Ot=0;Ot<lt;++Ot)(Pt=ht[Ot])&&(_t[Ot]=Pt);_t.sort(_)}return new ae(z,this._parents).order()}function He(d,_){return d<_?-1:d>_?1:d>=_?0:NaN}function Vn(){var d=arguments[0];return arguments[0]=this,d.apply(null,arguments),this}function _r(){return Array.from(this)}function Fn(){for(var d=this._groups,_=0,F=d.length;_<F;++_)for(var K=d[_],z=0,j=K.length;z<j;++z){var ht=K[z];if(ht)return ht}return null}function Yn(){let d=0;for(const _ of this)++d;return d}function Cn(){return!this.node()}function Te(d){for(var _=this._groups,F=0,K=_.length;F<K;++F)for(var z=_[F],j=0,ht=z.length,lt;j<ht;++j)(lt=z[j])&&d.call(lt,lt.__data__,j,z);return this}var Mn=B(60021);function An(d){return function(){this.removeAttribute(d)}}function Pn(d){return function(){this.removeAttributeNS(d.space,d.local)}}function Ue(d,_){return function(){this.setAttribute(d,_)}}function Kn(d,_){return function(){this.setAttributeNS(d.space,d.local,_)}}function Ft(d,_){return function(){var F=_.apply(this,arguments);F==null?this.removeAttribute(d):this.setAttribute(d,F)}}function $t(d,_){return function(){var F=_.apply(this,arguments);F==null?this.removeAttributeNS(d.space,d.local):this.setAttributeNS(d.space,d.local,F)}}function br(d,_){var F=(0,Mn.Z)(d);if(arguments.length<2){var K=this.node();return F.local?K.getAttributeNS(F.space,F.local):K.getAttribute(F)}return this.each((_==null?F.local?Pn:An:typeof _=="function"?F.local?$t:Ft:F.local?Kn:Ue)(F,_))}var Oe=B(77932);function Vr(d){return function(){delete this[d]}}function xe(d,_){return function(){this[d]=_}}function Wn(d,_){return function(){var F=_.apply(this,arguments);F==null?delete this[d]:this[d]=F}}function we(d,_){return arguments.length>1?this.each((_==null?Vr:typeof _=="function"?Wn:xe)(d,_)):this.node()[d]}function Ge(d){return d.trim().split(/^|\s+/)}function ge(d){return d.classList||new Fr(d)}function Fr(d){this._node=d,this._names=Ge(d.getAttribute("class")||"")}Fr.prototype={add:function(d){var _=this._names.indexOf(d);_<0&&(this._names.push(d),this._node.setAttribute("class",this._names.join(" ")))},remove:function(d){var _=this._names.indexOf(d);_>=0&&(this._names.splice(_,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(d){return this._names.indexOf(d)>=0}};function Qe(d,_){for(var F=ge(d),K=-1,z=_.length;++K<z;)F.add(_[K])}function Tn(d,_){for(var F=ge(d),K=-1,z=_.length;++K<z;)F.remove(_[K])}function vr(d){return function(){Qe(this,d)}}function Ze(d){return function(){Tn(this,d)}}function ke(d,_){return function(){(_.apply(this,arguments)?Qe:Tn)(this,d)}}function qe(d,_){var F=Ge(d+"");if(arguments.length<2){for(var K=ge(this.node()),z=-1,j=F.length;++z<j;)if(!K.contains(F[z]))return!1;return!0}return this.each((typeof _=="function"?ke:_?vr:Ze)(F,_))}function Re(){this.textContent=""}function kn(d){return function(){this.textContent=d}}function ut(d){return function(){var _=d.apply(this,arguments);this.textContent=_==null?"":_}}function Rn(d){return arguments.length?this.each(d==null?Re:(typeof d=="function"?ut:kn)(d)):this.node().textContent}function Un(){this.innerHTML=""}function Le(d){return function(){this.innerHTML=d}}function Je(d){return function(){var _=d.apply(this,arguments);this.innerHTML=_==null?"":_}}function In(d){return arguments.length?this.each(d==null?Un:(typeof d=="function"?Je:Le)(d)):this.node().innerHTML}function Xe(){this.nextSibling&&this.parentNode.appendChild(this)}function mn(){return this.each(Xe)}function _e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Dn(){return this.each(_e)}var je=B(17110);function Gn(d){return function(){var _=this.ownerDocument,F=this.namespaceURI;return F===je.P&&_.documentElement.namespaceURI===je.P?_.createElement(d):_.createElementNS(F,d)}}function Sr(d){return function(){return this.ownerDocument.createElementNS(d.space,d.local)}}function zn(d){var _=(0,Mn.Z)(d);return(_.local?Sr:Gn)(_)}function $n(d){var _=typeof d=="function"?d:zn(d);return this.select(function(){return this.appendChild(_.apply(this,arguments))})}function Er(){return null}function Bn(d,_){var F=typeof d=="function"?d:zn(d),K=_==null?Er:typeof _=="function"?_:(0,l.Z)(_);return this.select(function(){return this.insertBefore(F.apply(this,arguments),K.apply(this,arguments)||null)})}function yn(){var d=this.parentNode;d&&d.removeChild(this)}function Qn(){return this.each(yn)}function Yr(){var d=this.cloneNode(!1),_=this.parentNode;return _?_.insertBefore(d,this.nextSibling):d}function Nr(){var d=this.cloneNode(!0),_=this.parentNode;return _?_.insertBefore(d,this.nextSibling):d}function xn(d){return this.select(d?Nr:Yr)}function qn(d){return arguments.length?this.property("__data__",d):this.node().__data__}function Jn(d){return function(_){d.call(this,_,this.__data__)}}function so(d){return d.trim().split(/^|\s+/).map(function(_){var F="",K=_.indexOf(".");return K>=0&&(F=_.slice(K+1),_=_.slice(0,K)),{type:_,name:F}})}function wn(d){return function(){var _=this.__on;if(_){for(var F=0,K=-1,z=_.length,j;F<z;++F)j=_[F],(!d.type||j.type===d.type)&&j.name===d.name?this.removeEventListener(j.type,j.listener,j.options):_[++K]=j;++K?_.length=K:delete this.__on}}}function Jt(d,_,F){return function(){var K=this.__on,z,j=Jn(_);if(K){for(var ht=0,lt=K.length;ht<lt;++ht)if((z=K[ht]).type===d.type&&z.name===d.name){this.removeEventListener(z.type,z.listener,z.options),this.addEventListener(z.type,z.listener=j,z.options=F),z.value=_;return}}this.addEventListener(d.type,j,F),z={type:d.type,name:d.name,value:_,listener:j,options:F},K?K.push(z):this.__on=[z]}}function Cr(d,_,F){var K=so(d+""),z,j=K.length,ht;if(arguments.length<2){var lt=this.node().__on;if(lt){for(var _t=0,Pt=lt.length,Ot;_t<Pt;++_t)for(z=0,Ot=lt[_t];z<j;++z)if((ht=K[z]).type===Ot.type&&ht.name===Ot.name)return Ot.value}return}for(lt=_?Jt:wn,z=0;z<j;++z)this.each(lt(K[z],_,F));return this}var Kr=B(4010);function Mr(d,_,F){var K=(0,Kr.Z)(d),z=K.CustomEvent;typeof z=="function"?z=new z(_,F):(z=K.document.createEvent("Event"),F?(z.initEvent(_,F.bubbles,F.cancelable),z.detail=F.detail):z.initEvent(_,!1,!1)),d.dispatchEvent(z)}function tn(d,_){return function(){return Mr(this,d,_)}}function Ie(d,_){return function(){return Mr(this,d,_.apply(this,arguments))}}function se(d,_){return this.each((typeof _=="function"?Ie:tn)(d,_))}function*en(){for(var d=this._groups,_=0,F=d.length;_<F;++_)for(var K=d[_],z=0,j=K.length,ht;z<j;++z)(ht=K[z])&&(yield ht)}var Ar=[null];function ae(d,_){this._groups=d,this._parents=_}function ce(){return new ae([[document.documentElement]],Ar)}function Wr(){return this}ae.prototype=ce.prototype={constructor:ae,select:it,selectAll:st,selectChild:Bt,selectChildren:En,filter:dn,data:Lt,enter:Be,exit:xr,join:wr,merge:Lr,selection:Wr,order:Xr,sort:pn,call:Vn,nodes:_r,node:Fn,size:Yn,empty:Cn,each:Te,attr:br,style:Oe.Z,property:we,classed:qe,text:Rn,html:In,raise:mn,lower:Dn,append:$n,insert:Bn,remove:Qn,clone:xn,datum:qn,on:Cr,dispatch:se,[Symbol.iterator]:en};var nn=ce},77932:function(dt,gt,B){"use strict";B.d(gt,{S:function(){return st},Z:function(){return Tt}});var l=B(4010);function it(at){return function(){this.style.removeProperty(at)}}function J(at,yt,St){return function(){this.style.setProperty(at,yt,St)}}function tt(at,yt,St){return function(){var Mt=yt.apply(this,arguments);Mt==null?this.style.removeProperty(at):this.style.setProperty(at,Mt,St)}}function Tt(at,yt,St){return arguments.length>1?this.each((yt==null?it:typeof yt=="function"?tt:J)(at,yt,St==null?"":St)):st(this.node(),at)}function st(at,yt){return at.style.getPropertyValue(yt)||(0,l.Z)(at).getComputedStyle(at,null).getPropertyValue(yt)}},66456:function(dt,gt,B){"use strict";B.d(gt,{Z:function(){return it}});function l(){}function it(J){return J==null?l:function(){return this.querySelector(J)}}},16851:function(dt,gt,B){"use strict";B.d(gt,{Z:function(){return it}});function l(){return[]}function it(J){return J==null?l:function(){return this.querySelectorAll(J)}}},4010:function(dt,gt,B){"use strict";B.d(gt,{Z:function(){return l}});function l(it){return it.ownerDocument&&it.ownerDocument.defaultView||it.document&&it||it.defaultView}},93683:function(dt,gt,B){"use strict";B.d(gt,{sP:function(){return ri},CR:function(){return Xn}});var l=B(73430),it=B(49289),J=1e-12;function tt(n){return((n=Math.exp(n))+1/n)/2}function Tt(n){return((n=Math.exp(n))-1/n)/2}function st(n){return((n=Math.exp(2*n))-1)/(n+1)}var at=function n(o,c,g){function w(v,x){var k=v[0],O=v[1],Z=v[2],X=x[0],ft=x[1],xt=x[2],Ct=X-k,re=ft-O,Kt=Ct*Ct+re*re,me,At;if(Kt<J)At=Math.log(xt/Z)/o,me=function(bn){return[k+bn*Ct,O+bn*re,Z*Math.exp(o*bn*At)]};else{var cn=Math.sqrt(Kt),Fe=(xt*xt-Z*Z+g*Kt)/(2*Z*c*cn),_n=(xt*xt-Z*Z-g*Kt)/(2*xt*c*cn),un=Math.log(Math.sqrt(Fe*Fe+1)-Fe),Se=Math.log(Math.sqrt(_n*_n+1)-_n);At=(Se-un)/o,me=function(bn){var Ir=bn*At,Dr=tt(un),ar=Z/(c*cn)*(Dr*st(o*Ir+un)-Tt(un));return[k+ar*Ct,O+ar*re,Z*Dr/tt(o*Ir+un)]}}return me.duration=At*1e3*o/Math.SQRT2,me}return w.rho=function(v){var x=Math.max(.001,+v),k=x*x,O=k*k;return n(x,k,O)},w}(Math.SQRT2,2,4),yt=B(41468),St=B(13802),Mt=B(1776),Bt=0,Ut=0,Pe=0,mr=1e3,En,dn,hn=0,Be=0,ye=0,gn=typeof performance=="object"&&performance.now?performance:Date,ie=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function Nn(){return Be||(ie(Zt),Be=gn.now()+ye)}function Zt(){Be=0}function Lt(){this._call=this._time=this._next=null}Lt.prototype=yr.prototype={constructor:Lt,restart:function(n,o,c){if(typeof n!="function")throw new TypeError("callback is not a function");c=(c==null?Nn():+c)+(o==null?0:+o),!this._next&&dn!==this&&(dn?dn._next=this:En=this,dn=this),this._call=n,this._time=c,pn()},stop:function(){this._call&&(this._call=null,this._time=1/0,pn())}};function yr(n,o,c){var g=new Lt;return g.restart(n,o,c),g}function xr(){Nn(),++Bt;for(var n=En,o;n;)(o=Be-n._time)>=0&&n._call.call(void 0,o),n=n._next;--Bt}function wr(){Be=(hn=gn.now())+ye,Bt=Ut=0;try{xr()}finally{Bt=0,Xr(),Be=0}}function Lr(){var n=gn.now(),o=n-hn;o>mr&&(ye-=o,hn=n)}function Xr(){for(var n,o=En,c,g=1/0;o;)o._call?(g>o._time&&(g=o._time),n=o,o=o._next):(c=o._next,o._next=null,o=n?n._next=c:En=c);dn=n,pn(g)}function pn(n){if(!Bt){Ut&&(Ut=clearTimeout(Ut));var o=n-Be;o>24?(n<1/0&&(Ut=setTimeout(wr,n-gn.now()-ye)),Pe&&(Pe=clearInterval(Pe))):(Pe||(hn=gn.now(),Pe=setInterval(Lr,mr)),Bt=1,ie(wr))}}function He(n,o,c){var g=new Lt;return o=o==null?0:+o,g.restart(w=>{g.stop(),n(w+o)},o,c),g}var Vn=(0,l.Z)("start","end","cancel","interrupt"),_r=[],Fn=0,Yn=1,Cn=2,Te=3,Mn=4,An=5,Pn=6;function Ue(n,o,c,g,w,v){var x=n.__transition;if(!x)n.__transition={};else if(c in x)return;br(n,c,{name:o,index:g,group:w,on:Vn,tween:_r,time:v.time,delay:v.delay,duration:v.duration,ease:v.ease,timer:null,state:Fn})}function Kn(n,o){var c=$t(n,o);if(c.state>Fn)throw new Error("too late; already scheduled");return c}function Ft(n,o){var c=$t(n,o);if(c.state>Te)throw new Error("too late; already running");return c}function $t(n,o){var c=n.__transition;if(!c||!(c=c[o]))throw new Error("transition not found");return c}function br(n,o,c){var g=n.__transition,w;g[o]=c,c.timer=yr(v,0,c.time);function v(Z){c.state=Yn,c.timer.restart(x,c.delay,c.time),c.delay<=Z&&x(Z-c.delay)}function x(Z){var X,ft,xt,Ct;if(c.state!==Yn)return O();for(X in g)if(Ct=g[X],Ct.name===c.name){if(Ct.state===Te)return He(x);Ct.state===Mn?(Ct.state=Pn,Ct.timer.stop(),Ct.on.call("interrupt",n,n.__data__,Ct.index,Ct.group),delete g[X]):+X<o&&(Ct.state=Pn,Ct.timer.stop(),Ct.on.call("cancel",n,n.__data__,Ct.index,Ct.group),delete g[X])}if(He(function(){c.state===Te&&(c.state=Mn,c.timer.restart(k,c.delay,c.time),k(Z))}),c.state=Cn,c.on.call("start",n,n.__data__,c.index,c.group),c.state===Cn){for(c.state=Te,w=new Array(xt=c.tween.length),X=0,ft=-1;X<xt;++X)(Ct=c.tween[X].value.call(n,n.__data__,c.index,c.group))&&(w[++ft]=Ct);w.length=ft+1}}function k(Z){for(var X=Z<c.duration?c.ease.call(null,Z/c.duration):(c.timer.restart(O),c.state=An,1),ft=-1,xt=w.length;++ft<xt;)w[ft].call(n,X);c.state===An&&(c.on.call("end",n,n.__data__,c.index,c.group),O())}function O(){c.state=Pn,c.timer.stop(),delete g[o];for(var Z in g)return;delete n.__transition}}function Oe(n,o){var c=n.__transition,g,w,v=!0,x;if(c){o=o==null?null:o+"";for(x in c){if((g=c[x]).name!==o){v=!1;continue}w=g.state>Cn&&g.state<An,g.state=Pn,g.timer.stop(),g.on.call(w?"interrupt":"cancel",n,n.__data__,g.index,g.group),delete c[x]}v&&delete n.__transition}}function Vr(n){return this.each(function(){Oe(this,n)})}function xe(n,o){return n=+n,o=+o,function(c){return n*(1-c)+o*c}}var Wn=180/Math.PI,we={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Ge(n,o,c,g,w,v){var x,k,O;return(x=Math.sqrt(n*n+o*o))&&(n/=x,o/=x),(O=n*c+o*g)&&(c-=n*O,g-=o*O),(k=Math.sqrt(c*c+g*g))&&(c/=k,g/=k,O/=k),n*g<o*c&&(n=-n,o=-o,O=-O,x=-x),{translateX:w,translateY:v,rotate:Math.atan2(o,n)*Wn,skewX:Math.atan(O)*Wn,scaleX:x,scaleY:k}}var ge;function Fr(n){var o=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return o.isIdentity?we:Ge(o.a,o.b,o.c,o.d,o.e,o.f)}function Qe(n){return n==null||(ge||(ge=document.createElementNS("http://www.w3.org/2000/svg","g")),ge.setAttribute("transform",n),!(n=ge.transform.baseVal.consolidate()))?we:(n=n.matrix,Ge(n.a,n.b,n.c,n.d,n.e,n.f))}function Tn(n,o,c,g){function w(Z){return Z.length?Z.pop()+" ":""}function v(Z,X,ft,xt,Ct,re){if(Z!==ft||X!==xt){var Kt=Ct.push("translate(",null,o,null,c);re.push({i:Kt-4,x:xe(Z,ft)},{i:Kt-2,x:xe(X,xt)})}else(ft||xt)&&Ct.push("translate("+ft+o+xt+c)}function x(Z,X,ft,xt){Z!==X?(Z-X>180?X+=360:X-Z>180&&(Z+=360),xt.push({i:ft.push(w(ft)+"rotate(",null,g)-2,x:xe(Z,X)})):X&&ft.push(w(ft)+"rotate("+X+g)}function k(Z,X,ft,xt){Z!==X?xt.push({i:ft.push(w(ft)+"skewX(",null,g)-2,x:xe(Z,X)}):X&&ft.push(w(ft)+"skewX("+X+g)}function O(Z,X,ft,xt,Ct,re){if(Z!==ft||X!==xt){var Kt=Ct.push(w(Ct)+"scale(",null,",",null,")");re.push({i:Kt-4,x:xe(Z,ft)},{i:Kt-2,x:xe(X,xt)})}else(ft!==1||xt!==1)&&Ct.push(w(Ct)+"scale("+ft+","+xt+")")}return function(Z,X){var ft=[],xt=[];return Z=n(Z),X=n(X),v(Z.translateX,Z.translateY,X.translateX,X.translateY,ft,xt),x(Z.rotate,X.rotate,ft,xt),k(Z.skewX,X.skewX,ft,xt),O(Z.scaleX,Z.scaleY,X.scaleX,X.scaleY,ft,xt),Z=X=null,function(Ct){for(var re=-1,Kt=xt.length,me;++re<Kt;)ft[(me=xt[re]).i]=me.x(Ct);return ft.join("")}}}var vr=Tn(Fr,"px, ","px)","deg)"),Ze=Tn(Qe,", ",")",")"),ke=B(60021);function qe(n,o){var c,g;return function(){var w=Ft(this,n),v=w.tween;if(v!==c){g=c=v;for(var x=0,k=g.length;x<k;++x)if(g[x].name===o){g=g.slice(),g.splice(x,1);break}}w.tween=g}}function Re(n,o,c){var g,w;if(typeof c!="function")throw new Error;return function(){var v=Ft(this,n),x=v.tween;if(x!==g){w=(g=x).slice();for(var k={name:o,value:c},O=0,Z=w.length;O<Z;++O)if(w[O].name===o){w[O]=k;break}O===Z&&w.push(k)}v.tween=w}}function kn(n,o){var c=this._id;if(n+="",arguments.length<2){for(var g=$t(this.node(),c).tween,w=0,v=g.length,x;w<v;++w)if((x=g[w]).name===n)return x.value;return null}return this.each((o==null?qe:Re)(c,n,o))}function ut(n,o,c){var g=n._id;return n.each(function(){var w=Ft(this,g);(w.value||(w.value={}))[o]=c.apply(this,arguments)}),function(w){return $t(w,g).value[o]}}function Rn(n,o,c){n.prototype=o.prototype=c,c.constructor=n}function Un(n,o){var c=Object.create(n.prototype);for(var g in o)c[g]=o[g];return c}function Le(){}var Je=.7,In=1/Je,Xe="\\s*([+-]?\\d+)\\s*",mn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Dn=/^#([0-9a-f]{3,8})$/,je=new RegExp("^rgb\\(".concat(Xe,",").concat(Xe,",").concat(Xe,"\\)$")),Gn=new RegExp("^rgb\\(".concat(_e,",").concat(_e,",").concat(_e,"\\)$")),Sr=new RegExp("^rgba\\(".concat(Xe,",").concat(Xe,",").concat(Xe,",").concat(mn,"\\)$")),zn=new RegExp("^rgba\\(".concat(_e,",").concat(_e,",").concat(_e,",").concat(mn,"\\)$")),$n=new RegExp("^hsl\\(".concat(mn,",").concat(_e,",").concat(_e,"\\)$")),Er=new RegExp("^hsla\\(".concat(mn,",").concat(_e,",").concat(_e,",").concat(mn,"\\)$")),Bn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Rn(Le,xn,{copy:function(o){return Object.assign(new this.constructor,this,o)},displayable:function(){return this.rgb().displayable()},hex:yn,formatHex:yn,formatHex8:Qn,formatHsl:Yr,formatRgb:Nr,toString:Nr});function yn(){return this.rgb().formatHex()}function Qn(){return this.rgb().formatHex8()}function Yr(){return Ar(this).formatHsl()}function Nr(){return this.rgb().formatRgb()}function xn(n){var o,c;return n=(n+"").trim().toLowerCase(),(o=Dn.exec(n))?(c=o[1].length,o=parseInt(o[1],16),c===6?qn(o):c===3?new Jt(o>>8&15|o>>4&240,o>>4&15|o&240,(o&15)<<4|o&15,1):c===8?Jn(o>>24&255,o>>16&255,o>>8&255,(o&255)/255):c===4?Jn(o>>12&15|o>>8&240,o>>8&15|o>>4&240,o>>4&15|o&240,((o&15)<<4|o&15)/255):null):(o=je.exec(n))?new Jt(o[1],o[2],o[3],1):(o=Gn.exec(n))?new Jt(o[1]*255/100,o[2]*255/100,o[3]*255/100,1):(o=Sr.exec(n))?Jn(o[1],o[2],o[3],o[4]):(o=zn.exec(n))?Jn(o[1]*255/100,o[2]*255/100,o[3]*255/100,o[4]):(o=$n.exec(n))?en(o[1],o[2]/100,o[3]/100,1):(o=Er.exec(n))?en(o[1],o[2]/100,o[3]/100,o[4]):Bn.hasOwnProperty(n)?qn(Bn[n]):n==="transparent"?new Jt(NaN,NaN,NaN,0):null}function qn(n){return new Jt(n>>16&255,n>>8&255,n&255,1)}function Jn(n,o,c,g){return g<=0&&(n=o=c=NaN),new Jt(n,o,c,g)}function so(n){return n instanceof Le||(n=xn(n)),n?(n=n.rgb(),new Jt(n.r,n.g,n.b,n.opacity)):new Jt}function wn(n,o,c,g){return arguments.length===1?so(n):new Jt(n,o,c,g==null?1:g)}function Jt(n,o,c,g){this.r=+n,this.g=+o,this.b=+c,this.opacity=+g}Rn(Jt,wn,Un(Le,{brighter:function(o){return o=o==null?In:Math.pow(In,o),new Jt(this.r*o,this.g*o,this.b*o,this.opacity)},darker:function(o){return o=o==null?Je:Math.pow(Je,o),new Jt(this.r*o,this.g*o,this.b*o,this.opacity)},rgb:function(){return this},clamp:function(){return new Jt(Ie(this.r),Ie(this.g),Ie(this.b),tn(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Cr,formatHex:Cr,formatHex8:Kr,formatRgb:Mr,toString:Mr}));function Cr(){return"#".concat(se(this.r)).concat(se(this.g)).concat(se(this.b))}function Kr(){return"#".concat(se(this.r)).concat(se(this.g)).concat(se(this.b)).concat(se((isNaN(this.opacity)?1:this.opacity)*255))}function Mr(){var n=tn(this.opacity);return"".concat(n===1?"rgb(":"rgba(").concat(Ie(this.r),", ").concat(Ie(this.g),", ").concat(Ie(this.b)).concat(n===1?")":", ".concat(n,")"))}function tn(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function Ie(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function se(n){return n=Ie(n),(n<16?"0":"")+n.toString(16)}function en(n,o,c,g){return g<=0?n=o=c=NaN:c<=0||c>=1?n=o=NaN:o<=0&&(n=NaN),new ce(n,o,c,g)}function Ar(n){if(n instanceof ce)return new ce(n.h,n.s,n.l,n.opacity);if(n instanceof Le||(n=xn(n)),!n)return new ce;if(n instanceof ce)return n;n=n.rgb();var o=n.r/255,c=n.g/255,g=n.b/255,w=Math.min(o,c,g),v=Math.max(o,c,g),x=NaN,k=v-w,O=(v+w)/2;return k?(o===v?x=(c-g)/k+(c<g)*6:c===v?x=(g-o)/k+2:x=(o-c)/k+4,k/=O<.5?v+w:2-v-w,x*=60):k=O>0&&O<1?0:x,new ce(x,k,O,n.opacity)}function ae(n,o,c,g){return arguments.length===1?Ar(n):new ce(n,o,c,g==null?1:g)}function ce(n,o,c,g){this.h=+n,this.s=+o,this.l=+c,this.opacity=+g}Rn(ce,ae,Un(Le,{brighter:function(o){return o=o==null?In:Math.pow(In,o),new ce(this.h,this.s,this.l*o,this.opacity)},darker:function(o){return o=o==null?Je:Math.pow(Je,o),new ce(this.h,this.s,this.l*o,this.opacity)},rgb:function(){var o=this.h%360+(this.h<0)*360,c=isNaN(o)||isNaN(this.s)?0:this.s,g=this.l,w=g+(g<.5?g:1-g)*c,v=2*g-w;return new Jt(d(o>=240?o-240:o+120,v,w),d(o,v,w),d(o<120?o+240:o-120,v,w),this.opacity)},clamp:function(){return new ce(Wr(this.h),nn(this.s),nn(this.l),tn(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var o=tn(this.opacity);return"".concat(o===1?"hsl(":"hsla(").concat(Wr(this.h),", ").concat(nn(this.s)*100,"%, ").concat(nn(this.l)*100,"%").concat(o===1?")":", ".concat(o,")"))}}));function Wr(n){return n=(n||0)%360,n<0?n+360:n}function nn(n){return Math.max(0,Math.min(1,n||0))}function d(n,o,c){return(n<60?o+(c-o)*n/60:n<180?c:n<240?o+(c-o)*(240-n)/60:o)*255}function _(n,o,c,g,w){var v=n*n,x=v*n;return((1-3*n+3*v-x)*o+(4-6*v+3*x)*c+(1+3*n+3*v-3*x)*g+x*w)/6}function F(n){var o=n.length-1;return function(c){var g=c<=0?c=0:c>=1?(c=1,o-1):Math.floor(c*o),w=n[g],v=n[g+1],x=g>0?n[g-1]:2*w-v,k=g<o-1?n[g+2]:2*v-w;return _((c-g/o)*o,x,w,v,k)}}function K(n){var o=n.length;return function(c){var g=Math.floor(((c%=1)<0?++c:c)*o),w=n[(g+o-1)%o],v=n[g%o],x=n[(g+1)%o],k=n[(g+2)%o];return _((c-g/o)*o,w,v,x,k)}}var z=function(n){return function(){return n}};function j(n,o){return function(c){return n+c*o}}function ht(n,o,c){return n=Math.pow(n,c),o=Math.pow(o,c)-n,c=1/c,function(g){return Math.pow(n+g*o,c)}}function lt(n,o){var c=o-n;return c?j(n,c>180||c<-180?c-360*Math.round(c/360):c):constant(isNaN(n)?o:n)}function _t(n){return(n=+n)==1?Pt:function(o,c){return c-o?ht(o,c,n):z(isNaN(o)?c:o)}}function Pt(n,o){var c=o-n;return c?j(n,c):z(isNaN(n)?o:n)}var Ot=function n(o){var c=_t(o);function g(w,v){var x=c((w=wn(w)).r,(v=wn(v)).r),k=c(w.g,v.g),O=c(w.b,v.b),Z=Pt(w.opacity,v.opacity);return function(X){return w.r=x(X),w.g=k(X),w.b=O(X),w.opacity=Z(X),w+""}}return g.gamma=n,g}(1);function ue(n){return function(o){var c=o.length,g=new Array(c),w=new Array(c),v=new Array(c),x,k;for(x=0;x<c;++x)k=wn(o[x]),g[x]=k.r||0,w[x]=k.g||0,v[x]=k.b||0;return g=n(g),w=n(w),v=n(v),k.opacity=1,function(O){return k.r=g(O),k.g=w(O),k.b=v(O),k+""}}}var be=ue(F),pe=ue(K),le=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,De=new RegExp(le.source,"g");function jn(n){return function(){return n}}function tr(n){return function(o){return n(o)+""}}function rn(n,o){var c=le.lastIndex=De.lastIndex=0,g,w,v,x=-1,k=[],O=[];for(n=n+"",o=o+"";(g=le.exec(n))&&(w=De.exec(o));)(v=w.index)>c&&(v=o.slice(c,v),k[x]?k[x]+=v:k[++x]=v),(g=g[0])===(w=w[0])?k[x]?k[x]+=w:k[++x]=w:(k[++x]=null,O.push({i:x,x:xe(g,w)})),c=De.lastIndex;return c<o.length&&(v=o.slice(c),k[x]?k[x]+=v:k[++x]=v),k.length<2?O[0]?tr(O[0].x):jn(o):(o=O.length,function(Z){for(var X=0,ft;X<o;++X)k[(ft=O[X]).i]=ft.x(Z);return k.join("")})}function on(n,o){var c;return(typeof o=="number"?xe:o instanceof xn?Ot:(c=xn(o))?(o=c,Ot):rn)(n,o)}function er(n){return function(){this.removeAttribute(n)}}function nr(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Ur(n,o,c){var g,w=c+"",v;return function(){var x=this.getAttribute(n);return x===w?null:x===g?v:v=o(g=x,c)}}function Po(n,o,c){var g,w=c+"",v;return function(){var x=this.getAttributeNS(n.space,n.local);return x===w?null:x===g?v:v=o(g=x,c)}}function Pr(n,o,c){var g,w,v;return function(){var x,k=c(this),O;return k==null?void this.removeAttribute(n):(x=this.getAttribute(n),O=k+"",x===O?null:x===g&&O===w?v:(w=O,v=o(g=x,k)))}}function To(n,o,c){var g,w,v;return function(){var x,k=c(this),O;return k==null?void this.removeAttributeNS(n.space,n.local):(x=this.getAttributeNS(n.space,n.local),O=k+"",x===O?null:x===g&&O===w?v:(w=O,v=o(g=x,k)))}}function ao(n,o){var c=(0,ke.Z)(n),g=c==="transform"?Ze:on;return this.attrTween(n,typeof o=="function"?(c.local?To:Pr)(c,g,ut(this,"attr."+n,o)):o==null?(c.local?nr:er)(c):(c.local?Po:Ur)(c,g,o))}function ko(n,o){return function(c){this.setAttribute(n,o.call(this,c))}}function Ro(n,o){return function(c){this.setAttributeNS(n.space,n.local,o.call(this,c))}}function Io(n,o){var c,g;function w(){var v=o.apply(this,arguments);return v!==g&&(c=(g=v)&&Ro(n,v)),c}return w._value=o,w}function Hn(n,o){var c,g;function w(){var v=o.apply(this,arguments);return v!==g&&(c=(g=v)&&ko(n,v)),c}return w._value=o,w}function Rt(n,o){var c="attr."+n;if(arguments.length<2)return(c=this.tween(c))&&c._value;if(o==null)return this.tween(c,null);if(typeof o!="function")throw new Error;var g=(0,ke.Z)(n);return this.tween(c,(g.local?Io:Hn)(g,o))}function Do(n,o){return function(){Kn(this,n).delay=+o.apply(this,arguments)}}function co(n,o){return o=+o,function(){Kn(this,n).delay=o}}function zo(n){var o=this._id;return arguments.length?this.each((typeof n=="function"?Do:co)(o,n)):$t(this.node(),o).delay}function uo(n,o){return function(){Ft(this,n).duration=+o.apply(this,arguments)}}function lo(n,o){return o=+o,function(){Ft(this,n).duration=o}}function $o(n){var o=this._id;return arguments.length?this.each((typeof n=="function"?uo:lo)(o,n)):$t(this.node(),o).duration}function Bo(n,o){if(typeof o!="function")throw new Error;return function(){Ft(this,n).ease=o}}function Ho(n){var o=this._id;return arguments.length?this.each(Bo(o,n)):$t(this.node(),o).ease}function Oo(n,o){return function(){var c=o.apply(this,arguments);if(typeof c!="function")throw new Error;Ft(this,n).ease=c}}function rr(n){if(typeof n!="function")throw new Error;return this.each(Oo(this._id,n))}var fo=B(73409);function ho(n){typeof n!="function"&&(n=(0,fo.Z)(n));for(var o=this._groups,c=o.length,g=new Array(c),w=0;w<c;++w)for(var v=o[w],x=v.length,k=g[w]=[],O,Z=0;Z<x;++Z)(O=v[Z])&&n.call(O,O.__data__,Z,v)&&k.push(O);return new ve(g,this._parents,this._name,this._id)}function go(n){if(n._id!==this._id)throw new Error;for(var o=this._groups,c=n._groups,g=o.length,w=c.length,v=Math.min(g,w),x=new Array(g),k=0;k<v;++k)for(var O=o[k],Z=c[k],X=O.length,ft=x[k]=new Array(X),xt,Ct=0;Ct<X;++Ct)(xt=O[Ct]||Z[Ct])&&(ft[Ct]=xt);for(;k<g;++k)x[k]=o[k];return new ve(x,this._parents,this._name,this._id)}function po(n){return(n+"").trim().split(/^|\s+/).every(function(o){var c=o.indexOf(".");return c>=0&&(o=o.slice(0,c)),!o||o==="start"})}function Gr(n,o,c){var g,w,v=po(o)?Kn:Ft;return function(){var x=v(this,n),k=x.on;k!==g&&(w=(g=k).copy()).on(o,c),x.on=w}}function mo(n,o){var c=this._id;return arguments.length<2?$t(this.node(),c).on.on(n):this.each(Gr(c,n,o))}function Zo(n){return function(){var o=this.parentNode;for(var c in this.__transition)if(+c!==n)return;o&&o.removeChild(this)}}function Lo(){return this.on("end.remove",Zo(this._id))}var Tr=B(66456);function On(n){var o=this._name,c=this._id;typeof n!="function"&&(n=(0,Tr.Z)(n));for(var g=this._groups,w=g.length,v=new Array(w),x=0;x<w;++x)for(var k=g[x],O=k.length,Z=v[x]=new Array(O),X,ft,xt=0;xt<O;++xt)(X=k[xt])&&(ft=n.call(X,X.__data__,xt,k))&&("__data__"in X&&(ft.__data__=X.__data__),Z[xt]=ft,Ue(Z[xt],o,c,xt,Z,$t(X,c)));return new ve(v,this._parents,o,c)}var Xo=B(16851);function Vo(n){var o=this._name,c=this._id;typeof n!="function"&&(n=(0,Xo.Z)(n));for(var g=this._groups,w=g.length,v=[],x=[],k=0;k<w;++k)for(var O=g[k],Z=O.length,X,ft=0;ft<Z;++ft)if(X=O[ft]){for(var xt=n.call(X,X.__data__,ft,O),Ct,re=$t(X,c),Kt=0,me=xt.length;Kt<me;++Kt)(Ct=xt[Kt])&&Ue(Ct,o,c,Kt,xt,re);v.push(xt),x.push(X)}return new ve(v,x,o,c)}var Fo=Mt.ZP.prototype.constructor;function Qr(){return new Fo(this._groups,this._parents)}var or=B(77932);function Yo(n,o){var c,g,w;return function(){var v=(0,or.S)(this,n),x=(this.style.removeProperty(n),(0,or.S)(this,n));return v===x?null:v===c&&x===g?w:w=o(c=v,g=x)}}function yo(n){return function(){this.style.removeProperty(n)}}function qr(n,o,c){var g,w=c+"",v;return function(){var x=(0,or.S)(this,n);return x===w?null:x===g?v:v=o(g=x,c)}}function Ko(n,o,c){var g,w,v;return function(){var x=(0,or.S)(this,n),k=c(this),O=k+"";return k==null&&(O=k=(this.style.removeProperty(n),(0,or.S)(this,n))),x===O?null:x===g&&O===w?v:(w=O,v=o(g=x,k))}}function kr(n,o){var c,g,w,v="style."+o,x="end."+v,k;return function(){var O=Ft(this,n),Z=O.on,X=O.value[v]==null?k||(k=yo(o)):void 0;(Z!==c||w!==X)&&(g=(c=Z).copy()).on(x,w=X),O.on=g}}function Zn(n,o,c){var g=(n+="")=="transform"?vr:on;return o==null?this.styleTween(n,Yo(n,g)).on("end.style."+n,yo(n)):typeof o=="function"?this.styleTween(n,Ko(n,g,ut(this,"style."+n,o))).each(kr(this._id,n)):this.styleTween(n,qr(n,g,o),c).on("end.style."+n,null)}function xo(n,o,c){return function(g){this.style.setProperty(n,o.call(this,g),c)}}function wo(n,o,c){var g,w;function v(){var x=o.apply(this,arguments);return x!==w&&(g=(w=x)&&xo(n,x,c)),g}return v._value=o,v}function Wo(n,o,c){var g="style."+(n+="");if(arguments.length<2)return(g=this.tween(g))&&g._value;if(o==null)return this.tween(g,null);if(typeof o!="function")throw new Error;return this.tween(g,wo(n,o,c==null?"":c))}function Uo(n){return function(){this.textContent=n}}function Go(n){return function(){var o=n(this);this.textContent=o==null?"":o}}function Qo(n){return this.tween("text",typeof n=="function"?Go(ut(this,"text",n)):Uo(n==null?"":n+""))}function _o(n){return function(o){this.textContent=n.call(this,o)}}function bo(n){var o,c;function g(){var w=n.apply(this,arguments);return w!==c&&(o=(c=w)&&_o(w)),o}return g._value=n,g}function Jr(n){var o="text";if(arguments.length<1)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,bo(n))}function vo(){for(var n=this._name,o=this._id,c=jr(),g=this._groups,w=g.length,v=0;v<w;++v)for(var x=g[v],k=x.length,O,Z=0;Z<k;++Z)if(O=x[Z]){var X=$t(O,o);Ue(O,n,c,Z,x,{time:X.time+X.delay+X.duration,delay:0,duration:X.duration,ease:X.ease})}return new ve(g,this._parents,n,c)}function sn(){var n,o,c=this,g=c._id,w=c.size();return new Promise(function(v,x){var k={value:x},O={value:function(){--w===0&&v()}};c.each(function(){var Z=Ft(this,g),X=Z.on;X!==n&&(o=(n=X).copy(),o._.cancel.push(k),o._.interrupt.push(k),o._.end.push(O)),Z.on=o}),w===0&&v()})}var Ln=0;function ve(n,o,c,g){this._groups=n,this._parents=o,this._name=c,this._id=g}function qo(n){return(0,Mt.ZP)().transition(n)}function jr(){return++Ln}var ze=Mt.ZP.prototype;ve.prototype=qo.prototype={constructor:ve,select:On,selectAll:Vo,selectChild:ze.selectChild,selectChildren:ze.selectChildren,filter:ho,merge:go,selection:Qr,transition:vo,call:ze.call,nodes:ze.nodes,node:ze.node,size:ze.size,empty:ze.empty,each:ze.each,on:mo,attr:ao,attrTween:Rt,style:Zn,styleTween:Wo,text:Qo,textTween:Jr,remove:Lo,tween:kn,delay:zo,duration:$o,ease:Ho,easeVarying:rr,end:sn,[Symbol.iterator]:ze[Symbol.iterator]};function Jo(n){return n*n*n}function li(n){return--n*n*n+1}function jo(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var So={time:null,delay:0,duration:250,ease:jo};function to(n,o){for(var c;!(c=n.__transition)||!(c=c[o]);)if(!(n=n.parentNode))throw new Error(`transition ${o} not found`);return c}function Eo(n){var o,c;n instanceof ve?(o=n._id,n=n._name):(o=jr(),(c=So).time=Nn(),n=n==null?null:n+"");for(var g=this._groups,w=g.length,v=0;v<w;++v)for(var x=g[v],k=x.length,O,Z=0;Z<k;++Z)(O=x[Z])&&Ue(O,n,o,Z,x,c||to(O,o));return new ve(g,this._parents,n,o)}Mt.ZP.prototype.interrupt=Vr,Mt.ZP.prototype.transition=Eo;var an=n=>()=>n;function eo(n,{sourceEvent:o,target:c,transform:g,dispatch:w}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},target:{value:c,enumerable:!0,configurable:!0},transform:{value:g,enumerable:!0,configurable:!0},_:{value:w}})}function Ve(n,o,c){this.k=n,this.x=o,this.y=c}Ve.prototype={constructor:Ve,scale:function(n){return n===1?this:new Ve(this.k*n,this.x,this.y)},translate:function(n,o){return n===0&o===0?this:new Ve(this.k,this.x+this.k*n,this.y+this.k*o)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Xn=new Ve(1,0,0);No.prototype=Ve.prototype;function No(n){for(;!n.__zoom;)if(!(n=n.parentNode))return Xn;return n.__zoom}function Rr(n){n.stopImmediatePropagation()}function $e(n){n.preventDefault(),n.stopImmediatePropagation()}function ir(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function ti(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function Co(){return this.__zoom||Xn}function ei(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function ni(){return navigator.maxTouchPoints||"ontouchstart"in this}function Mo(n,o,c){var g=n.invertX(o[0][0])-c[0][0],w=n.invertX(o[1][0])-c[1][0],v=n.invertY(o[0][1])-c[0][1],x=n.invertY(o[1][1])-c[1][1];return n.translate(w>g?(g+w)/2:Math.min(0,g)||Math.max(0,w),x>v?(v+x)/2:Math.min(0,v)||Math.max(0,x))}function ri(){var n=ir,o=ti,c=Mo,g=ei,w=ni,v=[0,1/0],x=[[-1/0,-1/0],[1/0,1/0]],k=250,O=at,Z=(0,l.Z)("start","zoom","end"),X,ft,xt,Ct=500,re=150,Kt=0,me=10;function At(C){C.property("__zoom",Co).on("wheel.zoom",bn,{passive:!1}).on("mousedown.zoom",Ir).on("dblclick.zoom",Dr).filter(w).on("touchstart.zoom",ar).on("touchmove.zoom",oi).on("touchend.zoom touchcancel.zoom",ii).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}At.transform=function(C,pt,L,bt){var kt=C.selection?C.selection():C;kt.property("__zoom",Co),C!==kt?un(C,pt,L,bt):kt.interrupt().each(function(){Se(this,arguments).event(bt).start().zoom(null,typeof pt=="function"?pt.apply(this,arguments):pt).end()})},At.scaleBy=function(C,pt,L,bt){At.scaleTo(C,function(){var kt=this.__zoom.k,Dt=typeof pt=="function"?pt.apply(this,arguments):pt;return kt*Dt},L,bt)},At.scaleTo=function(C,pt,L,bt){At.transform(C,function(){var kt=o.apply(this,arguments),Dt=this.__zoom,zt=L==null?_n(kt):typeof L=="function"?L.apply(this,arguments):L,Xt=Dt.invert(zt),Wt=typeof pt=="function"?pt.apply(this,arguments):pt;return c(Fe(cn(Dt,Wt),zt,Xt),kt,x)},L,bt)},At.translateBy=function(C,pt,L,bt){At.transform(C,function(){return c(this.__zoom.translate(typeof pt=="function"?pt.apply(this,arguments):pt,typeof L=="function"?L.apply(this,arguments):L),o.apply(this,arguments),x)},null,bt)},At.translateTo=function(C,pt,L,bt,kt){At.transform(C,function(){var Dt=o.apply(this,arguments),zt=this.__zoom,Xt=bt==null?_n(Dt):typeof bt=="function"?bt.apply(this,arguments):bt;return c(Xn.translate(Xt[0],Xt[1]).scale(zt.k).translate(typeof pt=="function"?-pt.apply(this,arguments):-pt,typeof L=="function"?-L.apply(this,arguments):-L),Dt,x)},bt,kt)};function cn(C,pt){return pt=Math.max(v[0],Math.min(v[1],pt)),pt===C.k?C:new Ve(pt,C.x,C.y)}function Fe(C,pt,L){var bt=pt[0]-L[0]*C.k,kt=pt[1]-L[1]*C.k;return bt===C.x&&kt===C.y?C:new Ve(C.k,bt,kt)}function _n(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function un(C,pt,L,bt){C.on("start.zoom",function(){Se(this,arguments).event(bt).start()}).on("interrupt.zoom end.zoom",function(){Se(this,arguments).event(bt).end()}).tween("zoom",function(){var kt=this,Dt=arguments,zt=Se(kt,Dt).event(bt),Xt=o.apply(kt,Dt),Wt=L==null?_n(Xt):typeof L=="function"?L.apply(kt,Dt):L,Ee=Math.max(Xt[1][0]-Xt[0][0],Xt[1][1]-Xt[0][1]),jt=kt.__zoom,Ne=typeof pt=="function"?pt.apply(kt,Dt):pt,Ce=O(jt.invert(Wt).concat(Ee/jt.k),Ne.invert(Wt).concat(Ee/Ne.k));return function(te){if(te===1)te=Ne;else{var Ye=Ce(te),cr=Ee/Ye[2];te=new Ve(cr,Wt[0]-Ye[0]*cr,Wt[1]-Ye[1]*cr)}zt.zoom(null,te)}})}function Se(C,pt,L){return!L&&C.__zooming||new sr(C,pt)}function sr(C,pt){this.that=C,this.args=pt,this.active=0,this.sourceEvent=null,this.extent=o.apply(C,pt),this.taps=0}sr.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,pt){return this.mouse&&C!=="mouse"&&(this.mouse[1]=pt.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=pt.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=pt.invert(this.touch1[0])),this.that.__zoom=pt,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var pt=(0,yt.Z)(this.that).datum();Z.call(C,this.that,new eo(C,{sourceEvent:this.sourceEvent,target:At,type:C,transform:this.that.__zoom,dispatch:Z}),pt)}};function bn(C,...pt){if(!n.apply(this,arguments))return;var L=Se(this,pt).event(C),bt=this.__zoom,kt=Math.max(v[0],Math.min(v[1],bt.k*Math.pow(2,g.apply(this,arguments)))),Dt=(0,St.Z)(C);if(L.wheel)(L.mouse[0][0]!==Dt[0]||L.mouse[0][1]!==Dt[1])&&(L.mouse[1]=bt.invert(L.mouse[0]=Dt)),clearTimeout(L.wheel);else{if(bt.k===kt)return;L.mouse=[Dt,bt.invert(Dt)],Oe(this),L.start()}$e(C),L.wheel=setTimeout(zt,re),L.zoom("mouse",c(Fe(cn(bt,kt),L.mouse[0],L.mouse[1]),L.extent,x));function zt(){L.wheel=null,L.end()}}function Ir(C,...pt){if(xt||!n.apply(this,arguments))return;var L=C.currentTarget,bt=Se(this,pt,!0).event(C),kt=(0,yt.Z)(C.view).on("mousemove.zoom",Wt,!0).on("mouseup.zoom",Ee,!0),Dt=(0,St.Z)(C,L),zt=C.clientX,Xt=C.clientY;(0,it.Z)(C.view),Rr(C),bt.mouse=[Dt,this.__zoom.invert(Dt)],Oe(this),bt.start();function Wt(jt){if($e(jt),!bt.moved){var Ne=jt.clientX-zt,Ce=jt.clientY-Xt;bt.moved=Ne*Ne+Ce*Ce>Kt}bt.event(jt).zoom("mouse",c(Fe(bt.that.__zoom,bt.mouse[0]=(0,St.Z)(jt,L),bt.mouse[1]),bt.extent,x))}function Ee(jt){kt.on("mousemove.zoom mouseup.zoom",null),(0,it.D)(jt.view,bt.moved),$e(jt),bt.event(jt).end()}}function Dr(C,...pt){if(n.apply(this,arguments)){var L=this.__zoom,bt=(0,St.Z)(C.changedTouches?C.changedTouches[0]:C,this),kt=L.invert(bt),Dt=L.k*(C.shiftKey?.5:2),zt=c(Fe(cn(L,Dt),bt,kt),o.apply(this,pt),x);$e(C),k>0?(0,yt.Z)(this).transition().duration(k).call(un,zt,bt,C):(0,yt.Z)(this).call(At.transform,zt,bt,C)}}function ar(C,...pt){if(n.apply(this,arguments)){var L=C.touches,bt=L.length,kt=Se(this,pt,C.changedTouches.length===bt).event(C),Dt,zt,Xt,Wt;for(Rr(C),zt=0;zt<bt;++zt)Xt=L[zt],Wt=(0,St.Z)(Xt,this),Wt=[Wt,this.__zoom.invert(Wt),Xt.identifier],kt.touch0?!kt.touch1&&kt.touch0[2]!==Wt[2]&&(kt.touch1=Wt,kt.taps=0):(kt.touch0=Wt,Dt=!0,kt.taps=1+!!X);X&&(X=clearTimeout(X)),Dt&&(kt.taps<2&&(ft=Wt[0],X=setTimeout(function(){X=null},Ct)),Oe(this),kt.start())}}function oi(C,...pt){if(this.__zooming){var L=Se(this,pt).event(C),bt=C.changedTouches,kt=bt.length,Dt,zt,Xt,Wt;for($e(C),Dt=0;Dt<kt;++Dt)zt=bt[Dt],Xt=(0,St.Z)(zt,this),L.touch0&&L.touch0[2]===zt.identifier?L.touch0[0]=Xt:L.touch1&&L.touch1[2]===zt.identifier&&(L.touch1[0]=Xt);if(zt=L.that.__zoom,L.touch1){var Ee=L.touch0[0],jt=L.touch0[1],Ne=L.touch1[0],Ce=L.touch1[1],te=(te=Ne[0]-Ee[0])*te+(te=Ne[1]-Ee[1])*te,Ye=(Ye=Ce[0]-jt[0])*Ye+(Ye=Ce[1]-jt[1])*Ye;zt=cn(zt,Math.sqrt(te/Ye)),Xt=[(Ee[0]+Ne[0])/2,(Ee[1]+Ne[1])/2],Wt=[(jt[0]+Ce[0])/2,(jt[1]+Ce[1])/2]}else if(L.touch0)Xt=L.touch0[0],Wt=L.touch0[1];else return;L.zoom("touch",c(Fe(zt,Xt,Wt),L.extent,x))}}function ii(C,...pt){if(this.__zooming){var L=Se(this,pt).event(C),bt=C.changedTouches,kt=bt.length,Dt,zt;for(Rr(C),xt&&clearTimeout(xt),xt=setTimeout(function(){xt=null},Ct),Dt=0;Dt<kt;++Dt)zt=bt[Dt],L.touch0&&L.touch0[2]===zt.identifier?delete L.touch0:L.touch1&&L.touch1[2]===zt.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(zt=(0,St.Z)(zt,this),Math.hypot(ft[0]-zt[0],ft[1]-zt[1])<me)){var Xt=(0,yt.Z)(this).on("dblclick.zoom");Xt&&Xt.apply(this,arguments)}}}return At.wheelDelta=function(C){return arguments.length?(g=typeof C=="function"?C:an(+C),At):g},At.filter=function(C){return arguments.length?(n=typeof C=="function"?C:an(!!C),At):n},At.touchable=function(C){return arguments.length?(w=typeof C=="function"?C:an(!!C),At):w},At.extent=function(C){return arguments.length?(o=typeof C=="function"?C:an([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),At):o},At.scaleExtent=function(C){return arguments.length?(v[0]=+C[0],v[1]=+C[1],At):[v[0],v[1]]},At.translateExtent=function(C){return arguments.length?(x[0][0]=+C[0][0],x[1][0]=+C[1][0],x[0][1]=+C[0][1],x[1][1]=+C[1][1],At):[[x[0][0],x[0][1]],[x[1][0],x[1][1]]]},At.constrain=function(C){return arguments.length?(c=C,At):c},At.duration=function(C){return arguments.length?(k=+C,At):k},At.interpolate=function(C){return arguments.length?(O=C,At):O},At.on=function(){var C=Z.on.apply(Z,arguments);return C===Z?At:C},At.clickDistance=function(C){return arguments.length?(Kt=(C=+C)*C,At):Math.sqrt(Kt)},At.tapDistance=function(C){return arguments.length?(me=+C,At):me},At}},61512:function(dt,gt,B){"use strict";B.d(gt,{X:function(){return l}});function l(J,tt){if(Object.is(J,tt))return!0;if(typeof J!="object"||J===null||typeof tt!="object"||tt===null)return!1;if(J instanceof Map&&tt instanceof Map){if(J.size!==tt.size)return!1;for(const[st,at]of J)if(!Object.is(at,tt.get(st)))return!1;return!0}if(J instanceof Set&&tt instanceof Set){if(J.size!==tt.size)return!1;for(const st of J)if(!tt.has(st))return!1;return!0}const Tt=Object.keys(J);if(Tt.length!==Object.keys(tt).length)return!1;for(const st of Tt)if(!Object.prototype.hasOwnProperty.call(tt,st)||!Object.is(J[st],tt[st]))return!1;return!0}var it=(J,tt)=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { shallow } from 'zustand/shallow'`."),l(J,tt))}}]);
}());