!(function(){var us=Object.defineProperty,ls=Object.defineProperties;var fs=Object.getOwnPropertyDescriptors;var No=Object.getOwnPropertySymbols;var xi=Object.prototype.hasOwnProperty,wi=Object.prototype.propertyIsEnumerable;var ai=Math.pow,mi=(ut,dt,B)=>dt in ut?us(ut,dt,{enumerable:!0,configurable:!0,writable:!0,value:B}):ut[dt]=B,wt=(ut,dt)=>{for(var B in dt||(dt={}))xi.call(dt,B)&&mi(ut,B,dt[B]);if(No)for(var B of No(dt))wi.call(dt,B)&&mi(ut,B,dt[B]);return ut},jt=(ut,dt)=>ls(ut,fs(dt));var Br=(ut,dt)=>{var B={};for(var b in ut)xi.call(ut,b)&&dt.indexOf(b)<0&&(B[b]=ut[b]);if(ut!=null&&No)for(var b of No(ut))dt.indexOf(b)<0&&wi.call(ut,b)&&(B[b]=ut[b]);return B};(self.webpackChunk_ant_design_pro_flow=self.webpackChunk_ant_design_pro_flow||[]).push([[972],{68107:function(ut,dt,B){"use strict";B.d(dt,{u5:function(){return Ze},HH:function(){return qt},s_:function(){return Fn},Ly:function(){return it},x$:function(){return li},oI:function(){return Mn},VP:function(){return Ie},YH:function(){return tn},OW:function(){return yn},ll:function(){return ki},_K:function(){return Ur},oR:function(){return Ht},AC:function(){return Zt},Sj:function(){return Ti}});var b=B(11527),m=B(50959),K=B(76295),ct=B(5541),_t=B(62885),tt=B(89416),nt=B(41468),lt=B(13802),vt=B(97565),zt=B(49289),kt=B(5873),Kt=t=>()=>t;function me(t,{sourceEvent:e,subject:r,target:i,identifier:s,active:u,x:c,y:l,dx:g,dy:p,dispatch:h}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:r,enumerable:!0,configurable:!0},target:{value:i,enumerable:!0,configurable:!0},identifier:{value:s,enumerable:!0,configurable:!0},active:{value:u,enumerable:!0,configurable:!0},x:{value:c,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:g,enumerable:!0,configurable:!0},dy:{value:p,enumerable:!0,configurable:!0},_:{value:h}})}me.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function wr(t){return!t.ctrlKey&&!t.button}function vn(){return this.parentNode}function cn(t,e){return e==null?{x:t.x,y:t.y}:e}function un(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oe(){var t=wr,e=vn,r=cn,i=un,s={},u=(0,vt.Z)("start","drag","end"),c=0,l,g,p,h,y=0;function S(N){N.on("mousedown.drag",E).filter(i).on("touchstart.drag",R).on("touchmove.drag",D,kt.Q7).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function E(N,$){if(!(h||!t.call(this,N,$))){var O=I(this,e.call(this,N,$),N,$,"mouse");O&&((0,nt.Z)(N.view).on("mousemove.drag",T,kt.Dd).on("mouseup.drag",M,kt.Dd),(0,zt.Z)(N.view),(0,kt.rG)(N),p=!1,l=N.clientX,g=N.clientY,O("start",N))}}function T(N){if((0,kt.ZP)(N),!p){var $=N.clientX-l,O=N.clientY-g;p=$*$+O*O>y}s.mouse("drag",N)}function M(N){(0,nt.Z)(N.view).on("mousemove.drag mouseup.drag",null),(0,zt.D)(N.view,p),(0,kt.ZP)(N),s.mouse("end",N)}function R(N,$){if(t.call(this,N,$)){var O=N.changedTouches,X=e.call(this,N,$),G=O.length,J,ot;for(J=0;J<G;++J)(ot=I(this,X,N,$,O[J].identifier,O[J]))&&((0,kt.rG)(N),ot("start",N,O[J]))}}function D(N){var $=N.changedTouches,O=$.length,X,G;for(X=0;X<O;++X)(G=s[$[X].identifier])&&((0,kt.ZP)(N),G("drag",N,$[X]))}function z(N){var $=N.changedTouches,O=$.length,X,G;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),X=0;X<O;++X)(G=s[$[X].identifier])&&((0,kt.rG)(N),G("end",N,$[X]))}function I(N,$,O,X,G,J){var ot=u.copy(),W=(0,lt.Z)(J||O,$),rt,P,q;if((q=r.call(N,new me("beforestart",{sourceEvent:O,target:S,identifier:G,active:c,x:W[0],y:W[1],dx:0,dy:0,dispatch:ot}),X))!=null)return rt=q.x-W[0]||0,P=q.y-W[1]||0,function et(gt,St,xt){var A=W,j;switch(gt){case"start":s[G]=et,j=c++;break;case"end":delete s[G],--c;case"drag":W=(0,lt.Z)(xt||St,$),j=c;break}ot.call(gt,N,new me(gt,{sourceEvent:St,subject:q,target:S,identifier:G,active:j,x:W[0]+rt,y:W[1]+P,dx:W[0]-A[0],dy:W[1]-A[1],dispatch:ot}),X)}}return S.filter=function(N){return arguments.length?(t=typeof N=="function"?N:Kt(!!N),S):t},S.container=function(N){return arguments.length?(e=typeof N=="function"?N:Kt(N),S):e},S.subject=function(N){return arguments.length?(r=typeof N=="function"?N:Kt(N),S):r},S.touchable=function(N){return arguments.length?(i=typeof N=="function"?N:Kt(!!N),S):i},S.on=function(){var N=u.on.apply(u,arguments);return N===u?S:N},S.clickDistance=function(N){return arguments.length?(y=(N=+N)*N,S):Math.sqrt(y)},S}var We=B(10422);const Te=(0,m.createContext)(null),_r=Te.Provider,ne={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},br=ne.error001();function Ht(t,e){const r=(0,m.useContext)(Te);if(r===null)throw new Error(br);return(0,ct.s)(r,t,e)}const Zt=()=>{const t=(0,m.useContext)(Te);if(t===null)throw new Error(br);return(0,m.useMemo)(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Zr=t=>t.userSelectionActive?"none":"all";function Fn(u){var c=u,{position:t,children:e,className:r,style:i}=c,s=Br(c,["position","children","className","style"]);const l=Ht(Zr),g=`${t}`.split("-");return(0,b.jsx)("div",jt(wt({className:(0,K.Z)(["react-flow__panel",r,...g]),style:jt(wt({},i),{pointerEvents:l})},s),{children:e}))}function Lr({proOptions:t,position:e="bottom-right"}){return t!=null&&t.hideAttribution?null:(0,b.jsx)(Fn,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:(0,b.jsx)("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Xr=y=>{var S=y,{x:t,y:e,label:r,labelStyle:i={},labelShowBg:s=!0,labelBgStyle:u={},labelBgPadding:c=[2,4],labelBgBorderRadius:l=2,children:g,className:p}=S,h=Br(S,["x","y","label","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","children","className"]);const E=(0,m.useRef)(null),[T,M]=(0,m.useState)({x:0,y:0,width:0,height:0}),R=(0,K.Z)(["react-flow__edge-textwrapper",p]);return(0,m.useEffect)(()=>{if(E.current){const D=E.current.getBBox();M({x:D.x,y:D.y,width:D.width,height:D.height})}},[r]),typeof r=="undefined"||!r?null:(0,b.jsxs)("g",jt(wt({transform:`translate(${t-T.width/2} ${e-T.height/2})`,className:R,visibility:T.width?"visible":"hidden"},h),{children:[s&&(0,b.jsx)("rect",{width:T.width+2*c[0],x:-c[0],y:-c[1],height:T.height+2*c[1],className:"react-flow__edge-textbg",style:u,rx:l,ry:l}),(0,b.jsx)("text",{className:"react-flow__edge-text",y:T.height/2,dy:"0.3em",ref:E,style:i,children:r}),g]}))};var Yn=(0,m.memo)(Xr);const Sn=t=>({width:t.offsetWidth,height:t.offsetHeight}),je=(t,e=0,r=1)=>Math.min(Math.max(t,e),r),Kn=(t={x:0,y:0},e)=>({x:je(t.x,e[0][0],e[1][0]),y:je(t.y,e[0][1],e[1][1])}),Un=(t,e,r)=>t<e?je(Math.abs(t-e),1,50)/50:t>r?-je(Math.abs(t-r),1,50)/50:0,Wn=(t,e)=>{const r=Un(t.x,35,e.width-35)*20,i=Un(t.y,35,e.height-35)*20;return[r,i]},En=t=>{var e;return((e=t.getRootNode)==null?void 0:e.call(t))||(window==null?void 0:window.document)},ln=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Be=({x:t,y:e,width:r,height:i})=>({x:t,y:e,x2:t+r,y2:e+i}),Nn=({x:t,y:e,x2:r,y2:i})=>({x:t,y:e,width:r-t,height:i-e}),fn=t=>jt(wt({},t.positionAbsolute||{x:0,y:0}),{width:t.width||0,height:t.height||0}),Mn=(t,e)=>Nn(ln(Be(t),Be(e))),dn=(t,e)=>{const r=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),i=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(r*i)},xe=t=>Lt(t.width)&&Lt(t.height)&&Lt(t.x)&&Lt(t.y),Lt=t=>!isNaN(t)&&isFinite(t),Vt=Symbol.for("internals"),hn=["Enter"," ","Escape"],Cn=(t,e)=>{},ke=t=>"nativeEvent"in t;function An(t){var s,u;const e=ke(t)?t.nativeEvent:t,r=((u=(s=e.composedPath)==null?void 0:s.call(e))==null?void 0:u[0])||t.target;return["INPUT","SELECT","TEXTAREA"].includes(r==null?void 0:r.nodeName)||(r==null?void 0:r.hasAttribute("contenteditable"))||!!(r!=null&&r.closest(".nokey"))}const Pn=t=>"clientX"in t,we=(t,e)=>{var u,c,l,g;const r=Pn(t),i=r?t.clientX:(u=t.touches)==null?void 0:u[0].clientX,s=r?t.clientY:(c=t.touches)==null?void 0:c[0].clientY;return{x:i-((l=e==null?void 0:e.left)!=null?l:0),y:s-((g=e==null?void 0:e.top)!=null?g:0)}},Se=()=>{var t;return typeof navigator!="undefined"&&((t=navigator==null?void 0:navigator.userAgent)==null?void 0:t.indexOf("Mac"))>=0},Ze=({id:t,path:e,labelX:r,labelY:i,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p,style:h,markerEnd:y,markerStart:S,interactionWidth:E=20})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("path",{id:t,style:h,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:y,markerStart:S}),E&&(0,b.jsx)("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:E,className:"react-flow__edge-interaction"}),s&&Lt(r)&&Lt(i)?(0,b.jsx)(Yn,{x:r,y:i,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p}):null]});Ze.displayName="BaseEdge";const Vr=(t,e)=>typeof e!="undefined"&&e?`url(#${e})`:typeof t!="undefined"?`url(#react-flow__${t})`:"none";function Le(t,e,r){return r===void 0?r:i=>{const s=e().edges.find(u=>u.id===t);s&&r(i,wt({},s))}}function vr({sourceX:t,sourceY:e,targetX:r,targetY:i}){const s=Math.abs(r-t)/2,u=r<t?r+s:r-s,c=Math.abs(i-e)/2,l=i<e?i+c:i-c;return[u,l,s,c]}function Sr({sourceX:t,sourceY:e,targetX:r,targetY:i,sourceControlX:s,sourceControlY:u,targetControlX:c,targetControlY:l}){const g=t*.125+s*.375+c*.375+r*.125,p=e*.125+u*.375+l*.375+i*.125,h=Math.abs(g-t),y=Math.abs(p-e);return[g,p,h,y]}var Re;(function(t){t.Strict="strict",t.Loose="loose"})(Re||(Re={}));var Xe;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Xe||(Xe={}));var gn;(function(t){t.Partial="partial",t.Full="full"})(gn||(gn={}));var De;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(De||(De={}));var Ge;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(Ge||(Ge={}));var it;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(it||(it={}));function jn({pos:t,x1:e,y1:r,x2:i,y2:s}){return t===it.Left||t===it.Right?[.5*(e+i),r]:[e,.5*(r+s)]}function Qe({sourceX:t,sourceY:e,sourcePosition:r=it.Bottom,targetX:i,targetY:s,targetPosition:u=it.Top}){const[c,l]=jn({pos:r,x1:t,y1:e,x2:i,y2:s}),[g,p]=jn({pos:u,x1:i,y1:s,x2:t,y2:e}),[h,y,S,E]=Sr({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:c,sourceControlY:l,targetControlX:g,targetControlY:p});return[`M${t},${e} C${c},${l} ${g},${p} ${i},${s}`,h,y,S,E]}const Ve=(0,m.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,sourcePosition:s=it.Bottom,targetPosition:u=it.Top,label:c,labelStyle:l,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:y,style:S,markerEnd:E,markerStart:T,interactionWidth:M})=>{const[R,D,z]=Qe({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:i,targetPosition:u});return(0,b.jsx)(Ze,{path:R,labelX:D,labelY:z,label:c,labelStyle:l,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:y,style:S,markerEnd:E,markerStart:T,interactionWidth:M})});Ve.displayName="SimpleBezierEdge";const pn={[it.Left]:{x:-1,y:0},[it.Right]:{x:1,y:0},[it.Top]:{x:0,y:-1},[it.Bottom]:{x:0,y:1}},qe=({source:t,sourcePosition:e=it.Bottom,target:r})=>e===it.Left||e===it.Right?t.x<r.x?{x:1,y:0}:{x:-1,y:0}:t.y<r.y?{x:0,y:1}:{x:0,y:-1},Je=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function _e({source:t,sourcePosition:e=it.Bottom,target:r,targetPosition:i=it.Top,center:s,offset:u}){const c=pn[e],l=pn[i],g={x:t.x+c.x*u,y:t.y+c.y*u},p={x:r.x+l.x*u,y:r.y+l.y*u},h=qe({source:g,sourcePosition:e,target:p}),y=h.x!==0?"x":"y",S=h[y];let E=[],T,M;const R={x:0,y:0},D={x:0,y:0},[z,I,N,$]=vr({sourceX:t.x,sourceY:t.y,targetX:r.x,targetY:r.y});if(c[y]*l[y]===-1){T=s.x||z,M=s.y||I;const X=[{x:T,y:g.y},{x:T,y:p.y}],G=[{x:g.x,y:M},{x:p.x,y:M}];c[y]===S?E=y==="x"?X:G:E=y==="x"?G:X}else{const X=[{x:g.x,y:p.y}],G=[{x:p.x,y:g.y}];if(y==="x"?E=c.x===S?G:X:E=c.y===S?X:G,e===i){const P=Math.abs(t[y]-r[y]);if(P<=u){const q=Math.min(u-1,u-P);c[y]===S?R[y]=(g[y]>t[y]?-1:1)*q:D[y]=(p[y]>r[y]?-1:1)*q}}if(e!==i){const P=y==="x"?"y":"x",q=c[y]===l[P],et=g[P]>p[P],gt=g[P]<p[P];(c[y]===1&&(!q&&et||q&&gt)||c[y]!==1&&(!q&&gt||q&&et))&&(E=y==="x"?X:G)}const J={x:g.x+R.x,y:g.y+R.y},ot={x:p.x+D.x,y:p.y+D.y},W=Math.max(Math.abs(J.x-E[0].x),Math.abs(ot.x-E[0].x)),rt=Math.max(Math.abs(J.y-E[0].y),Math.abs(ot.y-E[0].y));W>=rt?(T=(J.x+ot.x)/2,M=E[0].y):(T=E[0].x,M=(J.y+ot.y)/2)}return[[t,{x:g.x+R.x,y:g.y+R.y},...E,{x:p.x+D.x,y:p.y+D.y},r],T,M,N,$]}function Fr(t,e,r,i){const s=Math.min(Je(t,e)/2,Je(e,r)/2,i),{x:u,y:c}=e;if(t.x===u&&u===r.x||t.y===c&&c===r.y)return`L${u} ${c}`;if(t.y===c){const p=t.x<r.x?-1:1,h=t.y<r.y?1:-1;return`L ${u+s*p},${c}Q ${u},${c} ${u},${c+s*h}`}const l=t.x<r.x?1:-1,g=t.y<r.y?-1:1;return`L ${u},${c+s*g}Q ${u},${c} ${u+s*l},${c}`}function yn({sourceX:t,sourceY:e,sourcePosition:r=it.Bottom,targetX:i,targetY:s,targetPosition:u=it.Top,borderRadius:c=5,centerX:l,centerY:g,offset:p=20}){const[h,y,S,E,T]=_e({source:{x:t,y:e},sourcePosition:r,target:{x:i,y:s},targetPosition:u,center:{x:l,y:g},offset:p});return[h.reduce((R,D,z)=>{let I="";return z>0&&z<h.length-1?I=Fr(h[z-1],D,h[z+1],c):I=`${z===0?"M":"L"}${D.x} ${D.y}`,R+=I,R},""),y,S,E,T]}const Tn=(0,m.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p,style:h,sourcePosition:y=it.Bottom,targetPosition:S=it.Top,markerEnd:E,markerStart:T,pathOptions:M,interactionWidth:R})=>{const[D,z,I]=yn({sourceX:t,sourceY:e,sourcePosition:y,targetX:r,targetY:i,targetPosition:S,borderRadius:M==null?void 0:M.borderRadius,offset:M==null?void 0:M.offset});return(0,b.jsx)(Ze,{path:D,labelX:z,labelY:I,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p,style:h,markerEnd:E,markerStart:T,interactionWidth:R})});Tn.displayName="SmoothStepEdge";const Gn=(0,m.memo)(t=>{var e;return(0,b.jsx)(Tn,jt(wt({},t),{pathOptions:(0,m.useMemo)(()=>{var r;return{borderRadius:0,offset:(r=t.pathOptions)==null?void 0:r.offset}},[(e=t.pathOptions)==null?void 0:e.offset])}))});Gn.displayName="StepEdge";function Er({sourceX:t,sourceY:e,targetX:r,targetY:i}){const[s,u,c,l]=vr({sourceX:t,sourceY:e,targetX:r,targetY:i});return[`M ${t},${e}L ${r},${i}`,s,u,c,l]}const Qn=(0,m.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p,style:h,markerEnd:y,markerStart:S,interactionWidth:E})=>{const[T,M,R]=Er({sourceX:t,sourceY:e,targetX:r,targetY:i});return(0,b.jsx)(Ze,{path:T,labelX:M,labelY:R,label:s,labelStyle:u,labelShowBg:c,labelBgStyle:l,labelBgPadding:g,labelBgBorderRadius:p,style:h,markerEnd:y,markerStart:S,interactionWidth:E})});Qn.displayName="StraightEdge";function kn(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function qn({pos:t,x1:e,y1:r,x2:i,y2:s,c:u}){switch(t){case it.Left:return[e-kn(e-i,u),r];case it.Right:return[e+kn(i-e,u),r];case it.Top:return[e,r-kn(r-s,u)];case it.Bottom:return[e,r+kn(s-r,u)]}}function Jn({sourceX:t,sourceY:e,sourcePosition:r=it.Bottom,targetX:i,targetY:s,targetPosition:u=it.Top,curvature:c=.25}){const[l,g]=qn({pos:r,x1:t,y1:e,x2:i,y2:s,c}),[p,h]=qn({pos:u,x1:i,y1:s,x2:t,y2:e,c}),[y,S,E,T]=Sr({sourceX:t,sourceY:e,targetX:i,targetY:s,sourceControlX:l,sourceControlY:g,targetControlX:p,targetControlY:h});return[`M${t},${e} C${l},${g} ${p},${h} ${i},${s}`,y,S,E,T]}const Rn=(0,m.memo)(({sourceX:t,sourceY:e,targetX:r,targetY:i,sourcePosition:s=it.Bottom,targetPosition:u=it.Top,label:c,labelStyle:l,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:y,style:S,markerEnd:E,markerStart:T,pathOptions:M,interactionWidth:R})=>{const[D,z,I]=Jn({sourceX:t,sourceY:e,sourcePosition:s,targetX:r,targetY:i,targetPosition:u,curvature:M==null?void 0:M.curvature});return(0,b.jsx)(Ze,{path:D,labelX:z,labelY:I,label:c,labelStyle:l,labelShowBg:g,labelBgStyle:p,labelBgPadding:h,labelBgBorderRadius:y,style:S,markerEnd:E,markerStart:T,interactionWidth:R})});Rn.displayName="BezierEdge";const tr=(0,m.createContext)(null),Nr=tr.Provider;tr.Consumer;const mn=()=>(0,m.useContext)(tr),Mr=t=>"id"in t&&"source"in t&&"target"in t,xn=t=>"id"in t&&!("source"in t)&&!("target"in t),eo=(t,e,r)=>{if(!xn(t))return[];const i=r.filter(s=>s.source===t.id).map(s=>s.target);return e.filter(s=>i.includes(s.id))},er=(t,e,r)=>{if(!xn(t))return[];const i=r.filter(s=>s.target===t.id).map(s=>s.source);return e.filter(s=>i.includes(s.id))},Jt=({source:t,sourceHandle:e,target:r,targetHandle:i})=>`reactflow__edge-${t}${e||""}-${r}${i||""}`,Dn=(t,e)=>typeof t=="undefined"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(i=>`${i}=${t[i]}`).join("&")}`,Yr=(t,e)=>e.some(r=>r.source===t.source&&r.target===t.target&&(r.sourceHandle===t.sourceHandle||!r.sourceHandle&&!t.sourceHandle)&&(r.targetHandle===t.targetHandle||!r.targetHandle&&!t.targetHandle)),nr=(t,e)=>{if(!t.source||!t.target)return Cn("006",ne.error006()),e;let r;return Mr(t)?r=wt({},t):r=jt(wt({},t),{id:Jt(t)}),Yr(r,e)?e:e.concat(r)},rr=(t,e,r,i={shouldReplaceId:!0})=>{const g=t,{id:s}=g,u=Br(g,["id"]);if(!e.source||!e.target)return Cn("006",ne.error006()),r;if(!r.find(p=>p.id===s))return Cn("007",ne.error007(s)),r;const l=jt(wt({},u),{id:i.shouldReplaceId?Jt(e):s,source:e.source,target:e.target,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle});return r.filter(p=>p.id!==s).concat(l)},ze=({x:t,y:e},[r,i,s],u,[c,l])=>{const g={x:(t-r)/s,y:(e-i)/s};return u?{x:c*Math.round(g.x/c),y:l*Math.round(g.y/l)}:g},Fe=({x:t,y:e},[r,i,s])=>({x:t*s+r,y:e*s+i}),Ie=(t,e=[0,0])=>{var u,c;if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const r=((u=t.width)!=null?u:0)*e[0],i=((c=t.height)!=null?c:0)*e[1],s={x:t.position.x-r,y:t.position.y-i};return jt(wt({},s),{positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-r,y:t.positionAbsolute.y-i}:s})},tn=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const r=t.reduce((i,s)=>{const{x:u,y:c}=Ie(s,e).positionAbsolute;return ln(i,Be({x:u,y:c,width:s.width||0,height:s.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return Nn(r)},se=(t,e,[r,i,s]=[0,0,1],u=!1,c=!1,l=[0,0])=>{const g={x:(e.x-r)/s,y:(e.y-i)/s,width:e.width/s,height:e.height/s},p=[];return t.forEach(h=>{const{width:y,height:S,selectable:E=!0,hidden:T=!1}=h;if(c&&!E||T)return!1;const{positionAbsolute:M}=Ie(h,l),R={x:M.x,y:M.y,width:y||0,height:S||0},D=dn(g,R),z=typeof y=="undefined"||typeof S=="undefined"||y===null||S===null,I=u&&D>0,N=(y||0)*(S||0);(z||I||D>=N||h.dragging)&&p.push(h)}),p},ae=(t,e)=>{const r=t.map(i=>i.id);return e.filter(i=>r.includes(i.source)||r.includes(i.target))},or=(t,e,r,i,s,u=.1)=>{const c=e/(t.width*(1+u)),l=r/(t.height*(1+u)),g=Math.min(c,l),p=je(g,i,s),h=t.x+t.width/2,y=t.y+t.height/2,S=e/2-h*p,E=r/2-y*p;return[S,E,p]},be=(t,e=0)=>t.transition().duration(e);function f(t,e,r,i){return(e[r]||[]).reduce((s,u)=>{var c,l,g,p;return`${t.id}-${u.id}-${r}`!==i&&s.push({id:u.id||null,type:r,nodeId:t.id,x:((l=(c=t.positionAbsolute)==null?void 0:c.x)!=null?l:0)+u.x+u.width/2,y:((p=(g=t.positionAbsolute)==null?void 0:g.y)!=null?p:0)+u.y+u.height/2}),s},[])}function _(t,e,r,i,s,u){const{x:c,y:l}=we(t),p=e.elementsFromPoint(c,l).find(T=>T.classList.contains("react-flow__handle"));if(p){const T=p.getAttribute("data-nodeid");if(T){const M=st(void 0,p),R=p.getAttribute("data-handleid"),D=u({nodeId:T,id:R,type:M});if(D)return{handle:{id:R,type:M,nodeId:T,x:r.x,y:r.y},validHandleResult:D}}}let h=[],y=1/0;if(s.forEach(T=>{const M=Math.sqrt(ai(T.x-r.x,2)+ai(T.y-r.y,2));if(M<=i){const R=u(T);M<=y&&(M<y?h=[{handle:T,validHandleResult:R}]:M===y&&h.push({handle:T,validHandleResult:R}),y=M)}}),!h.length)return{handle:null,validHandleResult:U()};if(h.length===1)return h[0];const S=h.some(({validHandleResult:T})=>T.isValid),E=h.some(({handle:T})=>T.type==="target");return h.find(({handle:T,validHandleResult:M})=>E?T.type==="target":S?M.isValid:!0)||h[0]}const Y={source:null,target:null,sourceHandle:null,targetHandle:null},U=()=>({handleDomNode:null,isValid:!1,connection:Y,endHandle:null});function H(t,e,r,i,s,u,c){const l=s==="target",g=c.querySelector(`.react-flow__handle[data-id="${t==null?void 0:t.nodeId}-${t==null?void 0:t.id}-${t==null?void 0:t.type}"]`),p=jt(wt({},U()),{handleDomNode:g});if(g){const h=st(void 0,g),y=g.getAttribute("data-nodeid"),S=g.getAttribute("data-handleid"),E=g.classList.contains("connectable"),T=g.classList.contains("connectableend"),M={source:l?y:r,sourceHandle:l?S:i,target:l?r:y,targetHandle:l?i:S};p.connection=M,E&&T&&(e===Re.Strict?l&&h==="source"||!l&&h==="target":y!==r||S!==i)&&(p.endHandle={nodeId:y,handleId:S,type:h},p.isValid=u(M))}return p}function Q({nodes:t,nodeId:e,handleId:r,handleType:i}){return t.reduce((s,u)=>{if(u[Vt]){const{handleBounds:c}=u[Vt];let l=[],g=[];c&&(l=f(u,c,"source",`${e}-${r}-${i}`),g=f(u,c,"target",`${e}-${r}-${i}`)),s.push(...l,...g)}return s},[])}function st(t,e){return t||(e!=null&&e.classList.contains("target")?"target":e!=null&&e.classList.contains("source")?"source":null)}function at(t){t==null||t.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function bt(t,e){let r=null;return e?r="valid":t&&!e&&(r="invalid"),r}function At({event:t,handleId:e,nodeId:r,onConnect:i,isTarget:s,getState:u,setState:c,isValidConnection:l,edgeUpdaterType:g,onEdgeUpdateEnd:p}){const h=En(t.target),{connectionMode:y,domNode:S,autoPanOnConnect:E,connectionRadius:T,onConnectStart:M,panBy:R,getNodes:D,cancelConnection:z}=u();let I=0,N;const{x:$,y:O}=we(t),X=h==null?void 0:h.elementFromPoint($,O),G=st(g,X),J=S==null?void 0:S.getBoundingClientRect();if(!J||!G)return;let ot,W=we(t,J),rt=!1,P=null,q=!1,et=null;const gt=Q({nodes:D(),nodeId:r,handleId:e,handleType:G}),St=()=>{if(!E)return;const[j,ft]=Wn(W,J);R({x:j,y:ft}),I=requestAnimationFrame(St)};c({connectionPosition:W,connectionStatus:null,connectionNodeId:r,connectionHandleId:e,connectionHandleType:G,connectionStartHandle:{nodeId:r,handleId:e,type:G},connectionEndHandle:null}),M==null||M(t,{nodeId:r,handleId:e,handleType:G});function xt(j){const{transform:ft}=u();W=we(j,J);const{handle:Et,validHandleResult:Nt}=_(j,h,ze(W,ft,!1,[1,1]),T,gt,$t=>H($t,y,r,e,s?"target":"source",l,h));if(N=Et,rt||(St(),rt=!0),et=Nt.handleDomNode,P=Nt.connection,q=Nt.isValid,c({connectionPosition:N&&q?Fe({x:N.x,y:N.y},ft):W,connectionStatus:bt(!!N,q),connectionEndHandle:Nt.endHandle}),!N&&!q&&!et)return at(ot);P.source!==P.target&&et&&(at(ot),ot=et,et.classList.add("connecting","react-flow__handle-connecting"),et.classList.toggle("valid",q),et.classList.toggle("react-flow__handle-valid",q))}function A(j){var ft,Et;(N||et)&&P&&q&&(i==null||i(P)),(Et=(ft=u()).onConnectEnd)==null||Et.call(ft,j),g&&(p==null||p(j)),at(ot),z(),cancelAnimationFrame(I),rt=!1,q=!1,P=null,et=null,h.removeEventListener("mousemove",xt),h.removeEventListener("mouseup",A),h.removeEventListener("touchmove",xt),h.removeEventListener("touchend",A)}h.addEventListener("mousemove",xt),h.addEventListener("mouseup",A),h.addEventListener("touchmove",xt),h.addEventListener("touchend",A)}const Ot=()=>!0,le=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Ee=(t,e,r)=>i=>{const{connectionStartHandle:s,connectionEndHandle:u,connectionClickStartHandle:c}=i;return{connecting:(s==null?void 0:s.nodeId)===t&&(s==null?void 0:s.handleId)===e&&(s==null?void 0:s.type)===r||(u==null?void 0:u.nodeId)===t&&(u==null?void 0:u.handleId)===e&&(u==null?void 0:u.type)===r,clickConnecting:(c==null?void 0:c.nodeId)===t&&(c==null?void 0:c.handleId)===e&&(c==null?void 0:c.type)===r}},fe=(0,m.forwardRef)((T,E)=>{var M=T,{type:t="source",position:e=it.Top,isValidConnection:r,isConnectable:i=!0,isConnectableStart:s=!0,isConnectableEnd:u=!0,id:c,onConnect:l,children:g,className:p,onMouseDown:h,onTouchStart:y}=M,S=Br(M,["type","position","isValidConnection","isConnectable","isConnectableStart","isConnectableEnd","id","onConnect","children","className","onMouseDown","onTouchStart"]);var W,rt;const R=c||null,D=t==="target",z=Zt(),I=mn(),{connectOnClick:N,noPanClassName:$}=Ht(le,_t.X),{connecting:O,clickConnecting:X}=Ht(Ee(I,R,t),_t.X);I||(rt=(W=z.getState()).onError)==null||rt.call(W,"010",ne.error010());const G=P=>{const{defaultEdgeOptions:q,onConnect:et,hasDefaultEdges:gt}=z.getState(),St=wt(wt({},q),P);if(gt){const{edges:xt,setEdges:A}=z.getState();A(nr(St,xt))}et==null||et(St),l==null||l(St)},J=P=>{if(!I)return;const q=Pn(P);s&&(q&&P.button===0||!q)&&At({event:P,handleId:R,nodeId:I,onConnect:G,isTarget:D,getState:z.getState,setState:z.setState,isValidConnection:r||z.getState().isValidConnection||Ot}),q?h==null||h(P):y==null||y(P)},ot=P=>{const{onClickConnectStart:q,onClickConnectEnd:et,connectionClickStartHandle:gt,connectionMode:St,isValidConnection:xt}=z.getState();if(!I||!gt&&!s)return;if(!gt){q==null||q(P,{nodeId:I,handleId:R,handleType:t}),z.setState({connectionClickStartHandle:{nodeId:I,type:t,handleId:R}});return}const A=En(P.target),j=r||xt||Ot,{connection:ft,isValid:Et}=H({nodeId:I,id:R,type:t},St,gt.nodeId,gt.handleId||null,gt.type,j,A);Et&&G(ft),et==null||et(P),z.setState({connectionClickStartHandle:null})};return(0,b.jsx)("div",jt(wt({"data-handleid":R,"data-nodeid":I,"data-handlepos":e,"data-id":`${I}-${R}-${t}`,className:(0,K.Z)(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",$,p,{source:!D,target:D,connectable:i,connectablestart:s,connectableend:u,connecting:X,connectionindicator:i&&(s&&!O||u&&O)}]),onMouseDown:J,onTouchStart:J,onClick:N?ot:void 0,ref:E},S),{children:g}))});fe.displayName="Handle";var qt=(0,m.memo)(fe);const wn=({data:t,isConnectable:e,targetPosition:r=it.Top,sourcePosition:i=it.Bottom})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(qt,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label,(0,b.jsx)(qt,{type:"source",position:i,isConnectable:e})]});wn.displayName="DefaultNode";var zn=(0,m.memo)(wn);const Cr=({data:t,isConnectable:e,sourcePosition:r=it.Bottom})=>(0,b.jsxs)(b.Fragment,{children:[t==null?void 0:t.label,(0,b.jsx)(qt,{type:"source",position:r,isConnectable:e})]});Cr.displayName="InputNode";var en=(0,m.memo)(Cr);const nn=({data:t,isConnectable:e,targetPosition:r=it.Top})=>(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(qt,{type:"target",position:r,isConnectable:e}),t==null?void 0:t.label]});nn.displayName="OutputNode";var ir=(0,m.memo)(nn);const In=()=>null;In.displayName="GroupNode";const Mo=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected)}),Ar=t=>t.id;function Co(t,e){return(0,_t.X)(t.selectedNodes.map(Ar),e.selectedNodes.map(Ar))&&(0,_t.X)(t.selectedEdges.map(Ar),e.selectedEdges.map(Ar))}const no=(0,m.memo)(({onSelectionChange:t})=>{const e=Zt(),{selectedNodes:r,selectedEdges:i}=Ht(Mo,Co);return(0,m.useEffect)(()=>{var u,c;const s={nodes:r,edges:i};t==null||t(s),(c=(u=e.getState()).onSelectionChange)==null||c.call(u,s)},[r,i,t]),null});no.displayName="SelectionListener";const Ao=t=>!!t.onSelectionChange;function Po({onSelectionChange:t}){const e=Ht(Ao);return t||e?(0,b.jsx)(no,{onSelectionChange:t}):null}const To=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function $n(t,e){(0,m.useEffect)(()=>{typeof t!="undefined"&&e(t)},[t])}function Rt(t,e,r){(0,m.useEffect)(()=>{typeof e!="undefined"&&r({[t]:e})},[e])}const ko=({nodes:t,edges:e,defaultNodes:r,defaultEdges:i,onConnect:s,onConnectStart:u,onConnectEnd:c,onClickConnectStart:l,onClickConnectEnd:g,nodesDraggable:p,nodesConnectable:h,nodesFocusable:y,edgesFocusable:S,edgesUpdatable:E,elevateNodesOnSelect:T,minZoom:M,maxZoom:R,nodeExtent:D,onNodesChange:z,onEdgesChange:I,elementsSelectable:N,connectionMode:$,snapGrid:O,snapToGrid:X,translateExtent:G,connectOnClick:J,defaultEdgeOptions:ot,fitView:W,fitViewOptions:rt,onNodesDelete:P,onEdgesDelete:q,onNodeDrag:et,onNodeDragStart:gt,onNodeDragStop:St,onSelectionDrag:xt,onSelectionDragStart:A,onSelectionDragStop:j,noPanClassName:ft,nodeOrigin:Et,rfId:Nt,autoPanOnConnect:$t,autoPanOnNodeDrag:Xt,onError:Gt,connectionRadius:oe,isValidConnection:ee})=>{const{setNodes:ie,setEdges:he,setDefaultNodesAndEdges:ue,setMinZoom:Qt,setMaxZoom:Ae,setTranslateExtent:Wt,setNodeExtent:Yt,reset:ye}=Ht(To,_t.X),Ct=Zt();return(0,m.useEffect)(()=>{const Ln=i==null?void 0:i.map(fr=>wt(wt({},fr),ot));return ue(r,Ln),()=>{ye()}},[]),Rt("defaultEdgeOptions",ot,Ct.setState),Rt("connectionMode",$,Ct.setState),Rt("onConnect",s,Ct.setState),Rt("onConnectStart",u,Ct.setState),Rt("onConnectEnd",c,Ct.setState),Rt("onClickConnectStart",l,Ct.setState),Rt("onClickConnectEnd",g,Ct.setState),Rt("nodesDraggable",p,Ct.setState),Rt("nodesConnectable",h,Ct.setState),Rt("nodesFocusable",y,Ct.setState),Rt("edgesFocusable",S,Ct.setState),Rt("edgesUpdatable",E,Ct.setState),Rt("elementsSelectable",N,Ct.setState),Rt("elevateNodesOnSelect",T,Ct.setState),Rt("snapToGrid",X,Ct.setState),Rt("snapGrid",O,Ct.setState),Rt("onNodesChange",z,Ct.setState),Rt("onEdgesChange",I,Ct.setState),Rt("connectOnClick",J,Ct.setState),Rt("fitViewOnInit",W,Ct.setState),Rt("fitViewOnInitOptions",rt,Ct.setState),Rt("onNodesDelete",P,Ct.setState),Rt("onEdgesDelete",q,Ct.setState),Rt("onNodeDrag",et,Ct.setState),Rt("onNodeDragStart",gt,Ct.setState),Rt("onNodeDragStop",St,Ct.setState),Rt("onSelectionDrag",xt,Ct.setState),Rt("onSelectionDragStart",A,Ct.setState),Rt("onSelectionDragStop",j,Ct.setState),Rt("noPanClassName",ft,Ct.setState),Rt("nodeOrigin",Et,Ct.setState),Rt("rfId",Nt,Ct.setState),Rt("autoPanOnConnect",$t,Ct.setState),Rt("autoPanOnNodeDrag",Xt,Ct.setState),Rt("onError",Gt,Ct.setState),Rt("connectionRadius",oe,Ct.setState),Rt("isValidConnection",ee,Ct.setState),$n(t,ie),$n(e,he),$n(M,Qt),$n(R,Ae),$n(G,Wt),$n(D,Yt),null},ro={display:"none"},Ro={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},oo="react-flow__node-desc",io="react-flow__edge-desc",Do="react-flow__aria-live",zo=t=>t.ariaLiveMessage;function Io({rfId:t}){const e=Ht(zo);return(0,b.jsx)("div",{id:`${Do}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Ro,children:e})}function $o({rfId:t,disableKeyboardA11y:e}){return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{id:`${oo}-${t}`,style:ro,children:["Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "]}),(0,b.jsx)("div",{id:`${io}-${t}`,style:ro,children:"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."}),!e&&(0,b.jsx)(Io,{rfId:t})]})}const Ho=typeof document!="undefined"?document:null;var sr=(t=null,e={target:Ho})=>{const[r,i]=(0,m.useState)(!1),s=(0,m.useRef)(!1),u=(0,m.useRef)(new Set([])),[c,l]=(0,m.useMemo)(()=>{if(t!==null){const p=(Array.isArray(t)?t:[t]).filter(y=>typeof y=="string").map(y=>y.split("+")),h=p.reduce((y,S)=>y.concat(...S),[]);return[p,h]}return[[],[]]},[t]);return(0,m.useEffect)(()=>{var g,p;if(t!==null){const h=E=>{if(s.current=E.ctrlKey||E.metaKey||E.shiftKey,!s.current&&An(E))return!1;const T=ao(E.code,l);u.current.add(E[T]),so(c,u.current,!1)&&(E.preventDefault(),i(!0))},y=E=>{if(!s.current&&An(E))return!1;const T=ao(E.code,l);so(c,u.current,!0)?(i(!1),u.current.clear()):u.current.delete(E[T]),E.key==="Meta"&&u.current.clear(),s.current=!1},S=()=>{u.current.clear(),i(!1)};return(g=e==null?void 0:e.target)==null||g.addEventListener("keydown",h),(p=e==null?void 0:e.target)==null||p.addEventListener("keyup",y),window.addEventListener("blur",S),()=>{var E,T;(E=e==null?void 0:e.target)==null||E.removeEventListener("keydown",h),(T=e==null?void 0:e.target)==null||T.removeEventListener("keyup",y),window.removeEventListener("blur",S)}}},[t,i]),r};function so(t,e,r){return t.filter(i=>r||i.length===e.size).some(i=>i.every(s=>e.has(s)))}function ao(t,e){return e.includes(t)?"code":"key"}function co(t,e,r,i){var c,l,g,p,h,y,S,E;if(!t.parentNode)return r;const s=e.get(t.parentNode),u=Ie(s,i);return co(s,e,{x:((c=r.x)!=null?c:0)+u.x,y:((l=r.y)!=null?l:0)+u.y,z:((p=(g=s[Vt])==null?void 0:g.z)!=null?p:0)>((h=r.z)!=null?h:0)?(S=(y=s[Vt])==null?void 0:y.z)!=null?S:0:(E=r.z)!=null?E:0},i)}function uo(t,e,r){t.forEach(i=>{var s,u;if(i.parentNode&&!t.has(i.parentNode))throw new Error(`Parent node ${i.parentNode} not found`);if(i.parentNode||r!=null&&r[i.id]){const{x:c,y:l,z:g}=co(i,t,jt(wt({},i.position),{z:(u=(s=i[Vt])==null?void 0:s.z)!=null?u:0}),e);i.positionAbsolute={x:c,y:l},i[Vt].z=g,r!=null&&r[i.id]&&(i[Vt].isParent=!0)}})}function Kr(t,e,r,i){const s=new Map,u={},c=i?1e3:0;return t.forEach(l=>{var y;const g=(Lt(l.zIndex)?l.zIndex:0)+(l.selected?c:0),p=e.get(l.id),h=jt(wt({width:p==null?void 0:p.width,height:p==null?void 0:p.height},l),{positionAbsolute:{x:l.position.x,y:l.position.y}});l.parentNode&&(h.parentNode=l.parentNode,u[l.parentNode]=!0),Object.defineProperty(h,Vt,{enumerable:!1,value:{handleBounds:(y=p==null?void 0:p[Vt])==null?void 0:y.handleBounds,z:g}}),s.set(l.id,h)}),uo(s,r,u),s}function lo(t,e={}){var T,M,R;const{getNodes:r,width:i,height:s,minZoom:u,maxZoom:c,d3Zoom:l,d3Selection:g,fitViewOnInitDone:p,fitViewOnInit:h,nodeOrigin:y}=t(),S=e.initial&&!p&&h;if(l&&g&&(S||!e.initial)){const D=r().filter(I=>{var $;const N=e.includeHiddenNodes?I.width&&I.height:!I.hidden;return($=e.nodes)!=null&&$.length?N&&e.nodes.some(O=>O.id===I.id):N}),z=D.every(I=>I.width&&I.height);if(D.length>0&&z){const I=tn(D,y),[N,$,O]=or(I,i,s,(T=e.minZoom)!=null?T:u,(M=e.maxZoom)!=null?M:c,(R=e.padding)!=null?R:.1),X=tt.CR.translate(N,$).scale(O);return typeof e.duration=="number"&&e.duration>0?l.transform(be(g,e.duration),X):l.transform(g,X),!0}}return!1}function Oo(t,e){return t.forEach(r=>{const i=e.get(r.id);i&&e.set(i.id,jt(wt({},i),{[Vt]:i[Vt],selected:r.selected}))}),new Map(e)}function Bo(t,e){return e.map(r=>{const i=t.find(s=>s.id===r.id);return i&&(r.selected=i.selected),r})}function Pr({changedNodes:t,changedEdges:e,get:r,set:i}){const{nodeInternals:s,edges:u,onNodesChange:c,onEdgesChange:l,hasDefaultNodes:g,hasDefaultEdges:p}=r();t!=null&&t.length&&(g&&i({nodeInternals:Oo(t,s)}),c==null||c(t)),e!=null&&e.length&&(p&&i({edges:Bo(e,u)}),l==null||l(e))}const Hn=()=>{},Zo={zoomIn:Hn,zoomOut:Hn,zoomTo:Hn,getZoom:()=>1,setViewport:Hn,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Hn,fitBounds:Hn,project:t=>t,viewportInitialized:!1},Lo=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Xo=()=>{const t=Zt(),{d3Zoom:e,d3Selection:r}=Ht(Lo,_t.X);return(0,m.useMemo)(()=>r&&e?{zoomIn:s=>e.scaleBy(be(r,s==null?void 0:s.duration),1.2),zoomOut:s=>e.scaleBy(be(r,s==null?void 0:s.duration),1/1.2),zoomTo:(s,u)=>e.scaleTo(be(r,u==null?void 0:u.duration),s),getZoom:()=>t.getState().transform[2],setViewport:(s,u)=>{var h,y,S;const[c,l,g]=t.getState().transform,p=tt.CR.translate((h=s.x)!=null?h:c,(y=s.y)!=null?y:l).scale((S=s.zoom)!=null?S:g);e.transform(be(r,u==null?void 0:u.duration),p)},getViewport:()=>{const[s,u,c]=t.getState().transform;return{x:s,y:u,zoom:c}},fitView:s=>lo(t.getState,s),setCenter:(s,u,c)=>{const{width:l,height:g,maxZoom:p}=t.getState(),h=typeof(c==null?void 0:c.zoom)!="undefined"?c.zoom:p,y=l/2-s*h,S=g/2-u*h,E=tt.CR.translate(y,S).scale(h);e.transform(be(r,c==null?void 0:c.duration),E)},fitBounds:(s,u)=>{var T;const{width:c,height:l,minZoom:g,maxZoom:p}=t.getState(),[h,y,S]=or(s,c,l,g,p,(T=u==null?void 0:u.padding)!=null?T:.1),E=tt.CR.translate(h,y).scale(S);e.transform(be(r,u==null?void 0:u.duration),E)},project:s=>{const{transform:u,snapToGrid:c,snapGrid:l}=t.getState();return ze(s,u,c,l)},viewportInitialized:!0}:Zo,[e,r])};function Ur(){const t=Xo(),e=Zt(),r=(0,m.useCallback)(()=>e.getState().getNodes().map(M=>wt({},M)),[]),i=(0,m.useCallback)(M=>e.getState().nodeInternals.get(M),[]),s=(0,m.useCallback)(()=>{const{edges:M=[]}=e.getState();return M.map(R=>wt({},R))},[]),u=(0,m.useCallback)(M=>{const{edges:R=[]}=e.getState();return R.find(D=>D.id===M)},[]),c=(0,m.useCallback)(M=>{const{getNodes:R,setNodes:D,hasDefaultNodes:z,onNodesChange:I}=e.getState(),N=R(),$=typeof M=="function"?M(N):M;if(z)D($);else if(I){const O=$.length===0?N.map(X=>({type:"remove",id:X.id})):$.map(X=>({item:X,type:"reset"}));I(O)}},[]),l=(0,m.useCallback)(M=>{const{edges:R=[],setEdges:D,hasDefaultEdges:z,onEdgesChange:I}=e.getState(),N=typeof M=="function"?M(R):M;if(z)D(N);else if(I){const $=N.length===0?R.map(O=>({type:"remove",id:O.id})):N.map(O=>({item:O,type:"reset"}));I($)}},[]),g=(0,m.useCallback)(M=>{const R=Array.isArray(M)?M:[M],{getNodes:D,setNodes:z,hasDefaultNodes:I,onNodesChange:N}=e.getState();if(I){const O=[...D(),...R];z(O)}else if(N){const $=R.map(O=>({item:O,type:"add"}));N($)}},[]),p=(0,m.useCallback)(M=>{const R=Array.isArray(M)?M:[M],{edges:D=[],setEdges:z,hasDefaultEdges:I,onEdgesChange:N}=e.getState();if(I)z([...D,...R]);else if(N){const $=R.map(O=>({item:O,type:"add"}));N($)}},[]),h=(0,m.useCallback)(()=>{const{getNodes:M,edges:R=[],transform:D}=e.getState(),[z,I,N]=D;return{nodes:M().map($=>wt({},$)),edges:R.map($=>wt({},$)),viewport:{x:z,y:I,zoom:N}}},[]),y=(0,m.useCallback)(({nodes:M,edges:R})=>{const{nodeInternals:D,getNodes:z,edges:I,hasDefaultNodes:N,hasDefaultEdges:$,onNodesDelete:O,onEdgesDelete:X,onNodesChange:G,onEdgesChange:J}=e.getState(),ot=(M||[]).map(et=>et.id),W=(R||[]).map(et=>et.id),rt=z().reduce((et,gt)=>{const St=!ot.includes(gt.id)&&gt.parentNode&&et.find(A=>A.id===gt.parentNode);return(typeof gt.deletable=="boolean"?gt.deletable:!0)&&(ot.includes(gt.id)||St)&&et.push(gt),et},[]),P=I.filter(et=>typeof et.deletable=="boolean"?et.deletable:!0),q=P.filter(et=>W.includes(et.id));if(rt||q){const et=ae(rt,P),gt=[...q,...et],St=gt.reduce((xt,A)=>(xt.includes(A.id)||xt.push(A.id),xt),[]);if(($||N)&&($&&e.setState({edges:I.filter(xt=>!St.includes(xt.id))}),N&&(rt.forEach(xt=>{D.delete(xt.id)}),e.setState({nodeInternals:new Map(D)}))),St.length>0&&(X==null||X(gt),J&&J(St.map(xt=>({id:xt,type:"remove"})))),rt.length>0&&(O==null||O(rt),G)){const xt=rt.map(A=>({id:A.id,type:"remove"}));G(xt)}}},[]),S=(0,m.useCallback)(M=>{const R=xe(M),D=R?null:e.getState().nodeInternals.get(M.id);return[R?M:fn(D),D,R]},[]),E=(0,m.useCallback)((M,R=!0,D)=>{const[z,I,N]=S(M);return z?(D||e.getState().getNodes()).filter($=>{if(!N&&($.id===I.id||!$.positionAbsolute))return!1;const O=fn($),X=dn(O,z);return R&&X>0||X>=M.width*M.height}):[]},[]),T=(0,m.useCallback)((M,R,D=!0)=>{const[z]=S(M);if(!z)return!1;const I=dn(z,R);return D&&I>0||I>=M.width*M.height},[]);return(0,m.useMemo)(()=>jt(wt({},t),{getNodes:r,getNode:i,getEdges:s,getEdge:u,setNodes:c,setEdges:l,addNodes:g,addEdges:p,toObject:h,deleteElements:y,getIntersectingNodes:E,isNodeIntersecting:T}),[t,r,i,s,u,c,l,g,p,h,y,E,T])}var ar=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const r=Zt(),{deleteElements:i}=Ur(),s=sr(t),u=sr(e);(0,m.useEffect)(()=>{if(s){const{edges:c,getNodes:l}=r.getState(),g=l().filter(h=>h.selected),p=c.filter(h=>h.selected);i({nodes:g,edges:p}),r.setState({nodesSelectionActive:!1})}},[s]),(0,m.useEffect)(()=>{r.setState({multiSelectionActive:u})},[u])};function Vo(t){const e=Zt();(0,m.useEffect)(()=>{let r;const i=()=>{var u,c;if(!t.current)return;const s=Sn(t.current);(s.height===0||s.width===0)&&((c=(u=e.getState()).onError)==null||c.call(u,"004",ne.error004())),e.setState({width:s.width||500,height:s.height||500})};return i(),window.addEventListener("resize",i),t.current&&(r=new ResizeObserver(()=>i()),r.observe(t.current)),()=>{window.removeEventListener("resize",i),r&&t.current&&r.unobserve(t.current)}},[])}const Tr={position:"absolute",width:"100%",height:"100%",top:0,left:0},Fo=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,kr=t=>({x:t.x,y:t.y,zoom:t.k}),On=(t,e)=>t.target.closest(`.${e}`),fo=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),ho=t=>{const e=t.ctrlKey&&Se()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Yo=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Ko=({onMove:t,onMoveStart:e,onMoveEnd:r,onPaneContextMenu:i,zoomOnScroll:s=!0,zoomOnPinch:u=!0,panOnScroll:c=!1,panOnScrollSpeed:l=.5,panOnScrollMode:g=Xe.Free,zoomOnDoubleClick:p=!0,elementsSelectable:h,panOnDrag:y=!0,defaultViewport:S,translateExtent:E,minZoom:T,maxZoom:M,zoomActivationKeyCode:R,preventScrolling:D=!0,children:z,noWheelClassName:I,noPanClassName:N})=>{const $=(0,m.useRef)(),O=Zt(),X=(0,m.useRef)(!1),G=(0,m.useRef)(!1),J=(0,m.useRef)(null),ot=(0,m.useRef)({x:0,y:0,zoom:0}),{d3Zoom:W,d3Selection:rt,d3ZoomHandler:P,userSelectionActive:q}=Ht(Yo,_t.X),et=sr(R),gt=(0,m.useRef)(0),St=(0,m.useRef)(!1),xt=(0,m.useRef)();return Vo(J),(0,m.useEffect)(()=>{if(J.current){const A=J.current.getBoundingClientRect(),j=(0,tt.sP)().scaleExtent([T,M]).translateExtent(E),ft=(0,nt.Z)(J.current).call(j),Et=tt.CR.translate(S.x,S.y).scale(je(S.zoom,T,M)),Nt=[[0,0],[A.width,A.height]],$t=j.constrain()(Et,Nt,E);j.transform(ft,$t),j.wheelDelta(ho),O.setState({d3Zoom:j,d3Selection:ft,d3ZoomHandler:ft.on("wheel.zoom"),transform:[$t.x,$t.y,$t.k],domNode:J.current.closest(".react-flow")})}},[]),(0,m.useEffect)(()=>{rt&&W&&(c&&!et&&!q?rt.on("wheel.zoom",A=>{if(On(A,I))return!1;A.preventDefault(),A.stopImmediatePropagation();const j=rt.property("__zoom").k||1,ft=Se();if(A.ctrlKey&&u&&ft){const ie=(0,lt.Z)(A),he=ho(A),ue=j*Math.pow(2,he);W.scaleTo(rt,ue,ie,A);return}const Et=A.deltaMode===1?20:1;let Nt=g===Xe.Vertical?0:A.deltaX*Et,$t=g===Xe.Horizontal?0:A.deltaY*Et;!ft&&A.shiftKey&&g!==Xe.Vertical&&(Nt=A.deltaY*Et,$t=0),W.translateBy(rt,-(Nt/j)*l,-($t/j)*l,{internal:!0});const Xt=kr(rt.property("__zoom")),{onViewportChangeStart:Gt,onViewportChange:oe,onViewportChangeEnd:ee}=O.getState();clearTimeout(xt.current),St.current||(St.current=!0,e==null||e(A,Xt),Gt==null||Gt(Xt)),St.current&&(t==null||t(A,Xt),oe==null||oe(Xt),xt.current=setTimeout(()=>{r==null||r(A,Xt),ee==null||ee(Xt),St.current=!1},150))},{passive:!1}):typeof P!="undefined"&&rt.on("wheel.zoom",function(A,j){if(!D||On(A,I))return null;A.preventDefault(),P.call(this,A,j)},{passive:!1}))},[q,c,g,rt,W,P,et,u,D,I,e,t,r]),(0,m.useEffect)(()=>{W&&W.on("start",A=>{var Et,Nt;if(!A.sourceEvent||A.sourceEvent.internal)return null;gt.current=(Et=A.sourceEvent)==null?void 0:Et.button;const{onViewportChangeStart:j}=O.getState(),ft=kr(A.transform);X.current=!0,ot.current=ft,((Nt=A.sourceEvent)==null?void 0:Nt.type)==="mousedown"&&O.setState({paneDragging:!0}),j==null||j(ft),e==null||e(A.sourceEvent,ft)})},[W,e]),(0,m.useEffect)(()=>{W&&(q&&!X.current?W.on("zoom",null):q||W.on("zoom",A=>{var ft,Et;const{onViewportChange:j}=O.getState();if(O.setState({transform:[A.transform.x,A.transform.y,A.transform.k]}),G.current=!!(i&&fo(y,(ft=gt.current)!=null?ft:0)),(t||j)&&!((Et=A.sourceEvent)!=null&&Et.internal)){const Nt=kr(A.transform);j==null||j(Nt),t==null||t(A.sourceEvent,Nt)}}))},[q,W,t,y,i]),(0,m.useEffect)(()=>{W&&W.on("end",A=>{var ft;if(!A.sourceEvent||A.sourceEvent.internal)return null;const{onViewportChangeEnd:j}=O.getState();if(X.current=!1,O.setState({paneDragging:!1}),i&&fo(y,(ft=gt.current)!=null?ft:0)&&!G.current&&i(A.sourceEvent),G.current=!1,(r||j)&&Fo(ot.current,A.transform)){const Et=kr(A.transform);ot.current=Et,clearTimeout($.current),$.current=setTimeout(()=>{j==null||j(Et),r==null||r(A.sourceEvent,Et)},c?150:0)}})},[W,c,y,r,i]),(0,m.useEffect)(()=>{W&&W.filter(A=>{const j=et||s,ft=u&&A.ctrlKey;if(A.button===1&&A.type==="mousedown"&&(On(A,"react-flow__node")||On(A,"react-flow__edge")))return!0;if(!y&&!j&&!c&&!p&&!u||q||!p&&A.type==="dblclick"||On(A,I)&&A.type==="wheel"||On(A,N)&&A.type!=="wheel"||!u&&A.ctrlKey&&A.type==="wheel"||!j&&!c&&!ft&&A.type==="wheel"||!y&&(A.type==="mousedown"||A.type==="touchstart")||Array.isArray(y)&&!y.includes(A.button)&&(A.type==="mousedown"||A.type==="touchstart"))return!1;const Et=Array.isArray(y)&&y.includes(A.button)||!A.button||A.button<=1;return(!A.ctrlKey||A.type==="wheel")&&Et})},[q,W,s,u,c,p,y,h,et]),(0,b.jsx)("div",{className:"react-flow__renderer",ref:J,style:Tr,children:z})},Uo=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Wo(){const{userSelectionActive:t,userSelectionRect:e}=Ht(Uo,_t.X);return t&&e?(0,b.jsx)("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function go(t,e){var i,s;const r=t.find(u=>u.id===e.parentNode);if(r){const u=e.position.x+e.width-r.width,c=e.position.y+e.height-r.height;if(u>0||c>0||e.position.x<0||e.position.y<0){if(r.style=wt({},r.style)||{},r.style.width=(i=r.style.width)!=null?i:r.width,r.style.height=(s=r.style.height)!=null?s:r.height,u>0&&(r.style.width+=u),c>0&&(r.style.height+=c),e.position.x<0){const l=Math.abs(e.position.x);r.position.x=r.position.x-l,r.style.width+=l,e.position.x=0}if(e.position.y<0){const l=Math.abs(e.position.y);r.position.y=r.position.y-l,r.style.height+=l,e.position.y=0}r.width=r.style.width,r.height=r.style.height}}}function po(t,e){if(t.some(i=>i.type==="reset"))return t.filter(i=>i.type==="reset").map(i=>i.item);const r=t.filter(i=>i.type==="add").map(i=>i.item);return e.reduce((i,s)=>{const u=t.filter(l=>l.id===s.id);if(u.length===0)return i.push(s),i;const c=wt({},s);for(const l of u)if(l)switch(l.type){case"select":{c.selected=l.selected;break}case"position":{typeof l.position!="undefined"&&(c.position=l.position),typeof l.positionAbsolute!="undefined"&&(c.positionAbsolute=l.positionAbsolute),typeof l.dragging!="undefined"&&(c.dragging=l.dragging),c.expandParent&&go(i,c);break}case"dimensions":{typeof l.dimensions!="undefined"&&(c.width=l.dimensions.width,c.height=l.dimensions.height),typeof l.updateStyle!="undefined"&&(c.style=wt(wt({},c.style||{}),l.dimensions)),typeof l.resizing=="boolean"&&(c.resizing=l.resizing),c.expandParent&&go(i,c);break}case"remove":return i}return i.push(c),i},r)}function yo(t,e){return po(t,e)}function jo(t,e){return po(t,e)}const rn=(t,e)=>({id:t,type:"select",selected:e});function Bn(t,e){return t.reduce((r,i)=>{const s=e.includes(i.id);return!i.selected&&s?(i.selected=!0,r.push(rn(i.id,!0))):i.selected&&!s&&(i.selected=!1,r.push(rn(i.id,!1))),r},[])}const Wr=(t,e)=>r=>{r.target===e.current&&(t==null||t(r))},Ye=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),mo=(0,m.memo)(({isSelecting:t,selectionMode:e=gn.Full,panOnDrag:r,onSelectionStart:i,onSelectionEnd:s,onPaneClick:u,onPaneContextMenu:c,onPaneScroll:l,onPaneMouseEnter:g,onPaneMouseMove:p,onPaneMouseLeave:h,children:y})=>{const S=(0,m.useRef)(null),E=Zt(),T=(0,m.useRef)(0),M=(0,m.useRef)(0),R=(0,m.useRef)(),{userSelectionActive:D,elementsSelectable:z,dragging:I}=Ht(Ye,_t.X),N=()=>{E.setState({userSelectionActive:!1,userSelectionRect:null}),T.current=0,M.current=0},$=P=>{u==null||u(P),E.getState().resetSelectedElements(),E.setState({nodesSelectionActive:!1})},O=P=>{if(Array.isArray(r)&&(r!=null&&r.includes(2))){P.preventDefault();return}c==null||c(P)},X=l?P=>l(P):void 0,G=P=>{const{resetSelectedElements:q,domNode:et}=E.getState();if(R.current=et==null?void 0:et.getBoundingClientRect(),!z||!t||P.button!==0||P.target!==S.current||!R.current)return;const{x:gt,y:St}=we(P,R.current);q(),E.setState({userSelectionRect:{width:0,height:0,startX:gt,startY:St,x:gt,y:St}}),i==null||i(P)},J=P=>{var he,ue;const{userSelectionRect:q,nodeInternals:et,edges:gt,transform:St,onNodesChange:xt,onEdgesChange:A,nodeOrigin:j,getNodes:ft}=E.getState();if(!t||!R.current||!q)return;E.setState({userSelectionActive:!0,nodesSelectionActive:!1});const Et=we(P,R.current),Nt=(he=q.startX)!=null?he:0,$t=(ue=q.startY)!=null?ue:0,Xt=jt(wt({},q),{x:Et.x<Nt?Et.x:Nt,y:Et.y<$t?Et.y:$t,width:Math.abs(Et.x-Nt),height:Math.abs(Et.y-$t)}),Gt=ft(),oe=se(et,Xt,St,e===gn.Partial,!0,j),ee=ae(oe,gt).map(Qt=>Qt.id),ie=oe.map(Qt=>Qt.id);if(T.current!==ie.length){T.current=ie.length;const Qt=Bn(Gt,ie);Qt.length&&(xt==null||xt(Qt))}if(M.current!==ee.length){M.current=ee.length;const Qt=Bn(gt,ee);Qt.length&&(A==null||A(Qt))}E.setState({userSelectionRect:Xt})},ot=P=>{if(P.button!==0)return;const{userSelectionRect:q}=E.getState();!D&&q&&P.target===S.current&&($==null||$(P)),E.setState({nodesSelectionActive:T.current>0}),N(),s==null||s(P)},W=P=>{D&&(E.setState({nodesSelectionActive:T.current>0}),s==null||s(P)),N()},rt=z&&(t||D);return(0,b.jsxs)("div",{className:(0,K.Z)(["react-flow__pane",{dragging:I,selection:t}]),onClick:rt?void 0:Wr($,S),onContextMenu:Wr(O,S),onWheel:Wr(X,S),onMouseEnter:rt?void 0:g,onMouseDown:rt?G:void 0,onMouseMove:rt?J:p,onMouseUp:rt?ot:void 0,onMouseLeave:rt?W:h,ref:S,style:Tr,children:[y,(0,b.jsx)(Wo,{})]})});mo.displayName="Pane";function jr(t,e){if(!t.parentNode)return!1;const r=e.get(t.parentNode);return r?r.selected?!0:jr(r,e):!1}function $e(t,e,r){let i=t;do{if(i!=null&&i.matches(e))return!0;if(i===r.current)return!1;i=i.parentElement}while(i);return!1}function ci(t,e,r,i){return Array.from(t.values()).filter(s=>(s.selected||s.id===i)&&(!s.parentNode||!jr(s,t))&&(s.draggable||e&&typeof s.draggable=="undefined")).map(s=>{var u,c,l,g;return{id:s.id,position:s.position||{x:0,y:0},positionAbsolute:s.positionAbsolute||{x:0,y:0},distance:{x:r.x-((c=(u=s.positionAbsolute)==null?void 0:u.x)!=null?c:0),y:r.y-((g=(l=s.positionAbsolute)==null?void 0:l.y)!=null?g:0)},delta:{x:0,y:0},extent:s.extent,parentNode:s.parentNode,width:s.width,height:s.height}})}function ui(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function xo(t,e,r,i,s=[0,0],u){const c=ui(t,t.extent||i);let l=c;if(t.extent==="parent")if(t.parentNode&&t.width&&t.height){const h=r.get(t.parentNode),{x:y,y:S}=Ie(h,s).positionAbsolute;l=h&&Lt(y)&&Lt(S)&&Lt(h.width)&&Lt(h.height)?[[y+t.width*s[0],S+t.height*s[1]],[y+h.width-t.width+t.width*s[0],S+h.height-t.height+t.height*s[1]]]:l}else u==null||u("005",ne.error005()),l=c;else if(t.extent&&t.parentNode){const h=r.get(t.parentNode),{x:y,y:S}=Ie(h,s).positionAbsolute;l=[[t.extent[0][0]+y,t.extent[0][1]+S],[t.extent[1][0]+y,t.extent[1][1]+S]]}let g={x:0,y:0};if(t.parentNode){const h=r.get(t.parentNode);g=Ie(h,s).positionAbsolute}const p=l&&l!=="parent"?Kn(e,l):e;return{position:{x:p.x-g.x,y:p.y-g.y},positionAbsolute:p}}function Gr({nodeId:t,dragItems:e,nodeInternals:r}){const i=e.map(s=>{const u=r.get(s.id);return jt(wt({},u),{position:s.position,positionAbsolute:s.positionAbsolute})});return[t?i.find(s=>s.id===t):i[0],i]}const wo=(t,e,r,i)=>{const s=e.querySelectorAll(t);if(!s||!s.length)return null;const u=Array.from(s),c=e.getBoundingClientRect(),l={x:c.width*i[0],y:c.height*i[1]};return u.map(g=>{const p=g.getBoundingClientRect();return wt({id:g.getAttribute("data-handleid"),position:g.getAttribute("data-handlepos"),x:(p.left-c.left-l.x)/r,y:(p.top-c.top-l.y)/r},Sn(g))})};function cr(t,e,r){return r===void 0?r:i=>{const s=e().nodeInternals.get(t);s&&r(i,wt({},s))}}function Zn({id:t,store:e,unselect:r=!1,nodeRef:i}){const{addSelectedNodes:s,unselectNodesAndEdges:u,multiSelectionActive:c,nodeInternals:l,onError:g}=e.getState(),p=l.get(t);if(!p){g==null||g("012",ne.error012(t));return}e.setState({nodesSelectionActive:!1}),p.selected?(r||p.selected&&c)&&(u({nodes:[p]}),requestAnimationFrame(()=>{var h;return(h=i==null?void 0:i.current)==null?void 0:h.blur()})):s([t])}function Go(){const t=Zt();return(0,m.useCallback)(({sourceEvent:r})=>{const{transform:i,snapGrid:s,snapToGrid:u}=t.getState(),c=r.touches?r.touches[0].clientX:r.clientX,l=r.touches?r.touches[0].clientY:r.clientY,g={x:(c-i[0])/i[2],y:(l-i[1])/i[2]};return wt({xSnapped:u?s[0]*Math.round(g.x/s[0]):g.x,ySnapped:u?s[1]*Math.round(g.y/s[1]):g.y},g)},[])}function Ne(t){return(e,r,i)=>t==null?void 0:t(e,i)}function ur({nodeRef:t,disabled:e=!1,noDragClassName:r,handleSelector:i,nodeId:s,isSelectable:u,selectNodesOnDrag:c}){const l=Zt(),[g,p]=(0,m.useState)(!1),h=(0,m.useRef)([]),y=(0,m.useRef)({x:null,y:null}),S=(0,m.useRef)(0),E=(0,m.useRef)(null),T=(0,m.useRef)({x:0,y:0}),M=(0,m.useRef)(null),R=(0,m.useRef)(!1),D=Go();return(0,m.useEffect)(()=>{if(t!=null&&t.current){const z=(0,nt.Z)(t.current),I=({x:$,y:O})=>{const{nodeInternals:X,onNodeDrag:G,onSelectionDrag:J,updateNodePositions:ot,nodeExtent:W,snapGrid:rt,snapToGrid:P,nodeOrigin:q,onError:et}=l.getState();y.current={x:$,y:O};let gt=!1,St={x:0,y:0,x2:0,y2:0};if(h.current.length>1&&W){const A=tn(h.current,q);St=Be(A)}if(h.current=h.current.map(A=>{var Nt,$t;const j={x:$-A.distance.x,y:O-A.distance.y};P&&(j.x=rt[0]*Math.round(j.x/rt[0]),j.y=rt[1]*Math.round(j.y/rt[1]));const ft=[[W[0][0],W[0][1]],[W[1][0],W[1][1]]];h.current.length>1&&W&&!A.extent&&(ft[0][0]=A.positionAbsolute.x-St.x+W[0][0],ft[1][0]=A.positionAbsolute.x+((Nt=A.width)!=null?Nt:0)-St.x2+W[1][0],ft[0][1]=A.positionAbsolute.y-St.y+W[0][1],ft[1][1]=A.positionAbsolute.y+(($t=A.height)!=null?$t:0)-St.y2+W[1][1]);const Et=xo(A,j,X,ft,q,et);return gt=gt||A.position.x!==Et.position.x||A.position.y!==Et.position.y,A.position=Et.position,A.positionAbsolute=Et.positionAbsolute,A}),!gt)return;ot(h.current,!0,!0),p(!0);const xt=s?G:Ne(J);if(xt&&M.current){const[A,j]=Gr({nodeId:s,dragItems:h.current,nodeInternals:X});xt(M.current,A,j)}},N=()=>{var X,G;if(!E.current)return;const[$,O]=Wn(T.current,E.current);if($!==0||O!==0){const{transform:J,panBy:ot}=l.getState();y.current.x=((X=y.current.x)!=null?X:0)-$/J[2],y.current.y=((G=y.current.y)!=null?G:0)-O/J[2],ot({x:$,y:O})&&I(y.current)}S.current=requestAnimationFrame(N)};if(e)z.on(".drag",null);else{const $=Oe().on("start",O=>{var gt;const{nodeInternals:X,multiSelectionActive:G,domNode:J,nodesDraggable:ot,unselectNodesAndEdges:W,onNodeDragStart:rt,onSelectionDragStart:P}=l.getState(),q=s?rt:Ne(P);!c&&!G&&s&&((gt=X.get(s))!=null&&gt.selected||W()),s&&u&&c&&Zn({id:s,store:l,nodeRef:t});const et=D(O);if(y.current=et,h.current=ci(X,ot,et,s),q&&h.current){const[St,xt]=Gr({nodeId:s,dragItems:h.current,nodeInternals:X});q(O.sourceEvent,St,xt)}E.current=(J==null?void 0:J.getBoundingClientRect())||null,T.current=we(O.sourceEvent,E.current)}).on("drag",O=>{const X=D(O),{autoPanOnNodeDrag:G}=l.getState();!R.current&&G&&(R.current=!0,N()),(y.current.x!==X.xSnapped||y.current.y!==X.ySnapped)&&h.current&&(M.current=O.sourceEvent,T.current=we(O.sourceEvent,E.current),I(X))}).on("end",O=>{if(p(!1),R.current=!1,cancelAnimationFrame(S.current),h.current){const{updateNodePositions:X,nodeInternals:G,onNodeDragStop:J,onSelectionDragStop:ot}=l.getState(),W=s?J:Ne(ot);if(X(h.current,!1,!1),W){const[rt,P]=Gr({nodeId:s,dragItems:h.current,nodeInternals:G});W(O.sourceEvent,rt,P)}}}).filter(O=>{const X=O.target;return!O.button&&(!r||!$e(X,`.${r}`,t))&&(!i||$e(X,i,t))});return z.call($),()=>{z.on(".drag",null)}}}},[t,e,r,i,u,l,s,c,D]),g}function _o(){const t=Zt();return(0,m.useCallback)(r=>{const{nodeInternals:i,nodeExtent:s,updateNodePositions:u,getNodes:c,snapToGrid:l,snapGrid:g,onError:p,nodesDraggable:h}=t.getState(),y=c().filter(z=>z.selected&&(z.draggable||h&&typeof z.draggable=="undefined")),S=l?g[0]:5,E=l?g[1]:5,T=r.isShiftPressed?4:1,M=r.x*S*T,R=r.y*E*T,D=y.map(z=>{if(z.positionAbsolute){const I={x:z.positionAbsolute.x+M,y:z.positionAbsolute.y+R};l&&(I.x=g[0]*Math.round(I.x/g[0]),I.y=g[1]*Math.round(I.y/g[1]));const{positionAbsolute:N,position:$}=xo(z,I,i,s,void 0,p);z.position=$,z.positionAbsolute=N}return z});u(D,!0,!1)},[])}const on={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Ke=t=>{const e=({id:r,type:i,data:s,xPos:u,yPos:c,xPosOrigin:l,yPosOrigin:g,selected:p,onClick:h,onMouseEnter:y,onMouseMove:S,onMouseLeave:E,onContextMenu:T,onDoubleClick:M,style:R,className:D,isDraggable:z,isSelectable:I,isConnectable:N,isFocusable:$,selectNodesOnDrag:O,sourcePosition:X,targetPosition:G,hidden:J,resizeObserver:ot,dragHandle:W,zIndex:rt,isParent:P,noDragClassName:q,noPanClassName:et,initialized:gt,disableKeyboardA11y:St,ariaLabel:xt,rfId:A})=>{const j=Zt(),ft=(0,m.useRef)(null),Et=(0,m.useRef)(X),Nt=(0,m.useRef)(G),$t=(0,m.useRef)(i),Xt=I||z||h||y||S||E,Gt=_o(),oe=cr(r,j.getState,y),ee=cr(r,j.getState,S),ie=cr(r,j.getState,E),he=cr(r,j.getState,T),ue=cr(r,j.getState,M),Qt=Yt=>{if(I&&(!O||!z)&&Zn({id:r,store:j,nodeRef:ft}),h){const ye=j.getState().nodeInternals.get(r);ye&&h(Yt,wt({},ye))}},Ae=Yt=>{if(!An(Yt))if(hn.includes(Yt.key)&&I){const ye=Yt.key==="Escape";Zn({id:r,store:j,unselect:ye,nodeRef:ft})}else!St&&z&&p&&Object.prototype.hasOwnProperty.call(on,Yt.key)&&(j.setState({ariaLiveMessage:`Moved selected node ${Yt.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~u}, y: ${~~c}`}),Gt({x:on[Yt.key].x,y:on[Yt.key].y,isShiftPressed:Yt.shiftKey}))};(0,m.useEffect)(()=>{if(ft.current&&!J){const Yt=ft.current;return ot==null||ot.observe(Yt),()=>ot==null?void 0:ot.unobserve(Yt)}},[J]),(0,m.useEffect)(()=>{const Yt=$t.current!==i,ye=Et.current!==X,Ct=Nt.current!==G;ft.current&&(Yt||ye||Ct)&&(Yt&&($t.current=i),ye&&(Et.current=X),Ct&&(Nt.current=G),j.getState().updateNodeDimensions([{id:r,nodeElement:ft.current,forceUpdate:!0}]))},[r,i,X,G]);const Wt=ur({nodeRef:ft,disabled:J||!z,noDragClassName:q,handleSelector:W,nodeId:r,isSelectable:I,selectNodesOnDrag:O});return J?null:(0,b.jsx)("div",{className:(0,K.Z)(["react-flow__node",`react-flow__node-${i}`,{[et]:z},D,{selected:p,selectable:I,parent:P,dragging:Wt}]),ref:ft,style:wt({zIndex:rt,transform:`translate(${l}px,${g}px)`,pointerEvents:Xt?"all":"none",visibility:gt?"visible":"hidden"},R),"data-id":r,"data-testid":`rf__node-${r}`,onMouseEnter:oe,onMouseMove:ee,onMouseLeave:ie,onContextMenu:he,onClick:Qt,onDoubleClick:ue,onKeyDown:$?Ae:void 0,tabIndex:$?0:void 0,role:$?"button":void 0,"aria-describedby":St?void 0:`${oo}-${A}`,"aria-label":xt,children:(0,b.jsx)(Nr,{value:r,children:(0,b.jsx)(t,{id:r,data:s,type:i,xPos:u,yPos:c,selected:p,isConnectable:N,sourcePosition:X,targetPosition:G,dragging:Wt,dragHandle:W,zIndex:rt})})})};return e.displayName="NodeWrapper",(0,m.memo)(e)};const Qo=t=>{const e=t.getNodes().filter(r=>r.selected);return jt(wt({},tn(e,t.nodeOrigin)),{transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive})};function qo({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:r}){const i=Zt(),{width:s,height:u,x:c,y:l,transformString:g,userSelectionActive:p}=Ht(Qo,_t.X),h=_o(),y=(0,m.useRef)(null);if((0,m.useEffect)(()=>{var T;r||(T=y.current)==null||T.focus({preventScroll:!0})},[r]),ur({nodeRef:y}),p||!s||!u)return null;const S=t?T=>{const M=i.getState().getNodes().filter(R=>R.selected);t(T,M)}:void 0,E=T=>{Object.prototype.hasOwnProperty.call(on,T.key)&&h({x:on[T.key].x,y:on[T.key].y,isShiftPressed:T.shiftKey})};return(0,b.jsx)("div",{className:(0,K.Z)(["react-flow__nodesselection","react-flow__container",e]),style:{transform:g},children:(0,b.jsx)("div",{ref:y,className:"react-flow__nodesselection-rect",onContextMenu:S,tabIndex:r?void 0:-1,onKeyDown:r?void 0:E,style:{width:s,height:u,top:l,left:c}})})}var bo=(0,m.memo)(qo);const Jo=t=>t.nodesSelectionActive,vo=({children:t,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:c,deleteKeyCode:l,onMove:g,onMoveStart:p,onMoveEnd:h,selectionKeyCode:y,selectionOnDrag:S,selectionMode:E,onSelectionStart:T,onSelectionEnd:M,multiSelectionKeyCode:R,panActivationKeyCode:D,zoomActivationKeyCode:z,elementsSelectable:I,zoomOnScroll:N,zoomOnPinch:$,panOnScroll:O,panOnScrollSpeed:X,panOnScrollMode:G,zoomOnDoubleClick:J,panOnDrag:ot,defaultViewport:W,translateExtent:rt,minZoom:P,maxZoom:q,preventScrolling:et,onSelectionContextMenu:gt,noWheelClassName:St,noPanClassName:xt,disableKeyboardA11y:A})=>{const j=Ht(Jo),ft=sr(y),Nt=sr(D)||ot,$t=ft||S&&Nt!==!0;return ar({deleteKeyCode:l,multiSelectionKeyCode:R}),(0,b.jsx)(Ko,{onMove:g,onMoveStart:p,onMoveEnd:h,onPaneContextMenu:u,elementsSelectable:I,zoomOnScroll:N,zoomOnPinch:$,panOnScroll:O,panOnScrollSpeed:X,panOnScrollMode:G,zoomOnDoubleClick:J,panOnDrag:!ft&&Nt,defaultViewport:W,translateExtent:rt,minZoom:P,maxZoom:q,zoomActivationKeyCode:z,preventScrolling:et,noWheelClassName:St,noPanClassName:xt,children:(0,b.jsxs)(mo,{onSelectionStart:T,onSelectionEnd:M,onPaneClick:e,onPaneMouseEnter:r,onPaneMouseMove:i,onPaneMouseLeave:s,onPaneContextMenu:u,onPaneScroll:c,panOnDrag:Nt,isSelecting:!!$t,selectionMode:E,children:[t,j&&(0,b.jsx)(bo,{onSelectionContextMenu:gt,noPanClassName:xt,disableKeyboardA11y:A})]})})};vo.displayName="FlowRenderer";var ti=(0,m.memo)(vo);function ei(t){return Ht((0,m.useCallback)(r=>t?se(r.nodeInternals,{x:0,y:0,width:r.width,height:r.height},r.transform,!0):r.getNodes(),[t]))}function n(t){const e={input:Ke(t.input||en),default:Ke(t.default||zn),output:Ke(t.output||ir),group:Ke(t.group||In)},r={},i=Object.keys(t).filter(s=>!["input","default","output","group"].includes(s)).reduce((s,u)=>(s[u]=Ke(t[u]||zn),s),r);return wt(wt({},e),i)}const o=({x:t,y:e,width:r,height:i,origin:s})=>!r||!i?{x:t,y:e}:s[0]<0||s[1]<0||s[0]>1||s[1]>1?{x:t,y:e}:{x:t-r*s[0],y:e-i*s[1]},a=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),d=t=>{const{nodesDraggable:e,nodesConnectable:r,nodesFocusable:i,elementsSelectable:s,updateNodeDimensions:u,onError:c}=Ht(a,_t.X),l=ei(t.onlyRenderVisibleElements),g=(0,m.useRef)(),p=(0,m.useMemo)(()=>{if(typeof ResizeObserver=="undefined")return null;const h=new ResizeObserver(y=>{const S=y.map(E=>({id:E.target.getAttribute("data-id"),nodeElement:E.target,forceUpdate:!0}));u(S)});return g.current=h,h},[]);return(0,m.useEffect)(()=>()=>{var h;(h=g==null?void 0:g.current)==null||h.disconnect()},[]),(0,b.jsx)("div",{className:"react-flow__nodes",style:Tr,children:l.map(h=>{var $,O,X,G,J,ot,W;let y=h.type||"default";t.nodeTypes[y]||(c==null||c("003",ne.error003(y)),y="default");const S=t.nodeTypes[y]||t.nodeTypes.default,E=!!(h.draggable||e&&typeof h.draggable=="undefined"),T=!!(h.selectable||s&&typeof h.selectable=="undefined"),M=!!(h.connectable||r&&typeof h.connectable=="undefined"),R=!!(h.focusable||i&&typeof h.focusable=="undefined"),D=t.nodeExtent?Kn(h.positionAbsolute,t.nodeExtent):h.positionAbsolute,z=($=D==null?void 0:D.x)!=null?$:0,I=(O=D==null?void 0:D.y)!=null?O:0,N=o({x:z,y:I,width:(X=h.width)!=null?X:0,height:(G=h.height)!=null?G:0,origin:t.nodeOrigin});return(0,b.jsx)(S,{id:h.id,className:h.className,style:h.style,type:y,data:h.data,sourcePosition:h.sourcePosition||it.Bottom,targetPosition:h.targetPosition||it.Top,hidden:h.hidden,xPos:z,yPos:I,xPosOrigin:N.x,yPosOrigin:N.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!h.selected,isDraggable:E,isSelectable:T,isConnectable:M,isFocusable:R,resizeObserver:p,dragHandle:h.dragHandle,zIndex:(ot=(J=h[Vt])==null?void 0:J.z)!=null?ot:0,isParent:!!((W=h[Vt])!=null&&W.isParent),noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!h.width&&!!h.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:h.ariaLabel},h.id)})})};d.displayName="NodeRenderer";var w=(0,m.memo)(d);const v=(t,e,r)=>r===it.Left?t-e:r===it.Right?t+e:t,x=(t,e,r)=>r===it.Top?t-e:r===it.Bottom?t+e:t,k="react-flow__edgeupdater",Z=({position:t,centerX:e,centerY:r,radius:i=10,onMouseDown:s,onMouseEnter:u,onMouseOut:c,type:l})=>(0,b.jsx)("circle",{onMouseDown:s,onMouseEnter:u,onMouseOut:c,className:(0,K.Z)([k,`${k}-${l}`]),cx:v(e,i,t),cy:x(r,i,t),r:i,stroke:"transparent",fill:"transparent"}),V=()=>!0;var L=t=>{const e=({id:r,className:i,type:s,data:u,onClick:c,onEdgeDoubleClick:l,selected:g,animated:p,label:h,labelStyle:y,labelShowBg:S,labelBgStyle:E,labelBgPadding:T,labelBgBorderRadius:M,style:R,source:D,target:z,sourceX:I,sourceY:N,targetX:$,targetY:O,sourcePosition:X,targetPosition:G,elementsSelectable:J,hidden:ot,sourceHandleId:W,targetHandleId:rt,onContextMenu:P,onMouseEnter:q,onMouseMove:et,onMouseLeave:gt,edgeUpdaterRadius:St,onEdgeUpdate:xt,onEdgeUpdateStart:A,onEdgeUpdateEnd:j,markerEnd:ft,markerStart:Et,rfId:Nt,ariaLabel:$t,isFocusable:Xt,isUpdatable:Gt,pathOptions:oe,interactionWidth:ee})=>{const ie=(0,m.useRef)(null),[he,ue]=(0,m.useState)(!1),[Qt,Ae]=(0,m.useState)(!1),Wt=Zt(),Yt=(0,m.useMemo)(()=>`url(#${Dn(Et,Nt)})`,[Et,Nt]),ye=(0,m.useMemo)(()=>`url(#${Dn(ft,Nt)})`,[ft,Nt]);if(ot)return null;const Ct=ge=>{const{edges:Pe,addSelectedEdges:gr}=Wt.getState();if(J&&(Wt.setState({nodesSelectionActive:!1}),gr([r])),c){const pr=Pe.find(yr=>yr.id===r);c(ge,pr)}},Ln=Le(r,Wt.getState,l),fr=Le(r,Wt.getState,P),Qr=Le(r,Wt.getState,q),qr=Le(r,Wt.getState,et),$r=Le(r,Wt.getState,gt),dr=(ge,Pe)=>{if(ge.button!==0)return;const{edges:gr,isValidConnection:pr}=Wt.getState(),yr=Pe?z:D,Eo=(Pe?rt:W)||null,mr=Pe?"target":"source",ri=pr||V,oi=Pe,to=gr.find(xr=>xr.id===r);Ae(!0),A==null||A(ge,to,mr);const ii=xr=>{Ae(!1),j==null||j(xr,to,mr)};At({event:ge,handleId:Eo,nodeId:yr,onConnect:xr=>xt==null?void 0:xt(to,xr),isTarget:oi,getState:Wt.getState,setState:Wt.setState,isValidConnection:ri,edgeUpdaterType:mr,onEdgeUpdateEnd:ii})},Xn=ge=>dr(ge,!0),Hr=ge=>dr(ge,!1),Vn=()=>ue(!0),hr=()=>ue(!1),Jr=!J&&!c,Or=ge=>{var Pe;if(hn.includes(ge.key)&&J){const{unselectNodesAndEdges:gr,addSelectedEdges:pr,edges:yr}=Wt.getState();ge.key==="Escape"?((Pe=ie.current)==null||Pe.blur(),gr({edges:[yr.find(mr=>mr.id===r)]})):pr([r])}};return(0,b.jsxs)("g",{className:(0,K.Z)(["react-flow__edge",`react-flow__edge-${s}`,i,{selected:g,animated:p,inactive:Jr,updating:he}]),onClick:Ct,onDoubleClick:Ln,onContextMenu:fr,onMouseEnter:Qr,onMouseMove:qr,onMouseLeave:$r,onKeyDown:Xt?Or:void 0,tabIndex:Xt?0:void 0,role:Xt?"button":"img","data-testid":`rf__edge-${r}`,"aria-label":$t===null?void 0:$t||`Edge from ${D} to ${z}`,"aria-describedby":Xt?`${io}-${Nt}`:void 0,ref:ie,children:[!Qt&&(0,b.jsx)(t,{id:r,source:D,target:z,selected:g,animated:p,label:h,labelStyle:y,labelShowBg:S,labelBgStyle:E,labelBgPadding:T,labelBgBorderRadius:M,data:u,style:R,sourceX:I,sourceY:N,targetX:$,targetY:O,sourcePosition:X,targetPosition:G,sourceHandleId:W,targetHandleId:rt,markerStart:Yt,markerEnd:ye,pathOptions:oe,interactionWidth:ee}),Gt&&(0,b.jsxs)(b.Fragment,{children:[(Gt==="source"||Gt===!0)&&(0,b.jsx)(Z,{position:X,centerX:I,centerY:N,radius:St,onMouseDown:Xn,onMouseEnter:Vn,onMouseOut:hr,type:"source"}),(Gt==="target"||Gt===!0)&&(0,b.jsx)(Z,{position:G,centerX:$,centerY:O,radius:St,onMouseDown:Hr,onMouseEnter:Vn,onMouseOut:hr,type:"target"})]})]})};return e.displayName="EdgeWrapper",(0,m.memo)(e)};function yt(t){const e={default:L(t.default||Rn),straight:L(t.bezier||Qn),step:L(t.step||Gn),smoothstep:L(t.step||Tn),simplebezier:L(t.simplebezier||Ve)},r={},i=Object.keys(t).filter(s=>!["default","bezier"].includes(s)).reduce((s,u)=>(s[u]=L(t[u]||Rn),s),r);return wt(wt({},e),i)}function pt(t,e,r=null){const i=((r==null?void 0:r.x)||0)+e.x,s=((r==null?void 0:r.y)||0)+e.y,u=(r==null?void 0:r.width)||e.width,c=(r==null?void 0:r.height)||e.height;switch(t){case it.Top:return{x:i+u/2,y:s};case it.Right:return{x:i+u,y:s+c/2};case it.Bottom:return{x:i+u/2,y:s+c};case it.Left:return{x:i,y:s+c/2}}}function Mt(t,e){return t?t.length===1||!e?t[0]:e&&t.find(r=>r.id===e)||null:null}const ce=(t,e,r,i,s,u)=>{const c=pt(r,t,e),l=pt(u,i,s);return{sourceX:c.x,sourceY:c.y,targetX:l.x,targetY:l.y}};function Ut({sourcePos:t,targetPos:e,sourceWidth:r,sourceHeight:i,targetWidth:s,targetHeight:u,width:c,height:l,transform:g}){const p={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+r,e.x+s),y2:Math.max(t.y+i,e.y+u)};p.x===p.x2&&(p.x2+=1),p.y===p.y2&&(p.y2+=1);const h=Be({x:(0-g[0])/g[2],y:(0-g[1])/g[2],width:c/g[2],height:l/g[2]}),y=Math.max(0,Math.min(h.x2,p.x2)-Math.max(h.x,p.x)),S=Math.max(0,Math.min(h.y2,p.y2)-Math.max(h.y,p.y));return Math.ceil(y*S)>0}function de(t){var i,s,u,c,l;const e=((i=t==null?void 0:t[Vt])==null?void 0:i.handleBounds)||null,r=e&&(t==null?void 0:t.width)&&(t==null?void 0:t.height)&&typeof((s=t==null?void 0:t.positionAbsolute)==null?void 0:s.x)!="undefined"&&typeof((u=t==null?void 0:t.positionAbsolute)==null?void 0:u.y)!="undefined";return[{x:((c=t==null?void 0:t.positionAbsolute)==null?void 0:c.x)||0,y:((l=t==null?void 0:t.positionAbsolute)==null?void 0:l.y)||0,width:(t==null?void 0:t.width)||0,height:(t==null?void 0:t.height)||0},e,!!r]}const Pt=[{level:0,isMaxLevel:!0,edges:[]}];function sn(t,e,r=!1){let i=-1;const s=t.reduce((c,l)=>{var h,y;const g=Lt(l.zIndex);let p=g?l.zIndex:0;if(r){const S=e.get(l.target),E=e.get(l.source),T=l.selected||(S==null?void 0:S.selected)||(E==null?void 0:E.selected),M=Math.max(((h=E==null?void 0:E[Vt])==null?void 0:h.z)||0,((y=S==null?void 0:S[Vt])==null?void 0:y.z)||0,1e3);p=(g?l.zIndex:0)+(T?M:0)}return c[p]?c[p].push(l):c[p]=[l],i=p>i?p:i,c},{}),u=Object.entries(s).map(([c,l])=>{const g=+c;return{edges:l,level:g,isMaxLevel:g===i}});return u.length===0?Pt:u}function Ue(t,e,r){const i=Ht((0,m.useCallback)(s=>t?s.edges.filter(u=>{const c=e.get(u.source),l=e.get(u.target);return(c==null?void 0:c.width)&&(c==null?void 0:c.height)&&(l==null?void 0:l.width)&&(l==null?void 0:l.height)&&Ut({sourcePos:c.positionAbsolute||{x:0,y:0},targetPos:l.positionAbsolute||{x:0,y:0},sourceWidth:c.width,sourceHeight:c.height,targetWidth:l.width,targetHeight:l.height,width:s.width,height:s.height,transform:s.transform})}):s.edges,[t,e]));return sn(i,e,r)}const _n=({color:t="none",strokeWidth:e=1})=>(0,b.jsx)("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:e,fill:"none",points:"-5,-4 0,0 -5,4"}),an=({color:t="none",strokeWidth:e=1})=>(0,b.jsx)("polyline",{stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:e,fill:t,points:"-5,-4 0,0 -5,4 -5,-4"}),ve={[Ge.Arrow]:_n,[Ge.ArrowClosed]:an};function Rr(t){const e=Zt();return(0,m.useMemo)(()=>{var s,u;return Object.prototype.hasOwnProperty.call(ve,t)?ve[t]:((u=(s=e.getState()).onError)==null||u.call(s,"009",ne.error009(t)),null)},[t])}const bn=({id:t,type:e,color:r,width:i=12.5,height:s=12.5,markerUnits:u="strokeWidth",strokeWidth:c,orient:l="auto-start-reverse"})=>{const g=Rr(e);return g?(0,b.jsx)("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${i}`,markerHeight:`${s}`,viewBox:"-10 -10 20 20",markerUnits:u,orient:l,refX:"0",refY:"0",children:(0,b.jsx)(g,{color:r,strokeWidth:c})}):null},Dr=({defaultColor:t,rfId:e})=>r=>{const i=[];return r.edges.reduce((s,u)=>([u.markerStart,u.markerEnd].forEach(c=>{if(c&&typeof c=="object"){const l=Dn(c,e);i.includes(l)||(s.push(wt({id:l,color:c.color||t},c)),i.push(l))}}),s),[]).sort((s,u)=>s.id.localeCompare(u.id))},lr=({defaultColor:t,rfId:e})=>{const r=Ht((0,m.useCallback)(Dr({defaultColor:t,rfId:e}),[t,e]),(i,s)=>!(i.length!==s.length||i.some((u,c)=>u.id!==s[c].id)));return(0,b.jsx)("defs",{children:r.map(i=>(0,b.jsx)(bn,{id:i.id,type:i.type,color:i.color,width:i.width,height:i.height,markerUnits:i.markerUnits,strokeWidth:i.strokeWidth,orient:i.orient},i.id))})};lr.displayName="MarkerDefinitions";var zr=(0,m.memo)(lr);const ni=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),So=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:r,rfId:i,edgeTypes:s,noPanClassName:u,onEdgeUpdate:c,onEdgeContextMenu:l,onEdgeMouseEnter:g,onEdgeMouseMove:p,onEdgeMouseLeave:h,onEdgeClick:y,edgeUpdaterRadius:S,onEdgeDoubleClick:E,onEdgeUpdateStart:T,onEdgeUpdateEnd:M,children:R})=>{const{edgesFocusable:D,edgesUpdatable:z,elementsSelectable:I,width:N,height:$,connectionMode:O,nodeInternals:X,onError:G}=Ht(ni,_t.X),J=Ue(e,X,r);return N?(0,b.jsxs)(b.Fragment,{children:[J.map(({level:ot,edges:W,isMaxLevel:rt})=>(0,b.jsxs)("svg",{style:{zIndex:ot},width:N,height:$,className:"react-flow__edges react-flow__container",children:[rt&&(0,b.jsx)(zr,{defaultColor:t,rfId:i}),(0,b.jsx)("g",{children:W.map(P=>{var Ae,Wt;const[q,et,gt]=de(X.get(P.source)),[St,xt,A]=de(X.get(P.target));if(!gt||!A)return null;let j=P.type||"default";s[j]||(G==null||G("011",ne.error011(j)),j="default");const ft=s[j]||s.default,Et=O===Re.Strict?xt.target:((Ae=xt.target)!=null?Ae:[]).concat((Wt=xt.source)!=null?Wt:[]),Nt=Mt(et.source,P.sourceHandle),$t=Mt(Et,P.targetHandle),Xt=(Nt==null?void 0:Nt.position)||it.Bottom,Gt=($t==null?void 0:$t.position)||it.Top,oe=!!(P.focusable||D&&typeof P.focusable=="undefined"),ee=typeof c!="undefined"&&(P.updatable||z&&typeof P.updatable=="undefined");if(!Nt||!$t)return G==null||G("008",ne.error008(Nt,P)),null;const{sourceX:ie,sourceY:he,targetX:ue,targetY:Qt}=ce(q,Nt,Xt,St,$t,Gt);return(0,b.jsx)(ft,{id:P.id,className:(0,K.Z)([P.className,u]),type:j,data:P.data,selected:!!P.selected,animated:!!P.animated,hidden:!!P.hidden,label:P.label,labelStyle:P.labelStyle,labelShowBg:P.labelShowBg,labelBgStyle:P.labelBgStyle,labelBgPadding:P.labelBgPadding,labelBgBorderRadius:P.labelBgBorderRadius,style:P.style,source:P.source,target:P.target,sourceHandleId:P.sourceHandle,targetHandleId:P.targetHandle,markerEnd:P.markerEnd,markerStart:P.markerStart,sourceX:ie,sourceY:he,targetX:ue,targetY:Qt,sourcePosition:Xt,targetPosition:Gt,elementsSelectable:I,onEdgeUpdate:c,onContextMenu:l,onMouseEnter:g,onMouseMove:p,onMouseLeave:h,onClick:y,edgeUpdaterRadius:S,onEdgeDoubleClick:E,onEdgeUpdateStart:T,onEdgeUpdateEnd:M,rfId:i,ariaLabel:P.ariaLabel,isFocusable:oe,isUpdatable:ee,pathOptions:"pathOptions"in P?P.pathOptions:void 0,interactionWidth:P.interactionWidth},P.id)})})]},ot)),R]}):null};So.displayName="EdgeRenderer";var C=(0,m.memo)(So);const ht=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function F({children:t}){const e=Ht(ht);return(0,b.jsx)("div",{className:"react-flow__viewport react-flow__container",style:{transform:e},children:t})}function mt(t){const e=Ur(),r=(0,m.useRef)(!1);(0,m.useEffect)(()=>{!r.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),r.current=!0)},[t,e.viewportInitialized])}const Tt={[it.Left]:it.Right,[it.Right]:it.Left,[it.Top]:it.Bottom,[it.Bottom]:it.Top},Dt=({nodeId:t,handleType:e,style:r,type:i=De.Bezier,CustomComponent:s,connectionStatus:u})=>{var O,X,G,J,ot,W,rt;const{fromNode:c,handleId:l,toX:g,toY:p,connectionMode:h}=Ht((0,m.useCallback)(P=>({fromNode:P.nodeInternals.get(t),handleId:P.connectionHandleId,toX:(P.connectionPosition.x-P.transform[0])/P.transform[2],toY:(P.connectionPosition.y-P.transform[1])/P.transform[2],connectionMode:P.connectionMode}),[t]),_t.X),y=(O=c==null?void 0:c[Vt])==null?void 0:O.handleBounds;let S=y==null?void 0:y[e];if(h===Re.Loose&&(S=S||(y==null?void 0:y[e==="source"?"target":"source"])),!c||!S)return null;const E=l?S.find(P=>P.id===l):S[0],T=E?E.x+E.width/2:((X=c.width)!=null?X:0)/2,M=E?E.y+E.height/2:(G=c.height)!=null?G:0,R=((ot=(J=c.positionAbsolute)==null?void 0:J.x)!=null?ot:0)+T,D=((rt=(W=c.positionAbsolute)==null?void 0:W.y)!=null?rt:0)+M,z=E==null?void 0:E.position,I=z?Tt[z]:null;if(!z||!I)return null;if(s)return(0,b.jsx)(s,{connectionLineType:i,connectionLineStyle:r,fromNode:c,fromHandle:E,fromX:R,fromY:D,toX:g,toY:p,fromPosition:z,toPosition:I,connectionStatus:u});let N="";const $={sourceX:R,sourceY:D,sourcePosition:z,targetX:g,targetY:p,targetPosition:I};return i===De.Bezier?[N]=Jn($):i===De.Step?[N]=yn(jt(wt({},$),{borderRadius:0})):i===De.SmoothStep?[N]=yn($):i===De.SimpleBezier?[N]=Qe($):N=`M${R},${D} ${g},${p}`,(0,b.jsx)("path",{d:N,fill:"none",className:"react-flow__connection-path",style:r})};Dt.displayName="ConnectionLine";const It=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Bt({containerStyle:t,style:e,type:r,component:i}){const{nodeId:s,handleType:u,nodesConnectable:c,width:l,height:g,connectionStatus:p}=Ht(It,_t.X);return!(s&&u&&l&&c)?null:(0,b.jsx)("svg",{style:t,width:l,height:g,className:"react-flow__edges react-flow__connectionline react-flow__container",children:(0,b.jsx)("g",{className:(0,K.Z)(["react-flow__connection",p]),children:(0,b.jsx)(Dt,{nodeId:s,handleType:u,style:e,type:r,CustomComponent:i,connectionStatus:p})})})}function Ft(t,e){const r=(0,m.useRef)(null),i=Zt();return(0,m.useMemo)(()=>e(t),[t])}const Me=({nodeTypes:t,edgeTypes:e,onMove:r,onMoveStart:i,onMoveEnd:s,onInit:u,onNodeClick:c,onEdgeClick:l,onNodeDoubleClick:g,onEdgeDoubleClick:p,onNodeMouseEnter:h,onNodeMouseMove:y,onNodeMouseLeave:S,onNodeContextMenu:E,onSelectionContextMenu:T,onSelectionStart:M,onSelectionEnd:R,connectionLineType:D,connectionLineStyle:z,connectionLineComponent:I,connectionLineContainerStyle:N,selectionKeyCode:$,selectionOnDrag:O,selectionMode:X,multiSelectionKeyCode:G,panActivationKeyCode:J,zoomActivationKeyCode:ot,deleteKeyCode:W,onlyRenderVisibleElements:rt,elementsSelectable:P,selectNodesOnDrag:q,defaultViewport:et,translateExtent:gt,minZoom:St,maxZoom:xt,preventScrolling:A,defaultMarkerColor:j,zoomOnScroll:ft,zoomOnPinch:Et,panOnScroll:Nt,panOnScrollSpeed:$t,panOnScrollMode:Xt,zoomOnDoubleClick:Gt,panOnDrag:oe,onPaneClick:ee,onPaneMouseEnter:ie,onPaneMouseMove:he,onPaneMouseLeave:ue,onPaneScroll:Qt,onPaneContextMenu:Ae,onEdgeUpdate:Wt,onEdgeContextMenu:Yt,onEdgeMouseEnter:ye,onEdgeMouseMove:Ct,onEdgeMouseLeave:Ln,edgeUpdaterRadius:fr,onEdgeUpdateStart:Qr,onEdgeUpdateEnd:qr,noDragClassName:$r,noWheelClassName:dr,noPanClassName:Xn,elevateEdgesOnSelect:Hr,disableKeyboardA11y:Vn,nodeOrigin:hr,nodeExtent:Jr,rfId:Or})=>{const ge=Ft(t,n),Pe=Ft(e,yt);return mt(u),(0,b.jsx)(ti,{onPaneClick:ee,onPaneMouseEnter:ie,onPaneMouseMove:he,onPaneMouseLeave:ue,onPaneContextMenu:Ae,onPaneScroll:Qt,deleteKeyCode:W,selectionKeyCode:$,selectionOnDrag:O,selectionMode:X,onSelectionStart:M,onSelectionEnd:R,multiSelectionKeyCode:G,panActivationKeyCode:J,zoomActivationKeyCode:ot,elementsSelectable:P,onMove:r,onMoveStart:i,onMoveEnd:s,zoomOnScroll:ft,zoomOnPinch:Et,zoomOnDoubleClick:Gt,panOnScroll:Nt,panOnScrollSpeed:$t,panOnScrollMode:Xt,panOnDrag:oe,defaultViewport:et,translateExtent:gt,minZoom:St,maxZoom:xt,onSelectionContextMenu:T,preventScrolling:A,noDragClassName:$r,noWheelClassName:dr,noPanClassName:Xn,disableKeyboardA11y:Vn,children:(0,b.jsxs)(F,{children:[(0,b.jsx)(C,{edgeTypes:Pe,onEdgeClick:l,onEdgeDoubleClick:p,onEdgeUpdate:Wt,onlyRenderVisibleElements:rt,onEdgeContextMenu:Yt,onEdgeMouseEnter:ye,onEdgeMouseMove:Ct,onEdgeMouseLeave:Ln,onEdgeUpdateStart:Qr,onEdgeUpdateEnd:qr,edgeUpdaterRadius:fr,defaultMarkerColor:j,noPanClassName:Xn,elevateEdgesOnSelect:!!Hr,disableKeyboardA11y:Vn,rfId:Or,children:(0,b.jsx)(Bt,{style:z,type:D,component:I,containerStyle:N})}),(0,b.jsx)("div",{className:"react-flow__edgelabel-renderer"}),(0,b.jsx)(w,{nodeTypes:ge,onNodeClick:c,onNodeDoubleClick:g,onNodeMouseEnter:h,onNodeMouseMove:y,onNodeMouseLeave:S,onNodeContextMenu:E,selectNodesOnDrag:q,onlyRenderVisibleElements:rt,noPanClassName:Xn,noDragClassName:$r,disableKeyboardA11y:Vn,nodeOrigin:hr,nodeExtent:Jr,rfId:Or})]})})};Me.displayName="GraphView";var te=(0,m.memo)(Me);const pe=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],re={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:pe,nodeExtent:pe,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Re.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:Cn,isValidConnection:void 0},Ce=()=>(0,ct.F)((t,e)=>jt(wt({},re),{setNodes:r=>{const{nodeInternals:i,nodeOrigin:s,elevateNodesOnSelect:u}=e();t({nodeInternals:Kr(r,i,s,u)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:r=>{const{defaultEdgeOptions:i={}}=e();t({edges:r.map(s=>wt(wt({},i),s))})},setDefaultNodesAndEdges:(r,i)=>{const s=typeof r!="undefined",u=typeof i!="undefined",c=s?Kr(r,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:c,edges:u?i:[],hasDefaultNodes:s,hasDefaultEdges:u})},updateNodeDimensions:r=>{const{onNodesChange:i,nodeInternals:s,fitViewOnInit:u,fitViewOnInitDone:c,fitViewOnInitOptions:l,domNode:g,nodeOrigin:p}=e(),h=g==null?void 0:g.querySelector(".react-flow__viewport");if(!h)return;const y=window.getComputedStyle(h),{m22:S}=new window.DOMMatrixReadOnly(y.transform),E=r.reduce((M,R)=>{const D=s.get(R.id);if(D){const z=Sn(R.nodeElement);!!(z.width&&z.height&&(D.width!==z.width||D.height!==z.height||R.forceUpdate))&&(s.set(D.id,wt(jt(wt({},D),{[Vt]:jt(wt({},D[Vt]),{handleBounds:{source:wo(".source",R.nodeElement,S,p),target:wo(".target",R.nodeElement,S,p)}})}),z)),M.push({id:D.id,type:"dimensions",dimensions:z}))}return M},[]);uo(s,p);const T=c||u&&!c&&lo(e,wt({initial:!0},l));t({nodeInternals:new Map(s),fitViewOnInitDone:T}),(E==null?void 0:E.length)>0&&(i==null||i(E))},updateNodePositions:(r,i=!0,s=!1)=>{const{triggerNodeChanges:u}=e(),c=r.map(l=>{const g={id:l.id,type:"position",dragging:s};return i&&(g.positionAbsolute=l.positionAbsolute,g.position=l.position),g});u(c)},triggerNodeChanges:r=>{const{onNodesChange:i,nodeInternals:s,hasDefaultNodes:u,nodeOrigin:c,getNodes:l,elevateNodesOnSelect:g}=e();if(r!=null&&r.length){if(u){const p=yo(r,l()),h=Kr(p,s,c,g);t({nodeInternals:h})}i==null||i(r)}},addSelectedNodes:r=>{const{multiSelectionActive:i,edges:s,getNodes:u}=e();let c,l=null;i?c=r.map(g=>rn(g,!0)):(c=Bn(u(),r),l=Bn(s,[])),Pr({changedNodes:c,changedEdges:l,get:e,set:t})},addSelectedEdges:r=>{const{multiSelectionActive:i,edges:s,getNodes:u}=e();let c,l=null;i?c=r.map(g=>rn(g,!0)):(c=Bn(s,r),l=Bn(u(),[])),Pr({changedNodes:l,changedEdges:c,get:e,set:t})},unselectNodesAndEdges:({nodes:r,edges:i}={})=>{const{edges:s,getNodes:u}=e(),c=r||u(),l=i||s,g=c.map(h=>(h.selected=!1,rn(h.id,!1))),p=l.map(h=>rn(h.id,!1));Pr({changedNodes:g,changedEdges:p,get:e,set:t})},setMinZoom:r=>{const{d3Zoom:i,maxZoom:s}=e();i==null||i.scaleExtent([r,s]),t({minZoom:r})},setMaxZoom:r=>{const{d3Zoom:i,minZoom:s}=e();i==null||i.scaleExtent([s,r]),t({maxZoom:r})},setTranslateExtent:r=>{var i;(i=e().d3Zoom)==null||i.translateExtent(r),t({translateExtent:r})},resetSelectedElements:()=>{const{edges:r,getNodes:i}=e(),u=i().filter(l=>l.selected).map(l=>rn(l.id,!1)),c=r.filter(l=>l.selected).map(l=>rn(l.id,!1));Pr({changedNodes:u,changedEdges:c,get:e,set:t})},setNodeExtent:r=>{const{nodeInternals:i}=e();i.forEach(s=>{s.positionAbsolute=Kn(s.position,r)}),t({nodeExtent:r,nodeInternals:new Map(i)})},panBy:r=>{const{transform:i,width:s,height:u,d3Zoom:c,d3Selection:l,translateExtent:g}=e();if(!c||!l||!r.x&&!r.y)return!1;const p=tt.CR.translate(i[0]+r.x,i[1]+r.y).scale(i[2]),h=[[0,0],[s,u]],y=c==null?void 0:c.constrain()(p,h,g);return c.transform(l,y),i[0]!==y.x||i[1]!==y.y||i[2]!==y.k},cancelConnection:()=>t({connectionNodeId:re.connectionNodeId,connectionHandleId:re.connectionHandleId,connectionHandleType:re.connectionHandleType,connectionStatus:re.connectionStatus,connectionStartHandle:re.connectionStartHandle,connectionEndHandle:re.connectionEndHandle}),reset:()=>t(wt({},re))}),Object.is),He=({children:t})=>{const e=(0,m.useRef)(null);return e.current||(e.current=Ce()),(0,b.jsx)(_r,{value:e.current,children:t})};He.displayName="ReactFlowProvider";const Ir=({children:t})=>(0,m.useContext)(Te)?(0,b.jsx)(b.Fragment,{children:t}):(0,b.jsx)(He,{children:t});Ir.displayName="ReactFlowWrapper";const _i={input:en,default:zn,output:ir,group:In},bi={default:Rn,straight:Qn,step:Gn,smoothstep:Tn,simplebezier:Ve},vi=[0,0],Si=[15,15],Ei={x:0,y:0,zoom:1},Ni={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},li=(0,m.forwardRef)((_s,cs)=>{var yi=_s,{nodes:t,edges:e,defaultNodes:r,defaultEdges:i,className:s,nodeTypes:u=_i,edgeTypes:c=bi,onNodeClick:l,onEdgeClick:g,onInit:p,onMove:h,onMoveStart:y,onMoveEnd:S,onConnect:E,onConnectStart:T,onConnectEnd:M,onClickConnectStart:R,onClickConnectEnd:D,onNodeMouseEnter:z,onNodeMouseMove:I,onNodeMouseLeave:N,onNodeContextMenu:$,onNodeDoubleClick:O,onNodeDragStart:X,onNodeDrag:G,onNodeDragStop:J,onNodesDelete:ot,onEdgesDelete:W,onSelectionChange:rt,onSelectionDragStart:P,onSelectionDrag:q,onSelectionDragStop:et,onSelectionContextMenu:gt,onSelectionStart:St,onSelectionEnd:xt,connectionMode:A=Re.Strict,connectionLineType:j=De.Bezier,connectionLineStyle:ft,connectionLineComponent:Et,connectionLineContainerStyle:Nt,deleteKeyCode:$t="Backspace",selectionKeyCode:Xt="Shift",selectionOnDrag:Gt=!1,selectionMode:oe=gn.Full,panActivationKeyCode:ee="Space",multiSelectionKeyCode:ie=Se()?"Meta":"Control",zoomActivationKeyCode:he=Se()?"Meta":"Control",snapToGrid:ue=!1,snapGrid:Qt=Si,onlyRenderVisibleElements:Ae=!1,selectNodesOnDrag:Wt=!0,nodesDraggable:Yt,nodesConnectable:ye,nodesFocusable:Ct,nodeOrigin:Ln=vi,edgesFocusable:fr,edgesUpdatable:Qr,elementsSelectable:qr,defaultViewport:$r=Ei,minZoom:dr=.5,maxZoom:Xn=2,translateExtent:Hr=pe,preventScrolling:Vn=!0,nodeExtent:hr,defaultMarkerColor:Jr="#b1b1b7",zoomOnScroll:Or=!0,zoomOnPinch:ge=!0,panOnScroll:Pe=!1,panOnScrollSpeed:gr=.5,panOnScrollMode:pr=Xe.Free,zoomOnDoubleClick:yr=!0,panOnDrag:Eo=!0,onPaneClick:mr,onPaneMouseEnter:ri,onPaneMouseMove:oi,onPaneMouseLeave:to,onPaneScroll:ii,onPaneContextMenu:di,children:xr,onEdgeUpdate:zi,onEdgeContextMenu:Ii,onEdgeDoubleClick:$i,onEdgeMouseEnter:Hi,onEdgeMouseMove:Oi,onEdgeMouseLeave:Bi,onEdgeUpdateStart:Zi,onEdgeUpdateEnd:Li,edgeUpdaterRadius:Xi=10,onNodesChange:Vi,onEdgesChange:Fi,noDragClassName:Yi="nodrag",noWheelClassName:Ki="nowheel",noPanClassName:hi="nopan",fitView:Ui=!1,fitViewOptions:Wi,connectOnClick:ji=!0,attributionPosition:Gi,proOptions:Qi,defaultEdgeOptions:qi,elevateNodesOnSelect:Ji=!0,elevateEdgesOnSelect:ts=!1,disableKeyboardA11y:gi=!1,autoPanOnConnect:es=!0,autoPanOnNodeDrag:ns=!0,connectionRadius:rs=20,isValidConnection:os,onError:is,style:ss,id:pi}=yi,as=Br(yi,["nodes","edges","defaultNodes","defaultEdges","className","nodeTypes","edgeTypes","onNodeClick","onEdgeClick","onInit","onMove","onMoveStart","onMoveEnd","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","onNodeDoubleClick","onNodeDragStart","onNodeDrag","onNodeDragStop","onNodesDelete","onEdgesDelete","onSelectionChange","onSelectionDragStart","onSelectionDrag","onSelectionDragStop","onSelectionContextMenu","onSelectionStart","onSelectionEnd","connectionMode","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","deleteKeyCode","selectionKeyCode","selectionOnDrag","selectionMode","panActivationKeyCode","multiSelectionKeyCode","zoomActivationKeyCode","snapToGrid","snapGrid","onlyRenderVisibleElements","selectNodesOnDrag","nodesDraggable","nodesConnectable","nodesFocusable","nodeOrigin","edgesFocusable","edgesUpdatable","elementsSelectable","defaultViewport","minZoom","maxZoom","translateExtent","preventScrolling","nodeExtent","defaultMarkerColor","zoomOnScroll","zoomOnPinch","panOnScroll","panOnScrollSpeed","panOnScrollMode","zoomOnDoubleClick","panOnDrag","onPaneClick","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","onPaneScroll","onPaneContextMenu","children","onEdgeUpdate","onEdgeContextMenu","onEdgeDoubleClick","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","onEdgeUpdateStart","onEdgeUpdateEnd","edgeUpdaterRadius","onNodesChange","onEdgesChange","noDragClassName","noWheelClassName","noPanClassName","fitView","fitViewOptions","connectOnClick","attributionPosition","proOptions","defaultEdgeOptions","elevateNodesOnSelect","elevateEdgesOnSelect","disableKeyboardA11y","autoPanOnConnect","autoPanOnNodeDrag","connectionRadius","isValidConnection","onError","style","id"]);const si=pi||"1";return(0,b.jsx)("div",jt(wt({},as),{style:wt(wt({},ss),Ni),ref:cs,className:(0,K.Z)(["react-flow",s]),"data-testid":"rf__wrapper",id:pi,children:(0,b.jsxs)(Ir,{children:[(0,b.jsx)(te,{onInit:p,onMove:h,onMoveStart:y,onMoveEnd:S,onNodeClick:l,onEdgeClick:g,onNodeMouseEnter:z,onNodeMouseMove:I,onNodeMouseLeave:N,onNodeContextMenu:$,onNodeDoubleClick:O,nodeTypes:u,edgeTypes:c,connectionLineType:j,connectionLineStyle:ft,connectionLineComponent:Et,connectionLineContainerStyle:Nt,selectionKeyCode:Xt,selectionOnDrag:Gt,selectionMode:oe,deleteKeyCode:$t,multiSelectionKeyCode:ie,panActivationKeyCode:ee,zoomActivationKeyCode:he,onlyRenderVisibleElements:Ae,selectNodesOnDrag:Wt,defaultViewport:$r,translateExtent:Hr,minZoom:dr,maxZoom:Xn,preventScrolling:Vn,zoomOnScroll:Or,zoomOnPinch:ge,zoomOnDoubleClick:yr,panOnScroll:Pe,panOnScrollSpeed:gr,panOnScrollMode:pr,panOnDrag:Eo,onPaneClick:mr,onPaneMouseEnter:ri,onPaneMouseMove:oi,onPaneMouseLeave:to,onPaneScroll:ii,onPaneContextMenu:di,onSelectionContextMenu:gt,onSelectionStart:St,onSelectionEnd:xt,onEdgeUpdate:zi,onEdgeContextMenu:Ii,onEdgeDoubleClick:$i,onEdgeMouseEnter:Hi,onEdgeMouseMove:Oi,onEdgeMouseLeave:Bi,onEdgeUpdateStart:Zi,onEdgeUpdateEnd:Li,edgeUpdaterRadius:Xi,defaultMarkerColor:Jr,noDragClassName:Yi,noWheelClassName:Ki,noPanClassName:hi,elevateEdgesOnSelect:ts,rfId:si,disableKeyboardA11y:gi,nodeOrigin:Ln,nodeExtent:hr}),(0,b.jsx)(ko,{nodes:t,edges:e,defaultNodes:r,defaultEdges:i,onConnect:E,onConnectStart:T,onConnectEnd:M,onClickConnectStart:R,onClickConnectEnd:D,nodesDraggable:Yt,nodesConnectable:ye,nodesFocusable:Ct,edgesFocusable:fr,edgesUpdatable:Qr,elementsSelectable:qr,elevateNodesOnSelect:Ji,minZoom:dr,maxZoom:Xn,nodeExtent:hr,onNodesChange:Vi,onEdgesChange:Fi,snapToGrid:ue,snapGrid:Qt,connectionMode:A,translateExtent:Hr,connectOnClick:ji,defaultEdgeOptions:qi,fitView:Ui,fitViewOptions:Wi,onNodesDelete:ot,onEdgesDelete:W,onNodeDragStart:X,onNodeDrag:G,onNodeDragStop:J,onSelectionDrag:q,onSelectionDragStart:P,onSelectionDragStop:et,noPanClassName:hi,nodeOrigin:Ln,rfId:si,autoPanOnConnect:es,autoPanOnNodeDrag:ns,onError:is,connectionRadius:rs,isValidConnection:os}),(0,b.jsx)(Po,{onSelectionChange:rt}),xr,(0,b.jsx)(Lr,{proOptions:Qi,position:Gi}),(0,b.jsx)($o,{rfId:si,disableKeyboardA11y:gi})]})}))});li.displayName="ReactFlow";const Mi=t=>{var e;return(e=t.domNode)==null?void 0:e.querySelector(".react-flow__edgelabel-renderer")};function ds({children:t}){const e=Ht(Mi);return e?createPortal(t,e):null}function hs(){const t=Zt();return useCallback(e=>{const{domNode:r,updateNodeDimensions:i}=t.getState(),u=(Array.isArray(e)?e:[e]).reduce((c,l)=>{const g=r==null?void 0:r.querySelector(`.react-flow__node[data-id="${l}"]`);return g&&c.push({id:l,nodeElement:g,forceUpdate:!0}),c},[]);requestAnimationFrame(()=>i(u))},[])}const Ci=t=>t.getNodes();function gs(){return Ht(Ci,shallow)}const Ai=t=>t.edges;function ps(){return Ht(Ai,shallow)}const Pi=t=>({x:t.transform[0],y:t.transform[1],zoom:t.transform[2]});function Ti(){return Ht(Pi,_t.X)}function fi(t){return e=>{const[r,i]=(0,m.useState)(e),s=(0,m.useCallback)(u=>i(c=>t(u,c)),[]);return[r,i,s]}}const ys=fi(yo),ki=fi(jo);function ms({onStart:t,onChange:e,onEnd:r}){const i=Zt();useEffect(()=>{i.setState({onViewportChangeStart:t})},[t]),useEffect(()=>{i.setState({onViewportChange:e})},[e]),useEffect(()=>{i.setState({onViewportChangeEnd:r})},[r])}function xs({onChange:t}){const e=Zt();useEffect(()=>{e.setState({onSelectionChange:t})},[t])}const Ri=t=>e=>e.nodeInternals.size===0?!1:e.getNodes().filter(r=>t.includeHiddenNodes?!0:!r.hidden).every(r=>{var i;return((i=r[Vt])==null?void 0:i.handleBounds)!==void 0}),Di={includeHiddenNodes:!1};function ws(t=Di){return Ht(Ri(t))}},30006:function(ut,dt,B){var b=B(25705);function m(K){if(Array.isArray(K))return b(K)}ut.exports=m,ut.exports.__esModule=!0,ut.exports.default=ut.exports},16660:function(ut){function dt(B){if(typeof Symbol!="undefined"&&B[Symbol.iterator]!=null||B["@@iterator"]!=null)return Array.from(B)}ut.exports=dt,ut.exports.__esModule=!0,ut.exports.default=ut.exports},95848:function(ut){function dt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}ut.exports=dt,ut.exports.__esModule=!0,ut.exports.default=ut.exports},92935:function(ut){function dt(B,b){return b||(b=B.slice(0)),Object.freeze(Object.defineProperties(B,{raw:{value:Object.freeze(b)}}))}ut.exports=dt,ut.exports.__esModule=!0,ut.exports.default=ut.exports},93525:function(ut,dt,B){var b=B(30006),m=B(16660),K=B(41442),ct=B(95848);function _t(tt){return b(tt)||m(tt)||K(tt)||ct()}ut.exports=_t,ut.exports.__esModule=!0,ut.exports.default=ut.exports},97565:function(ut,dt){"use strict";var B={value:function(){}};function b(){for(var tt=0,nt=arguments.length,lt={},vt;tt<nt;++tt){if(!(vt=arguments[tt]+"")||vt in lt||/[\s.]/.test(vt))throw new Error("illegal type: "+vt);lt[vt]=[]}return new m(lt)}function m(tt){this._=tt}function K(tt,nt){return tt.trim().split(/^|\s+/).map(function(lt){var vt="",zt=lt.indexOf(".");if(zt>=0&&(vt=lt.slice(zt+1),lt=lt.slice(0,zt)),lt&&!nt.hasOwnProperty(lt))throw new Error("unknown type: "+lt);return{type:lt,name:vt}})}m.prototype=b.prototype={constructor:m,on:function(nt,lt){var vt=this._,zt=K(nt+"",vt),kt,Kt=-1,me=zt.length;if(arguments.length<2){for(;++Kt<me;)if((kt=(nt=zt[Kt]).type)&&(kt=ct(vt[kt],nt.name)))return kt;return}if(lt!=null&&typeof lt!="function")throw new Error("invalid callback: "+lt);for(;++Kt<me;)if(kt=(nt=zt[Kt]).type)vt[kt]=_t(vt[kt],nt.name,lt);else if(lt==null)for(kt in vt)vt[kt]=_t(vt[kt],nt.name,null);return this},copy:function(){var nt={},lt=this._;for(var vt in lt)nt[vt]=lt[vt].slice();return new m(nt)},call:function(nt,lt){if((kt=arguments.length-2)>0)for(var vt=new Array(kt),zt=0,kt,Kt;zt<kt;++zt)vt[zt]=arguments[zt+2];if(!this._.hasOwnProperty(nt))throw new Error("unknown type: "+nt);for(Kt=this._[nt],zt=0,kt=Kt.length;zt<kt;++zt)Kt[zt].value.apply(lt,vt)},apply:function(nt,lt,vt){if(!this._.hasOwnProperty(nt))throw new Error("unknown type: "+nt);for(var zt=this._[nt],kt=0,Kt=zt.length;kt<Kt;++kt)zt[kt].value.apply(lt,vt)}};function ct(tt,nt){for(var lt=0,vt=tt.length,zt;lt<vt;++lt)if((zt=tt[lt]).name===nt)return zt.value}function _t(tt,nt,lt){for(var vt=0,zt=tt.length;vt<zt;++vt)if(tt[vt].name===nt){tt[vt]=B,tt=tt.slice(0,vt).concat(tt.slice(vt+1));break}return lt!=null&&tt.push({name:nt,value:lt}),tt}dt.Z=b},76295:function(ut,dt,B){"use strict";B.d(dt,{Z:function(){return b}});function b(m){if(typeof m=="string"||typeof m=="number")return""+m;let K="";if(Array.isArray(m))for(let ct=0,_t;ct<m.length;ct++)(_t=b(m[ct]))!==""&&(K+=(K&&" ")+_t);else for(let ct in m)m[ct]&&(K+=(K&&" ")+ct);return K}},49289:function(ut,dt,B){"use strict";B.d(dt,{D:function(){return ct},Z:function(){return K}});var b=B(41468),m=B(5873);function K(_t){var tt=_t.document.documentElement,nt=(0,b.Z)(_t).on("dragstart.drag",m.ZP,m.Dd);"onselectstart"in tt?nt.on("selectstart.drag",m.ZP,m.Dd):(tt.__noselect=tt.style.MozUserSelect,tt.style.MozUserSelect="none")}function ct(_t,tt){var nt=_t.document.documentElement,lt=(0,b.Z)(_t).on("dragstart.drag",null);tt&&(lt.on("click.drag",m.ZP,m.Dd),setTimeout(function(){lt.on("click.drag",null)},0)),"onselectstart"in nt?lt.on("selectstart.drag",null):(nt.style.MozUserSelect=nt.__noselect,delete nt.__noselect)}},5873:function(ut,dt,B){"use strict";B.d(dt,{Dd:function(){return m},Q7:function(){return b},ZP:function(){return ct},rG:function(){return K}});const b={passive:!1},m={capture:!0,passive:!1};function K(_t){_t.stopImmediatePropagation()}function ct(_t){_t.preventDefault(),_t.stopImmediatePropagation()}},73409:function(ut,dt,B){"use strict";B.d(dt,{P:function(){return m},Z:function(){return b}});function b(K){return function(){return this.matches(K)}}function m(K){return function(ct){return ct.matches(K)}}},60021:function(ut,dt,B){"use strict";B.d(dt,{Z:function(){return m}});var b=B(17110);function m(K){var ct=K+="",_t=ct.indexOf(":");return _t>=0&&(ct=K.slice(0,_t))!=="xmlns"&&(K=K.slice(_t+1)),b.Z.hasOwnProperty(ct)?{space:b.Z[ct],local:K}:K}},17110:function(ut,dt,B){"use strict";B.d(dt,{P:function(){return b}});var b="http://www.w3.org/1999/xhtml";dt.Z={svg:"http://www.w3.org/2000/svg",xhtml:b,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},13802:function(ut,dt,B){"use strict";B.d(dt,{Z:function(){return m}});function b(K){let ct;for(;ct=K.sourceEvent;)K=ct;return K}function m(K,ct){if(K=b(K),ct===void 0&&(ct=K.currentTarget),ct){var _t=ct.ownerSVGElement||ct;if(_t.createSVGPoint){var tt=_t.createSVGPoint();return tt.x=K.clientX,tt.y=K.clientY,tt=tt.matrixTransform(ct.getScreenCTM().inverse()),[tt.x,tt.y]}if(ct.getBoundingClientRect){var nt=ct.getBoundingClientRect();return[K.clientX-nt.left-ct.clientLeft,K.clientY-nt.top-ct.clientTop]}}return[K.pageX,K.pageY]}},41468:function(ut,dt,B){"use strict";B.d(dt,{Z:function(){return m}});var b=B(1776);function m(K){return typeof K=="string"?new b.Y1([[document.querySelector(K)]],[document.documentElement]):new b.Y1([[K]],b.Jz)}},1776:function(ut,dt,B){"use strict";B.d(dt,{Y1:function(){return se},ZP:function(){return be},Jz:function(){return tn}});var b=B(66456);function m(f){typeof f!="function"&&(f=(0,b.Z)(f));for(var _=this._groups,Y=_.length,U=new Array(Y),H=0;H<Y;++H)for(var Q=_[H],st=Q.length,at=U[H]=new Array(st),bt,At,Ot=0;Ot<st;++Ot)(bt=Q[Ot])&&(At=f.call(bt,bt.__data__,Ot,Q))&&("__data__"in bt&&(At.__data__=bt.__data__),at[Ot]=At);return new se(U,this._parents)}function K(f){return f==null?[]:Array.isArray(f)?f:Array.from(f)}var ct=B(16851);function _t(f){return function(){return K(f.apply(this,arguments))}}function tt(f){typeof f=="function"?f=_t(f):f=(0,ct.Z)(f);for(var _=this._groups,Y=_.length,U=[],H=[],Q=0;Q<Y;++Q)for(var st=_[Q],at=st.length,bt,At=0;At<at;++At)(bt=st[At])&&(U.push(f.call(bt,bt.__data__,At,st)),H.push(bt));return new se(U,H)}var nt=B(73409),lt=Array.prototype.find;function vt(f){return function(){return lt.call(this.children,f)}}function zt(){return this.firstElementChild}function kt(f){return this.select(f==null?zt:vt(typeof f=="function"?f:(0,nt.P)(f)))}var Kt=Array.prototype.filter;function me(){return Array.from(this.children)}function wr(f){return function(){return Kt.call(this.children,f)}}function vn(f){return this.selectAll(f==null?me:wr(typeof f=="function"?f:(0,nt.P)(f)))}function cn(f){typeof f!="function"&&(f=(0,nt.Z)(f));for(var _=this._groups,Y=_.length,U=new Array(Y),H=0;H<Y;++H)for(var Q=_[H],st=Q.length,at=U[H]=[],bt,At=0;At<st;++At)(bt=Q[At])&&f.call(bt,bt.__data__,At,Q)&&at.push(bt);return new se(U,this._parents)}function un(f){return new Array(f.length)}function Oe(){return new se(this._enter||this._groups.map(un),this._parents)}function We(f,_){this.ownerDocument=f.ownerDocument,this.namespaceURI=f.namespaceURI,this._next=null,this._parent=f,this.__data__=_}We.prototype={constructor:We,appendChild:function(f){return this._parent.insertBefore(f,this._next)},insertBefore:function(f,_){return this._parent.insertBefore(f,_)},querySelector:function(f){return this._parent.querySelector(f)},querySelectorAll:function(f){return this._parent.querySelectorAll(f)}};function Te(f){return function(){return f}}function _r(f,_,Y,U,H,Q){for(var st=0,at,bt=_.length,At=Q.length;st<At;++st)(at=_[st])?(at.__data__=Q[st],U[st]=at):Y[st]=new We(f,Q[st]);for(;st<bt;++st)(at=_[st])&&(H[st]=at)}function ne(f,_,Y,U,H,Q,st){var at,bt,At=new Map,Ot=_.length,le=Q.length,Ee=new Array(Ot),fe;for(at=0;at<Ot;++at)(bt=_[at])&&(Ee[at]=fe=st.call(bt,bt.__data__,at,_)+"",At.has(fe)?H[at]=bt:At.set(fe,bt));for(at=0;at<le;++at)fe=st.call(f,Q[at],at,Q)+"",(bt=At.get(fe))?(U[at]=bt,bt.__data__=Q[at],At.delete(fe)):Y[at]=new We(f,Q[at]);for(at=0;at<Ot;++at)(bt=_[at])&&At.get(Ee[at])===bt&&(H[at]=bt)}function br(f){return f.__data__}function Ht(f,_){if(!arguments.length)return Array.from(this,br);var Y=_?ne:_r,U=this._parents,H=this._groups;typeof f!="function"&&(f=Te(f));for(var Q=H.length,st=new Array(Q),at=new Array(Q),bt=new Array(Q),At=0;At<Q;++At){var Ot=U[At],le=H[At],Ee=le.length,fe=Zt(f.call(Ot,Ot&&Ot.__data__,At,U)),qt=fe.length,wn=at[At]=new Array(qt),zn=st[At]=new Array(qt),Cr=bt[At]=new Array(Ee);Y(Ot,le,wn,zn,Cr,fe,_);for(var en=0,nn=0,ir,In;en<qt;++en)if(ir=wn[en]){for(en>=nn&&(nn=en+1);!(In=zn[nn])&&++nn<qt;);ir._next=In||null}}return st=new se(st,U),st._enter=at,st._exit=bt,st}function Zt(f){return typeof f=="object"&&"length"in f?f:Array.from(f)}function Zr(){return new se(this._exit||this._groups.map(un),this._parents)}function Fn(f,_,Y){var U=this.enter(),H=this,Q=this.exit();return typeof f=="function"?(U=f(U),U&&(U=U.selection())):U=U.append(f+""),_!=null&&(H=_(H),H&&(H=H.selection())),Y==null?Q.remove():Y(Q),U&&H?U.merge(H).order():H}function Lr(f){for(var _=f.selection?f.selection():f,Y=this._groups,U=_._groups,H=Y.length,Q=U.length,st=Math.min(H,Q),at=new Array(H),bt=0;bt<st;++bt)for(var At=Y[bt],Ot=U[bt],le=At.length,Ee=at[bt]=new Array(le),fe,qt=0;qt<le;++qt)(fe=At[qt]||Ot[qt])&&(Ee[qt]=fe);for(;bt<H;++bt)at[bt]=Y[bt];return new se(at,this._parents)}function Xr(){for(var f=this._groups,_=-1,Y=f.length;++_<Y;)for(var U=f[_],H=U.length-1,Q=U[H],st;--H>=0;)(st=U[H])&&(Q&&st.compareDocumentPosition(Q)^4&&Q.parentNode.insertBefore(st,Q),Q=st);return this}function Yn(f){f||(f=Sn);function _(le,Ee){return le&&Ee?f(le.__data__,Ee.__data__):!le-!Ee}for(var Y=this._groups,U=Y.length,H=new Array(U),Q=0;Q<U;++Q){for(var st=Y[Q],at=st.length,bt=H[Q]=new Array(at),At,Ot=0;Ot<at;++Ot)(At=st[Ot])&&(bt[Ot]=At);bt.sort(_)}return new se(H,this._parents).order()}function Sn(f,_){return f<_?-1:f>_?1:f>=_?0:NaN}function je(){var f=arguments[0];return arguments[0]=this,f.apply(null,arguments),this}function Kn(){return Array.from(this)}function Un(){for(var f=this._groups,_=0,Y=f.length;_<Y;++_)for(var U=f[_],H=0,Q=U.length;H<Q;++H){var st=U[H];if(st)return st}return null}function Wn(){let f=0;for(const _ of this)++f;return f}function En(){return!this.node()}function ln(f){for(var _=this._groups,Y=0,U=_.length;Y<U;++Y)for(var H=_[Y],Q=0,st=H.length,at;Q<st;++Q)(at=H[Q])&&f.call(at,at.__data__,Q,H);return this}var Be=B(60021);function Nn(f){return function(){this.removeAttribute(f)}}function fn(f){return function(){this.removeAttributeNS(f.space,f.local)}}function Mn(f,_){return function(){this.setAttribute(f,_)}}function dn(f,_){return function(){this.setAttributeNS(f.space,f.local,_)}}function xe(f,_){return function(){var Y=_.apply(this,arguments);Y==null?this.removeAttribute(f):this.setAttribute(f,Y)}}function Lt(f,_){return function(){var Y=_.apply(this,arguments);Y==null?this.removeAttributeNS(f.space,f.local):this.setAttributeNS(f.space,f.local,Y)}}function Vt(f,_){var Y=(0,Be.Z)(f);if(arguments.length<2){var U=this.node();return Y.local?U.getAttributeNS(Y.space,Y.local):U.getAttribute(Y)}return this.each((_==null?Y.local?fn:Nn:typeof _=="function"?Y.local?Lt:xe:Y.local?dn:Mn)(Y,_))}var hn=B(77932);function Cn(f){return function(){delete this[f]}}function ke(f,_){return function(){this[f]=_}}function An(f,_){return function(){var Y=_.apply(this,arguments);Y==null?delete this[f]:this[f]=Y}}function Pn(f,_){return arguments.length>1?this.each((_==null?Cn:typeof _=="function"?An:ke)(f,_)):this.node()[f]}function we(f){return f.trim().split(/^|\s+/)}function Se(f){return f.classList||new Ze(f)}function Ze(f){this._node=f,this._names=we(f.getAttribute("class")||"")}Ze.prototype={add:function(f){var _=this._names.indexOf(f);_<0&&(this._names.push(f),this._node.setAttribute("class",this._names.join(" ")))},remove:function(f){var _=this._names.indexOf(f);_>=0&&(this._names.splice(_,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(f){return this._names.indexOf(f)>=0}};function Vr(f,_){for(var Y=Se(f),U=-1,H=_.length;++U<H;)Y.add(_[U])}function Le(f,_){for(var Y=Se(f),U=-1,H=_.length;++U<H;)Y.remove(_[U])}function vr(f){return function(){Vr(this,f)}}function Sr(f){return function(){Le(this,f)}}function Re(f,_){return function(){(_.apply(this,arguments)?Vr:Le)(this,f)}}function Xe(f,_){var Y=we(f+"");if(arguments.length<2){for(var U=Se(this.node()),H=-1,Q=Y.length;++H<Q;)if(!U.contains(Y[H]))return!1;return!0}return this.each((typeof _=="function"?Re:_?vr:Sr)(Y,_))}function gn(){this.textContent=""}function De(f){return function(){this.textContent=f}}function Ge(f){return function(){var _=f.apply(this,arguments);this.textContent=_==null?"":_}}function it(f){return arguments.length?this.each(f==null?gn:(typeof f=="function"?Ge:De)(f)):this.node().textContent}function jn(){this.innerHTML=""}function Qe(f){return function(){this.innerHTML=f}}function Ve(f){return function(){var _=f.apply(this,arguments);this.innerHTML=_==null?"":_}}function pn(f){return arguments.length?this.each(f==null?jn:(typeof f=="function"?Ve:Qe)(f)):this.node().innerHTML}function qe(){this.nextSibling&&this.parentNode.appendChild(this)}function Je(){return this.each(qe)}function _e(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Fr(){return this.each(_e)}var yn=B(17110);function Tn(f){return function(){var _=this.ownerDocument,Y=this.namespaceURI;return Y===yn.P&&_.documentElement.namespaceURI===yn.P?_.createElement(f):_.createElementNS(Y,f)}}function Gn(f){return function(){return this.ownerDocument.createElementNS(f.space,f.local)}}function Er(f){var _=(0,Be.Z)(f);return(_.local?Gn:Tn)(_)}function Qn(f){var _=typeof f=="function"?f:Er(f);return this.select(function(){return this.appendChild(_.apply(this,arguments))})}function kn(){return null}function qn(f,_){var Y=typeof f=="function"?f:Er(f),U=_==null?kn:typeof _=="function"?_:(0,b.Z)(_);return this.select(function(){return this.insertBefore(Y.apply(this,arguments),U.apply(this,arguments)||null)})}function Jn(){var f=this.parentNode;f&&f.removeChild(this)}function Rn(){return this.each(Jn)}function tr(){var f=this.cloneNode(!1),_=this.parentNode;return _?_.insertBefore(f,this.nextSibling):f}function Nr(){var f=this.cloneNode(!0),_=this.parentNode;return _?_.insertBefore(f,this.nextSibling):f}function mn(f){return this.select(f?Nr:tr)}function Mr(f){return arguments.length?this.property("__data__",f):this.node().__data__}function xn(f){return function(_){f.call(this,_,this.__data__)}}function eo(f){return f.trim().split(/^|\s+/).map(function(_){var Y="",U=_.indexOf(".");return U>=0&&(Y=_.slice(U+1),_=_.slice(0,U)),{type:_,name:Y}})}function er(f){return function(){var _=this.__on;if(_){for(var Y=0,U=-1,H=_.length,Q;Y<H;++Y)Q=_[Y],(!f.type||Q.type===f.type)&&Q.name===f.name?this.removeEventListener(Q.type,Q.listener,Q.options):_[++U]=Q;++U?_.length=U:delete this.__on}}}function Jt(f,_,Y){return function(){var U=this.__on,H,Q=xn(_);if(U){for(var st=0,at=U.length;st<at;++st)if((H=U[st]).type===f.type&&H.name===f.name){this.removeEventListener(H.type,H.listener,H.options),this.addEventListener(H.type,H.listener=Q,H.options=Y),H.value=_;return}}this.addEventListener(f.type,Q,Y),H={type:f.type,name:f.name,value:_,listener:Q,options:Y},U?U.push(H):this.__on=[H]}}function Dn(f,_,Y){var U=eo(f+""),H,Q=U.length,st;if(arguments.length<2){var at=this.node().__on;if(at){for(var bt=0,At=at.length,Ot;bt<At;++bt)for(H=0,Ot=at[bt];H<Q;++H)if((st=U[H]).type===Ot.type&&st.name===Ot.name)return Ot.value}return}for(at=_?Jt:er,H=0;H<Q;++H)this.each(at(U[H],_,Y));return this}var Yr=B(4010);function nr(f,_,Y){var U=(0,Yr.Z)(f),H=U.CustomEvent;typeof H=="function"?H=new H(_,Y):(H=U.document.createEvent("Event"),Y?(H.initEvent(_,Y.bubbles,Y.cancelable),H.detail=Y.detail):H.initEvent(_,!1,!1)),f.dispatchEvent(H)}function rr(f,_){return function(){return nr(this,f,_)}}function ze(f,_){return function(){return nr(this,f,_.apply(this,arguments))}}function Fe(f,_){return this.each((typeof _=="function"?ze:rr)(f,_))}function*Ie(){for(var f=this._groups,_=0,Y=f.length;_<Y;++_)for(var U=f[_],H=0,Q=U.length,st;H<Q;++H)(st=U[H])&&(yield st)}var tn=[null];function se(f,_){this._groups=f,this._parents=_}function ae(){return new se([[document.documentElement]],tn)}function or(){return this}se.prototype=ae.prototype={constructor:se,select:m,selectAll:tt,selectChild:kt,selectChildren:vn,filter:cn,data:Ht,enter:Oe,exit:Zr,join:Fn,merge:Lr,selection:or,order:Xr,sort:Yn,call:je,nodes:Kn,node:Un,size:Wn,empty:En,each:ln,attr:Vt,style:hn.Z,property:Pn,classed:Xe,text:it,html:pn,raise:Je,lower:Fr,append:Qn,insert:qn,remove:Rn,clone:mn,datum:Mr,on:Dn,dispatch:Fe,[Symbol.iterator]:Ie};var be=ae},77932:function(ut,dt,B){"use strict";B.d(dt,{S:function(){return tt},Z:function(){return _t}});var b=B(4010);function m(nt){return function(){this.style.removeProperty(nt)}}function K(nt,lt,vt){return function(){this.style.setProperty(nt,lt,vt)}}function ct(nt,lt,vt){return function(){var zt=lt.apply(this,arguments);zt==null?this.style.removeProperty(nt):this.style.setProperty(nt,zt,vt)}}function _t(nt,lt,vt){return arguments.length>1?this.each((lt==null?m:typeof lt=="function"?ct:K)(nt,lt,vt==null?"":vt)):tt(this.node(),nt)}function tt(nt,lt){return nt.style.getPropertyValue(lt)||(0,b.Z)(nt).getComputedStyle(nt,null).getPropertyValue(lt)}},66456:function(ut,dt,B){"use strict";B.d(dt,{Z:function(){return m}});function b(){}function m(K){return K==null?b:function(){return this.querySelector(K)}}},16851:function(ut,dt,B){"use strict";B.d(dt,{Z:function(){return m}});function b(){return[]}function m(K){return K==null?b:function(){return this.querySelectorAll(K)}}},4010:function(ut,dt,B){"use strict";B.d(dt,{Z:function(){return b}});function b(m){return m.ownerDocument&&m.ownerDocument.defaultView||m.document&&m||m.defaultView}},89416:function(ut,dt,B){"use strict";B.d(dt,{sP:function(){return ei},CR:function(){return ur}});var b=B(97565),m=B(49289),K=1e-12;function ct(n){return((n=Math.exp(n))+1/n)/2}function _t(n){return((n=Math.exp(n))-1/n)/2}function tt(n){return((n=Math.exp(2*n))-1)/(n+1)}var nt=function n(o,a,d){function w(v,x){var k=v[0],Z=v[1],V=v[2],L=x[0],yt=x[1],pt=x[2],Mt=L-k,ce=yt-Z,Ut=Mt*Mt+ce*ce,de,Pt;if(Ut<K)Pt=Math.log(pt/V)/o,de=function(bn){return[k+bn*Mt,Z+bn*ce,V*Math.exp(o*bn*Pt)]};else{var sn=Math.sqrt(Ut),Ue=(pt*pt-V*V+d*Ut)/(2*V*a*sn),_n=(pt*pt-V*V-d*Ut)/(2*pt*a*sn),an=Math.log(Math.sqrt(Ue*Ue+1)-Ue),ve=Math.log(Math.sqrt(_n*_n+1)-_n);Pt=(ve-an)/o,de=function(bn){var Dr=bn*Pt,lr=ct(an),zr=V/(a*sn)*(lr*tt(o*Dr+an)-_t(an));return[k+zr*Mt,Z+zr*ce,V*lr/ct(o*Dr+an)]}}return de.duration=Pt*1e3*o/Math.SQRT2,de}return w.rho=function(v){var x=Math.max(.001,+v),k=x*x,Z=k*k;return n(x,k,Z)},w}(Math.SQRT2,2,4),lt=B(41468),vt=B(13802),zt=B(1776),kt=0,Kt=0,me=0,wr=1e3,vn,cn,un=0,Oe=0,We=0,Te=typeof performance=="object"&&performance.now?performance:Date,_r=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(n){setTimeout(n,17)};function ne(){return Oe||(_r(br),Oe=Te.now()+We)}function br(){Oe=0}function Ht(){this._call=this._time=this._next=null}Ht.prototype=Zt.prototype={constructor:Ht,restart:function(n,o,a){if(typeof n!="function")throw new TypeError("callback is not a function");a=(a==null?ne():+a)+(o==null?0:+o),!this._next&&cn!==this&&(cn?cn._next=this:vn=this,cn=this),this._call=n,this._time=a,Yn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Yn())}};function Zt(n,o,a){var d=new Ht;return d.restart(n,o,a),d}function Zr(){ne(),++kt;for(var n=vn,o;n;)(o=Oe-n._time)>=0&&n._call.call(void 0,o),n=n._next;--kt}function Fn(){Oe=(un=Te.now())+We,kt=Kt=0;try{Zr()}finally{kt=0,Xr(),Oe=0}}function Lr(){var n=Te.now(),o=n-un;o>wr&&(We-=o,un=n)}function Xr(){for(var n,o=vn,a,d=1/0;o;)o._call?(d>o._time&&(d=o._time),n=o,o=o._next):(a=o._next,o._next=null,o=n?n._next=a:vn=a);cn=n,Yn(d)}function Yn(n){if(!kt){Kt&&(Kt=clearTimeout(Kt));var o=n-Oe;o>24?(n<1/0&&(Kt=setTimeout(Fn,n-Te.now()-We)),me&&(me=clearInterval(me))):(me||(un=Te.now(),me=setInterval(Lr,wr)),kt=1,_r(Fn))}}function Sn(n,o,a){var d=new Ht;return o=o==null?0:+o,d.restart(w=>{d.stop(),n(w+o)},o,a),d}var je=(0,b.Z)("start","end","cancel","interrupt"),Kn=[],Un=0,Wn=1,En=2,ln=3,Be=4,Nn=5,fn=6;function Mn(n,o,a,d,w,v){var x=n.__transition;if(!x)n.__transition={};else if(a in x)return;Vt(n,a,{name:o,index:d,group:w,on:je,tween:Kn,time:v.time,delay:v.delay,duration:v.duration,ease:v.ease,timer:null,state:Un})}function dn(n,o){var a=Lt(n,o);if(a.state>Un)throw new Error("too late; already scheduled");return a}function xe(n,o){var a=Lt(n,o);if(a.state>ln)throw new Error("too late; already running");return a}function Lt(n,o){var a=n.__transition;if(!a||!(a=a[o]))throw new Error("transition not found");return a}function Vt(n,o,a){var d=n.__transition,w;d[o]=a,a.timer=Zt(v,0,a.time);function v(V){a.state=Wn,a.timer.restart(x,a.delay,a.time),a.delay<=V&&x(V-a.delay)}function x(V){var L,yt,pt,Mt;if(a.state!==Wn)return Z();for(L in d)if(Mt=d[L],Mt.name===a.name){if(Mt.state===ln)return Sn(x);Mt.state===Be?(Mt.state=fn,Mt.timer.stop(),Mt.on.call("interrupt",n,n.__data__,Mt.index,Mt.group),delete d[L]):+L<o&&(Mt.state=fn,Mt.timer.stop(),Mt.on.call("cancel",n,n.__data__,Mt.index,Mt.group),delete d[L])}if(Sn(function(){a.state===ln&&(a.state=Be,a.timer.restart(k,a.delay,a.time),k(V))}),a.state=En,a.on.call("start",n,n.__data__,a.index,a.group),a.state===En){for(a.state=ln,w=new Array(pt=a.tween.length),L=0,yt=-1;L<pt;++L)(Mt=a.tween[L].value.call(n,n.__data__,a.index,a.group))&&(w[++yt]=Mt);w.length=yt+1}}function k(V){for(var L=V<a.duration?a.ease.call(null,V/a.duration):(a.timer.restart(Z),a.state=Nn,1),yt=-1,pt=w.length;++yt<pt;)w[yt].call(n,L);a.state===Nn&&(a.on.call("end",n,n.__data__,a.index,a.group),Z())}function Z(){a.state=fn,a.timer.stop(),delete d[o];for(var V in d)return;delete n.__transition}}function hn(n,o){var a=n.__transition,d,w,v=!0,x;if(a){o=o==null?null:o+"";for(x in a){if((d=a[x]).name!==o){v=!1;continue}w=d.state>En&&d.state<Nn,d.state=fn,d.timer.stop(),d.on.call(w?"interrupt":"cancel",n,n.__data__,d.index,d.group),delete a[x]}v&&delete n.__transition}}function Cn(n){return this.each(function(){hn(this,n)})}function ke(n,o){return n=+n,o=+o,function(a){return n*(1-a)+o*a}}var An=180/Math.PI,Pn={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function we(n,o,a,d,w,v){var x,k,Z;return(x=Math.sqrt(n*n+o*o))&&(n/=x,o/=x),(Z=n*a+o*d)&&(a-=n*Z,d-=o*Z),(k=Math.sqrt(a*a+d*d))&&(a/=k,d/=k,Z/=k),n*d<o*a&&(n=-n,o=-o,Z=-Z,x=-x),{translateX:w,translateY:v,rotate:Math.atan2(o,n)*An,skewX:Math.atan(Z)*An,scaleX:x,scaleY:k}}var Se;function Ze(n){var o=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(n+"");return o.isIdentity?Pn:we(o.a,o.b,o.c,o.d,o.e,o.f)}function Vr(n){return n==null||(Se||(Se=document.createElementNS("http://www.w3.org/2000/svg","g")),Se.setAttribute("transform",n),!(n=Se.transform.baseVal.consolidate()))?Pn:(n=n.matrix,we(n.a,n.b,n.c,n.d,n.e,n.f))}function Le(n,o,a,d){function w(V){return V.length?V.pop()+" ":""}function v(V,L,yt,pt,Mt,ce){if(V!==yt||L!==pt){var Ut=Mt.push("translate(",null,o,null,a);ce.push({i:Ut-4,x:ke(V,yt)},{i:Ut-2,x:ke(L,pt)})}else(yt||pt)&&Mt.push("translate("+yt+o+pt+a)}function x(V,L,yt,pt){V!==L?(V-L>180?L+=360:L-V>180&&(V+=360),pt.push({i:yt.push(w(yt)+"rotate(",null,d)-2,x:ke(V,L)})):L&&yt.push(w(yt)+"rotate("+L+d)}function k(V,L,yt,pt){V!==L?pt.push({i:yt.push(w(yt)+"skewX(",null,d)-2,x:ke(V,L)}):L&&yt.push(w(yt)+"skewX("+L+d)}function Z(V,L,yt,pt,Mt,ce){if(V!==yt||L!==pt){var Ut=Mt.push(w(Mt)+"scale(",null,",",null,")");ce.push({i:Ut-4,x:ke(V,yt)},{i:Ut-2,x:ke(L,pt)})}else(yt!==1||pt!==1)&&Mt.push(w(Mt)+"scale("+yt+","+pt+")")}return function(V,L){var yt=[],pt=[];return V=n(V),L=n(L),v(V.translateX,V.translateY,L.translateX,L.translateY,yt,pt),x(V.rotate,L.rotate,yt,pt),k(V.skewX,L.skewX,yt,pt),Z(V.scaleX,V.scaleY,L.scaleX,L.scaleY,yt,pt),V=L=null,function(Mt){for(var ce=-1,Ut=pt.length,de;++ce<Ut;)yt[(de=pt[ce]).i]=de.x(Mt);return yt.join("")}}}var vr=Le(Ze,"px, ","px)","deg)"),Sr=Le(Vr,", ",")",")"),Re=B(60021);function Xe(n,o){var a,d;return function(){var w=xe(this,n),v=w.tween;if(v!==a){d=a=v;for(var x=0,k=d.length;x<k;++x)if(d[x].name===o){d=d.slice(),d.splice(x,1);break}}w.tween=d}}function gn(n,o,a){var d,w;if(typeof a!="function")throw new Error;return function(){var v=xe(this,n),x=v.tween;if(x!==d){w=(d=x).slice();for(var k={name:o,value:a},Z=0,V=w.length;Z<V;++Z)if(w[Z].name===o){w[Z]=k;break}Z===V&&w.push(k)}v.tween=w}}function De(n,o){var a=this._id;if(n+="",arguments.length<2){for(var d=Lt(this.node(),a).tween,w=0,v=d.length,x;w<v;++w)if((x=d[w]).name===n)return x.value;return null}return this.each((o==null?Xe:gn)(a,n,o))}function Ge(n,o,a){var d=n._id;return n.each(function(){var w=xe(this,d);(w.value||(w.value={}))[o]=a.apply(this,arguments)}),function(w){return Lt(w,d).value[o]}}function it(n,o,a){n.prototype=o.prototype=a,a.constructor=n}function jn(n,o){var a=Object.create(n.prototype);for(var d in o)a[d]=o[d];return a}function Qe(){}var Ve=.7,pn=1/Ve,qe="\\s*([+-]?\\d+)\\s*",Je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",_e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fr=/^#([0-9a-f]{3,8})$/,yn=new RegExp("^rgb\\(".concat(qe,",").concat(qe,",").concat(qe,"\\)$")),Tn=new RegExp("^rgb\\(".concat(_e,",").concat(_e,",").concat(_e,"\\)$")),Gn=new RegExp("^rgba\\(".concat(qe,",").concat(qe,",").concat(qe,",").concat(Je,"\\)$")),Er=new RegExp("^rgba\\(".concat(_e,",").concat(_e,",").concat(_e,",").concat(Je,"\\)$")),Qn=new RegExp("^hsl\\(".concat(Je,",").concat(_e,",").concat(_e,"\\)$")),kn=new RegExp("^hsla\\(".concat(Je,",").concat(_e,",").concat(_e,",").concat(Je,"\\)$")),qn={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};it(Qe,mn,{copy:function(o){return Object.assign(new this.constructor,this,o)},displayable:function(){return this.rgb().displayable()},hex:Jn,formatHex:Jn,formatHex8:Rn,formatHsl:tr,formatRgb:Nr,toString:Nr});function Jn(){return this.rgb().formatHex()}function Rn(){return this.rgb().formatHex8()}function tr(){return tn(this).formatHsl()}function Nr(){return this.rgb().formatRgb()}function mn(n){var o,a;return n=(n+"").trim().toLowerCase(),(o=Fr.exec(n))?(a=o[1].length,o=parseInt(o[1],16),a===6?Mr(o):a===3?new Jt(o>>8&15|o>>4&240,o>>4&15|o&240,(o&15)<<4|o&15,1):a===8?xn(o>>24&255,o>>16&255,o>>8&255,(o&255)/255):a===4?xn(o>>12&15|o>>8&240,o>>8&15|o>>4&240,o>>4&15|o&240,((o&15)<<4|o&15)/255):null):(o=yn.exec(n))?new Jt(o[1],o[2],o[3],1):(o=Tn.exec(n))?new Jt(o[1]*255/100,o[2]*255/100,o[3]*255/100,1):(o=Gn.exec(n))?xn(o[1],o[2],o[3],o[4]):(o=Er.exec(n))?xn(o[1]*255/100,o[2]*255/100,o[3]*255/100,o[4]):(o=Qn.exec(n))?Ie(o[1],o[2]/100,o[3]/100,1):(o=kn.exec(n))?Ie(o[1],o[2]/100,o[3]/100,o[4]):qn.hasOwnProperty(n)?Mr(qn[n]):n==="transparent"?new Jt(NaN,NaN,NaN,0):null}function Mr(n){return new Jt(n>>16&255,n>>8&255,n&255,1)}function xn(n,o,a,d){return d<=0&&(n=o=a=NaN),new Jt(n,o,a,d)}function eo(n){return n instanceof Qe||(n=mn(n)),n?(n=n.rgb(),new Jt(n.r,n.g,n.b,n.opacity)):new Jt}function er(n,o,a,d){return arguments.length===1?eo(n):new Jt(n,o,a,d==null?1:d)}function Jt(n,o,a,d){this.r=+n,this.g=+o,this.b=+a,this.opacity=+d}it(Jt,er,jn(Qe,{brighter:function(o){return o=o==null?pn:Math.pow(pn,o),new Jt(this.r*o,this.g*o,this.b*o,this.opacity)},darker:function(o){return o=o==null?Ve:Math.pow(Ve,o),new Jt(this.r*o,this.g*o,this.b*o,this.opacity)},rgb:function(){return this},clamp:function(){return new Jt(ze(this.r),ze(this.g),ze(this.b),rr(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Dn,formatHex:Dn,formatHex8:Yr,formatRgb:nr,toString:nr}));function Dn(){return"#".concat(Fe(this.r)).concat(Fe(this.g)).concat(Fe(this.b))}function Yr(){return"#".concat(Fe(this.r)).concat(Fe(this.g)).concat(Fe(this.b)).concat(Fe((isNaN(this.opacity)?1:this.opacity)*255))}function nr(){var n=rr(this.opacity);return"".concat(n===1?"rgb(":"rgba(").concat(ze(this.r),", ").concat(ze(this.g),", ").concat(ze(this.b)).concat(n===1?")":", ".concat(n,")"))}function rr(n){return isNaN(n)?1:Math.max(0,Math.min(1,n))}function ze(n){return Math.max(0,Math.min(255,Math.round(n)||0))}function Fe(n){return n=ze(n),(n<16?"0":"")+n.toString(16)}function Ie(n,o,a,d){return d<=0?n=o=a=NaN:a<=0||a>=1?n=o=NaN:o<=0&&(n=NaN),new ae(n,o,a,d)}function tn(n){if(n instanceof ae)return new ae(n.h,n.s,n.l,n.opacity);if(n instanceof Qe||(n=mn(n)),!n)return new ae;if(n instanceof ae)return n;n=n.rgb();var o=n.r/255,a=n.g/255,d=n.b/255,w=Math.min(o,a,d),v=Math.max(o,a,d),x=NaN,k=v-w,Z=(v+w)/2;return k?(o===v?x=(a-d)/k+(a<d)*6:a===v?x=(d-o)/k+2:x=(o-a)/k+4,k/=Z<.5?v+w:2-v-w,x*=60):k=Z>0&&Z<1?0:x,new ae(x,k,Z,n.opacity)}function se(n,o,a,d){return arguments.length===1?tn(n):new ae(n,o,a,d==null?1:d)}function ae(n,o,a,d){this.h=+n,this.s=+o,this.l=+a,this.opacity=+d}it(ae,se,jn(Qe,{brighter:function(o){return o=o==null?pn:Math.pow(pn,o),new ae(this.h,this.s,this.l*o,this.opacity)},darker:function(o){return o=o==null?Ve:Math.pow(Ve,o),new ae(this.h,this.s,this.l*o,this.opacity)},rgb:function(){var o=this.h%360+(this.h<0)*360,a=isNaN(o)||isNaN(this.s)?0:this.s,d=this.l,w=d+(d<.5?d:1-d)*a,v=2*d-w;return new Jt(f(o>=240?o-240:o+120,v,w),f(o,v,w),f(o<120?o+240:o-120,v,w),this.opacity)},clamp:function(){return new ae(or(this.h),be(this.s),be(this.l),rr(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var o=rr(this.opacity);return"".concat(o===1?"hsl(":"hsla(").concat(or(this.h),", ").concat(be(this.s)*100,"%, ").concat(be(this.l)*100,"%").concat(o===1?")":", ".concat(o,")"))}}));function or(n){return n=(n||0)%360,n<0?n+360:n}function be(n){return Math.max(0,Math.min(1,n||0))}function f(n,o,a){return(n<60?o+(a-o)*n/60:n<180?a:n<240?o+(a-o)*(240-n)/60:o)*255}function _(n,o,a,d,w){var v=n*n,x=v*n;return((1-3*n+3*v-x)*o+(4-6*v+3*x)*a+(1+3*n+3*v-3*x)*d+x*w)/6}function Y(n){var o=n.length-1;return function(a){var d=a<=0?a=0:a>=1?(a=1,o-1):Math.floor(a*o),w=n[d],v=n[d+1],x=d>0?n[d-1]:2*w-v,k=d<o-1?n[d+2]:2*v-w;return _((a-d/o)*o,x,w,v,k)}}function U(n){var o=n.length;return function(a){var d=Math.floor(((a%=1)<0?++a:a)*o),w=n[(d+o-1)%o],v=n[d%o],x=n[(d+1)%o],k=n[(d+2)%o];return _((a-d/o)*o,w,v,x,k)}}var H=function(n){return function(){return n}};function Q(n,o){return function(a){return n+a*o}}function st(n,o,a){return n=Math.pow(n,a),o=Math.pow(o,a)-n,a=1/a,function(d){return Math.pow(n+d*o,a)}}function at(n,o){var a=o-n;return a?Q(n,a>180||a<-180?a-360*Math.round(a/360):a):constant(isNaN(n)?o:n)}function bt(n){return(n=+n)==1?At:function(o,a){return a-o?st(o,a,n):H(isNaN(o)?a:o)}}function At(n,o){var a=o-n;return a?Q(n,a):H(isNaN(n)?o:n)}var Ot=function n(o){var a=bt(o);function d(w,v){var x=a((w=er(w)).r,(v=er(v)).r),k=a(w.g,v.g),Z=a(w.b,v.b),V=At(w.opacity,v.opacity);return function(L){return w.r=x(L),w.g=k(L),w.b=Z(L),w.opacity=V(L),w+""}}return d.gamma=n,d}(1);function le(n){return function(o){var a=o.length,d=new Array(a),w=new Array(a),v=new Array(a),x,k;for(x=0;x<a;++x)k=er(o[x]),d[x]=k.r||0,w[x]=k.g||0,v[x]=k.b||0;return d=n(d),w=n(w),v=n(v),k.opacity=1,function(Z){return k.r=d(Z),k.g=w(Z),k.b=v(Z),k+""}}}var Ee=le(Y),fe=le(U),qt=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,wn=new RegExp(qt.source,"g");function zn(n){return function(){return n}}function Cr(n){return function(o){return n(o)+""}}function en(n,o){var a=qt.lastIndex=wn.lastIndex=0,d,w,v,x=-1,k=[],Z=[];for(n=n+"",o=o+"";(d=qt.exec(n))&&(w=wn.exec(o));)(v=w.index)>a&&(v=o.slice(a,v),k[x]?k[x]+=v:k[++x]=v),(d=d[0])===(w=w[0])?k[x]?k[x]+=w:k[++x]=w:(k[++x]=null,Z.push({i:x,x:ke(d,w)})),a=wn.lastIndex;return a<o.length&&(v=o.slice(a),k[x]?k[x]+=v:k[++x]=v),k.length<2?Z[0]?Cr(Z[0].x):zn(o):(o=Z.length,function(V){for(var L=0,yt;L<o;++L)k[(yt=Z[L]).i]=yt.x(V);return k.join("")})}function nn(n,o){var a;return(typeof o=="number"?ke:o instanceof mn?Ot:(a=mn(o))?(o=a,Ot):en)(n,o)}function ir(n){return function(){this.removeAttribute(n)}}function In(n){return function(){this.removeAttributeNS(n.space,n.local)}}function Mo(n,o,a){var d,w=a+"",v;return function(){var x=this.getAttribute(n);return x===w?null:x===d?v:v=o(d=x,a)}}function Ar(n,o,a){var d,w=a+"",v;return function(){var x=this.getAttributeNS(n.space,n.local);return x===w?null:x===d?v:v=o(d=x,a)}}function Co(n,o,a){var d,w,v;return function(){var x,k=a(this),Z;return k==null?void this.removeAttribute(n):(x=this.getAttribute(n),Z=k+"",x===Z?null:x===d&&Z===w?v:(w=Z,v=o(d=x,k)))}}function no(n,o,a){var d,w,v;return function(){var x,k=a(this),Z;return k==null?void this.removeAttributeNS(n.space,n.local):(x=this.getAttributeNS(n.space,n.local),Z=k+"",x===Z?null:x===d&&Z===w?v:(w=Z,v=o(d=x,k)))}}function Ao(n,o){var a=(0,Re.Z)(n),d=a==="transform"?Sr:nn;return this.attrTween(n,typeof o=="function"?(a.local?no:Co)(a,d,Ge(this,"attr."+n,o)):o==null?(a.local?In:ir)(a):(a.local?Ar:Mo)(a,d,o))}function Po(n,o){return function(a){this.setAttribute(n,o.call(this,a))}}function To(n,o){return function(a){this.setAttributeNS(n.space,n.local,o.call(this,a))}}function $n(n,o){var a,d;function w(){var v=o.apply(this,arguments);return v!==d&&(a=(d=v)&&To(n,v)),a}return w._value=o,w}function Rt(n,o){var a,d;function w(){var v=o.apply(this,arguments);return v!==d&&(a=(d=v)&&Po(n,v)),a}return w._value=o,w}function ko(n,o){var a="attr."+n;if(arguments.length<2)return(a=this.tween(a))&&a._value;if(o==null)return this.tween(a,null);if(typeof o!="function")throw new Error;var d=(0,Re.Z)(n);return this.tween(a,(d.local?$n:Rt)(d,o))}function ro(n,o){return function(){dn(this,n).delay=+o.apply(this,arguments)}}function Ro(n,o){return o=+o,function(){dn(this,n).delay=o}}function oo(n){var o=this._id;return arguments.length?this.each((typeof n=="function"?ro:Ro)(o,n)):Lt(this.node(),o).delay}function io(n,o){return function(){xe(this,n).duration=+o.apply(this,arguments)}}function Do(n,o){return o=+o,function(){xe(this,n).duration=o}}function zo(n){var o=this._id;return arguments.length?this.each((typeof n=="function"?io:Do)(o,n)):Lt(this.node(),o).duration}function Io(n,o){if(typeof o!="function")throw new Error;return function(){xe(this,n).ease=o}}function $o(n){var o=this._id;return arguments.length?this.each(Io(o,n)):Lt(this.node(),o).ease}function Ho(n,o){return function(){var a=o.apply(this,arguments);if(typeof a!="function")throw new Error;xe(this,n).ease=a}}function sr(n){if(typeof n!="function")throw new Error;return this.each(Ho(this._id,n))}var so=B(73409);function ao(n){typeof n!="function"&&(n=(0,so.Z)(n));for(var o=this._groups,a=o.length,d=new Array(a),w=0;w<a;++w)for(var v=o[w],x=v.length,k=d[w]=[],Z,V=0;V<x;++V)(Z=v[V])&&n.call(Z,Z.__data__,V,v)&&k.push(Z);return new Ye(d,this._parents,this._name,this._id)}function co(n){if(n._id!==this._id)throw new Error;for(var o=this._groups,a=n._groups,d=o.length,w=a.length,v=Math.min(d,w),x=new Array(d),k=0;k<v;++k)for(var Z=o[k],V=a[k],L=Z.length,yt=x[k]=new Array(L),pt,Mt=0;Mt<L;++Mt)(pt=Z[Mt]||V[Mt])&&(yt[Mt]=pt);for(;k<d;++k)x[k]=o[k];return new Ye(x,this._parents,this._name,this._id)}function uo(n){return(n+"").trim().split(/^|\s+/).every(function(o){var a=o.indexOf(".");return a>=0&&(o=o.slice(0,a)),!o||o==="start"})}function Kr(n,o,a){var d,w,v=uo(o)?dn:xe;return function(){var x=v(this,n),k=x.on;k!==d&&(w=(d=k).copy()).on(o,a),x.on=w}}function lo(n,o){var a=this._id;return arguments.length<2?Lt(this.node(),a).on.on(n):this.each(Kr(a,n,o))}function Oo(n){return function(){var o=this.parentNode;for(var a in this.__transition)if(+a!==n)return;o&&o.removeChild(this)}}function Bo(){return this.on("end.remove",Oo(this._id))}var Pr=B(66456);function Hn(n){var o=this._name,a=this._id;typeof n!="function"&&(n=(0,Pr.Z)(n));for(var d=this._groups,w=d.length,v=new Array(w),x=0;x<w;++x)for(var k=d[x],Z=k.length,V=v[x]=new Array(Z),L,yt,pt=0;pt<Z;++pt)(L=k[pt])&&(yt=n.call(L,L.__data__,pt,k))&&("__data__"in L&&(yt.__data__=L.__data__),V[pt]=yt,Mn(V[pt],o,a,pt,V,Lt(L,a)));return new Ye(v,this._parents,o,a)}var Zo=B(16851);function Lo(n){var o=this._name,a=this._id;typeof n!="function"&&(n=(0,Zo.Z)(n));for(var d=this._groups,w=d.length,v=[],x=[],k=0;k<w;++k)for(var Z=d[k],V=Z.length,L,yt=0;yt<V;++yt)if(L=Z[yt]){for(var pt=n.call(L,L.__data__,yt,Z),Mt,ce=Lt(L,a),Ut=0,de=pt.length;Ut<de;++Ut)(Mt=pt[Ut])&&Mn(Mt,o,a,Ut,pt,ce);v.push(pt),x.push(L)}return new Ye(v,x,o,a)}var Xo=zt.ZP.prototype.constructor;function Ur(){return new Xo(this._groups,this._parents)}var ar=B(77932);function Vo(n,o){var a,d,w;return function(){var v=(0,ar.S)(this,n),x=(this.style.removeProperty(n),(0,ar.S)(this,n));return v===x?null:v===a&&x===d?w:w=o(a=v,d=x)}}function Tr(n){return function(){this.style.removeProperty(n)}}function Fo(n,o,a){var d,w=a+"",v;return function(){var x=(0,ar.S)(this,n);return x===w?null:x===d?v:v=o(d=x,a)}}function kr(n,o,a){var d,w,v;return function(){var x=(0,ar.S)(this,n),k=a(this),Z=k+"";return k==null&&(Z=k=(this.style.removeProperty(n),(0,ar.S)(this,n))),x===Z?null:x===d&&Z===w?v:(w=Z,v=o(d=x,k))}}function On(n,o){var a,d,w,v="style."+o,x="end."+v,k;return function(){var Z=xe(this,n),V=Z.on,L=Z.value[v]==null?k||(k=Tr(o)):void 0;(V!==a||w!==L)&&(d=(a=V).copy()).on(x,w=L),Z.on=d}}function fo(n,o,a){var d=(n+="")=="transform"?vr:nn;return o==null?this.styleTween(n,Vo(n,d)).on("end.style."+n,Tr(n)):typeof o=="function"?this.styleTween(n,kr(n,d,Ge(this,"style."+n,o))).each(On(this._id,n)):this.styleTween(n,Fo(n,d,o),a).on("end.style."+n,null)}function ho(n,o,a){return function(d){this.style.setProperty(n,o.call(this,d),a)}}function Yo(n,o,a){var d,w;function v(){var x=o.apply(this,arguments);return x!==w&&(d=(w=x)&&ho(n,x,a)),d}return v._value=o,v}function Ko(n,o,a){var d="style."+(n+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(o==null)return this.tween(d,null);if(typeof o!="function")throw new Error;return this.tween(d,Yo(n,o,a==null?"":a))}function Uo(n){return function(){this.textContent=n}}function Wo(n){return function(){var o=n(this);this.textContent=o==null?"":o}}function go(n){return this.tween("text",typeof n=="function"?Wo(Ge(this,"text",n)):Uo(n==null?"":n+""))}function po(n){return function(o){this.textContent=n.call(this,o)}}function yo(n){var o,a;function d(){var w=n.apply(this,arguments);return w!==a&&(o=(a=w)&&po(w)),o}return d._value=n,d}function jo(n){var o="text";if(arguments.length<1)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,yo(n))}function rn(){for(var n=this._name,o=this._id,a=jr(),d=this._groups,w=d.length,v=0;v<w;++v)for(var x=d[v],k=x.length,Z,V=0;V<k;++V)if(Z=x[V]){var L=Lt(Z,o);Mn(Z,n,a,V,x,{time:L.time+L.delay+L.duration,delay:0,duration:L.duration,ease:L.ease})}return new Ye(d,this._parents,n,a)}function Bn(){var n,o,a=this,d=a._id,w=a.size();return new Promise(function(v,x){var k={value:x},Z={value:function(){--w===0&&v()}};a.each(function(){var V=xe(this,d),L=V.on;L!==n&&(o=(n=L).copy(),o._.cancel.push(k),o._.interrupt.push(k),o._.end.push(Z)),V.on=o}),w===0&&v()})}var Wr=0;function Ye(n,o,a,d){this._groups=n,this._parents=o,this._name=a,this._id=d}function mo(n){return(0,zt.ZP)().transition(n)}function jr(){return++Wr}var $e=zt.ZP.prototype;Ye.prototype=mo.prototype={constructor:Ye,select:Hn,selectAll:Lo,selectChild:$e.selectChild,selectChildren:$e.selectChildren,filter:ao,merge:co,selection:Ur,transition:rn,call:$e.call,nodes:$e.nodes,node:$e.node,size:$e.size,empty:$e.empty,each:$e.each,on:lo,attr:Ao,attrTween:ko,style:fo,styleTween:Ko,text:go,textTween:jo,remove:Bo,tween:De,delay:oo,duration:zo,ease:$o,easeVarying:sr,end:Bn,[Symbol.iterator]:$e[Symbol.iterator]};function ci(n){return n*n*n}function ui(n){return--n*n*n+1}function xo(n){return((n*=2)<=1?n*n*n:(n-=2)*n*n+2)/2}var Gr={time:null,delay:0,duration:250,ease:xo};function wo(n,o){for(var a;!(a=n.__transition)||!(a=a[o]);)if(!(n=n.parentNode))throw new Error(`transition ${o} not found`);return a}function cr(n){var o,a;n instanceof Ye?(o=n._id,n=n._name):(o=jr(),(a=Gr).time=ne(),n=n==null?null:n+"");for(var d=this._groups,w=d.length,v=0;v<w;++v)for(var x=d[v],k=x.length,Z,V=0;V<k;++V)(Z=x[V])&&Mn(Z,n,o,V,x,a||wo(Z,o));return new Ye(d,this._parents,n,o)}zt.ZP.prototype.interrupt=Cn,zt.ZP.prototype.transition=cr;var Zn=n=>()=>n;function Go(n,{sourceEvent:o,target:a,transform:d,dispatch:w}){Object.defineProperties(this,{type:{value:n,enumerable:!0,configurable:!0},sourceEvent:{value:o,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},transform:{value:d,enumerable:!0,configurable:!0},_:{value:w}})}function Ne(n,o,a){this.k=n,this.x=o,this.y=a}Ne.prototype={constructor:Ne,scale:function(n){return n===1?this:new Ne(this.k*n,this.x,this.y)},translate:function(n,o){return n===0&o===0?this:new Ne(this.k,this.x+this.k*n,this.y+this.k*o)},apply:function(n){return[n[0]*this.k+this.x,n[1]*this.k+this.y]},applyX:function(n){return n*this.k+this.x},applyY:function(n){return n*this.k+this.y},invert:function(n){return[(n[0]-this.x)/this.k,(n[1]-this.y)/this.k]},invertX:function(n){return(n-this.x)/this.k},invertY:function(n){return(n-this.y)/this.k},rescaleX:function(n){return n.copy().domain(n.range().map(this.invertX,this).map(n.invert,n))},rescaleY:function(n){return n.copy().domain(n.range().map(this.invertY,this).map(n.invert,n))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var ur=new Ne(1,0,0);_o.prototype=Ne.prototype;function _o(n){for(;!n.__zoom;)if(!(n=n.parentNode))return ur;return n.__zoom}function on(n){n.stopImmediatePropagation()}function Ke(n){n.preventDefault(),n.stopImmediatePropagation()}function Qo(n){return(!n.ctrlKey||n.type==="wheel")&&!n.button}function qo(){var n=this;return n instanceof SVGElement?(n=n.ownerSVGElement||n,n.hasAttribute("viewBox")?(n=n.viewBox.baseVal,[[n.x,n.y],[n.x+n.width,n.y+n.height]]):[[0,0],[n.width.baseVal.value,n.height.baseVal.value]]):[[0,0],[n.clientWidth,n.clientHeight]]}function bo(){return this.__zoom||ur}function Jo(n){return-n.deltaY*(n.deltaMode===1?.05:n.deltaMode?1:.002)*(n.ctrlKey?10:1)}function vo(){return navigator.maxTouchPoints||"ontouchstart"in this}function ti(n,o,a){var d=n.invertX(o[0][0])-a[0][0],w=n.invertX(o[1][0])-a[1][0],v=n.invertY(o[0][1])-a[0][1],x=n.invertY(o[1][1])-a[1][1];return n.translate(w>d?(d+w)/2:Math.min(0,d)||Math.max(0,w),x>v?(v+x)/2:Math.min(0,v)||Math.max(0,x))}function ei(){var n=Qo,o=qo,a=ti,d=Jo,w=vo,v=[0,1/0],x=[[-1/0,-1/0],[1/0,1/0]],k=250,Z=nt,V=(0,b.Z)("start","zoom","end"),L,yt,pt,Mt=500,ce=150,Ut=0,de=10;function Pt(C){C.property("__zoom",bo).on("wheel.zoom",bn,{passive:!1}).on("mousedown.zoom",Dr).on("dblclick.zoom",lr).filter(w).on("touchstart.zoom",zr).on("touchmove.zoom",ni).on("touchend.zoom touchcancel.zoom",So).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}Pt.transform=function(C,ht,F,mt){var Tt=C.selection?C.selection():C;Tt.property("__zoom",bo),C!==Tt?an(C,ht,F,mt):Tt.interrupt().each(function(){ve(this,arguments).event(mt).start().zoom(null,typeof ht=="function"?ht.apply(this,arguments):ht).end()})},Pt.scaleBy=function(C,ht,F,mt){Pt.scaleTo(C,function(){var Tt=this.__zoom.k,Dt=typeof ht=="function"?ht.apply(this,arguments):ht;return Tt*Dt},F,mt)},Pt.scaleTo=function(C,ht,F,mt){Pt.transform(C,function(){var Tt=o.apply(this,arguments),Dt=this.__zoom,It=F==null?_n(Tt):typeof F=="function"?F.apply(this,arguments):F,Bt=Dt.invert(It),Ft=typeof ht=="function"?ht.apply(this,arguments):ht;return a(Ue(sn(Dt,Ft),It,Bt),Tt,x)},F,mt)},Pt.translateBy=function(C,ht,F,mt){Pt.transform(C,function(){return a(this.__zoom.translate(typeof ht=="function"?ht.apply(this,arguments):ht,typeof F=="function"?F.apply(this,arguments):F),o.apply(this,arguments),x)},null,mt)},Pt.translateTo=function(C,ht,F,mt,Tt){Pt.transform(C,function(){var Dt=o.apply(this,arguments),It=this.__zoom,Bt=mt==null?_n(Dt):typeof mt=="function"?mt.apply(this,arguments):mt;return a(ur.translate(Bt[0],Bt[1]).scale(It.k).translate(typeof ht=="function"?-ht.apply(this,arguments):-ht,typeof F=="function"?-F.apply(this,arguments):-F),Dt,x)},mt,Tt)};function sn(C,ht){return ht=Math.max(v[0],Math.min(v[1],ht)),ht===C.k?C:new Ne(ht,C.x,C.y)}function Ue(C,ht,F){var mt=ht[0]-F[0]*C.k,Tt=ht[1]-F[1]*C.k;return mt===C.x&&Tt===C.y?C:new Ne(C.k,mt,Tt)}function _n(C){return[(+C[0][0]+ +C[1][0])/2,(+C[0][1]+ +C[1][1])/2]}function an(C,ht,F,mt){C.on("start.zoom",function(){ve(this,arguments).event(mt).start()}).on("interrupt.zoom end.zoom",function(){ve(this,arguments).event(mt).end()}).tween("zoom",function(){var Tt=this,Dt=arguments,It=ve(Tt,Dt).event(mt),Bt=o.apply(Tt,Dt),Ft=F==null?_n(Bt):typeof F=="function"?F.apply(Tt,Dt):F,Me=Math.max(Bt[1][0]-Bt[0][0],Bt[1][1]-Bt[0][1]),te=Tt.__zoom,pe=typeof ht=="function"?ht.apply(Tt,Dt):ht,re=Z(te.invert(Ft).concat(Me/te.k),pe.invert(Ft).concat(Me/pe.k));return function(Ce){if(Ce===1)Ce=pe;else{var He=re(Ce),Ir=Me/He[2];Ce=new Ne(Ir,Ft[0]-He[0]*Ir,Ft[1]-He[1]*Ir)}It.zoom(null,Ce)}})}function ve(C,ht,F){return!F&&C.__zooming||new Rr(C,ht)}function Rr(C,ht){this.that=C,this.args=ht,this.active=0,this.sourceEvent=null,this.extent=o.apply(C,ht),this.taps=0}Rr.prototype={event:function(C){return C&&(this.sourceEvent=C),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(C,ht){return this.mouse&&C!=="mouse"&&(this.mouse[1]=ht.invert(this.mouse[0])),this.touch0&&C!=="touch"&&(this.touch0[1]=ht.invert(this.touch0[0])),this.touch1&&C!=="touch"&&(this.touch1[1]=ht.invert(this.touch1[0])),this.that.__zoom=ht,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(C){var ht=(0,lt.Z)(this.that).datum();V.call(C,this.that,new Go(C,{sourceEvent:this.sourceEvent,target:Pt,type:C,transform:this.that.__zoom,dispatch:V}),ht)}};function bn(C,...ht){if(!n.apply(this,arguments))return;var F=ve(this,ht).event(C),mt=this.__zoom,Tt=Math.max(v[0],Math.min(v[1],mt.k*Math.pow(2,d.apply(this,arguments)))),Dt=(0,vt.Z)(C);if(F.wheel)(F.mouse[0][0]!==Dt[0]||F.mouse[0][1]!==Dt[1])&&(F.mouse[1]=mt.invert(F.mouse[0]=Dt)),clearTimeout(F.wheel);else{if(mt.k===Tt)return;F.mouse=[Dt,mt.invert(Dt)],hn(this),F.start()}Ke(C),F.wheel=setTimeout(It,ce),F.zoom("mouse",a(Ue(sn(mt,Tt),F.mouse[0],F.mouse[1]),F.extent,x));function It(){F.wheel=null,F.end()}}function Dr(C,...ht){if(pt||!n.apply(this,arguments))return;var F=C.currentTarget,mt=ve(this,ht,!0).event(C),Tt=(0,lt.Z)(C.view).on("mousemove.zoom",Ft,!0).on("mouseup.zoom",Me,!0),Dt=(0,vt.Z)(C,F),It=C.clientX,Bt=C.clientY;(0,m.Z)(C.view),on(C),mt.mouse=[Dt,this.__zoom.invert(Dt)],hn(this),mt.start();function Ft(te){if(Ke(te),!mt.moved){var pe=te.clientX-It,re=te.clientY-Bt;mt.moved=pe*pe+re*re>Ut}mt.event(te).zoom("mouse",a(Ue(mt.that.__zoom,mt.mouse[0]=(0,vt.Z)(te,F),mt.mouse[1]),mt.extent,x))}function Me(te){Tt.on("mousemove.zoom mouseup.zoom",null),(0,m.D)(te.view,mt.moved),Ke(te),mt.event(te).end()}}function lr(C,...ht){if(n.apply(this,arguments)){var F=this.__zoom,mt=(0,vt.Z)(C.changedTouches?C.changedTouches[0]:C,this),Tt=F.invert(mt),Dt=F.k*(C.shiftKey?.5:2),It=a(Ue(sn(F,Dt),mt,Tt),o.apply(this,ht),x);Ke(C),k>0?(0,lt.Z)(this).transition().duration(k).call(an,It,mt,C):(0,lt.Z)(this).call(Pt.transform,It,mt,C)}}function zr(C,...ht){if(n.apply(this,arguments)){var F=C.touches,mt=F.length,Tt=ve(this,ht,C.changedTouches.length===mt).event(C),Dt,It,Bt,Ft;for(on(C),It=0;It<mt;++It)Bt=F[It],Ft=(0,vt.Z)(Bt,this),Ft=[Ft,this.__zoom.invert(Ft),Bt.identifier],Tt.touch0?!Tt.touch1&&Tt.touch0[2]!==Ft[2]&&(Tt.touch1=Ft,Tt.taps=0):(Tt.touch0=Ft,Dt=!0,Tt.taps=1+!!L);L&&(L=clearTimeout(L)),Dt&&(Tt.taps<2&&(yt=Ft[0],L=setTimeout(function(){L=null},Mt)),hn(this),Tt.start())}}function ni(C,...ht){if(this.__zooming){var F=ve(this,ht).event(C),mt=C.changedTouches,Tt=mt.length,Dt,It,Bt,Ft;for(Ke(C),Dt=0;Dt<Tt;++Dt)It=mt[Dt],Bt=(0,vt.Z)(It,this),F.touch0&&F.touch0[2]===It.identifier?F.touch0[0]=Bt:F.touch1&&F.touch1[2]===It.identifier&&(F.touch1[0]=Bt);if(It=F.that.__zoom,F.touch1){var Me=F.touch0[0],te=F.touch0[1],pe=F.touch1[0],re=F.touch1[1],Ce=(Ce=pe[0]-Me[0])*Ce+(Ce=pe[1]-Me[1])*Ce,He=(He=re[0]-te[0])*He+(He=re[1]-te[1])*He;It=sn(It,Math.sqrt(Ce/He)),Bt=[(Me[0]+pe[0])/2,(Me[1]+pe[1])/2],Ft=[(te[0]+re[0])/2,(te[1]+re[1])/2]}else if(F.touch0)Bt=F.touch0[0],Ft=F.touch0[1];else return;F.zoom("touch",a(Ue(It,Bt,Ft),F.extent,x))}}function So(C,...ht){if(this.__zooming){var F=ve(this,ht).event(C),mt=C.changedTouches,Tt=mt.length,Dt,It;for(on(C),pt&&clearTimeout(pt),pt=setTimeout(function(){pt=null},Mt),Dt=0;Dt<Tt;++Dt)It=mt[Dt],F.touch0&&F.touch0[2]===It.identifier?delete F.touch0:F.touch1&&F.touch1[2]===It.identifier&&delete F.touch1;if(F.touch1&&!F.touch0&&(F.touch0=F.touch1,delete F.touch1),F.touch0)F.touch0[1]=this.__zoom.invert(F.touch0[0]);else if(F.end(),F.taps===2&&(It=(0,vt.Z)(It,this),Math.hypot(yt[0]-It[0],yt[1]-It[1])<de)){var Bt=(0,lt.Z)(this).on("dblclick.zoom");Bt&&Bt.apply(this,arguments)}}}return Pt.wheelDelta=function(C){return arguments.length?(d=typeof C=="function"?C:Zn(+C),Pt):d},Pt.filter=function(C){return arguments.length?(n=typeof C=="function"?C:Zn(!!C),Pt):n},Pt.touchable=function(C){return arguments.length?(w=typeof C=="function"?C:Zn(!!C),Pt):w},Pt.extent=function(C){return arguments.length?(o=typeof C=="function"?C:Zn([[+C[0][0],+C[0][1]],[+C[1][0],+C[1][1]]]),Pt):o},Pt.scaleExtent=function(C){return arguments.length?(v[0]=+C[0],v[1]=+C[1],Pt):[v[0],v[1]]},Pt.translateExtent=function(C){return arguments.length?(x[0][0]=+C[0][0],x[1][0]=+C[1][0],x[0][1]=+C[0][1],x[1][1]=+C[1][1],Pt):[[x[0][0],x[0][1]],[x[1][0],x[1][1]]]},Pt.constrain=function(C){return arguments.length?(a=C,Pt):a},Pt.duration=function(C){return arguments.length?(k=+C,Pt):k},Pt.interpolate=function(C){return arguments.length?(Z=C,Pt):Z},Pt.on=function(){var C=V.on.apply(V,arguments);return C===V?Pt:C},Pt.clickDistance=function(C){return arguments.length?(Ut=(C=+C)*C,Pt):Math.sqrt(Ut)},Pt.tapDistance=function(C){return arguments.length?(de=+C,Pt):de},Pt}},62885:function(ut,dt,B){"use strict";B.d(dt,{X:function(){return b}});function b(K,ct){if(Object.is(K,ct))return!0;if(typeof K!="object"||K===null||typeof ct!="object"||ct===null)return!1;if(K instanceof Map&&ct instanceof Map){if(K.size!==ct.size)return!1;for(const[tt,nt]of K)if(!Object.is(nt,ct.get(tt)))return!1;return!0}if(K instanceof Set&&ct instanceof Set){if(K.size!==ct.size)return!1;for(const tt of K)if(!ct.has(tt))return!1;return!0}const _t=Object.keys(K);if(_t.length!==Object.keys(ct).length)return!1;for(let tt=0;tt<_t.length;tt++)if(!Object.prototype.hasOwnProperty.call(ct,_t[tt])||!Object.is(K[_t[tt]],ct[_t[tt]]))return!1;return!0}var m=(K,ct)=>(console.warn("[DEPRECATED] Default export is deprecated. Instead use `import { shallow } from 'zustand/shallow'`."),b(K,ct))}}]);
}());